import{A as At,B as pi,C as gi,D as Bt,E as ui,a as Zn,c as ti,d as Pt,f as Mt,g as ni,h as ii,i as oi,j as ri,k as ai,l as wt,m as si,n as li,p as yt,q as St,t as ci,u as di,v as Ot,w as kt,x as Et,y as Dt,z as Tt}from"./chunk-6HTDKJG5.js";import{c as xt,d as et,f as Be,g as tt}from"./chunk-PT2JM3JA.js";import{C as ve,D as U,G as zt,H as mi,a as Nn,b as ce,c as re,d as Ln,e as jn,f as ae,g as Hn,h as Gn,i as $n,j as Wn,k as nt,l as Ee,m as De,n as Un,o as Kn,p as Yn,q as vt,r as Fe,t as qn,u as Pe,w as V,x as fn,y as We}from"./chunk-E56TLIBQ.js";import"./chunk-L3SEBHDP.js";import{E as Xn,I as Qn,ba as Jn,ca as ei,f as Rn,h as Qe,i as ne,j,ja as it,k as Ct,l as _t,p as Je,q as bt,r as _e,y as Vn}from"./chunk-RTGJLPGU.js";import{a as be}from"./chunk-WA6LTZUF.js";import{b as J}from"./chunk-GZZ32I6Y.js";import"./chunk-SF7C3E5M.js";import{$ as O,$b as je,Ab as le,Bb as pe,Cb as ge,Fb as Tn,Gb as An,Gc as fe,Hb as g,Ib as i,Jb as r,Kb as m,Nc as In,Oa as Sn,Ob as me,Pa as Oe,Pb as ue,Qa as On,Ra as kn,Rb as w,Sa as c,Vb as u,W as Q,X as ut,Xb as p,Ya as z,Yb as zn,Zb as Bn,_ as Y,_a as En,ac as He,bc as Ge,c as mn,ca as wn,cc as ht,db as F,dc as L,ea as f,eb as ft,ec as R,f as Ke,fa as h,g as Ae,ga as C,gc as l,ha as v,hc as E,i as xn,ic as D,j as vn,jb as P,jc as ze,k as Pn,lc as G,mb as N,mc as $,nb as qe,nc as W,rc as un,sa as Ye,sc as Fn,ua as yn,uc as xe,vc as Ze,wc as $e,xc as Xe,y as Mn,yb as Dn}from"./chunk-AG6NMNX5.js";import{a as oe,b as se,j as x}from"./chunk-TWZW5B45.js";function Ft(a){window.webkit?.messageHandlers?.iosHandler?(window.webkit.messageHandlers.iosHandler.postMessage(a),console.log(`\u{1F4E4} [iOS] \uBA54\uC2DC\uC9C0 \uC804\uC1A1: ${a}`)):console.error("\u274C iOS WebKit \uBE0C\uB9BF\uC9C0\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4")}function ct(){return/iPhone|iPad|iPod/.test(navigator.userAgent)&&!!window.webkit?.messageHandlers?.iosHandler}function fi(){Ft("requestGeminiAuth")}function hi(){Ft("isGeminiAuthAvailable")}function Ci(){Ft("signOut")}function _i(){Ft("test")}function It(a){let t=`ANDROID_MESSAGE:${a}`;console.log(t),console.log(`\u{1F4E4} [Android] \uBA54\uC2DC\uC9C0 \uC804\uC1A1: ${a}`)}function bi(){It("requestGeminiAuth")}function xi(){It("isGeminiAuthAvailable")}function vi(){It("signOut")}function Pi(){It("test")}function ke(){return typeof window<"u"}var ot=class a{_platform;constructor(){this._platform=this.detectPlatform(),console.log("\u{1F50D} [Platform] \uAC10\uC9C0\uB41C \uD50C\uB7AB\uD3FC:",this._platform)}detectPlatform(){return ct()?"ios":ke()&&/Android/.test(navigator.userAgent)?"android":"web"}get platform(){return this._platform}isIOS(){return this._platform==="ios"}isAndroid(){return this._platform==="android"}isWeb(){return this._platform==="web"}isMobileApp(){return this.isIOS()||this.isAndroid()}isNative(){return this.isMobileApp()}getDebugInfo(){return{platform:this._platform,userAgent:navigator.userAgent,hasWebKit:!!window.webkit,hasAndroidBridge:typeof window<"u",isIOS:this.isIOS(),isAndroid:this.isAndroid(),isMobileApp:this.isMobileApp()}}static \u0275fac=function(e){return new(e||a)};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var Rt=class a{constructor(t){this.ngZone=t;this.registerMessageHandler()}messageSubject=new Ke;message$=this.messageSubject.asObservable();registerMessageHandler(){ct()&&(console.log("\u{1F527} [iOS] \uBA54\uC2DC\uC9C0 \uD578\uB4E4\uB7EC \uB4F1\uB85D \uC911..."),window.onIOSMessage=(t,e)=>{this.ngZone.run(()=>{console.log(`\u{1F4E9} [iOS] \uBA54\uC2DC\uC9C0 \uC218\uC2E0: type=${t}`,e),this.messageSubject.next({type:t,data:e})})},console.log("\u2705 [iOS] \uBA54\uC2DC\uC9C0 \uD578\uB4E4\uB7EC \uB4F1\uB85D \uC644\uB8CC"))}requestAuth(){fi()}checkLoginStatus(){hi()}signOut(){Ci()}test(){_i()}isAvailable(){return ct()}static \u0275fac=function(e){return new(e||a)(Y(qe))};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var Vt=class a{constructor(t){this.ngZone=t;this.registerMessageHandler()}messageSubject=new Ke;message$=this.messageSubject.asObservable();registerMessageHandler(){ke()&&(console.log("\u{1F527} [Android] \uBA54\uC2DC\uC9C0 \uD578\uB4E4\uB7EC \uB4F1\uB85D \uC911..."),window.onAndroidMessage=(t,e)=>{this.ngZone.run(()=>{console.log(`\u{1F4E9} [Android] \uBA54\uC2DC\uC9C0 \uC218\uC2E0: type=${t}`,e),this.messageSubject.next({type:t,data:e})})},console.log("\u2705 [Android] \uBA54\uC2DC\uC9C0 \uD578\uB4E4\uB7EC \uB4F1\uB85D \uC644\uB8CC"))}requestAuth(){bi()}checkLoginStatus(){xi()}signOut(){vi()}test(){Pi()}isAvailable(){return ke()}static \u0275fac=function(e){return new(e||a)(Y(qe))};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var Nt=class a{constructor(t,e,n){this.platform=t;this.iosBridge=e;this.androidBridge=n;console.log("\u{1F527} [NativeBridge] \uCD08\uAE30\uD654 \uC911..."),console.log("\u{1F4F1} \uD50C\uB7AB\uD3FC:",this.platform.platform),this.message$=this.getMessageStream(),console.log("\u2705 [NativeBridge] \uCD08\uAE30\uD654 \uC644\uB8CC")}message$;getMessageStream(){return this.platform.isIOS()?(console.log("\u{1F4F1} iOS \uBA54\uC2DC\uC9C0 \uC2A4\uD2B8\uB9BC \uC0AC\uC6A9"),this.iosBridge.message$):this.platform.isAndroid()?(console.log("\u{1F4F1} Android \uBA54\uC2DC\uC9C0 \uC2A4\uD2B8\uB9BC \uC0AC\uC6A9"),this.androidBridge.message$):(console.log("\u{1F310} \uC6F9 \uBE0C\uB77C\uC6B0\uC800 - \uB124\uC774\uD2F0\uBE0C \uBA54\uC2DC\uC9C0 \uC5C6\uC74C"),xn)}getMessages(){return this.message$}requestAuth(){console.log("\u{1F510} [NativeBridge] \uC778\uC99D \uC694\uCCAD"),this.platform.isIOS()?(console.log("\u{1F4F1} iOS \uC778\uC99D \uC2DC\uC791"),this.iosBridge.requestAuth()):this.platform.isAndroid()?(console.log("\u{1F4F1} Android \uC778\uC99D \uC2DC\uC791"),this.androidBridge.requestAuth()):console.warn("\u26A0\uFE0F \uC6F9 \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C\uB294 \uB124\uC774\uD2F0\uBE0C \uC778\uC99D\uC744 \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4")}checkLoginStatus(){console.log("\u{1F50D} [NativeBridge] \uB85C\uADF8\uC778 \uC0C1\uD0DC \uD655\uC778"),this.platform.isIOS()?this.iosBridge.checkLoginStatus():this.platform.isAndroid()&&this.androidBridge.checkLoginStatus()}checkAuthStatus(){this.checkLoginStatus()}signOut(){console.log("\u{1F6AA} [NativeBridge] \uB85C\uADF8\uC544\uC6C3"),this.platform.isIOS()?this.iosBridge.signOut():this.platform.isAndroid()&&this.androidBridge.signOut()}test(){console.log("\u{1F9EA} [NativeBridge] \uC5F0\uACB0 \uD14C\uC2A4\uD2B8"),this.platform.isIOS()?(console.log("\u{1F34E} iOS \uBE0C\uB9BF\uC9C0 \uD14C\uC2A4\uD2B8"),this.iosBridge.test()):this.platform.isAndroid()?(console.log("\u{1F916} Android \uBE0C\uB9BF\uC9C0 \uD14C\uC2A4\uD2B8"),this.androidBridge.test()):console.log("\u{1F310} \uC6F9 \uBE0C\uB77C\uC6B0\uC800 - \uD14C\uC2A4\uD2B8 \uC2A4\uD0B5")}isAvailable(){return this.platform.isIOS()?this.iosBridge.isAvailable():this.platform.isAndroid()?this.androidBridge.isAvailable():!1}getPlatformInfo(){return{type:this.platform.platform,isAvailable:this.isAvailable(),debugInfo:this.platform.getDebugInfo()}}static \u0275fac=function(e){return new(e||a)(Y(ot),Y(Rt),Y(Vt))};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var Ie=class a{constructor(t,e,n,o){this.http=t;this.ngZone=e;this.nativeBridge=n;this.platform=o;console.log("\u{1F527} [GoogleOAuthService] \uCD08\uAE30\uD654"),console.log("\u{1F4F1} \uD50C\uB7AB\uD3FC:",this.platform.platform),this.registerNativeCallbacks(),console.log("\u2705 [GoogleOAuthService] Constructor \uC644\uB8CC")}CLIENT_ID=We.googleOAuth?.clientId||"";REDIRECT_URI=We.googleOAuth?.redirectUri||`${window.location.origin}`;SCOPE="openid profile email";nativeAuthSubject=new Ke;nativeAuth$=this.nativeAuthSubject.asObservable();currentPurpose="apiKey";registerNativeCallbacks(){if(!this.platform.isNative()){console.log("\u{1F310} \uC6F9 \uBE0C\uB77C\uC6B0\uC800 \uD658\uACBD - \uB124\uC774\uD2F0\uBE0C \uCF5C\uBC31 \uAC74\uB108\uB700");return}console.log("\u{1F527} \uB124\uC774\uD2F0\uBE0C \uCF5C\uBC31 \uB4F1\uB85D \uC911..."),this.nativeBridge.getMessages().subscribe({next:({type:t,data:e})=>{this.ngZone.run(()=>{switch(console.log(`\u{1F4E9} [Native Message] type=${t}`,e),t){case"authSuccess":console.log("\u2705 [Native] Gemini \uC778\uC99D \uC131\uACF5!",e),console.log("\u{1F3AF} \uD604\uC7AC \uBAA9\uC801:",this.currentPurpose);let n={success:!0,accessToken:e.token||"",refreshToken:"",expiresIn:3600,userInfo:{email:"",name:"",picture:"",sub:""},geminiApiKey:e.token||"",purpose:this.currentPurpose};this.nativeAuthSubject.next(n);break;case"authError":console.error("\u274C [Native] Gemini \uC778\uC99D \uC2E4\uD328:",e.error);let o={success:!1,accessToken:"",refreshToken:"",userInfo:{email:"",name:"",picture:"",sub:""},geminiApiKey:"",error:e.error,purpose:this.currentPurpose};this.nativeAuthSubject.next(o);break;case"authStatus":console.log("\u2139\uFE0F [Native] \uC778\uC99D \uC0C1\uD0DC:",e.isAvailable?"\uAC00\uB2A5":"\uBD88\uAC00\uB2A5");break;case"signOutComplete":console.log("\u{1F6AA} [Native] \uB85C\uADF8\uC544\uC6C3 \uC644\uB8CC");break;case"testResponse":console.log("\u{1F9EA} [Native] \uD14C\uC2A4\uD2B8 \uC751\uB2F5:",e.message);break;default:console.warn("\u26A0\uFE0F [Native] \uC54C \uC218 \uC5C6\uB294 \uBA54\uC2DC\uC9C0 \uD0C0\uC785:",t)}})},error:t=>{console.error("\u274C \uB124\uC774\uD2F0\uBE0C \uBA54\uC2DC\uC9C0 \uC2A4\uD2B8\uB9BC \uC5D0\uB7EC:",t)}}),console.log("\u2705 \uB124\uC774\uD2F0\uBE0C \uCF5C\uBC31 \uB4F1\uB85D \uC644\uB8CC")}isNativeAuthAvailable(){return this.platform.isNative()}isNativeLoggedIn(){return this.isNativeAuthAvailable()&&this.nativeBridge.checkAuthStatus(),!1}nativeSignOut(){if(!this.isNativeAuthAvailable()){console.warn("[Native] OAuth\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4");return}console.log("\u{1F6AA} [Native] \uB85C\uADF8\uC544\uC6C3 \uC694\uCCAD"),this.nativeBridge.signOut()}startGoogleLogin(t="apiKey"){if(this.currentPurpose=t,console.log("=".repeat(60)),console.log("\u{1F510} startGoogleLogin() \uD638\uCD9C \uC2DC\uC810"),console.log("\u{1F3AF} \uBAA9\uC801:",t==="apiKey"?"API \uD0A4 \uD68D\uB4DD\uB9CC":"\uB85C\uADF8\uC778 + API \uD0A4"),console.log("\u{1F4F1} \uD50C\uB7AB\uD3FC:",this.platform.platform),this.isNativeAuthAvailable()){console.log(`\u2705 [${this.platform.platform}] Native OAuth \uC0AC\uC6A9 \uAC00\uB2A5`),console.log("\u{1F4DE} requestAuth() \uD638\uCD9C \uC911...");try{this.nativeBridge.requestAuth(),console.log("\u2705 requestAuth() \uD638\uCD9C \uC644\uB8CC"),console.log(`\u23F3 ${this.platform.platform} Native \uB2E4\uC774\uC5BC\uB85C\uADF8\uAC00 \uD45C\uC2DC\uB418\uC5B4\uC57C \uD569\uB2C8\uB2E4...`),this.platform.isAndroid()?(console.log("\u{1F4A1} \uB9CC\uC57D \uC544\uBB34 \uC77C\uB3C4 \uC77C\uC5B4\uB098\uC9C0 \uC54A\uB294\uB2E4\uBA74:"),console.log("   1. MainActivity.kt\uC5D0\uC11C console.log \uAC10\uC9C0 \uD655\uC778"),console.log("   2. ANDROID_MESSAGE: \uC811\uB450\uC0AC \uCC98\uB9AC \uD655\uC778"),console.log("   3. adb logcat\uC73C\uB85C Android \uB85C\uADF8 \uD655\uC778")):this.platform.isIOS()&&(console.log("\u{1F4A1} \uB9CC\uC57D \uC544\uBB34 \uC77C\uB3C4 \uC77C\uC5B4\uB098\uC9C0 \uC54A\uB294\uB2E4\uBA74:"),console.log("   1. ViewController.swift\uC5D0\uC11C messageHandler \uB4F1\uB85D \uD655\uC778"),console.log("   2. window.webkit.messageHandlers.iosHandler \uC874\uC7AC \uD655\uC778"),console.log("   3. Xcode \uCF58\uC194\uB85C\uADF8 \uD655\uC778"))}catch(n){console.error("\u274C requestAuth() \uD638\uCD9C \uC2E4\uD328:",n)}console.log("=".repeat(60));return}console.log("\u{1F310} [Browser] Implicit Flow \uB85C\uADF8\uC778 \uC2DC\uC791"),console.log("=".repeat(60));let e=`https://accounts.google.com/o/oauth2/v2/auth?client_id=${encodeURIComponent(this.CLIENT_ID)}&redirect_uri=${encodeURIComponent(this.REDIRECT_URI)}&response_type=token id_token&scope=${encodeURIComponent(this.SCOPE)}&nonce=${Date.now()}&prompt=consent`;console.log("\u{1F510} Google OAuth \uB85C\uADF8\uC778 URL:",{clientId:this.CLIENT_ID.substring(0,20)+"...",redirectUri:this.REDIRECT_URI}),window.location.href=e}exchangeCodeForToken(t){return console.log("\u{1F504} Authorization Code \uAD50\uD658 \uC911..."),this.http.post(`${We.apiUrl}/api/auth/google/callback`,{code:t,redirectUri:this.REDIRECT_URI})}refreshAccessToken(t){return console.log("\u{1F504} Access Token \uAC31\uC2E0 \uC911..."),this.http.post(`${We.apiUrl}/api/auth/google/refresh`,{refreshToken:t})}exchangeCodeForTokenDirect(t){console.log("\u{1F504} \uD504\uB860\uD2B8\uC5D4\uB4DC\uC5D0\uC11C \uC9C1\uC811 \uD1A0\uD070 \uAD50\uD658 \uC911...");let e="https://oauth2.googleapis.com/token",n=new URLSearchParams({code:t,client_id:this.CLIENT_ID,redirect_uri:this.REDIRECT_URI,grant_type:"authorization_code"});return new mn(o=>{this.http.post(e,n.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).subscribe({next:s=>{console.log("\u2705 \uD1A0\uD070 \uAD50\uD658 \uC131\uACF5"),this.getUserInfo(s.access_token).subscribe({next:d=>{o.next({success:!0,accessToken:s.access_token,refreshToken:s.refresh_token,expiresIn:s.expires_in,userInfo:d,geminiApiKey:s.access_token}),o.complete()},error:d=>{console.error("\u274C \uC0AC\uC6A9\uC790 \uC815\uBCF4 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328:",d),o.error(d)}})},error:s=>{console.error("\u274C \uD1A0\uD070 \uAD50\uD658 \uC2E4\uD328:",s),o.error(s)}})})}getUserInfo(t){return this.http.get("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${t}`}})}exchangeCodeForTokenMock(t){return console.warn("\u26A0\uFE0F MOCK \uBAA8\uB4DC: \uC2E4\uC81C \uBC31\uC5D4\uB4DC API\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4"),new mn(e=>{setTimeout(()=>{e.next({success:!0,accessToken:"mock_access_token",refreshToken:"mock_refresh_token",userInfo:{email:"test@gmail.com",name:"Test User",picture:"",sub:"mock_user_id"},geminiApiKey:"U2FsdGVkX19ILCT33NvRMnrfGuGerBksJREzwCDAIb7VpwUoVn/Oc3vrAqfYplC8SjPFUU3npbu+85eFwOKgpw=="}),e.complete()},1e3)})}static \u0275fac=function(e){return new(e||a)(Y(Vn),Y(qe),Y(Nt),Y(ot))};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var Me=class a{constructor(t,e,n){this.router=t;this.googleOAuth=e;this.geminiApiManager=n;setTimeout(()=>{let o=this.checkAuth(),s=sessionStorage.getItem(this.GUEST_KEY)==="true";this.isAuthenticatedSubject.next(o),this.isGuestModeSubject.next(s),this.loadUserProfile(),o&&this.checkSessionExpiry()},0)}STORAGE_KEY="ez_reader_mobile_auth_token";SESSION_KEY="ez_reader_mobile_session_timestamp";GUEST_KEY="ez_reader_mobile_guest";USER_PROFILE_KEY="ezm_user_profile";LOGIN_TYPE_KEY="ezm_login_type";SESSION_DURATION=480*60*1e3;isAuthenticatedSubject=new Ae(!1);isAuthenticated$=this.isAuthenticatedSubject.asObservable();isGuestModeSubject=new Ae(!1);isGuestMode$=this.isGuestModeSubject.asObservable();userProfileSubject=new Ae(null);userProfile$=this.userProfileSubject.asObservable();AUTH_HASH=this.simpleHash("admin1234");EZ_AUTH_HASH=this.simpleHash("admin1234");login(t,e){let n=this.simpleHash(t+e),o=We.ezMode?this.EZ_AUTH_HASH:this.AUTH_HASH;if(n===o){let s=Date.now().toString();sessionStorage.setItem(this.STORAGE_KEY,"authenticated"),sessionStorage.setItem(this.SESSION_KEY,s),sessionStorage.setItem(this.LOGIN_TYPE_KEY,"local"),sessionStorage.removeItem(this.GUEST_KEY);let d={userId:t,email:`${t}@local`,name:t,loginType:"local",lastLoginAt:new Date};return sessionStorage.setItem(this.USER_PROFILE_KEY,JSON.stringify(d)),this.userProfileSubject.next(d),this.isAuthenticatedSubject.next(!0),this.isGuestModeSubject.next(!1),!0}return!1}loginWithGoogle(t){return x(this,null,function*(){try{console.log("\u{1F510} Google \uB85C\uADF8\uC778 \uCC98\uB9AC \uC2DC\uC791...");let e=yield this.googleOAuth.exchangeCodeForTokenDirect(t).toPromise();if(e&&e.success){let n=Date.now().toString();sessionStorage.setItem(this.STORAGE_KEY,"authenticated"),sessionStorage.setItem(this.SESSION_KEY,n),sessionStorage.setItem(this.LOGIN_TYPE_KEY,"google"),sessionStorage.removeItem(this.GUEST_KEY);let o={userId:e.userInfo.sub,email:e.userInfo.email,name:e.userInfo.name,picture:e.userInfo.picture,loginType:"google",lastLoginAt:new Date};return sessionStorage.setItem(this.USER_PROFILE_KEY,JSON.stringify(o)),this.userProfileSubject.next(o),yield this.geminiApiManager.setApiKey(e.accessToken,e.userInfo.sub,e.userInfo.email,!1),this.isAuthenticatedSubject.next(!0),this.isGuestModeSubject.next(!1),console.log("\u2705 Google \uB85C\uADF8\uC778 \uC131\uACF5:",o.email),!0}return console.error("\u274C Google \uB85C\uADF8\uC778 \uC2E4\uD328: \uC751\uB2F5 \uC624\uB958"),!1}catch(e){return console.error("\u274C Google \uB85C\uADF8\uC778 \uC2E4\uD328:",e),!1}})}loginWithGoogleToken(t,e){return x(this,null,function*(){try{console.log("\u{1F510} Google Token \uB85C\uADF8\uC778 \uCC98\uB9AC \uC2DC\uC791...");let n=Date.now().toString();sessionStorage.setItem(this.STORAGE_KEY,"authenticated"),sessionStorage.setItem(this.SESSION_KEY,n),sessionStorage.setItem(this.LOGIN_TYPE_KEY,"google"),sessionStorage.removeItem(this.GUEST_KEY);let o={userId:e.sub,email:e.email,name:e.name,picture:e.picture,loginType:"google",lastLoginAt:new Date};return sessionStorage.setItem(this.USER_PROFILE_KEY,JSON.stringify(o)),this.userProfileSubject.next(o),yield this.geminiApiManager.setApiKey(t,e.sub,e.email,!1),this.isAuthenticatedSubject.next(!0),this.isGuestModeSubject.next(!1),console.log("\u2705 Google Token \uB85C\uADF8\uC778 \uC131\uACF5:",o.email),!0}catch(n){return console.error("\u274C Google Token \uB85C\uADF8\uC778 \uC2E4\uD328:",n),!1}})}loadUserProfile(){let t=sessionStorage.getItem(this.USER_PROFILE_KEY);if(t)try{let e=JSON.parse(t);this.userProfileSubject.next(e),console.log("\u2705 \uC0AC\uC6A9\uC790 \uD504\uB85C\uD544 \uB85C\uB4DC:",e.email)}catch(e){console.error("\u274C \uD504\uB85C\uD544 \uB85C\uB4DC \uC2E4\uD328:",e)}}getUserProfile(){return this.userProfileSubject.value}getLoginType(){return sessionStorage.getItem(this.LOGIN_TYPE_KEY)}logout(){return x(this,null,function*(){console.log("[EzReaderMobileAuth] \uB85C\uADF8\uC544\uC6C3");try{sessionStorage.removeItem(this.STORAGE_KEY),sessionStorage.removeItem(this.SESSION_KEY),sessionStorage.removeItem(this.GUEST_KEY),sessionStorage.removeItem(this.USER_PROFILE_KEY),sessionStorage.removeItem(this.LOGIN_TYPE_KEY),localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.SESSION_KEY),localStorage.removeItem(this.USER_PROFILE_KEY),localStorage.removeItem(this.LOGIN_TYPE_KEY),this.isAuthenticatedSubject.next(!1),this.isGuestModeSubject.next(!1),this.userProfileSubject.next(null),yield this.geminiApiManager.clearApiKey();let t=this.getLoginType();(t==="google"||t==="google-android")&&(console.log("\u{1F513} Google \uB85C\uADF8\uC778 \uC138\uC158 \uD074\uB9AC\uC5B4"),t==="google-android"&&(console.log("\u{1F916} [Android] Native \uB85C\uADF8\uC544\uC6C3 \uC2E4\uD589"),this.googleOAuth.nativeSignOut())),this.router?this.router.navigate(["/ezm/login"]).catch(e=>{console.error("[EzReaderMobileAuth] \uB124\uBE44\uAC8C\uC774\uC158 \uC608\uC678 \uBC1C\uC0DD:",e),window.location.href="/ezm/login"}):window.location.href="/ezm/login"}catch(t){console.error("[EzReaderMobileAuth] \uB85C\uADF8\uC544\uC6C3 \uC911 \uC624\uB958:",t),window.location.hash="#/ezm/login"}})}isAuthenticated(){return this.checkAuth()}setGuestMode(t){this.isGuestModeSubject.next(t),t?sessionStorage.setItem(this.GUEST_KEY,"true"):sessionStorage.removeItem(this.GUEST_KEY)}isGuest(){return this.isGuestModeSubject.value||sessionStorage.getItem(this.GUEST_KEY)==="true"}checkAuth(){let t=sessionStorage.getItem(this.STORAGE_KEY),e=sessionStorage.getItem(this.SESSION_KEY);if(!t||!e)return!1;let n=parseInt(e,10);return Date.now()-n>this.SESSION_DURATION?(sessionStorage.removeItem(this.STORAGE_KEY),sessionStorage.removeItem(this.SESSION_KEY),!1):t==="authenticated"}checkSessionExpiry(){setInterval(()=>{!this.checkAuth()&&this.isAuthenticatedSubject.value&&this.logout()},6e4)}simpleHash(t){let e=0;for(let n=0;n<t.length;n++){let o=t.charCodeAt(n);e=(e<<5)-e+o,e=e&e}return Math.abs(e).toString(16).padStart(16,"0")}static \u0275fac=function(e){return new(e||a)(Y(V),Y(Ie),Y(be))};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var Te=class a{pendingActionSubject=new Ae(null);pendingAction$=this.pendingActionSubject.asObservable();constructor(){}setPendingAction(t){console.log("\u{1F527} [ToolActionService] Pending action \uC124\uC815:",t),this.pendingActionSubject.next(t)}getPendingAction(){return this.pendingActionSubject.value}clearPendingAction(){console.log("\u{1F527} [ToolActionService] Pending action \uCD08\uAE30\uD654"),this.pendingActionSubject.next(null)}hasPendingAction(){return this.pendingActionSubject.value!==null}static \u0275fac=function(e){return new(e||a)};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var Re=class a{constructor(){}addKoreanFont(t){return x(this,null,function*(){try{let n=yield fetch("fonts/NotoSansKR-Regular.ttf");if(!n.ok){console.warn("\uD55C\uAE00 \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328, \uAE30\uBCF8 \uD3F0\uD2B8 \uC0AC\uC6A9");return}let o=yield n.arrayBuffer(),s=this.arrayBufferToBase64(o);t.addFileToVFS("NotoSansKR-Regular.ttf",s),t.addFont("NotoSansKR-Regular.ttf","NotoSansKR","normal"),t.setFont("NotoSansKR"),console.log("\u2705 \uD55C\uAE00 \uD3F0\uD2B8 \uCD94\uAC00 \uC644\uB8CC")}catch(e){console.warn("\uD55C\uAE00 \uD3F0\uD2B8 \uCD94\uAC00 \uC2E4\uD328:",e)}})}arrayBufferToBase64(t){let e=new Uint8Array(t),n="";for(let o=0;o<e.byteLength;o++)n+=String.fromCharCode(e[o]);return btoa(n)}imageToPdf(t,e){return x(this,null,function*(){try{let n=window.PDFLib;if(!n)throw new Error("PDF-lib \uB77C\uC774\uBE0C\uB7EC\uB9AC\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uD398\uC774\uC9C0\uB97C \uC0C8\uB85C\uACE0\uCE68\uD574\uC8FC\uC138\uC694.");let o=yield n.PDFDocument.create();for(let d of t){console.log(`\u{1F5BC}\uFE0F \uC774\uBBF8\uC9C0 \uCC98\uB9AC \uC911: ${d.name}`);let _=yield d.arrayBuffer(),b;try{d.type==="image/png"||d.name.toLowerCase().endsWith(".png")?b=yield o.embedPng(_):d.type==="image/jpeg"||d.type==="image/jpg"||d.name.toLowerCase().endsWith(".jpg")||d.name.toLowerCase().endsWith(".jpeg")?b=yield o.embedJpg(_):b=yield this.convertToSupportedFormat(d,o)}catch(te){console.warn(`\uC774\uBBF8\uC9C0 \uC784\uBCA0\uB4DC \uC2E4\uD328, Canvas \uBCC0\uD658 \uC2DC\uB3C4: ${d.name}`,te),b=yield this.convertToSupportedFormat(d,o)}let{width:S,height:M}=this.calculatePageSize(b.width,b.height,e),y=o.addPage([S,M]),k=e?.margin||20,T=S-k*2,I=M-k*2,A=b.width/b.height,B=T/I,K,X;A>B?(K=T,X=T/A):(X=I,K=I*A);let q=(S-K)/2,Z=(M-X)/2;y.drawImage(b,{x:q,y:Z,width:K,height:X})}let s=yield o.save();return console.log("\u2705 \uC774\uBBF8\uC9C0 \u2192 PDF \uBCC0\uD658 \uC644\uB8CC"),s}catch(n){throw console.error("\u274C \uC774\uBBF8\uC9C0 \u2192 PDF \uBCC0\uD658 \uC2E4\uD328:",n),new Error("\uC774\uBBF8\uC9C0\uB97C PDF\uB85C \uBCC0\uD658\uD558\uB294 \uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: "+(n?.message||n))}})}excelToPdf(t,e){return x(this,null,function*(){try{console.log("\u{1F4CA} Excel \uD30C\uC77C \uBCC0\uD658 \uC2DC\uC791:",t.name);let n=yield import("./chunk-7LW56JTG.js"),{jsPDF:o}=yield import("./chunk-HL77PWLD.js"),s=(yield import("./chunk-M7Y23PCR.js")).default,d=yield t.arrayBuffer(),_=n.read(d,{type:"array"}),b=e?.includeAllSheets?_.SheetNames:[e?.sheetName||_.SheetNames[0]],S=new o("p","mm","a4");yield this.addKoreanFont(S);let M=!0;for(let k of b){console.log(`\u{1F4C4} \uC2DC\uD2B8 \uCC98\uB9AC \uC911: ${k}`);let T=_.Sheets[k],I=n.utils.sheet_to_html(T),A=document.createElement("div");A.innerHTML=I,A.style.position="absolute",A.style.left="-9999px",A.style.padding="20px",A.style.backgroundColor="white";let B=A.querySelector("table");B&&(B.style.borderCollapse="collapse",B.style.width="100%",B.style.fontFamily="Arial, sans-serif",B.style.fontSize="12px",B.querySelectorAll("td, th").forEach(Ue=>{Ue.style.border="1px solid #ddd",Ue.style.padding="8px",Ue.style.textAlign="left"}),B.querySelectorAll("th").forEach(Ue=>{Ue.style.backgroundColor="#f2f2f2",Ue.style.fontWeight="bold"})),document.body.appendChild(A);let K=yield s(A,{scale:2,backgroundColor:"#ffffff",logging:!1}),X=K.toDataURL("image/png");M||S.addPage(),M=!1;let q=190,Z=K.height*q/K.width,te=277,mt=Z,bn=0;for(S.addImage(X,"PNG",10,10,q,Z),mt-=te;mt>0;)bn=mt-Z,S.addPage(),S.addImage(X,"PNG",10,bn,q,Z),mt-=te;document.body.removeChild(A)}let y=S.output("arraybuffer");return console.log("\u2705 Excel \u2192 PDF \uBCC0\uD658 \uC644\uB8CC"),new Uint8Array(y)}catch(n){throw console.error("\u274C Excel \u2192 PDF \uBCC0\uD658 \uC2E4\uD328:",n),new Error("Excel \uD30C\uC77C\uC744 PDF\uB85C \uBCC0\uD658\uD558\uB294 \uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: "+(n?.message||n))}})}wordToPdf(t){return x(this,null,function*(){try{console.log("\u{1F4C4} Word \uD30C\uC77C \uBCC0\uD658 \uC2DC\uC791:",t.name);let e=yield import("./chunk-3JAMBNPZ.js"),{jsPDF:n}=yield import("./chunk-HL77PWLD.js"),o=(yield import("./chunk-M7Y23PCR.js")).default,s=yield t.arrayBuffer(),d=yield e.convertToHtml({arrayBuffer:s}),_=d.value;d.messages.length>0&&console.warn("Word \uBCC0\uD658 \uACBD\uACE0:",d.messages);let b=document.createElement("div");b.innerHTML=_,b.style.width="800px",b.style.padding="40px",b.style.backgroundColor="white",b.style.fontFamily="Arial, sans-serif",b.style.fontSize="14px",b.style.lineHeight="1.6",b.style.color="#333",b.style.position="absolute",b.style.left="-9999px",document.body.appendChild(b);let S=yield o(b,{scale:2,backgroundColor:"#ffffff",logging:!1}),M=S.toDataURL("image/png"),y=new n("p","mm","a4");yield this.addKoreanFont(y);let k=190,T=S.height*k/S.width,I=277,A=T,B=0;for(y.addImage(M,"PNG",10,10,k,T),A-=I;A>0;)B=A-T,y.addPage(),y.addImage(M,"PNG",10,B,k,T),A-=I;document.body.removeChild(b);let K=y.output("arraybuffer");return console.log("\u2705 Word \u2192 PDF \uBCC0\uD658 \uC644\uB8CC"),new Uint8Array(K)}catch(e){throw console.error("\u274C Word \u2192 PDF \uBCC0\uD658 \uC2E4\uD328:",e),new Error("Word \uD30C\uC77C\uC744 PDF\uB85C \uBCC0\uD658\uD558\uB294 \uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: "+(e?.message||e))}})}powerPointToPdf(t){return x(this,null,function*(){try{console.log("\u{1F4CA} PowerPoint \uD30C\uC77C \uBCC0\uD658 \uC2DC\uC791:",t.name);let e=(yield import("./chunk-NCXHHQMY.js")).default,{jsPDF:n}=yield import("./chunk-HL77PWLD.js"),o=yield t.arrayBuffer(),s=yield e.loadAsync(o);console.log("\u{1F4E6} PPTX \uD30C\uC77C \uC555\uCD95 \uD574\uC81C \uC644\uB8CC");let d=[];if(s.forEach((M,y)=>{M.startsWith("ppt/slides/slide")&&M.endsWith(".xml")&&d.push(M)}),d.sort((M,y)=>{let k=parseInt(M.match(/slide(\d+)\.xml/)?.[1]||"0"),T=parseInt(y.match(/slide(\d+)\.xml/)?.[1]||"0");return k-T}),console.log(`\u{1F4C4} \uC2AC\uB77C\uC774\uB4DC ${d.length}\uAC1C \uBC1C\uACAC`),d.length===0){let M=[];if(s.forEach((k,T)=>{k.startsWith("ppt/media/")&&(k.endsWith(".png")||k.endsWith(".jpg")||k.endsWith(".jpeg")||k.endsWith(".emf")||k.endsWith(".wmf"))&&M.push(k)}),M.length===0)throw new Error("PPTX \uD30C\uC77C\uC5D0\uC11C \uC2AC\uB77C\uC774\uB4DC\uB098 \uC774\uBBF8\uC9C0\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");console.log(`\u{1F5BC}\uFE0F \uBBF8\uB514\uC5B4 \uD30C\uC77C ${M.length}\uAC1C \uBC1C\uACAC, \uC774\uBBF8\uC9C0\uB85C \uBCC0\uD658`);let y=[];for(let k of M){let T=s.file(k);if(T){let I=yield T.async("blob"),A=k.split("/").pop()||"image.png";y.push(new File([I],A,{type:I.type}))}}return yield this.imageToPdf(y)}let _=new n("l","mm","a4");yield this.addKoreanFont(_);let b=!0;for(let M=0;M<d.length;M++){console.log(`\u{1F504} \uC2AC\uB77C\uC774\uB4DC ${M+1}/${d.length} \uCC98\uB9AC \uC911`);let y=s.file(d[M]);if(!y)continue;let I=((yield y.async("string")).match(/<a:t>([^<]+)<\/a:t>/g)||[]).map(B=>B.replace(/<a:t>|<\/a:t>/g,"").trim()).filter(B=>B.length>0);b||_.addPage(),b=!1,_.setFontSize(24),_.setTextColor(51,51,51),_.text(`Slide ${M+1}`,20,20);let A=40;_.setFontSize(14);for(let B of I){if(A>180)break;let K=_.splitTextToSize(B,240);for(let X of K){if(A>180)break;_.text(X,20,A),A+=7}A+=3}I.length===0&&(_.setFontSize(12),_.setTextColor(150,150,150),_.text("(\uD14D\uC2A4\uD2B8 \uB0B4\uC6A9 \uC5C6\uC74C)",20,40))}let S=_.output("arraybuffer");return console.log("\u2705 PowerPoint \u2192 PDF \uBCC0\uD658 \uC644\uB8CC"),new Uint8Array(S)}catch(e){throw console.error("\u274C PowerPoint \u2192 PDF \uBCC0\uD658 \uC2E4\uD328:",e),new Error("PowerPoint \uD30C\uC77C\uC744 PDF\uB85C \uBCC0\uD658\uD558\uB294 \uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4: "+(e?.message||e))}})}multipleImagesToPdf(t){return x(this,null,function*(){return this.imageToPdf(t)})}calculatePageSize(t,e,n){if(n?.pageSize==="Auto"){let d=n?.margin||20,_=Math.min((595-d*2)/t,(842-d*2)/e);return{width:t*_+d*2,height:e*_+d*2}}return n?.orientation==="landscape"?{width:842,height:595}:{width:595,height:842}}convertToSupportedFormat(t,e){return x(this,null,function*(){return new Promise((n,o)=>{let s=new Image;s.onload=()=>x(null,null,function*(){try{let d=document.createElement("canvas");d.width=s.width,d.height=s.height;let _=d.getContext("2d");if(!_){o(new Error("Canvas context\uB97C \uC0DD\uC131\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."));return}_.drawImage(s,0,0),d.toBlob(b=>x(null,null,function*(){if(b)try{let S=yield b.arrayBuffer(),M=yield e.embedPng(S);n(M)}catch(S){o(S)}else o(new Error("Canvas to Blob \uBCC0\uD658 \uC2E4\uD328"))}),"image/png")}catch(d){o(d)}}),s.onerror=()=>o(new Error("\uC774\uBBF8\uC9C0 \uB85C\uB4DC \uC2E4\uD328")),s.src=URL.createObjectURL(t)})})}static \u0275fac=function(e){return new(e||a)};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var Fi=["*"];function Ii(a,t){if(a&1){let e=w();i(0,"div",5),u("click",function(){f(e);let o=p();return h(o.setState("collapsed"))}),r()}}var he=class a{constructor(t,e){this.cdr=t;this.el=e}isInitialized=!1;get sheetState(){return this._sheetState}set sheetState(t){console.log("\u{1F4CB} BottomSheet sheetState setter \uD638\uCD9C:",{old:this._sheetState,new:t}),this._sheetState!==t&&(this._sheetState=t,this.updateBodyScroll(),this.cdr.markForCheck(),console.log("\u{1F4CB} BottomSheet \uBCC0\uACBD \uAC10\uC9C0 \uC644\uB8CC"))}_sheetState="collapsed";sheetStateChange=new N;close=new N;isDragging=!1;dragStartY=0;dragStartHeight=0;ngAfterViewInit(){console.log("\u{1F4CB} BottomSheet ngAfterViewInit \uD638\uCD9C\uB428"),setTimeout(()=>{this.isInitialized=!0;let t=this.el.nativeElement.querySelector(".bottom-sheet");t?(t.classList.add("initialized"),console.log("\u{1F4CB} BottomSheet initialized \uD074\uB798\uC2A4 \uCD94\uAC00\uB428")):console.error("\u274C BottomSheet .bottom-sheet \uC694\uC18C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C")},50)}setState(t){console.log("\u2699\uFE0F setState called:",{current:this.sheetState,new:t}),this.sheetState!==t?(this.sheetState=t,this.sheetStateChange.emit(t),this.cdr.markForCheck(),t==="collapsed"&&this.close.emit(),console.log("\u2705 State updated to:",t)):console.log("\u26A0\uFE0F State unchanged:",t)}updateBodyScroll(){this.sheetState==="collapsed"?document.body.style.overflow="auto":document.body.style.overflow="hidden"}onDragHandleTouchStart(t){this.isDragging=!0,this.dragStartY=t.touches[0].clientY;let e=this.el.nativeElement.querySelector(".bottom-sheet");e&&(this.dragStartHeight=e.offsetHeight,console.log("\u{1F7E2} Drag Start:",{startY:this.dragStartY,startHeight:this.dragStartHeight,currentState:this.sheetState}));let n=this.el.nativeElement.querySelector(".handle-bar");n&&n.classList.add("dragging"),t.stopPropagation()}onDragHandleTouchMove(t){if(!this.isDragging)return;let e=t.touches[0].clientY,n=this.dragStartY-e,o=this.dragStartHeight+n,s=window.innerHeight*.9;o=Math.max(60,Math.min(o,s)),console.log("\u{1F535} Drag Move:",{currentY:e,deltaY:n,calculatedHeight:o,screenHeight:window.innerHeight});let _=this.el.nativeElement.querySelector(".bottom-sheet");_&&(_.style.transition="none",_.style.height=`${o}px`,_.style.maxHeight=`${o}px`,_.style.transform="translateY(0)"),t.preventDefault(),t.stopPropagation()}onDragHandleTouchEnd(t){this.isDragging=!1;let e=this.el.nativeElement.querySelector(".handle-bar");e&&e.classList.remove("dragging");let n=this.el.nativeElement.querySelector(".bottom-sheet");if(!n)return;let o=n.offsetHeight,s=window.innerHeight,d=s*.5,_=s*.7;console.log("\u{1F534} Drag End:",{currentHeight:o,screenHeight:s,halfHeight:d,threshold70:_,percentage:(o/s*100).toFixed(1)+"%"}),n.style.transition="",n.style.height="",n.style.maxHeight="",n.style.transform="";let b;if(o<d/1.5)b="collapsed";else if(o>=_)b="full";else if(o<d*1.2)b="half";else{let S=Math.abs(o-d),M=Math.abs(o-s*.9);b=S<M?"half":"full"}console.log("\u{1F7E3} State Change:",{from:this.sheetState,to:b}),this.setState(b)}static \u0275fac=function(e){return new(e||a)(z(fe),z(yn))};static \u0275cmp=F({type:a,selectors:[["app-bottom-sheet"]],inputs:{sheetState:"sheetState"},outputs:{sheetStateChange:"sheetStateChange",close:"close"},ngContentSelectors:Fi,decls:6,vars:7,consts:[["class","sheet-overlay",3,"click",4,"ngIf"],[1,"bottom-sheet"],[1,"drag-handle",3,"touchstart","touchmove","touchend"],[1,"handle-bar"],[1,"sheet-content"],[1,"sheet-overlay",3,"click"]],template:function(e,n){e&1&&(zn(),P(0,Ii,1,0,"div",0),i(1,"div",1)(2,"div",2),u("touchstart",function(s){return n.onDragHandleTouchStart(s)})("touchmove",function(s){return n.onDragHandleTouchMove(s)})("touchend",function(s){return n.onDragHandleTouchEnd(s)}),m(3,"div",3),r(),i(4,"div",4),Bn(5),r()()),e&2&&(g("ngIf",n.sheetState!=="collapsed"),c(),R("collapsed",n.sheetState==="collapsed")("half",n.sheetState==="half")("full",n.sheetState==="full"))},dependencies:[_e,j],styles:[".sheet-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .2s ease;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.bottom-sheet[_ngcontent-%COMP%]{position:fixed;left:0;right:0;bottom:0;background:#fff;color:#333;border-radius:16px 16px 0 0;box-shadow:0 -2px 16px #00000026;z-index:1001;transition:transform .3s cubic-bezier(.4,0,.2,1),max-height .3s cubic-bezier(.4,0,.2,1);max-height:90vh;display:flex;flex-direction:column}.bottom-sheet.collapsed[_ngcontent-%COMP%]{transform:translateY(100%)}.bottom-sheet[_ngcontent-%COMP%]:not(.initialized){transition:none!important}.bottom-sheet.half[_ngcontent-%COMP%]{transform:translateY(0);max-height:50vh}.bottom-sheet.full[_ngcontent-%COMP%]{transform:translateY(0);max-height:90vh}.bottom-sheet[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:20px;display:flex;justify-content:center;align-items:center;cursor:ns-resize;z-index:10}.bottom-sheet[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]   .handle-bar[_ngcontent-%COMP%]{width:40px;height:4px;background-color:#ccc;border-radius:2px;transition:background-color .2s ease}.bottom-sheet[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]   .handle-bar.dragging[_ngcontent-%COMP%]{background-color:#2196f3}.bottom-sheet[_ngcontent-%COMP%]   .sheet-content[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:60px;overflow-y:auto;flex-grow:1}"],changeDetection:0})};var de=class a{constructor(t){this.router=t}activeTab="home";navigateTo(t){console.log("navigateTo called with:",t);let n={home:"/ezm/home",tools:"/ezm/tools",files:"/ezm/myfiles",profile:"/ezm/profile"}[t];console.log("Navigating to:",n),n&&this.router.navigate([n]).then(o=>console.log("Navigation success:",o),o=>console.error("Navigation error:",o))}static \u0275fac=function(e){return new(e||a)(z(V))};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-bottom-nav"]],inputs:{activeTab:"activeTab"},standalone:!1,decls:19,vars:8,consts:[[1,"bottom-nav"],[1,"nav-item",3,"click"],["src","images/gnb-home-on@3x.png","alt","\uD648","width","24","height","24"],["src","images/gnb-tool@3x.png","alt","\uB3C4\uAD6C","width","24","height","24"],["src","images/gnb-file@3x.png","alt","\uB0B4\uD30C\uC77C","width","24","height","24"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"]],template:function(e,n){e&1&&(i(0,"nav",0)(1,"button",1),u("click",function(){return n.navigateTo("home")}),m(2,"img",2),i(3,"span"),l(4,"\uD648"),r()(),i(5,"button",1),u("click",function(){return n.navigateTo("tools")}),m(6,"img",3),i(7,"span"),l(8,"\uB3C4\uAD6C"),r()(),i(9,"button",1),u("click",function(){return n.navigateTo("files")}),m(10,"img",4),i(11,"span"),l(12,"\uB0B4\uD30C\uC77C"),r()(),i(13,"button",1),u("click",function(){return n.navigateTo("profile")}),C(),i(14,"svg",5),m(15,"path",6)(16,"circle",7),r(),v(),i(17,"span"),l(18,"\uB0B4\uC815\uBCF4"),r()()()),e&2&&(c(),R("active",n.activeTab==="home"),c(4),R("active",n.activeTab==="tools"),c(4),R("active",n.activeTab==="files"),c(4),R("active",n.activeTab==="profile"))},styles:[".bottom-nav[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;height:60px;background:#fff;border-top:1px solid #e0e0e0;display:flex;align-items:center;justify-content:space-around;z-index:1002;box-shadow:0 -2px 8px #0000000d}.nav-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;background:none;border:none;color:#999;cursor:pointer;padding:8px 16px;transition:all .2s;flex:1}.nav-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.4;transition:all .2s}.nav-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#999;transition:stroke .2s;flex-shrink:0}.nav-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;font-weight:500;transition:color .2s}.nav-item.active[_ngcontent-%COMP%]{color:#2196f3}.nav-item.active[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:1}.nav-item.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#2196f3}.nav-item.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#2196f3}.nav-item[_ngcontent-%COMP%]:active{background:#f5f5f5}"]})};function Ri(a,t){if(a&1){let e=w();i(0,"div",62)(1,"div",63)(2,"h3",64),l(3),r()(),i(4,"div",65)(5,"button",66),u("click",function(){f(e);let o=p();return h(o.onRecentFileEdit())}),C(),i(6,"svg",27),m(7,"path",67)(8,"polyline",68),r(),v(),i(9,"span"),l(10,"\uD3B8\uC9D1"),r()(),i(11,"button",66),u("click",function(){f(e);let o=p();return h(o.onRecentFileShare())}),C(),i(12,"svg",27),m(13,"path",69)(14,"polyline",70)(15,"line",71),r(),v(),i(16,"span"),l(17,"\uACF5\uC720"),r()(),i(18,"button",66),u("click",function(){f(e);let o=p();return h(o.onRecentFileGoToLocation())}),C(),i(19,"svg",27),m(20,"path",72),r(),v(),i(21,"span"),l(22,"\uC704\uCE58\uB85C \uC774\uB3D9"),r()(),i(23,"button",73),u("click",function(){f(e);let o=p();return h(o.onRecentFileRemove())}),C(),i(24,"svg",27),m(25,"path",74)(26,"line",75)(27,"line",76),r(),v(),i(28,"span"),l(29,"\uBAA9\uB85D\uC5D0\uC11C \uC81C\uAC70"),r()()()()}if(a&2){let e=p();c(3),E(e.selectedRecentFile.name)}}var Lt=class a{constructor(t){this.router=t;console.log("\u{1F3E0} [EzReaderMobileMain] Constructor \uC2DC\uC791"),console.log("\u{1F4F1} Android WebView \uD658\uACBD:",ke()),this.loadRecentFiles()}currentActiveTab="home";recentFiles=[];myFiles=[];viewerFiles=[];sheetState="collapsed";convertSheetState="collapsed";recentFileSheetState="collapsed";selectedFile=null;selectedRecentFile=null;selectedAction=null;isAuthenticated=!1;authSubscription;indexedDbService=O(J);snackbar=O(U);authService=O(Me);toolActionService=O(Te);reversePdfConverter=O(Re);ngOnInit(){console.log("\u{1F680} [EzReaderMobileMain] ngOnInit \uC2DC\uC791"),console.log("\u{1F4F1} Android WebView \uD658\uACBD:",ke()),window.scrollTo(0,0),this.authSubscription=this.authService.isAuthenticated$.subscribe(t=>this.isAuthenticated=t)}ngOnDestroy(){this.authSubscription&&this.authSubscription.unsubscribe()}onLogout(){return x(this,null,function*(){(yield ve("\uB85C\uADF8\uC544\uC6C3 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))&&(yield this.authService.logout())})}loadRecentFiles(){return x(this,null,function*(){try{let t=yield this.indexedDbService.getRecentFileEntries(30);this.recentFiles=t.map(s=>({id:s.id,documentId:s.documentId,name:s.fileName,date:new Date(s.viewedAt).toLocaleDateString("ko-KR"),size:"",thumbnail:s.thumbnail,documentType:s.documentType,folderId:s.folderId}));let e=yield this.indexedDbService.getRecentDocuments(30),n=e.filter(s=>(s.fileName||s.title||"").toLowerCase().split(".").pop()!=="pdf"?!1:!s.documentType||s.documentType==="editor");this.myFiles=n.map(s=>({id:s.id,name:s.fileName||s.title,date:new Date(s.updatedAt).toLocaleDateString("ko-KR"),size:"",thumbnail:s.thumbnail,documentType:s.documentType}));let o=e.filter(s=>(s.fileName||s.title||"").toLowerCase().split(".").pop()!=="pdf"?!1:s.documentType==="viewer");this.viewerFiles=o.map(s=>({id:s.id,name:s.fileName||s.title,date:new Date(s.updatedAt).toLocaleDateString("ko-KR"),size:"",thumbnail:s.thumbnail,documentType:s.documentType})),console.log("\u{1F4C2} \uCD5C\uADFC \uD30C\uC77C \uB85C\uB4DC \uC644\uB8CC - \uCD5C\uADFC\uBCF8\uD30C\uC77C:",this.recentFiles.length,"\uB0B4\uD30C\uC77C:",this.myFiles.length,"\uC77D\uAE30\uB9CC\uD55C\uD30C\uC77C:",this.viewerFiles.length)}catch(t){console.error("\uCD5C\uADFC \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328:",t)}})}onFunctionClick(t){console.log("Function clicked:",t),t==="PDF \uC5F4\uAE30"?this.sheetState="half":t==="PDF \uBCC0\uD658"?this.convertSheetState="half":t==="\uC0C8\uBB38\uC11C \uB9CC\uB4E4\uAE30"&&(this.router.navigate(["/ezm/viewer"],{queryParams:{mode:"new-document",fileName:`\uC0C8\uBB38\uC11C_${Date.now()}.pdf`}}),this.snackbar.showInfo("\uC0C8 \uBB38\uC11C\uB97C \uC791\uC131\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4"))}navigateToSettings(){this.router.navigate(["/ezm/settings"])}navigateToSearch(){this.router.navigate(["/ezm/search"])}onRecentFileClick(t){return x(this,null,function*(){console.log("Recent file clicked:",t);try{let e=yield this.indexedDbService.getDocumentById(t.documentId);if(!e){this.snackbar.showWarning("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let o=(e.fileName||e.title||"").toLowerCase().split(".").pop();if(o!=="pdf"){["jpg","jpeg","png","gif","bmp","webp"].includes(o||"")?this.snackbar.showError("\uC774\uBBF8\uC9C0 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):["xlsx","xls","csv"].includes(o||"")?this.snackbar.showError("\uC5D1\uC140 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):["docx","doc"].includes(o||"")?this.snackbar.showError("\uC6CC\uB4DC \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):["pptx","ppt"].includes(o||"")?this.snackbar.showError("\uD30C\uC6CC\uD3EC\uC778\uD2B8 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):this.snackbar.showError("PDF \uD30C\uC77C\uB9CC \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC788\uC2B5\uB2C8\uB2E4.");return}this.router.navigate(["/ezm/viewer"],{state:{document:e}})}catch(e){console.error("Error opening file:",e),this.snackbar.showError("\uD30C\uC77C\uC744 \uC5EC\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}onRecentFileMore(t){console.log("Recent file more clicked:",t),this.selectedRecentFile=t,this.recentFileSheetState="half"}selectAction(t){if(console.log("Action selected:",t),t==="convert"){this.convertSheetState="half";return}if(this.selectedAction=t,this.selectedFile)this.executeAction();else if(t==="view")this.sheetState="half";else{let e=t==="edit"?"PDF \uD3B8\uC9D1":"PDF \uBCC0\uD658";this.snackbar.showInfo(`${e} \uAE30\uB2A5\uC774 \uC120\uD0DD\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD30C\uC77C\uC744 \uC120\uD0DD\uD558\uC138\uC694.`)}}executeAction(){return x(this,null,function*(){if(!(!this.selectedFile||!this.selectedAction))try{let t=yield this.indexedDbService.getDocumentById(this.selectedFile.id);if(!t){this.snackbar.showWarning("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(this.selectedAction==="edit")this.router.navigate(["/ezm/viewer"],{state:{document:t,mode:"convert"}});else{let e=this.selectedAction==="view"?"viewer":"convert";this.router.navigate(["/ezm/viewer"],{state:{document:t,mode:e}})}this.selectedFile=null,this.selectedAction=null}catch(t){console.error("\uBB38\uC11C \uC5F4\uAE30 \uC2E4\uD328:",t),this.snackbar.showError("\uBB38\uC11C\uB97C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}loadDocumentFromIndexedDB(t){return x(this,null,function*(){try{let e=yield this.indexedDbService.getDocumentById(t.id);if(!e){this.snackbar.showWarning("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.router.navigate(["/ezm/viewer"],{state:{document:e}})}catch(e){console.error("\uBB38\uC11C \uC5F4\uAE30 \uC2E4\uD328:",e),this.snackbar.showError("\uBB38\uC11C\uB97C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}onMergeClick(){return x(this,null,function*(){this.toolActionService.setPendingAction({toolId:"merge",toolLabel:"PDF \uBCD1\uD569",action:"merge-pdf",requiresFileSelection:!0}),this.router.navigate(["/ezm/myfiles"])})}onRecentFileEdit(){return x(this,null,function*(){if(this.selectedRecentFile){this.recentFileSheetState="collapsed";try{let t=yield this.indexedDbService.getDocumentById(this.selectedRecentFile.documentId);if(!t){this.snackbar.showWarning("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.router.navigate(["/ezm/viewer"],{state:{document:t,mode:"editor"}})}catch(t){console.error("Error opening file:",t),this.snackbar.showError("\uD30C\uC77C\uC744 \uC5EC\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}}})}onRecentFileShare(){return x(this,null,function*(){if(this.selectedRecentFile){this.recentFileSheetState="collapsed";try{let t=yield this.indexedDbService.getDocumentById(this.selectedRecentFile.documentId);if(!t){this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let e=t.pdfBase64||t.originalPdfBase64;if(!e){this.snackbar.showError("\uACF5\uC720\uD560 PDF \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let n=this.ensurePdfExtension(t.fileName||t.title||this.selectedRecentFile.name||"document.pdf");if(this.tryNativeShare(n,e)){console.log("\u2705 Native \uACF5\uC720 \uD638\uCD9C \uC644\uB8CC"),this.snackbar.showSuccess("\uBB38\uC11C\uB97C \uACF5\uC720\uD588\uC2B5\uB2C8\uB2E4.");return}if(typeof navigator<"u"&&navigator.share){let o=this.base64ToBlob(e,"application/pdf"),s=[];try{s.push(new File([o],n,{type:"application/pdf"}))}catch(_){console.warn("File \uAC1D\uCCB4 \uC0DD\uC131 \uC2E4\uD328",_)}let d={title:n,text:`${n} \uBB38\uC11C\uB97C \uACF5\uC720\uD569\uB2C8\uB2E4.`};s.length&&(typeof navigator.canShare!="function"||navigator.canShare({files:s}))&&(d.files=s),yield navigator.share(d),this.snackbar.showSuccess("\uBB38\uC11C\uB97C \uACF5\uC720\uD588\uC2B5\uB2C8\uB2E4.");return}console.log("\u{1F4E5} Web Share API \uBBF8\uC9C0\uC6D0 - \uB2E4\uC6B4\uB85C\uB4DC \uC0AC\uC6A9"),this.downloadFile(n,e),this.snackbar.showSuccess("\uD30C\uC77C\uC774 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){if(t?.name==="AbortError"){console.log("\uACF5\uC720 \uCDE8\uC18C\uB428");return}console.error("\uBB38\uC11C \uACF5\uC720 \uC2E4\uD328:",t),this.snackbar.showError("\uBB38\uC11C \uACF5\uC720\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}})}onRecentFileRemove(){return x(this,null,function*(){if(this.selectedRecentFile){this.recentFileSheetState="collapsed";try{yield this.indexedDbService.removeFromRecentFiles(this.selectedRecentFile.id),this.snackbar.showSuccess("\uCD5C\uADFC \uBAA9\uB85D\uC5D0\uC11C \uC81C\uAC70\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),yield this.loadRecentFiles()}catch(t){console.error("Remove from recent failed:",t),this.snackbar.showError("\uBAA9\uB85D\uC5D0\uC11C \uC81C\uAC70\uD558\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}})}onRecentFileGoToLocation(){return x(this,null,function*(){if(this.selectedRecentFile){this.recentFileSheetState="collapsed";try{let t=this.selectedRecentFile.folderId,e=this.selectedRecentFile.documentId;t?this.router.navigate(["/ezm/myfiles"],{queryParams:{folderId:t,fileId:e}}):this.router.navigate(["/ezm/myfiles"],{queryParams:{fileId:e}})}catch(t){console.error("Go to location failed:",t),this.snackbar.showError("\uC704\uCE58\uB85C \uC774\uB3D9\uD558\uB294\uB370 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}})}closeBottomSheet(){this.sheetState="collapsed"}closeRecentFileSheet(){this.recentFileSheetState="collapsed",this.selectedRecentFile=null}onRecentFileSheetStateChange(t){this.recentFileSheetState=t,t==="collapsed"&&(this.selectedRecentFile=null)}tryNativeShare(t,e){if(typeof window<"u"&&window.parent!==window)try{return console.log("\u{1F4E8} postMessage\uB97C \uD1B5\uD55C \uB124\uC774\uD2F0\uBE0C \uD1B5\uC2E0 \uC2DC\uB3C4"),window.parent.postMessage({type:"share",fileName:t,data:e},"*"),!0}catch(n){console.warn("postMessage \uC2E4\uD328:",n)}return window.ReactNativeWebView?(console.log("\u{1F4F1} React Native WebView \uAC10\uC9C0"),window.ReactNativeWebView.postMessage(JSON.stringify({type:"share",fileName:t,data:e})),!0):window.webkit?.messageHandlers?.shareFile?(console.log("\u{1F34E} iOS WKWebView \uAC10\uC9C0"),window.webkit.messageHandlers.shareFile.postMessage({fileName:t,data:e}),!0):window.Android?.shareFile?(console.log("\u{1F916} Android WebView \uAC10\uC9C0"),window.Android.shareFile(t,e),!0):(console.log("\u{1F310} Native Bridge \uBBF8\uAC10\uC9C0 - Web Share API \uC2DC\uB3C4"),!1)}downloadFile(t,e){let n=this.base64ToBlob(e,"application/pdf"),o=URL.createObjectURL(n),s=document.createElement("a");s.href=o,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)}base64ToBlob(t,e="application/pdf"){let n=t.includes(",")?t.split(",")[1]:t,o=atob(n),s=new Array(o.length);for(let _=0;_<o.length;_++)s[_]=o.charCodeAt(_);let d=new Uint8Array(s);return new Blob([d],{type:e})}ensurePdfExtension(t){return t.toLowerCase().endsWith(".pdf")?t:`${t}.pdf`}closeConvertBottomSheet(){this.convertSheetState="collapsed"}onSheetStateChange(t){this.sheetState=t}onConvertSheetStateChange(t){this.convertSheetState=t}openFileDialog(){let t=document.createElement("input");t.type="file",t.accept=".pdf",t.onchange=e=>x(this,null,function*(){let n=e.target.files[0];n&&(console.log("File selected:",n.name),yield this.onFileSelected(n))}),t.click()}onBottomSheetOptionSelected(t){console.log("Option selected:",t),this.sheetState="collapsed";let e="",n=t;switch(t){case"pdf":e=".pdf,application/pdf";break;case"image":e="image/*,.jpg,.jpeg,.png,.gif,.bmp,.webp";break;case"excel":e=".xlsx,.xls,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel";break;case"word":e=".docx,.doc,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/msword";break;case"ppt":e=".pptx,.ppt,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/vnd.ms-powerpoint";break;default:e="*/*"}let o=document.createElement("input");o.type="file",o.accept=e,o.onchange=s=>x(this,null,function*(){let d=s.target.files[0];d&&(console.log("File selected:",d.name,d.type),yield this.onFileSelected(d,n))}),o.click()}onConvertBottomSheetOptionSelected(t){console.log("Convert option selected:",t),this.convertSheetState="collapsed";let e={"image-to-pdf":"\uC774\uBBF8\uC9C0 \u2192 PDF","photo-to-pdf":"\uC0AC\uC9C4 \u2192 PDF","excel-to-pdf":"\uC5D1\uC140 \u2192 PDF","word-to-pdf":"\uC6CC\uB4DC \u2192 PDF","ppt-to-pdf":"PPT \u2192 PDF"},n={"image-to-pdf":"image","photo-to-pdf":"image","excel-to-pdf":"excel","word-to-pdf":"word","ppt-to-pdf":"ppt"};this.toolActionService.setPendingAction({toolId:t,toolLabel:e[t]||"\uBB38\uC11C \uBCC0\uD658",action:"convert-to-pdf",requiresFileSelection:!0,data:{convertType:t,sourceFileType:n[t]}}),this.router.navigate(["/ezm/myfiles"])}onFileSelected(t,e="pdf"){return x(this,null,function*(){try{if(this.snackbar.showInfo(`${t.name} \uD30C\uC77C\uC744 \uC5EC\uB294 \uC911...`),e==="pdf"){if(t.type!=="application/pdf"&&!t.name.toLowerCase().endsWith(".pdf")){this.snackbar.showError("PDF \uD30C\uC77C\uB9CC \uC5C5\uB85C\uB4DC \uAC00\uB2A5\uD569\uB2C8\uB2E4.");return}yield this.handlePdfFile(t)}else yield this.handleOtherFile(t,e)}catch(n){console.error("Error loading file:",n),this.snackbar.showError("\uD30C\uC77C\uC744 \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}handlePdfFile(t){return x(this,null,function*(){let e=URL.createObjectURL(t);yield this.saveOpenedPdfAsDocument(t,e),yield this.loadRecentFiles(),this.router.navigate(["/ezm/viewer"],{state:{pdfUrl:e,fileName:t.name,pdfBlob:t}}),this.snackbar.showSuccess(`${t.name} \uD30C\uC77C\uC744 \uC5F4\uC5C8\uC2B5\uB2C8\uB2E4.`)})}handleOtherFile(t,e){return x(this,null,function*(){try{let n=yield this.fileToBase64(t),o={image:"image",excel:"excel",word:"word",ppt:"ppt"},s={id:this.generateDocumentId(),title:t.name,pages:[],elementCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),version:"1.0",fileName:t.name,documentType:o[e]||"image",originalFileData:n,mimeType:t.type,fileSize:t.size},_=(yield this.indexedDbService.getAllDocuments()).find(b=>b.fileName===t.name&&b.documentType===o[e]);_?(s.id=_.id,s.createdAt=_.createdAt,console.log("\uAE30\uC874 \uBB38\uC11C \uC5C5\uB370\uC774\uD2B8:",t.name)):console.log("\uC0C8 \uBB38\uC11C \uC800\uC7A5:",t.name),yield this.indexedDbService.saveDocument(s),console.log("\u2705 \uD30C\uC77C\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4:",t.name),yield this.loadRecentFiles(),this.snackbar.showSuccessWithAction(`${t.name} \uD30C\uC77C\uC744 \uC800\uC7A5\uD588\uC2B5\uB2C8\uB2E4.`,{label:"\uD30C\uC77C\uB85C \uC774\uB3D9",callback:()=>{this.router.navigate(["/ezm/myfiles","my-files"],{state:{highlightFileId:s.id,scrollToFile:!0}})}},5e3)}catch(n){throw console.error("\uD30C\uC77C \uC800\uC7A5 \uC2E4\uD328:",n),n}})}saveOpenedPdfAsDocument(t,e){return x(this,null,function*(){try{let n=yield this.fileToBase64(t),o={id:this.generateDocumentId(),title:t.name,pages:[],elementCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),version:"1.0",pdfSrc:e,pdfBase64:n,fileName:t.name,documentType:"viewer"},d=(yield this.indexedDbService.getAllDocuments()).find(_=>_.fileName===t.name&&_.documentType==="viewer");d?(o.id=d.id,o.createdAt=d.createdAt,console.log("\uAE30\uC874 PDF \uBDF0\uC5B4 \uBB38\uC11C \uC5C5\uB370\uC774\uD2B8:",t.name)):console.log("\uC0C8 PDF \uBDF0\uC5B4 \uBB38\uC11C \uC800\uC7A5:",t.name),yield this.indexedDbService.saveDocument(o),console.log("\u2705 PDF \uBB38\uC11C\uAC00 \uCD5C\uADFC \uBB38\uC11C\uC5D0 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4:",t.name)}catch(n){console.error("PDF \uBB38\uC11C \uC800\uC7A5 \uC2E4\uD328:",n)}})}fileToBase64(t){return x(this,null,function*(){return new Promise((e,n)=>{let o=new FileReader;o.onloadend=()=>e(o.result),o.onerror=n,o.readAsDataURL(t)})})}generateDocumentId(){return`doc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(e){return new(e||a)(z(V))};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-main"]],standalone:!1,decls:130,vars:15,consts:[[1,"header"],[1,"header-left"],["src","./images/logo-ezreader@3x.png","alt","EZ Reader",1,"header-logo"],[1,"header-right"],["title","\uAC80\uC0C9",1,"icon-btn","search-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","11","cy","11","r","8"],["d","M21 21l-4.35-4.35"],[1,"main-content"],[1,"pdf-functions-card"],[1,"pdf-functions"],[1,"function-btn",3,"click"],[1,"function-icon"],["src","images/ico-m-pdf-file@3x.png","alt","\uC5F4\uAE30","width","32","height","32"],[1,"function-label"],["src","images/ico-m-pdf-conversion@3x.png","alt","\uBCC0\uD658","width","32","height","32"],["src","images/ico-m-pdf-merge@3x.png","alt","\uBCD1\uD569","width","32","height","32"],[3,"fileClick","moreClick","recentFiles","isMobile","showDeleteButton","showMoreButton","selectedFileId","sectionTitle"],[3,"activeTab"],[3,"sheetStateChange","close","sheetState"],[1,"bottom-sheet-header"],[1,"bottom-sheet-title"],[1,"bottom-sheet-subtitle"],[1,"bottom-sheet-content"],[1,"option-list"],[1,"option-item",3,"click"],[1,"option-icon"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z","stroke","#F44336","stroke-width","2"],["points","13 2 13 9 20 9","stroke","#F44336","stroke-width","2"],[1,"option-label"],["x","3","y","3","width","18","height","18","rx","2","stroke","#9C27B0","stroke-width","2"],["cx","8.5","cy","8.5","r","1.5","fill","#9C27B0"],["d","M21 15L16 10L5 21","stroke","#9C27B0","stroke-width","2"],["x","3","y","3","width","18","height","18","rx","2","stroke","#4CAF50","stroke-width","2"],["d","M3 9h18M3 15h18M9 3v18M15 3v18","stroke","#4CAF50","stroke-width","2"],["x","3","y","3","width","18","height","18","rx","2","stroke","#2196F3","stroke-width","2"],["d","M7 8l2 8 2-6 2 6 2-8","stroke","#2196F3","stroke-width","2"],["x","3","y","3","width","18","height","18","rx","2","stroke","#FF6F00","stroke-width","2"],["d","M8 7h8M8 12h8M8 17h4","stroke","#FF6F00","stroke-width","2"],[1,"convert-options-grid"],[1,"convert-option-card",3,"click"],[1,"option-icon",2,"color","#9C27B0"],["width","32","height","32","viewBox","0 0 24 24","fill","none"],["x","3","y","3","width","18","height","18","rx","2","stroke","currentColor","stroke-width","2"],["cx","8.5","cy","8.5","r","1.5","fill","currentColor"],["d","M21 15L16 10L5 21","stroke","currentColor","stroke-width","2"],[1,"option-text"],[1,"option-title"],[1,"option-description"],[1,"option-icon",2,"color","#4CAF50"],["d","M3 9h18M3 15h18M9 3v18M15 3v18","stroke","currentColor","stroke-width","2"],[1,"option-icon",2,"color","#2196F3"],["d","M7 8l2 8 2-6 2 6 2-8","stroke","currentColor","stroke-width","2"],[1,"option-icon",2,"color","#F44336"],["d","M8 7h8M8 12h8M8 17h4","stroke","currentColor","stroke-width","2"],[1,"convert-info"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","#666","stroke-width","2"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12","y2","8"],["class","item-sheet-content",4,"ngIf"],[1,"item-sheet-content"],[1,"sheet-header"],[1,"sheet-title"],[1,"sheet-options"],[1,"sheet-option",3,"click"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","14 2 14 8 20 8","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","16 6 12 2 8 6","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","12","y1","2","x2","12","y2","15","stroke","#333","stroke-width","2","stroke-linecap","round"],["d","M3 7v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2h-8L9 5H5c-1.1 0-2 .9-2 2z","stroke","#333","stroke-width","2","fill","none"],[1,"sheet-option","danger",3,"click"],["d","M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","10","y1","11","x2","10","y2","17","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["x1","14","y1","11","x2","14","y2","17","stroke","currentColor","stroke-width","2","stroke-linecap","round"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1),m(2,"img",2),r(),i(3,"div",3)(4,"button",4),u("click",function(){return n.navigateToSearch()}),C(),i(5,"svg",5),m(6,"circle",6)(7,"path",7),r()()()(),v(),i(8,"div",8)(9,"div",9)(10,"div",10)(11,"button",11),u("click",function(){return n.selectAction("view")}),i(12,"div",12),m(13,"img",13),r(),i(14,"span",14),l(15,"\uD3B8\uC9D1"),r()(),i(16,"button",11),u("click",function(){return n.selectAction("convert")}),i(17,"div",12),m(18,"img",15),r(),i(19,"span",14),l(20,"PDF \uBCC0\uD658"),r()(),i(21,"button",11),u("click",function(){return n.onMergeClick()}),i(22,"div",12),m(23,"img",16),r(),i(24,"span",14),l(25,"PDF \uBCD1\uD569"),r()()()(),i(26,"app-shared-recent-files",17),u("fileClick",function(s){return n.onRecentFileClick(s)})("moreClick",function(s){return n.onRecentFileMore(s)}),r()(),m(27,"ez-reader-mobile-bottom-nav",18),i(28,"app-bottom-sheet",19),u("sheetStateChange",function(s){return n.onSheetStateChange(s)})("close",function(){return n.closeBottomSheet()}),i(29,"div",20)(30,"h3",21),l(31,"\uD30C\uC77C\uC744 \uC5F4\uC5B4\uBCF4\uC138\uC694."),r(),i(32,"p",22),l(33,"\uB2E4\uC591\uD55C \uD30C\uC77C \uD615\uC2DD\uC744 \uC9C0\uC6D0\uD569\uB2C8\uB2E4"),r()(),i(34,"div",23)(35,"div",24)(36,"button",25),u("click",function(){return n.onBottomSheetOptionSelected("pdf")}),i(37,"div",26),C(),i(38,"svg",27),m(39,"path",28)(40,"polyline",29),r()(),v(),i(41,"span",30),l(42,"PDF"),r()(),i(43,"button",25),u("click",function(){return n.onBottomSheetOptionSelected("image")}),i(44,"div",26),C(),i(45,"svg",27),m(46,"rect",31)(47,"circle",32)(48,"path",33),r()(),v(),i(49,"span",30),l(50,"\uC774\uBBF8\uC9C0"),r()(),i(51,"button",25),u("click",function(){return n.onBottomSheetOptionSelected("excel")}),i(52,"div",26),C(),i(53,"svg",27),m(54,"rect",34)(55,"path",35),r()(),v(),i(56,"span",30),l(57,"Excel"),r()(),i(58,"button",25),u("click",function(){return n.onBottomSheetOptionSelected("word")}),i(59,"div",26),C(),i(60,"svg",27),m(61,"rect",36)(62,"path",37),r()(),v(),i(63,"span",30),l(64,"Word"),r()(),i(65,"button",25),u("click",function(){return n.onBottomSheetOptionSelected("ppt")}),i(66,"div",26),C(),i(67,"svg",27),m(68,"rect",38)(69,"path",39),r()(),v(),i(70,"span",30),l(71,"PowerPoint"),r()()()()(),i(72,"app-bottom-sheet",19),u("sheetStateChange",function(s){return n.onConvertSheetStateChange(s)})("close",function(){return n.closeConvertBottomSheet()}),i(73,"div",20)(74,"h3",21),l(75,"PDF\uB85C \uBCC0\uD658"),r(),i(76,"p",22),l(77,"\uBCC0\uD658\uD560 \uD30C\uC77C \uD615\uC2DD\uC744 \uC120\uD0DD\uD558\uC138\uC694"),r()(),i(78,"div",23)(79,"div",40)(80,"button",41),u("click",function(){return n.onConvertBottomSheetOptionSelected("image-to-pdf")}),i(81,"div",42),C(),i(82,"svg",43),m(83,"rect",44)(84,"circle",45)(85,"path",46),r()(),v(),i(86,"div",47)(87,"div",48),l(88,"\uC774\uBBF8\uC9C0 \u2192 PDF"),r(),i(89,"div",49),l(90,"JPG, PNG \uB4F1"),r()()(),i(91,"button",41),u("click",function(){return n.onConvertBottomSheetOptionSelected("excel-to-pdf")}),i(92,"div",50),C(),i(93,"svg",43),m(94,"rect",44)(95,"path",51),r()(),v(),i(96,"div",47)(97,"div",48),l(98,"Excel \u2192 PDF"),r(),i(99,"div",49),l(100,"XLSX, XLS"),r()()(),i(101,"button",41),u("click",function(){return n.onConvertBottomSheetOptionSelected("word-to-pdf")}),i(102,"div",52),C(),i(103,"svg",43),m(104,"rect",44)(105,"path",53),r()(),v(),i(106,"div",47)(107,"div",48),l(108,"Word \u2192 PDF"),r(),i(109,"div",49),l(110,"DOCX, DOC"),r()()(),i(111,"button",41),u("click",function(){return n.onConvertBottomSheetOptionSelected("ppt-to-pdf")}),i(112,"div",54),C(),i(113,"svg",43),m(114,"rect",44)(115,"path",55),r()(),v(),i(116,"div",47)(117,"div",48),l(118,"PowerPoint \u2192 PDF"),r(),i(119,"div",49),l(120,"PPTX, PPT"),r()()()(),i(121,"div",56),C(),i(122,"svg",57),m(123,"circle",58)(124,"line",59)(125,"line",60),r(),v(),i(126,"span"),l(127,"\uC120\uD0DD\uD55C \uD30C\uC77C\uC774 PDF\uB85C \uBCC0\uD658\uB429\uB2C8\uB2E4"),r()()()(),i(128,"app-bottom-sheet",19),u("sheetStateChange",function(s){return n.onRecentFileSheetStateChange(s)})("close",function(){return n.closeRecentFileSheet()}),P(129,Ri,30,1,"div",61),r()),e&2&&(c(11),R("active",n.selectedAction==="view"),c(5),R("active",n.selectedAction==="convert"),c(10),g("recentFiles",n.recentFiles)("isMobile",!0)("showDeleteButton",!1)("showMoreButton",!0)("selectedFileId",n.selectedFile==null?null:n.selectedFile.id)("sectionTitle","\uCD5C\uADFC \uBCF8 \uD30C\uC77C"),c(),g("activeTab",n.currentActiveTab),c(),g("sheetState",n.sheetState),c(44),g("sheetState",n.convertSheetState),c(56),g("sheetState",n.recentFileSheetState),c(),g("ngIf",n.selectedRecentFile))},dependencies:[j,he,zt,de],styles:[".header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:56px;background:#fff;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;justify-content:space-between;padding:0 16px;z-index:100}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center}.header-left[_ngcontent-%COMP%]   .header-logo[_ngcontent-%COMP%]{height:15px;width:auto;object-fit:contain}.header-right[_ngcontent-%COMP%]{display:flex;gap:8px}.icon-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#666;display:flex;align-items:center;justify-content:center;border-radius:50%}.icon-btn[_ngcontent-%COMP%]:active{background:#f5f5f5}.icon-btn.logout-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#666}.icon-btn.logout-btn[_ngcontent-%COMP%]:active{background:#ffebee}.icon-btn.logout-btn[_ngcontent-%COMP%]:active   svg[_ngcontent-%COMP%]{color:#d32f2f}.main-content[_ngcontent-%COMP%]{padding-top:56px;padding-bottom:60px}.pdf-functions-card[_ngcontent-%COMP%]{background:#fff;padding:16px;margin-bottom:8px}.pdf-functions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.pdf-functions[_ngcontent-%COMP%]   .function-btn[_ngcontent-%COMP%]:nth-child(4), .pdf-functions[_ngcontent-%COMP%]   .function-btn[_ngcontent-%COMP%]:nth-child(5){grid-column:span 1}.pdf-functions[_ngcontent-%COMP%]   .function-btn[_ngcontent-%COMP%]:nth-child(4){margin-left:calc(33.3333333333% + 5px)}.function-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:6px;padding:12px 8px;background:#f8f9fa;border:1px solid #e0e0e0;border-radius:12px;cursor:pointer;transition:all .2s}.function-btn[_ngcontent-%COMP%]:active{background:#e9ecef;transform:scale(.98)}.function-btn.active[_ngcontent-%COMP%]{background:#e3f2fd;border-color:#2196f3;box-shadow:0 0 0 2px #2196f333}.function-btn.active[_ngcontent-%COMP%]   .function-label[_ngcontent-%COMP%]{color:#2196f3;font-weight:600}.function-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.function-btn[_ngcontent-%COMP%]:disabled:active{transform:none}.function-icon[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:#fff}.function-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:28px;height:28px;object-fit:contain}.function-label[_ngcontent-%COMP%]{font-size:12px;color:#333;text-align:center;line-height:1.2}.bottom-sheet-header[_ngcontent-%COMP%]{padding:20px 20px 10px}.bottom-sheet-header[_ngcontent-%COMP%]   .bottom-sheet-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.bottom-sheet-header[_ngcontent-%COMP%]   .bottom-sheet-subtitle[_ngcontent-%COMP%]{margin:8px 0 0;font-size:14px;color:#666;font-weight:400}.bottom-sheet-content[_ngcontent-%COMP%]{padding:10px 20px 30px}.option-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.option-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:none;border:none;border-bottom:1px solid #f0f0f0;cursor:pointer;text-align:left;transition:background .2s}.option-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.option-item[_ngcontent-%COMP%]:active{background:#f5f5f5}.option-item[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background:#f5f5f5;color:#007acc;flex-shrink:0}.option-item[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.option-item[_ngcontent-%COMP%]   .option-label[_ngcontent-%COMP%]{font-size:16px;color:#333;font-weight:500}.convert-options-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px}.convert-option-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:20px 12px;background:#fff;border:2px solid #e0e0e0;border-radius:12px;cursor:pointer;transition:all .2s;text-align:center}.convert-option-card[_ngcontent-%COMP%]:active{background:#f8f9fa;border-color:#2196f3;transform:scale(.98)}.convert-option-card[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:48px;height:48px;border-radius:12px;background:#00000008;margin-bottom:4px}.convert-option-card[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.convert-option-card[_ngcontent-%COMP%]   .option-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.convert-option-card[_ngcontent-%COMP%]   .option-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;line-height:1.2}.convert-option-card[_ngcontent-%COMP%]   .option-description[_ngcontent-%COMP%]{font-size:12px;color:#999;line-height:1.2}.convert-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px;background:#f8f9fa;border-radius:8px}.convert-info[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.convert-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#666;line-height:1.4}.item-sheet-content[_ngcontent-%COMP%]   .sheet-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #e5e7eb}.item-sheet-content[_ngcontent-%COMP%]   .sheet-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#222;margin:0;text-align:center}.item-sheet-content[_ngcontent-%COMP%]   .sheet-options[_ngcontent-%COMP%]{padding:8px 0}.item-sheet-content[_ngcontent-%COMP%]   .sheet-option[_ngcontent-%COMP%]{width:100%;padding:16px 20px;background:none;border:none;display:flex;align-items:center;gap:16px;cursor:pointer;font-size:16px;color:#333;transition:background .2s ease}.item-sheet-content[_ngcontent-%COMP%]   .sheet-option[_ngcontent-%COMP%]:active{background:#f3f4f6}.item-sheet-content[_ngcontent-%COMP%]   .sheet-option.danger[_ngcontent-%COMP%]{color:#ef5350}.item-sheet-content[_ngcontent-%COMP%]   .sheet-option.danger[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .item-sheet-content[_ngcontent-%COMP%]   .sheet-option.danger[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#ef5350!important}.item-sheet-content[_ngcontent-%COMP%]   .sheet-option[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.item-sheet-content[_ngcontent-%COMP%]   .sheet-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}"]})};var Oi=()=>[];function Vi(a,t){a&1&&(C(),i(0,"g"),m(1,"path",11)(2,"path",12),r())}function Ni(a,t){a&1&&(C(),i(0,"g"),m(1,"circle",13)(2,"path",14),r())}function Li(a,t){a&1&&(C(),i(0,"g"),m(1,"path",15),r())}function ji(a,t){a&1&&(C(),i(0,"g"),m(1,"path",16)(2,"path",17),r())}function Hi(a,t){a&1&&(C(),i(0,"g"),m(1,"path",18)(2,"circle",19),r())}function Gi(a,t){a&1&&(C(),i(0,"g"),m(1,"circle",19)(2,"path",20),r())}function $i(a,t){a&1&&(C(),i(0,"g"),m(1,"rect",21)(2,"path",22),r())}function Wi(a,t){if(a&1){let e=w();i(0,"button",7),u("click",function(){let o=f(e).$implicit,s=p(2);return h(s.onMenuClick(o.id))}),C(),i(1,"svg",8),me(2,9),P(3,Vi,3,0,"g",10)(4,Ni,3,0,"g",10)(5,Li,2,0,"g",10)(6,ji,3,0,"g",10)(7,Hi,3,0,"g",10)(8,Gi,3,0,"g",10)(9,$i,3,0,"g",10),ue(),r()()}if(a&2){let e=t.$implicit,n=p(2);R("disabled",e.id==="element-properties"&&!n.selectedElement||n.isPdfViewer&&e.id!=="pdf-analysis"),le("aria-label",e.title),c(2),g("ngSwitch",e.icon),c(),g("ngSwitchCase","edit"),c(),g("ngSwitchCase","search"),c(),g("ngSwitchCase","folder"),c(),g("ngSwitchCase","file"),c(),g("ngSwitchCase","eye"),c(),g("ngSwitchCase","settings"),c(),g("ngSwitchCase","form")}}function Ui(a,t){if(a&1&&(i(0,"div",5),P(1,Wi,10,11,"button",6),r()),a&2){let e=p();c(),g("ngForOf",e.menuGroups)}}function Ki(a,t){a&1&&(C(),i(0,"g"),m(1,"path",11)(2,"path",12),r())}function Yi(a,t){a&1&&(C(),i(0,"g"),m(1,"circle",13)(2,"path",14),r())}function qi(a,t){a&1&&(C(),i(0,"g"),m(1,"path",15),r())}function Zi(a,t){a&1&&(C(),i(0,"g"),m(1,"path",16)(2,"path",17),r())}function Xi(a,t){a&1&&(C(),i(0,"g"),m(1,"path",18)(2,"circle",19),r())}function Qi(a,t){a&1&&(C(),i(0,"g"),m(1,"circle",19)(2,"path",20),r())}function Ji(a,t){a&1&&(C(),i(0,"g"),m(1,"rect",21)(2,"path",22),r())}function eo(a,t){if(a&1){let e=w();i(0,"div",28),u("click",function(){let o=f(e).$implicit,s=p(2);return h(s.onMenuClick(o.id))}),i(1,"div",29),C(),i(2,"svg",30),me(3,9),P(4,Ki,3,0,"g",10)(5,Yi,3,0,"g",10)(6,qi,2,0,"g",10)(7,Zi,3,0,"g",10)(8,Xi,3,0,"g",10)(9,Qi,3,0,"g",10)(10,Ji,3,0,"g",10),ue(),r()(),v(),i(11,"div",31)(12,"div",32),l(13),r(),i(14,"div",33),l(15),r()(),i(16,"div",34),l(17,"\u203A"),r()()}if(a&2){let e=t.$implicit,n=p(2);R("disabled",e.id==="element-properties"&&!n.selectedElement||n.isPdfViewer&&e.id!=="pdf-analysis"),c(3),g("ngSwitch",e.icon),c(),g("ngSwitchCase","edit"),c(),g("ngSwitchCase","search"),c(),g("ngSwitchCase","folder"),c(),g("ngSwitchCase","file"),c(),g("ngSwitchCase","eye"),c(),g("ngSwitchCase","settings"),c(),g("ngSwitchCase","form"),c(3),E(e.title),c(2),D(" ",e.id==="element-properties"?n.selectedElement?n.getElementTypeName(n.selectedElement.type)+" \uC120\uD0DD\uB428":"\uC120\uD0DD\uB41C \uC694\uC18C \uC5C6\uC74C":e.items.length+"\uAC1C \uD56D\uBAA9"," ")}}function to(a,t){if(a&1){let e=w();i(0,"div",23)(1,"div",24)(2,"h3"),l(3,"PDF \uB3C4\uAD6C"),r(),i(4,"button",25),u("click",function(){f(e);let o=p();return h(o.closeSheet())}),l(5,"\xD7"),r()(),i(6,"div",26),P(7,eo,18,12,"div",27),r()()}if(a&2){let e=p();c(7),g("ngForOf",e.menuGroups)}}function no(a,t){if(a&1){let e=w();i(0,"div",39)(1,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onAddText())}),i(2,"span",41),l(3,"\u{1F4DD}"),r(),i(4,"span",42),l(5,"\uD14D\uC2A4\uD2B8 \uCD94\uAC00"),r()(),i(6,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onAddImage())}),i(7,"span",41),l(8,"\u{1F5BC}\uFE0F"),r(),i(9,"span",42),l(10,"\uC774\uBBF8\uC9C0 \uCD94\uAC00"),r()(),i(11,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onAddShape())}),i(12,"span",41),l(13,"\u25FC\uFE0F"),r(),i(14,"span",42),l(15,"\uB3C4\uD615 \uCD94\uAC00"),r()(),i(16,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onAddSignature())}),i(17,"span",41),l(18,"\u270D\uFE0F"),r(),i(19,"span",42),l(20,"\uC11C\uBA85 \uCD94\uAC00"),r()(),i(21,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onAddWatermark())}),i(22,"span",41),l(23,"\u{1F4A7}"),r(),i(24,"span",42),l(25,"\uC6CC\uD130\uB9C8\uD06C"),r()(),i(26,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onAddVectorPath())}),i(27,"span",41),l(28,"\u{1F4D0}"),r(),i(29,"span",42),l(30,"\uBCA1\uD130 \uACBD\uB85C"),r()()()}}function io(a,t){if(a&1){let e=w();i(0,"div",39)(1,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onSaveDocument())}),i(2,"span",41),l(3,"\u{1F4BE}"),r(),i(4,"span",42),l(5,"\uBB38\uC11C \uC800\uC7A5"),r()(),i(6,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onExportPdf())}),i(7,"span",41),l(8,"\u{1F4C4}"),r(),i(9,"span",42),l(10,"PDF \uB0B4\uBCF4\uB0B4\uAE30"),r()()()}}function oo(a,t){if(a&1){let e=w();i(0,"div",39)(1,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onAddPage())}),i(2,"span",41),l(3,"\u2795"),r(),i(4,"span",42),l(5,"\uD398\uC774\uC9C0 \uCD94\uAC00"),r()(),i(6,"button",43),u("click",function(){f(e);let o=p(2);return h(o.onDeletePage())}),i(7,"span",41),l(8,"\u{1F5D1}\uFE0F"),r(),i(9,"span",42),l(10,"\uD398\uC774\uC9C0 \uC0AD\uC81C"),r()(),i(11,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onRotatePage())}),i(12,"span",41),l(13,"\u{1F504}"),r(),i(14,"span",42),l(15,"\uD398\uC774\uC9C0 \uD68C\uC804"),r()(),i(16,"div",44)(17,"label"),l(18,"\uD398\uC774\uC9C0 \uC120\uD0DD:"),r(),i(19,"input",45),u("change",function(o){f(e);let s=p(2);return h(s.onPageSelect(+o.target.value))}),r(),i(20,"span",46),l(21),r()()()}if(a&2){let e=p(2);c(6),g("disabled",e.totalPages<=1),c(13),g("value",e.currentPage)("min",1)("max",e.totalPages),c(2),D("/ ",e.totalPages)}}function ro(a,t){if(a&1){let e=w();i(0,"div",39)(1,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onZoomIn())}),i(2,"span",41),l(3,"\u{1F50D}"),r(),i(4,"span",42),l(5),r()(),i(6,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onZoomOut())}),i(7,"span",41),l(8,"\u{1F50E}"),r(),i(9,"span",42),l(10,"\uCD95\uC18C"),r()()()}if(a&2){let e=p(2);c(5),D("\uD655\uB300 (",e.zoomLevel,"%)")}}function ao(a,t){if(a&1){let e=w();i(0,"div",39)(1,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onAddFormCheckbox())}),i(2,"span",41),l(3,"\u2611\uFE0F"),r(),i(4,"span",42),l(5,"\uCCB4\uD06C\uBC15\uC2A4 \uCD94\uAC00"),r()(),i(6,"p",47),l(7," \uD604\uC7AC \uD398\uC774\uC9C0 \uC911\uC559 \uBD80\uADFC\uC5D0 \uAE30\uBCF8 \uD06C\uAE30\uC758 \uCCB4\uD06C\uBC15\uC2A4\uB97C \uCD94\uAC00\uD569\uB2C8\uB2E4. "),r(),i(8,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onAddFormRadio())}),i(9,"span",41),l(10,"\u{1F518}"),r(),i(11,"span",42),l(12,"\uB77C\uB514\uC624 \uBC84\uD2BC \uCD94\uAC00"),r()(),i(13,"p",47),l(14," \uAC19\uC740 \uADF8\uB8F9 \uC774\uB984\uC744 \uACF5\uC720\uD558\uB294 \uB77C\uB514\uC624 \uBC84\uD2BC\uC740 \uB2E8\uC77C \uC120\uD0DD\uC73C\uB85C \uB3D9\uC791\uD569\uB2C8\uB2E4. "),r(),i(15,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onAddFormDropdown())}),i(16,"span",41),l(17,"v"),r(),i(18,"span",42),l(19,"\uB4DC\uB86D\uB2E4\uC6B4 \uCD94\uAC00"),r()(),i(20,"p",47),l(21," \uAE30\uBCF8 \uC635\uC158 3\uAC1C\uAC00 \uD3EC\uD568\uB41C \uC120\uD0DD \uC785\uB825 \uD544\uB4DC\uB97C \uCD94\uAC00\uD569\uB2C8\uB2E4. "),r(),i(22,"button",40),u("click",function(){f(e);let o=p(2);return h(o.onAddFormDateField())}),i(23,"span",41),l(24,"\u{1F4C5}"),r(),i(25,"span",42),l(26,"\uB0A0\uC9DC \uD544\uB4DC \uCD94\uAC00"),r()(),i(27,"p",47),l(28," \uAE30\uBCF8 \uD615\uC2DD(YYYY-MM-DD)\uC744 \uC0AC\uC6A9\uD558\uB294 \uB0A0\uC9DC \uC785\uB825 \uD544\uB4DC\uB97C \uCD94\uAC00\uD569\uB2C8\uB2E4. "),r()()}}function so(a,t){if(a&1){let e=w();i(0,"div",49)(1,"h4"),l(2,"\uD14D\uC2A4\uD2B8"),r(),i(3,"div",57)(4,"label"),l(5,"\uB0B4\uC6A9:"),r(),i(6,"textarea",58),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("text",o))}),r()(),i(7,"div",50)(8,"label"),l(9,"\uAE00\uAF34 \uD06C\uAE30:"),r(),i(10,"input",51),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("fontSize",o))}),r(),i(11,"span",52),l(12,"px"),r()(),i(13,"div",57)(14,"label"),l(15,"\uAE00\uAF34:"),r(),i(16,"select",59),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("fontFamily",o))}),i(17,"optgroup",60)(18,"option",61),l(19,"Noto Sans KR"),r(),i(20,"option",62),l(21,"\uB098\uB214\uACE0\uB515"),r()(),i(22,"optgroup",63)(23,"option",64),l(24,"Arial"),r(),i(25,"option",65),l(26,"Helvetica"),r()()()(),i(27,"div",50)(28,"label"),l(29,"\uC0C9\uC0C1:"),r(),i(30,"input",66),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("color",o))}),r()()()}if(a&2){let e=p(3);c(6),g("value",e.selectedElement.text),c(4),g("value",e.selectedElement.fontSize),c(6),g("value",e.selectedElement.fontFamily),c(14),g("value",e.selectedElement.color)}}function lo(a,t){if(a&1){let e=w();i(0,"div",49)(1,"h4"),l(2,"\uD3FC \uCCB4\uD06C\uBC15\uC2A4"),r(),i(3,"div",57)(4,"label"),l(5,"\uB808\uC774\uBE14"),r(),i(6,"input",67),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("properties.label",o))}),r()(),i(7,"div",57)(8,"label"),l(9,"\uAE30\uBCF8 \uC0C1\uD0DC"),r(),i(10,"label",68)(11,"input",69),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("properties.checked",o))}),r(),i(12,"span"),l(13),r()()()()}if(a&2){let e=p(3);c(6),g("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.label)||""),c(5),g("checked",e.selectedElement.properties==null?null:e.selectedElement.properties.checked),c(2),E(e.selectedElement.properties!=null&&e.selectedElement.properties.checked?"\uC120\uD0DD\uB428":"\uC120\uD0DD \uC548 \uD568")}}function co(a,t){if(a&1){let e=w();i(0,"div",49)(1,"h4"),l(2,"\uD3FC \uB77C\uB514\uC624 \uBC84\uD2BC"),r(),i(3,"div",57)(4,"label"),l(5,"\uB808\uC774\uBE14"),r(),i(6,"input",67),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("properties.label",o))}),r()(),i(7,"div",57)(8,"label"),l(9,"\uADF8\uB8F9 \uC774\uB984"),r(),i(10,"input",67),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("properties.groupName",o))}),r()(),i(11,"div",57)(12,"label"),l(13,"\uC635\uC158 \uAC12"),r(),i(14,"input",67),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("properties.value",o))}),r()(),i(15,"div",57)(16,"label"),l(17,"\uAE30\uBCF8 \uC120\uD0DD"),r(),i(18,"label",68)(19,"input",69),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("properties.selected",o))}),r(),i(20,"span"),l(21),r()()()()}if(a&2){let e=p(3);c(6),g("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.label)||""),c(4),g("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.groupName)||""),c(4),g("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.value)||""),c(5),g("checked",e.selectedElement.properties==null?null:e.selectedElement.properties.selected),c(2),E(e.selectedElement.properties!=null&&e.selectedElement.properties.selected?"\uC120\uD0DD\uB428":"\uC120\uD0DD \uC548 \uD568")}}function po(a,t){if(a&1&&(i(0,"option",72),l(1),r()),a&2){let e=t.$implicit;g("value",e),c(),D(" ",e," ")}}function go(a,t){if(a&1){let e=w();i(0,"div",49)(1,"h4"),l(2,"\uD3FC \uB4DC\uB86D\uB2E4\uC6B4"),r(),i(3,"div",57)(4,"label"),l(5,"\uB808\uC774\uBE14"),r(),i(6,"input",67),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("properties.label",o))}),r()(),i(7,"div",57)(8,"label"),l(9,"\uC635\uC158 \uBAA9\uB85D"),r(),i(10,"textarea",58),u("change",function(o){f(e);let s=p(3);return h(s.onDropdownOptionsChange(o))}),r(),i(11,"small",70),l(12,"\uC904\uBC14\uAFC8\uC73C\uB85C \uC635\uC158\uC744 \uAD6C\uBD84\uD558\uC138\uC694."),r()(),i(13,"div",57)(14,"label"),l(15,"\uAE30\uBCF8 \uC120\uD0DD"),r(),i(16,"select",59),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("properties.selectedOption",o))}),P(17,po,2,2,"option",71),r()()()}if(a&2){let e=p(3);c(6),g("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.label)||""),c(4),g("value",((e.selectedElement.properties==null?null:e.selectedElement.properties.options)||un(4,Oi)).join(`
`)),c(6),g("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.selectedOption)||""),c(),g("ngForOf",(e.selectedElement.properties==null?null:e.selectedElement.properties.options)||un(5,Oi))}}function mo(a,t){if(a&1){let e=w();i(0,"div",49)(1,"h4"),l(2,"\uD3FC \uB0A0\uC9DC \uD544\uB4DC"),r(),i(3,"div",57)(4,"label"),l(5,"\uB808\uC774\uBE14"),r(),i(6,"input",67),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("properties.label",o))}),r()(),i(7,"div",57)(8,"label"),l(9,"\uC790\uB9AC\uD45C\uC2DC\uC790"),r(),i(10,"input",67),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("properties.placeholder",o))}),r()(),i(11,"div",57)(12,"label"),l(13,"\uB0A0\uC9DC \uD615\uC2DD"),r(),i(14,"input",67),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("properties.dateFormat",o))}),r()(),i(15,"div",57)(16,"label"),l(17,"\uAE30\uBCF8 \uAC12"),r(),i(18,"input",67),u("change",function(o){f(e);let s=p(3);return h(s.onPropertyChange("properties.defaultValue",o))}),r()()()}if(a&2){let e=p(3);c(6),g("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.label)||""),c(4),g("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.placeholder)||""),c(4),g("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.dateFormat)||""),c(4),g("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.defaultValue)||"")}}function uo(a,t){if(a&1){let e=w();i(0,"div",48)(1,"div",49)(2,"h4"),l(3,"\uC704\uCE58 \uBC0F \uD06C\uAE30"),r(),i(4,"div",50)(5,"label"),l(6,"X:"),r(),i(7,"input",51),u("change",function(o){f(e);let s=p(2);return h(s.onPropertyChange("x",o))}),r(),i(8,"span",52),l(9,"px"),r()(),i(10,"div",50)(11,"label"),l(12,"Y:"),r(),i(13,"input",51),u("change",function(o){f(e);let s=p(2);return h(s.onPropertyChange("y",o))}),r(),i(14,"span",52),l(15,"px"),r()(),i(16,"div",50)(17,"label"),l(18,"\uB108\uBE44:"),r(),i(19,"input",51),u("change",function(o){f(e);let s=p(2);return h(s.onPropertyChange("width",o))}),r(),i(20,"span",52),l(21,"px"),r()(),i(22,"div",50)(23,"label"),l(24,"\uB192\uC774:"),r(),i(25,"input",51),u("change",function(o){f(e);let s=p(2);return h(s.onPropertyChange("height",o))}),r(),i(26,"span",52),l(27,"px"),r()()(),P(28,so,31,4,"div",53)(29,lo,14,3,"div",53)(30,co,22,5,"div",53)(31,go,18,6,"div",53)(32,mo,19,4,"div",53),i(33,"div",54)(34,"button",55),u("click",function(){f(e);let o=p(2);return h(o.onDeleteElement())}),l(35,"\uC0AD\uC81C"),r(),i(36,"button",56),u("click",function(){f(e);let o=p(2);return h(o.onDeselectElement())}),l(37,"\uC120\uD0DD \uD574\uC81C"),r()()()}if(a&2){let e=p(2);c(7),g("value",e.selectedElement.x),c(6),g("value",e.selectedElement.y),c(6),g("value",e.selectedElement.width),c(6),g("value",e.selectedElement.height),c(3),g("ngIf",e.selectedElement.type==="text"),c(),g("ngIf",e.selectedElement.type==="form-checkbox"),c(),g("ngIf",e.selectedElement.type==="form-radio"),c(),g("ngIf",e.selectedElement.type==="form-dropdown"),c(),g("ngIf",e.selectedElement.type==="form-date")}}function fo(a,t){if(a&1){let e=w();i(0,"div",35)(1,"div",24)(2,"button",36),u("click",function(){f(e);let o=p();return h(o.onBack())}),l(3,"\u2039"),r(),i(4,"h3"),l(5),r(),i(6,"button",25),u("click",function(){f(e);let o=p();return h(o.closeSheet())}),l(7,"\xD7"),r()(),P(8,no,31,0,"div",37)(9,io,11,0,"div",37)(10,oo,22,5,"div",37)(11,ro,11,1,"div",37)(12,ao,29,0,"div",37)(13,uo,38,9,"div",38),r()}if(a&2){let e=p();c(5),E(e.getMenuTitle()),c(3),g("ngIf",e.expandedMenuId==="editing-tools"),c(),g("ngIf",e.expandedMenuId==="document-management"),c(),g("ngIf",e.expandedMenuId==="page-management"),c(),g("ngIf",e.expandedMenuId==="view-options"),c(),g("ngIf",e.expandedMenuId==="form-tools"),c(),g("ngIf",e.expandedMenuId==="element-properties"&&e.selectedElement)}}var we=class a{constructor(t){this.cdr=t}sheetState="collapsed";expandedMenuId=null;selectedElement=null;currentPage=1;totalPages=1;zoomLevel=100;pdfPages=[];isPdfViewer=!1;isTextEditModalOpen=!1;panelAction=new N;close=new N;addText=new N;addImage=new N;addShape=new N;addSignature=new N;addWatermark=new N;addVectorPath=new N;addFormCheckbox=new N;addFormRadio=new N;addFormDropdown=new N;addFormDateField=new N;analyze=new N;saveDocument=new N;addPage=new N;deletePage=new N;rotatePage=new N;pageSelect=new N;zoomIn=new N;zoomOut=new N;elementPropertyChange=new N;deleteElement=new N;deselectElement=new N;menuGroups=[{id:"editing-tools",title:"\uD3B8\uC9D1 \uB3C4\uAD6C",icon:"edit",modes:["\uD648","\uD3B8\uC9D1"],items:[{id:"add-text",label:"\uD14D\uC2A4\uD2B8 \uCD94\uAC00",description:"\uC0C8\uB85C\uC6B4 \uD14D\uC2A4\uD2B8 \uC0C1\uC790\uB97C \uCD94\uAC00\uD569\uB2C8\uB2E4"},{id:"add-image",label:"\uC774\uBBF8\uC9C0 \uCD94\uAC00",description:"\uC774\uBBF8\uC9C0\uB97C \uC0BD\uC785\uD569\uB2C8\uB2E4"},{id:"add-shape",label:"\uB3C4\uD615 \uCD94\uAC00",description:"\uB3C4\uD615\uC744 \uADF8\uB9BD\uB2C8\uB2E4"},{id:"add-signature",label:"\uC11C\uBA85 \uCD94\uAC00",description:"\uC11C\uBA85\uC744 \uC0BD\uC785\uD569\uB2C8\uB2E4"},{id:"add-watermark",label:"\uC6CC\uD130\uB9C8\uD06C",description:"\uC6CC\uD130\uB9C8\uD06C\uB97C \uCD94\uAC00\uD569\uB2C8\uB2E4"},{id:"add-vector-path",label:"\uBCA1\uD130 \uACBD\uB85C",description:"\uBCA1\uD130 \uACBD\uB85C\uB97C \uADF8\uB9BD\uB2C8\uB2E4"}]},{id:"pdf-analysis",title:"PDF \uD3B8\uC9D1",icon:"search",modes:["\uD648","\uD3B8\uC9D1"],items:[{id:"analyze",label:"PDF \uBD84\uC11D \uC2DC\uC791",description:"PDF \uBB38\uC11C\uB97C \uBD84\uC11D\uD558\uACE0 \uC0C8 \uBB38\uC11C\uB85C \uBCC0\uD658\uD569\uB2C8\uB2E4"}]},{id:"form-tools",title:"\uD3FC \uB3C4\uAD6C",icon:"form",modes:["\uD3B8\uC9D1"],items:[{id:"add-form-checkbox",label:"\uCCB4\uD06C\uBC15\uC2A4 \uCD94\uAC00",description:"\uC0AC\uC6A9\uC790\uAC00 \uC120\uD0DD\uD560 \uC218 \uC788\uB294 \uCCB4\uD06C\uBC15\uC2A4\uB97C \uCD94\uAC00\uD569\uB2C8\uB2E4"},{id:"add-form-radio",label:"\uB77C\uB514\uC624 \uBC84\uD2BC \uCD94\uAC00",description:"\uB2E8\uC77C \uC120\uD0DD\uC6A9 \uB77C\uB514\uC624 \uBC84\uD2BC\uC744 \uCD94\uAC00\uD569\uB2C8\uB2E4"},{id:"add-form-dropdown",label:"\uB4DC\uB86D\uB2E4\uC6B4 \uCD94\uAC00",description:"\uC5EC\uB7EC \uC635\uC158 \uC911 \uD558\uB098\uB97C \uC120\uD0DD\uD558\uB294 \uB4DC\uB86D\uB2E4\uC6B4\uC744 \uCD94\uAC00\uD569\uB2C8\uB2E4"},{id:"add-form-date",label:"\uB0A0\uC9DC \uD544\uB4DC \uCD94\uAC00",description:"\uB0A0\uC9DC \uC785\uB825\uC744 \uC704\uD55C \uD544\uB4DC\uB97C \uCD94\uAC00\uD569\uB2C8\uB2E4"}]},{id:"document-management",title:"\uBB38\uC11C \uAD00\uB9AC",icon:"folder",modes:["\uD648","\uD3B8\uC9D1"],items:[{id:"save-document",label:"\uBB38\uC11C \uC800\uC7A5",description:"\uD604\uC7AC \uBB38\uC11C\uB97C \uC800\uC7A5\uD569\uB2C8\uB2E4"},{id:"export-pdf",label:"PDF \uB0B4\uBCF4\uB0B4\uAE30",description:"PDF \uD30C\uC77C\uB85C \uB0B4\uBCF4\uB0C5\uB2C8\uB2E4"}]},{id:"page-management",title:"\uD398\uC774\uC9C0 \uAD00\uB9AC",icon:"file",modes:["\uD648","\uD3B8\uC9D1"],items:[{id:"add-page",label:"\uD398\uC774\uC9C0 \uCD94\uAC00",description:"\uC0C8 \uD398\uC774\uC9C0\uB97C \uCD94\uAC00\uD569\uB2C8\uB2E4"},{id:"delete-page",label:"\uD398\uC774\uC9C0 \uC0AD\uC81C",description:"\uD604\uC7AC \uD398\uC774\uC9C0\uB97C \uC0AD\uC81C\uD569\uB2C8\uB2E4"},{id:"rotate-page",label:"\uD398\uC774\uC9C0 \uD68C\uC804",description:"\uD398\uC774\uC9C0\uB97C 90\uB3C4 \uD68C\uC804\uD569\uB2C8\uB2E4"},{id:"select-page",label:"\uD398\uC774\uC9C0 \uC120\uD0DD",description:"\uD2B9\uC815 \uD398\uC774\uC9C0\uB85C \uC774\uB3D9\uD569\uB2C8\uB2E4"}]},{id:"view-options",title:"\uBCF4\uAE30 \uC635\uC158",icon:"eye",modes:["\uD648","\uD3B8\uC9D1"],items:[{id:"zoom-in",label:"\uD655\uB300",description:"\uD654\uBA74\uC744 \uD655\uB300\uD569\uB2C8\uB2E4"},{id:"zoom-out",label:"\uCD95\uC18C",description:"\uD654\uBA74\uC744 \uCD95\uC18C\uD569\uB2C8\uB2E4"}]},{id:"element-properties",title:"\uC694\uC18C \uC18D\uC131",icon:"settings",modes:["\uD648","\uD3B8\uC9D1"],items:[]}];ngOnChanges(t){t.selectedElement&&(this.selectedElement&&this.sheetState==="collapsed"&&!this.isTextEditModalOpen?this.onMenuClick("element-properties"):!this.selectedElement&&this.expandedMenuId==="element-properties"&&this.onBack()),t.isTextEditModalOpen&&this.isTextEditModalOpen&&this.sheetState!=="collapsed"&&this.closeSheet()}onSheetStateChange(t){console.log("\u{1F4F1} Panel received state change:",t),this.sheetState=t,this.cdr.markForCheck()}toggleSheet(){console.log("\u{1F3AF} toggleSheet called - current state:",this.sheetState),this.sheetState=this.sheetState==="collapsed"?"half":"collapsed",console.log("\u{1F3AF} toggleSheet - new state:",this.sheetState),this.cdr.markForCheck()}closeSheet(){this.sheetState="collapsed",this.expandedMenuId=null,this.close.emit()}onMenuClick(t){if(!(this.isPdfViewer&&t!=="pdf-analysis")&&!(t==="element-properties"&&!this.selectedElement)){if(t==="pdf-analysis"){this.onAnalyze();return}this.expandedMenuId=t,this.sheetState="full"}}onBack(){this.expandedMenuId=null,this.sheetState="half"}getMenuTitle(){let t=this.menuGroups.find(e=>e.id===this.expandedMenuId);return t?t.title:""}onAddText(){this.addText.emit(),this.closeSheet()}onAddImage(){this.addImage.emit(),this.closeSheet()}onAddShape(){this.addShape.emit(),this.closeSheet()}onAddSignature(){this.addSignature.emit(),this.closeSheet()}onAddWatermark(){this.addWatermark.emit(),this.closeSheet()}onAddVectorPath(){this.addVectorPath.emit(),this.closeSheet()}onAddFormCheckbox(){this.addFormCheckbox.emit(),this.closeSheet()}onAddFormRadio(){this.addFormRadio.emit(),this.closeSheet()}onAddFormDropdown(){this.addFormDropdown.emit(),this.closeSheet()}onAddFormDateField(){this.addFormDateField.emit(),this.closeSheet()}onSaveDocument(){this.saveDocument.emit(),this.closeSheet()}onExportPdf(){this.closeSheet()}onAnalyze(){this.analyze.emit(),this.closeSheet()}onAddPage(){this.addPage.emit(),this.closeSheet()}onDeletePage(){this.deletePage.emit(),this.closeSheet()}onRotatePage(){this.rotatePage.emit(),this.closeSheet()}onPageSelect(t){this.pageSelect.emit(t)}onZoomIn(){this.zoomIn.emit()}onZoomOut(){this.zoomOut.emit()}onPropertyChange(t,e){if(!this.selectedElement)return;let n;if(e&&e.target){let d=e.target;d instanceof HTMLInputElement&&d.type==="checkbox"?n=d.checked:n=d.value}else n=e?.value??e;let o=["x","y","width","height","fontSize","strokeWidth","boxSize","circleSize"],s=t.split(".").pop()||t;o.includes(s)&&(n=parseFloat(n)),this.elementPropertyChange.emit({elementId:this.selectedElement.id,property:t,value:n})}onDropdownOptionsChange(t){if(!this.selectedElement)return;let o=(t.target?.value??"").split(/\r?\n/).map(s=>s.trim()).filter(s=>s.length>0);this.elementPropertyChange.emit({elementId:this.selectedElement.id,property:"properties.options",value:o}),o.length>0&&(!this.selectedElement.properties?.selectedOption||!o.includes(this.selectedElement.properties.selectedOption))&&this.elementPropertyChange.emit({elementId:this.selectedElement.id,property:"properties.selectedOption",value:o[0]})}onDeleteElement(){this.deleteElement.emit(),this.closeSheet()}onDeselectElement(){this.deselectElement.emit(),this.closeSheet()}getElementTypeName(t){return{text:"\uD14D\uC2A4\uD2B8",image:"\uC774\uBBF8\uC9C0",shape:"\uB3C4\uD615",signature:"\uC11C\uBA85",watermark:"\uC6CC\uD130\uB9C8\uD06C","vector-path":"\uBCA1\uD130 \uD328\uC2A4",line:"\uC120","form-checkbox":"\uD3FC \uCCB4\uD06C\uBC15\uC2A4","form-radio":"\uD3FC \uB77C\uB514\uC624 \uBC84\uD2BC","form-dropdown":"\uD3FC \uB4DC\uB86D\uB2E4\uC6B4","form-date":"\uD3FC \uB0A0\uC9DC \uD544\uB4DC"}[t]||"\uC694\uC18C"}static \u0275fac=function(e){return new(e||a)(z(fe))};static \u0275cmp=F({type:a,selectors:[["shared-pdf-tools-panel-mobile"]],inputs:{selectedElement:"selectedElement",currentPage:"currentPage",totalPages:"totalPages",zoomLevel:"zoomLevel",pdfPages:"pdfPages",isPdfViewer:"isPdfViewer",isTextEditModalOpen:"isTextEditModalOpen"},outputs:{panelAction:"panelAction",close:"close",addText:"addText",addImage:"addImage",addShape:"addShape",addSignature:"addSignature",addWatermark:"addWatermark",addVectorPath:"addVectorPath",addFormCheckbox:"addFormCheckbox",addFormRadio:"addFormRadio",addFormDropdown:"addFormDropdown",addFormDateField:"addFormDateField",analyze:"analyze",saveDocument:"saveDocument",addPage:"addPage",deletePage:"deletePage",rotatePage:"rotatePage",pageSelect:"pageSelect",zoomIn:"zoomIn",zoomOut:"zoomOut",elementPropertyChange:"elementPropertyChange",deleteElement:"deleteElement",deselectElement:"deselectElement"},features:[Ye],decls:5,vars:4,consts:[[3,"sheetStateChange","close","sheetState"],[1,"panel-content"],["class","collapsed-icons",4,"ngIf"],["class","main-menu",4,"ngIf"],["class","sub-menu",4,"ngIf"],[1,"collapsed-icons"],["class","icon-btn",3,"disabled","click",4,"ngFor","ngForOf"],[1,"icon-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],[3,"ngSwitch"],[4,"ngSwitchCase"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","11","cy","11","r","8","stroke","currentColor","stroke-width","2"],["d","m21 21-4.35-4.35","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M14 2v6h6M12 18v-6M9 15h6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","3","stroke","currentColor","stroke-width","2"],["d","M12 1v6m0 6v6M4.22 4.22l4.24 4.24m5.08 5.08l4.24 4.24M1 12h6m6 0h6M4.22 19.78l4.24-4.24m5.08-5.08l4.24-4.24","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["x","4","y","6","width","16","height","12","rx","2","stroke","currentColor","stroke-width","2","fill","none"],["d","m8 12 2 2 5-5","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"main-menu"],[1,"sheet-header"],["aria-label","\uB2EB\uAE30",1,"close-btn",3,"click"],[1,"category-list"],["class","category-item",3,"disabled","click",4,"ngFor","ngForOf"],[1,"category-item",3,"click"],[1,"category-icon"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],[1,"category-content"],[1,"category-title"],[1,"category-count"],[1,"category-arrow"],[1,"sub-menu"],["aria-label","\uB4A4\uB85C\uAC00\uAE30",1,"back-btn",3,"click"],["class","menu-content",4,"ngIf"],["class","property-editor",4,"ngIf"],[1,"menu-content"],[1,"menu-item-btn",3,"click"],[1,"btn-icon"],[1,"btn-label"],[1,"menu-item-btn",3,"click","disabled"],[1,"page-selector"],["type","number",3,"change","value","min","max"],[1,"page-total"],[1,"menu-helper-text"],[1,"property-editor"],[1,"property-section"],[1,"property-row"],["type","number",1,"property-input",3,"change","value"],[1,"unit"],["class","property-section",4,"ngIf"],[1,"action-buttons"],[1,"btn-danger",3,"click"],[1,"btn-secondary",3,"click"],[1,"property-row","full-width"],["rows","3",1,"property-textarea",3,"change","value"],[1,"property-select",3,"change","value"],["label","\uD55C\uAE00 \uACE0\uB515\uCCB4"],["value","Noto Sans KR"],["value","NanumGothic"],["label","\uC601\uBB38 \uD3F0\uD2B8"],["value","Arial"],["value","Helvetica"],["type","color",1,"property-color",3,"change","value"],["type","text",1,"property-input",3,"change","value"],[1,"property-checkbox"],["type","checkbox",3,"change","checked"],[1,"helper-text"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){e&1&&(i(0,"app-bottom-sheet",0),u("sheetStateChange",function(s){return n.onSheetStateChange(s)})("close",function(){return n.closeSheet()}),i(1,"div",1),P(2,Ui,2,1,"div",2)(3,to,8,1,"div",3)(4,fo,14,7,"div",4),r()()),e&2&&(g("sheetState",n.sheetState),c(2),g("ngIf",n.sheetState==="collapsed"),c(),g("ngIf",(n.sheetState==="half"||n.sheetState==="full")&&!n.expandedMenuId),c(),g("ngIf",n.sheetState==="full"&&n.expandedMenuId))},dependencies:[_e,ne,j,Ct,_t,Fe,Ee,De,he],styles:[".fab-button[_ngcontent-%COMP%]{position:fixed;bottom:80px;right:20px;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#2196f3,#1976d2);color:#fff;font-size:24px;border:none;box-shadow:0 4px 12px #2196f366;z-index:999;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fabEntrance .3s cubic-bezier(.4,0,.2,1)}.fab-button[_ngcontent-%COMP%]:active{transform:scale(.95);box-shadow:0 2px 8px #2196f34d}.fab-button.hidden[_ngcontent-%COMP%]{display:none}@keyframes _ngcontent-%COMP%_fabEntrance{0%{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}.sheet-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .2s ease;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.bottom-sheet[_ngcontent-%COMP%]{position:fixed;left:0;right:0;bottom:0;background:#fff!important;color:#333!important;border-radius:16px 16px 0 0;box-shadow:0 -2px 16px #00000026;z-index:1001;transition:transform .3s cubic-bezier(.4,0,.2,1),max-height .3s cubic-bezier(.4,0,.2,1);max-height:90vh;display:flex;flex-direction:column}.bottom-sheet.collapsed[_ngcontent-%COMP%]{transform:translateY(calc(100% - 60px));max-height:60px}.bottom-sheet.half[_ngcontent-%COMP%]{transform:translateY(0);max-height:50vh}.bottom-sheet.full[_ngcontent-%COMP%]{transform:translateY(0);max-height:90vh;overflow-y:auto}.bottom-sheet[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:20px;display:flex;justify-content:center;align-items:center;cursor:ns-resize;z-index:10}.bottom-sheet[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]   .handle-bar[_ngcontent-%COMP%]{width:40px;height:4px;background-color:#ccc;border-radius:2px;transition:background-color .2s ease}.bottom-sheet[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]   .handle-bar.dragging[_ngcontent-%COMP%]{background-color:#2196f3}.bottom-sheet[_ngcontent-%COMP%]   .sheet-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;border-bottom:1px solid #e0e0e0;flex-shrink:0;background:#fff!important}.bottom-sheet[_ngcontent-%COMP%]   .sheet-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex:1;margin:0;font-size:18px;font-weight:600;text-align:center;color:#333!important}.bottom-sheet[_ngcontent-%COMP%]   .sheet-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%], .bottom-sheet[_ngcontent-%COMP%]   .sheet-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:32px;height:32px;background:transparent;border:none;font-size:24px;cursor:pointer;color:#666!important;transition:color .2s}.bottom-sheet[_ngcontent-%COMP%]   .sheet-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active, .bottom-sheet[_ngcontent-%COMP%]   .sheet-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:active{color:#2196f3!important}.bottom-sheet[_ngcontent-%COMP%]   .sheet-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{margin-right:auto}.bottom-sheet[_ngcontent-%COMP%]   .sheet-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{margin-left:auto}.drag-handle[_ngcontent-%COMP%]{padding:16px 0 12px;text-align:center;cursor:grab;flex-shrink:0;background:linear-gradient(to bottom,transparent 0%,rgba(0,0,0,.02) 100%);touch-action:none}.drag-handle[_ngcontent-%COMP%]:active{cursor:grabbing;background:#0000000d}.drag-handle[_ngcontent-%COMP%]   .handle-bar[_ngcontent-%COMP%]{width:48px;height:5px;background:#bbb!important;border-radius:3px;margin:0 auto;transition:all .2s ease;box-shadow:0 1px 2px #0000001a}.drag-handle[_ngcontent-%COMP%]:hover   .handle-bar[_ngcontent-%COMP%]{background:#888!important;width:56px}.drag-handle[_ngcontent-%COMP%]:active   .handle-bar[_ngcontent-%COMP%]{background:#666!important;width:56px;transform:scaleY(1.2)}.collapsed-icons[_ngcontent-%COMP%]{display:flex;overflow-x:auto;padding:8px 16px;gap:12px;flex-shrink:0;-ms-overflow-style:none;scrollbar-width:none}.collapsed-icons[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.collapsed-icons[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{min-width:48px;height:48px;font-size:24px;background:#f5f5f5!important;color:#333!important;border-radius:12px;border:none;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center}.collapsed-icons[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:active{transform:scale(.95);background:#e0e0e0!important}.collapsed-icons[_ngcontent-%COMP%]   .icon-btn.disabled[_ngcontent-%COMP%]{opacity:.4;cursor:not-allowed}.sheet-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;border-bottom:1px solid #e0e0e0;flex-shrink:0;background:#fff!important}.sheet-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex:1;margin:0;font-size:18px;font-weight:600;text-align:center;color:#333!important}.sheet-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%], .sheet-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:32px;height:32px;background:transparent;border:none;font-size:24px;cursor:pointer;color:#666!important;transition:color .2s}.sheet-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active, .sheet-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:active{color:#2196f3!important}.sheet-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{margin-right:auto}.sheet-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{margin-left:auto}.main-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden}.category-list[_ngcontent-%COMP%]{padding:8px 16px;overflow-y:auto;flex:1}.category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;margin-bottom:8px;background:#f5f5f5!important;color:#333!important;border-radius:12px;cursor:pointer;transition:all .2s}.category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]:active{background:#e0e0e0!important;transform:scale(.98)}.category-list[_ngcontent-%COMP%]   .category-item.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.category-list[_ngcontent-%COMP%]   .category-item.disabled[_ngcontent-%COMP%]:active{background:#f5f5f5!important;transform:none}.category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{font-size:32px;margin-right:16px;flex-shrink:0}.category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]{flex:1;min-width:0}.category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:4px;color:#333!important}.category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   .category-count[_ngcontent-%COMP%]{font-size:12px;color:#666!important}.category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-arrow[_ngcontent-%COMP%]{font-size:24px;color:#999!important;flex-shrink:0}.sub-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden}.menu-content[_ngcontent-%COMP%]{padding:8px 16px;overflow-y:auto;flex:1}.menu-content[_ngcontent-%COMP%]   .menu-item-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;padding:16px;margin-bottom:8px;background:#fff!important;color:#333!important;border:1px solid #e0e0e0;border-radius:12px;cursor:pointer;transition:all .2s}.menu-content[_ngcontent-%COMP%]   .menu-item-btn[_ngcontent-%COMP%]:active{background:#f5f5f5!important;transform:scale(.98)}.menu-content[_ngcontent-%COMP%]   .menu-item-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.menu-content[_ngcontent-%COMP%]   .menu-item-btn[_ngcontent-%COMP%]:disabled:active{background:#fff!important;transform:none}.menu-content[_ngcontent-%COMP%]   .menu-item-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:28px;margin-right:16px;flex-shrink:0;color:#333!important}.menu-content[_ngcontent-%COMP%]   .menu-item-btn[_ngcontent-%COMP%]   .btn-label[_ngcontent-%COMP%]{font-size:16px;text-align:left;color:#333!important}.menu-content[_ngcontent-%COMP%]   .page-selector[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;margin-top:16px;background:#f5f5f5;border-radius:12px}.menu-content[_ngcontent-%COMP%]   .page-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-right:12px}.menu-content[_ngcontent-%COMP%]   .page-selector[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px;padding:8px;border:1px solid #e0e0e0;border-radius:8px;font-size:14px;text-align:center}.menu-content[_ngcontent-%COMP%]   .page-selector[_ngcontent-%COMP%]   .page-total[_ngcontent-%COMP%]{margin-left:8px;font-size:14px;color:#666}.menu-content[_ngcontent-%COMP%]   .menu-helper-text[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:4px 4px 12px;line-height:1.4}.property-editor[_ngcontent-%COMP%]{padding:16px;overflow-y:auto;flex:1}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]{margin-bottom:24px}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin-bottom:12px;color:#666;text-transform:uppercase;letter-spacing:.5px}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:12px}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row.full-width[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row.full-width[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:auto;margin-bottom:8px}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:70px;font-size:14px;font-weight:500;flex-shrink:0}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-input[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1px solid #e0e0e0;border-radius:8px;font-size:14px;min-width:0}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #e0e0e0;border-radius:8px;font-size:14px;resize:vertical}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1px solid #e0e0e0;border-radius:8px;font-size:14px;background:#fff}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-color[_ngcontent-%COMP%]{width:60px;height:40px;border:1px solid #e0e0e0;border-radius:8px;cursor:pointer}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{margin-left:8px;font-size:12px;color:#999;flex-shrink:0}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;accent-color:#2196F3}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-checkbox[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#555}.property-editor[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:24px;padding-top:24px;border-top:1px solid #e0e0e0}.property-editor[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:14px;border-radius:8px;font-size:16px;font-weight:600;border:none;cursor:pointer;transition:all .2s}.property-editor[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.98)}.property-editor[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background:#f44336;color:#fff}.property-editor[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:active{background:#d32f2f}.property-editor[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.property-editor[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:active{background:#bdbdbd}@media (min-width: 768px){.bottom-sheet[_ngcontent-%COMP%]{max-width:400px;right:0;left:auto;border-radius:16px 0 0}.fab-button[_ngcontent-%COMP%]{right:40px}}@media (prefers-color-scheme: dark){.bottom-sheet[_ngcontent-%COMP%]{background:#1e1e1e;box-shadow:0 -2px 16px #00000080}.sheet-header[_ngcontent-%COMP%]{border-bottom-color:#333}.sheet-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff}.sheet-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%], .sheet-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#ccc}.category-item[_ngcontent-%COMP%]{background:#2a2a2a}.category-item[_ngcontent-%COMP%]:active{background:#333}.category-item[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{color:#fff}.category-item[_ngcontent-%COMP%]   .category-count[_ngcontent-%COMP%]{color:#999}.menu-item-btn[_ngcontent-%COMP%]{background:#2a2a2a;border-color:#333;color:#fff}.menu-item-btn[_ngcontent-%COMP%]:active{background:#333}.property-editor[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#999}.property-editor[_ngcontent-%COMP%]   .property-input[_ngcontent-%COMP%], .property-editor[_ngcontent-%COMP%]   .property-textarea[_ngcontent-%COMP%], .property-editor[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]{background:#2a2a2a;border-color:#333;color:#fff}}"],changeDetection:0})};var Ne=class a{constructor(t,e){this.indexedDbService=t;this.snackbar=e}loadPdfFile(t){try{console.log("\u{1F4C2} [DocumentService] PDF \uD30C\uC77C \uB85C\uB4DC:",t.fileName);let e={pdfSrc:t.pdfUrl,pdfBlob:t.pdfBlob,fileName:t.fileName,documentType:"pdf-viewer"};return Pn(e)}catch(e){throw console.error("\u274C [DocumentService] PDF \uB85C\uB4DC \uC2E4\uD328:",e),this.snackbar.showError("PDF \uD30C\uC77C\uC744 \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),e}}loadDocumentFromIndexedDB(t,e){return vn(this._loadDocumentFromIndexedDBAsync(t,e))}_loadDocumentFromIndexedDBAsync(t,e){return x(this,null,function*(){try{if(console.log("\u{1F4C2} [DocumentService] IndexedDB \uB85C\uB4DC:",t.fileName,"mode:",e.mode),console.log("\u{1F50D} [DocumentService] \uBB38\uC11C \uB370\uC774\uD130:",{id:t.id,title:t.title,hasPdfBase64:!!t.pdfBase64,pdfBase64Length:t.pdfBase64?.length||0,pagesCount:t.pages?.length||0,documentType:t.documentType,folderId:t.folderId}),!t.pdfBase64){let M=(t.fileName||t.title||"").toLowerCase().split(".").pop();throw M&&["jpg","jpeg","png","gif","bmp","webp"].includes(M)?new Error("\uC774\uBBF8\uC9C0 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):M&&["xlsx","xls","csv"].includes(M)?new Error("\uC5D1\uC140 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):M&&["docx","doc"].includes(M)?new Error("\uC6CC\uB4DC \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):M&&["pptx","ppt"].includes(M)?new Error("\uD30C\uC6CC\uD3EC\uC778\uD2B8 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):new Error("PDF \uD30C\uC77C\uB9CC \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC788\uC2B5\uB2C8\uB2E4.")}let n=yield this.base64ToBlob(t.pdfBase64),o=URL.createObjectURL(n),s="pdf-viewer",d,_;(e.mode==="editor"&&t.pages&&t.pages.length>0||e.mode==="auto"&&t.documentType==="editor"&&t.pages)&&(s="pdf-editor",d=t.pages,_=t.pages.length);let b={pdfSrc:o,pdfBlob:n,fileName:t.fileName||t.title,documentType:s,pdfPages:d,totalPages:_};return console.log("\u2705 [DocumentService] \uBB38\uC11C \uB85C\uB4DC \uC644\uB8CC:",{fileName:b.fileName,documentType:b.documentType,hasPdfPages:!!b.pdfPages,totalPages:b.totalPages}),b}catch(n){console.error("\u274C [DocumentService] IndexedDB \uB85C\uB4DC \uC2E4\uD328:",n);let o=n?.message||"\uBB38\uC11C\uB97C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.";throw this.snackbar.showError(o),n}})}saveDocument(t){return x(this,null,function*(){try{console.log("\u{1F4BE} [DocumentService] \uBB38\uC11C \uC800\uC7A5:",t.title);let n=(yield this.indexedDbService.getAllDocuments()).find(s=>s.title===t.title);n?(t.id=n.id,t.createdAt=n.createdAt,console.log("\u{1F4DD} [DocumentService] \uAE30\uC874 \uBB38\uC11C \uC5C5\uB370\uC774\uD2B8:",t.title)):console.log("\u{1F4DD} [DocumentService] \uC0C8 \uBB38\uC11C \uC800\uC7A5:",t.title),yield this.indexedDbService.saveDocument(t);let o=t.documentType==="viewer"?"PDF \uBDF0\uC5B4":"\uD3B8\uC9D1\uAE30";this.snackbar.showSuccess(`'${t.title}' \uBB38\uC11C\uAC00 ${o} \uBAA8\uB4DC\uB85C \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),console.log("\u2705 [DocumentService] \uBB38\uC11C \uC800\uC7A5 \uC644\uB8CC")}catch(e){throw console.error("\u274C [DocumentService] \uBB38\uC11C \uC800\uC7A5 \uC2E4\uD328:",e),this.snackbar.showError("\uBB38\uC11C \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),e}})}saveDocumentSimple(t,e,n,o,s){return x(this,null,function*(){try{console.log("\u{1F4BE} [DocumentService] \uAC04\uD3B8 \uC800\uC7A5:",t);let d="";if(o)d=yield this.blobToBase64(o);else if(s&&s.startsWith("blob:")){let S=yield(yield fetch(s)).blob();d=yield this.blobToBase64(S)}let _={id:this.generateDocumentId(),title:t,pages:e,elementCount:this.getTotalElementCount(e),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),version:"1.0",pdfSrc:s,pdfBase64:d||void 0,fileName:t,documentType:n};yield this.saveDocument(_)}catch(d){throw console.error("\u274C [DocumentService] \uAC04\uD3B8 \uC800\uC7A5 \uC2E4\uD328:",d),d}})}base64ToBlob(t){return x(this,null,function*(){return new Promise((e,n)=>{try{let o=t.includes(",")?t.split(",")[1]:t,s=atob(o),d=new Uint8Array(s.length);for(let b=0;b<s.length;b++)d[b]=s.charCodeAt(b);let _=new Blob([d],{type:"application/pdf"});e(_)}catch(o){n(o)}})})}blobToBase64(t){return x(this,null,function*(){return new Promise((e,n)=>{let o=new FileReader;o.onloadend=()=>e(o.result),o.onerror=n,o.readAsDataURL(t)})})}generateDocumentId(){return"doc_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}getTotalElementCount(t){return t.reduce((e,n)=>e+(n.elements?.length||0),0)}revokeBlobUrl(t){t&&t.startsWith("blob:")&&(URL.revokeObjectURL(t),console.log("\u{1F5D1}\uFE0F [DocumentService] Blob URL \uC815\uB9AC \uC644\uB8CC"))}static \u0275fac=function(e){return new(e||a)(Y(J),Y(U))};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var rt=class a{constructor(t,e,n,o,s,d,_){this.pdfAnalysisManager=t;this.pageContentBuilder=e;this.pdfThumbnailService=n;this.dialog=o;this.snackbar=s;this.appRef=d;this.injector=_}pageSelectorComponentRef=null;startPdfAnalysis(t,e=!1){return x(this,null,function*(){if(console.log("\u{1F50D} [AnalysisService] PDF \uBD84\uC11D \uC6CC\uD06C\uD50C\uB85C\uC6B0 \uC2DC\uC791"),e){let _=yield this.showEditorResumeDialog();if(_==="cancel")throw new Error("\uBD84\uC11D \uCDE8\uC18C\uB428");if(_==="continue")throw new Error("\uAE30\uC874 \uD3B8\uC9D1 \uACC4\uC18D")}let n=yield this.openPageSelectorModal(t.pdfSrc,0);if(!n.confirmed)throw new Error("\uD398\uC774\uC9C0 \uC120\uD0DD \uCDE8\uC18C\uB428");let o=yield this.executePdfAnalysis(t.pdfSrc,t.fileName,n.selectedPage),d={pdfPages:yield this.createCombinedDocument(o.summary,o.vectorData,o.imageData,o.textStreamData),pdfAnalysisData:o.summary,vectorData:o.vectorData,imageData:o.imageData,pdfTextStreamData:o.textStreamData};return console.log("\u2705 [AnalysisService] PDF \uBD84\uC11D \uC6CC\uD06C\uD50C\uB85C\uC6B0 \uC644\uB8CC"),d})}showEditorResumeDialog(){return x(this,null,function*(){return new Promise(t=>{this.dialog.open(yt,{width:"90%",maxWidth:"500px",data:{title:"\uD3B8\uC9D1 \uBAA8\uB4DC",message:`\uC774\uBBF8 \uD3B8\uC9D1 \uC911\uC778 \uBB38\uC11C\uAC00 \uC788\uC2B5\uB2C8\uB2E4.
\uC5B4\uB5BB\uAC8C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`}}).afterClosed().subscribe(n=>{t(n||"cancel")})})})}openPageSelectorModal(t,e){return x(this,null,function*(){console.log("\u{1F50D} [AnalysisService] \uD398\uC774\uC9C0 \uC120\uD0DD \uBAA8\uB2EC \uD45C\uC2DC");try{this.snackbar.showInfo("\uD398\uC774\uC9C0 \uC378\uB124\uC77C \uC0DD\uC131 \uC911...");let n=e;try{let s=window.pdfjsLib;s&&(n=(yield s.getDocument(t).promise).numPages,console.log("\u{1F4CA} [AnalysisService] PDF \uD398\uC774\uC9C0 \uC218:",n))}catch(s){console.warn("\u26A0\uFE0F [AnalysisService] PDF \uD398\uC774\uC9C0 \uC218 \uD655\uC778 \uC2E4\uD328:",s),n=1}let o=[];for(let s=1;s<=n;s++)o.push({pageNumber:s,thumbnail:"",selected:s===1,isLoading:!0});return new Promise(s=>{let d=In(Tt,{environmentInjector:this.injector});this.pageSelectorComponentRef=d,d.instance.isVisible=!0,d.instance.thumbnails=o,d.instance.close.subscribe(()=>{this.destroyPageSelectorModal(),s({confirmed:!1})}),d.instance.confirm.subscribe(b=>{console.log("\u2705 [AnalysisService] \uD398\uC774\uC9C0 \uC120\uD0DD \uC644\uB8CC:",b),this.destroyPageSelectorModal(),s({confirmed:!0,selectedPage:b})}),this.appRef.attachView(d.hostView);let _=d.hostView.rootNodes[0];document.body.appendChild(_),this.generateThumbnailsAsync(t,n,o)})}catch(n){throw console.error("\u274C [AnalysisService] \uD398\uC774\uC9C0 \uC120\uD0DD \uBAA8\uB2EC \uC2E4\uD328:",n),this.snackbar.showError("\uD398\uC774\uC9C0 \uC120\uD0DD \uBAA8\uB2EC\uC744 \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),n}})}generateThumbnailsAsync(t,e,n){return x(this,null,function*(){try{for(let o=0;o<e;o++){let s=o+1;try{let d=yield this.pdfThumbnailService.generateThumbnail(t,s,{scale:.3});n[o].thumbnail=d,n[o].isLoading=!1}catch(d){console.warn(`\u26A0\uFE0F [AnalysisService] \uD398\uC774\uC9C0 ${s} \uC378\uB124\uC77C \uC0DD\uC131 \uC2E4\uD328:`,d),n[o].isLoading=!1}}this.snackbar.showSuccess("\uC378\uB124\uC77C \uC0DD\uC131 \uC644\uB8CC!")}catch(o){console.error("\u274C [AnalysisService] \uC378\uB124\uC77C \uC0DD\uC131 \uC2E4\uD328:",o)}})}destroyPageSelectorModal(){this.pageSelectorComponentRef&&(this.appRef.detachView(this.pageSelectorComponentRef.hostView),this.pageSelectorComponentRef.destroy(),this.pageSelectorComponentRef=null)}cleanup(){console.log("\u{1F9F9} [AnalysisService] \uBD84\uC11D \uC791\uC5C5 \uC815\uB9AC \uC2DC\uC791"),this.pageSelectorComponentRef&&(console.log("\u{1F512} [AnalysisService] \uD398\uC774\uC9C0 \uC120\uD0DD \uBAA8\uB2EC \uAC15\uC81C \uC885\uB8CC"),this.destroyPageSelectorModal()),console.log("\u2705 [AnalysisService] \uBD84\uC11D \uC791\uC5C5 \uC815\uB9AC \uC644\uB8CC")}executePdfAnalysis(t,e,n){return x(this,null,function*(){try{this.snackbar.showInfo("PDF \uBD84\uC11D\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4..."),console.log("\u{1F3AF} [AnalysisService] PDF \uBD84\uC11D \uC2E4\uD589",{fileName:e,selectedPage:n});let o=yield this.pdfAnalysisManager.analyzePdf(t,e,(s,d)=>{console.log(`\u{1F4CA} \uBD84\uC11D \uC9C4\uD589: ${s}% - ${d}`)},{targetPage:n});return console.log("\u2705 [AnalysisService] PDF \uBD84\uC11D \uC644\uB8CC",{hasVectorData:!!o.vectorData,hasImageData:!!o.imageData,hasTextStreamData:!!o.textStreamData}),o}catch(o){throw console.error("\u274C [AnalysisService] PDF \uBD84\uC11D \uC2E4\uD328:",o),this.snackbar.showError("PDF \uBD84\uC11D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),o}})}createCombinedDocument(t,e,n,o){return x(this,null,function*(){console.log("\u{1F4C4} [AnalysisService] \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131 \uC2DC\uC791");try{this.snackbar.showInfo("\u{1F3A8} \uD63C\uD569 \uBB38\uC11C\uB97C \uC0DD\uC131\uD558\uB294 \uC911...");let s=t.pageWidth||595,d=t.pageHeight||842,_=this.pageContentBuilder.createPagesFromTextStream(o,n?.images||[],b=>{console.log("\u{1F4C4}",b)});return e&&e.pageDetails&&t.hasVectorGraphics&&(console.log("\u{1F3A8} [AnalysisService] \uBCA1\uD130 \uB370\uC774\uD130 \uCD94\uAC00 \uC2DC\uC791"),this.addVectorElementsToPages(_,e,s,d)),console.log("\u2705 [AnalysisService] \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131 \uC644\uB8CC:",_.length,"\uD398\uC774\uC9C0"),this.snackbar.showSuccess(`${_.length}\uD398\uC774\uC9C0\uC758 \uD63C\uD569 \uBB38\uC11C\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4!`),_}catch(s){throw console.error("\u274C [AnalysisService] \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131 \uC2E4\uD328:",s),this.snackbar.showError("\uBB38\uC11C \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),s}})}addVectorElementsToPages(t,e,n,o){if(!e||!e.pageDetails){console.log("\u26A0\uFE0F [AnalysisService] \uBCA1\uD130 \uB370\uC774\uD130 \uC5C6\uC74C");return}console.log("\u{1F4D0} [AnalysisService] \uBCA1\uD130 \uCD94\uAC00 \uC2DC\uC791:",{pageDetailsCount:e.pageDetails.length,pdfPagesCount:t.length}),e.pageDetails.forEach((s,d)=>{if(!s.svgContent){console.warn(`\u26A0\uFE0F [AnalysisService] \uD398\uC774\uC9C0 ${d+1}: svgContent \uC5C6\uC74C`);return}let _=t[d];if(!_){console.warn(`\u26A0\uFE0F [AnalysisService] \uD398\uC774\uC9C0 ${d+1}: \uD398\uC774\uC9C0 \uAC1D\uCCB4 \uC5C6\uC74C`);return}_.width=n,_.height=o;let b={id:`vector-${Date.now()}-${d}`,type:"svg",x:0,y:0,width:n,height:o,svgContent:s.svgContent,vectorData:s};_.elements.unshift(b),console.log(`\u2705 [AnalysisService] \uD398\uC774\uC9C0 ${d+1}\uC5D0 \uBCA1\uD130 \uCD94\uAC00 \uC644\uB8CC`)})}generateThumbnails(t,e,n){return x(this,null,function*(){let o=e.map(s=>({pageNumber:s,thumbnail:"",selected:s===1,isLoading:!0}));return yield this.pdfThumbnailService.generateThumbnailsBatch(t,e,{scale:.3,quality:.8,format:"image/webp"},(s,d)=>{let _=o.find(b=>b.pageNumber===s);_&&(_.thumbnail=d,_.isLoading=!1),n&&n(s,d)}),o})}static \u0275fac=function(e){return new(e||a)(Y(Mt),Y(wt),Y(li),Y(it),Y(U),Y(Dn),Y(wn))};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var Le=class a{currentDocumentSubject=new Ae(null);currentDocument$=this.currentDocumentSubject.asObservable();constructor(){console.log("\u{1F527} [EditorService] \uC11C\uBE44\uC2A4 \uCD08\uAE30\uD654")}setEditingDocument(t){console.log("\u{1F4DD} [EditorService] \uD3B8\uC9D1 \uBB38\uC11C \uC124\uC815:",t.fileName);let e=se(oe({},t),{lastModified:new Date().toISOString()});this.currentDocumentSubject.next(e),console.log("\u2705 [EditorService] \uC0C1\uD0DC \uC800\uC7A5 \uC644\uB8CC")}getEditingDocument(){let t=this.currentDocumentSubject.value;return console.log("\u{1F4D6} [EditorService] \uD3B8\uC9D1 \uBB38\uC11C \uAC00\uC838\uC624\uAE30:",t?.fileName||"null"),t}updateEditingDocument(t){let e=this.currentDocumentSubject.value;if(!e){console.warn("\u26A0\uFE0F [EditorService] \uC5C5\uB370\uC774\uD2B8\uD560 \uC0C1\uD0DC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let n=se(oe(oe({},e),t),{lastModified:new Date().toISOString()});this.currentDocumentSubject.next(n),console.log("\u{1F504} [EditorService] \uC0C1\uD0DC \uC5C5\uB370\uC774\uD2B8 \uC644\uB8CC")}clearEditingDocument(){console.log("\u{1F5D1}\uFE0F [EditorService] \uD3B8\uC9D1 \uBB38\uC11C \uC0C1\uD0DC \uCD08\uAE30\uD654"),this.currentDocumentSubject.next(null)}hasEditingDocument(){let t=this.currentDocumentSubject.value!==null;return console.log("\u2705 [EditorService] \uD3B8\uC9D1 \uBB38\uC11C \uC874\uC7AC:",t),t}getStateInfo(){let t=this.currentDocumentSubject.value;return t?{hasDocument:!0,fileName:t.fileName,totalPages:t.totalPages,currentPage:t.currentPage,elementCount:t.pdfPages.reduce((e,n)=>e+(n.elements?.length||0),0),hasAnalysisData:!!t.pdfAnalysisData,lastModified:t.lastModified}:{hasDocument:!1}}backupToSessionStorage(){let t=this.currentDocumentSubject.value;if(t)try{let e=se(oe({},t),{pdfBlob:null,pdfSrc:null});sessionStorage.setItem("ezm-editor-state",JSON.stringify(e)),console.log("\u{1F4BE} [EditorService] \uC138\uC158 \uC2A4\uD1A0\uB9AC\uC9C0 \uBC31\uC5C5 \uC644\uB8CC")}catch(e){console.error("\u274C [EditorService] \uC138\uC158 \uC2A4\uD1A0\uB9AC\uC9C0 \uBC31\uC5C5 \uC2E4\uD328:",e)}}restoreFromSessionStorage(){try{let t=sessionStorage.getItem("ezm-editor-state");if(t){let e=JSON.parse(t);return this.currentDocumentSubject.next(e),console.log("\u{1F4C2} [EditorService] \uC138\uC158 \uC2A4\uD1A0\uB9AC\uC9C0 \uBCF5\uC6D0 \uC644\uB8CC"),!0}}catch(t){console.error("\u274C [EditorService] \uC138\uC158 \uC2A4\uD1A0\uB9AC\uC9C0 \uBCF5\uC6D0 \uC2E4\uD328:",t)}return!1}clearSessionStorage(){sessionStorage.removeItem("ezm-editor-state"),console.log("\u{1F5D1}\uFE0F [EditorService] \uC138\uC158 \uC2A4\uD1A0\uB9AC\uC9C0 \uBC31\uC5C5 \uC0AD\uC81C")}static \u0275fac=function(e){return new(e||a)};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};var ho=["drawingCanvas"];function Co(a,t){if(a&1){let e=w();i(0,"shared-pdf-viewer",52),u("pdfLoaded",function(o){f(e);let s=p();return h(s.onPdfLoaded(o))})("pageChange",function(o){f(e);let s=p();return h(s.onPageChanged(o))}),r()}if(a&2){let e=p();g("pdfSrc",e.pdfSrc)("isMobile",!0)("config",e.pdfViewerConfig)("showFloatingZoom",!1)}}function _o(a,t){if(a&1){let e=w();i(0,"canvas",53,1),u("touchstart",function(o){f(e);let s=p();return h(s.onTouchStart(o))})("touchmove",function(o){f(e);let s=p();return h(s.onTouchMove(o))})("touchend",function(o){f(e);let s=p();return h(s.onTouchEnd(o))})("mousedown",function(o){f(e);let s=p();return h(s.onMouseDown(o))})("mousemove",function(o){f(e);let s=p();return h(s.onMouseMove(o))})("mouseup",function(o){f(e);let s=p();return h(s.onMouseUp(o))}),r()}}function bo(a,t){if(a&1){let e=w();i(0,"div",54)(1,"button",55),u("click",function(){f(e);let o=p();return h(o.onZoomIn())}),C(),i(2,"svg",8),m(3,"circle",24)(4,"path",56)(5,"line",57)(6,"line",58),r()(),v(),i(7,"button",59),u("click",function(){f(e);let o=p();return h(o.onZoomOut())}),C(),i(8,"svg",8),m(9,"circle",24)(10,"path",56)(11,"line",58),r()(),v(),i(12,"div",60),l(13),r()()}if(a&2){let e=p();c(13),D("",e.zoomLevel,"%")}}function xo(a,t){if(a&1){let e=w();i(0,"div",61),m(1,"img",62),i(2,"h3"),l(3,"PDF \uBB38\uC11C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"),r(),i(4,"p"),l(5,"\uD30C\uC77C\uC744 \uC120\uD0DD\uD558\uC5EC \uBB38\uC11C\uB97C \uC5F4\uC5B4\uBCF4\uC138\uC694."),r(),i(6,"button",63),u("click",function(){f(e);let o=p();return h(o.goBack())}),l(7,"\uD648\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30"),r()()}}function vo(a,t){if(a&1){let e=w();i(0,"shared-pdf-tools-panel-mobile",64),u("analyze",function(){f(e);let o=p();return h(o.onAddAnalyze())})("saveDocument",function(){f(e);let o=p();return h(o.onSaveDocument())}),r()}if(a&2){let e=p();g("currentPage",e.currentPage)("totalPages",e.totalPages)("isPdfViewer",!0)}}function Po(a,t){if(a&1){let e=w();i(0,"shared-pdf-thumbnail-strip",65),u("pageSelected",function(o){f(e);let s=p();return h(s.onThumbnailPageSelected(o))}),r()}if(a&2){let e=p();g("pdfSrc",e.pdfSrc)("totalPages",e.totalPages)("currentPage",e.currentPage)("visible",e.showThumbnails)}}function Mo(a,t){if(a&1){let e=w();i(0,"button",88),u("click",function(){let o=f(e).$implicit,s=p(2);return h(s.onDrawingColorChange(o))}),r()}if(a&2){let e=t.$implicit,n=p(2);L("background-color",e),R("active",n.drawingColor===e&&!n.isEraserMode),le("aria-label","\uC0C9\uC0C1 "+e)}}function wo(a,t){if(a&1){let e=w();i(0,"div",66)(1,"div",67)(2,"button",68),u("click",function(){f(e);let o=p();return h(o.closeDrawingMode())}),C(),i(3,"svg",47),m(4,"line",69)(5,"line",70),r()(),v(),i(6,"h3",71),l(7,"\uADF8\uB9AC\uAE30"),r()(),i(8,"div",72)(9,"div",73)(10,"div",74)(11,"span",75),l(12,"1"),r(),i(13,"span",76),l(14,"\uADF8\uB9AC\uAE30 \uB450\uAED8\uC870\uC808"),r()(),i(15,"div",77)(16,"input",78),W("ngModelChange",function(o){f(e);let s=p();return $(s.drawingThickness,o)||(s.drawingThickness=o),h(o)}),u("input",function(){f(e);let o=p();return h(o.onDrawingThicknessChange(o.drawingThickness))}),r(),i(17,"div",79)(18,"div",80),l(19),r(),m(20,"div",81),r()()(),i(21,"div",73)(22,"div",74)(23,"span",75),l(24,"2"),r(),i(25,"span",76),l(26,"\uADF8\uB9AC\uAE30 \uCEEC\uB7EC \uC120\uD0DD"),r()(),i(27,"div",82),P(28,Mo,1,5,"button",83),i(29,"button",84),u("click",function(){f(e);let o=p();return h(o.onEraserMode())}),C(),i(30,"svg",8),m(31,"path",85)(32,"path",86)(33,"path",87),r()()()()()()}if(a&2){let e=p();c(16),G("ngModel",e.drawingThickness),c(3),D("\uB450\uAED8: ",e.drawingThickness),c(),L("width",e.drawingThickness*2,"px")("height",e.drawingThickness*2,"px"),c(8),g("ngForOf",e.availableColors),c(),R("active",e.isEraserMode)}}function yo(a,t){if(a&1){let e=w();i(0,"div",89)(1,"div",90),l(2),r(),i(3,"div",91)(4,"button",92),u("click",function(){f(e);let o=p();return h(o.previousSearchResult())}),C(),i(5,"svg",47),m(6,"path",93),r()(),v(),i(7,"button",94),u("click",function(){f(e);let o=p();return h(o.nextSearchResult())}),C(),i(8,"svg",47),m(9,"path",95),r()()()()}if(a&2){let e=p();c(2),ze(" ",e.currentSearchIndex+1," / ",e.searchResults.length," \uAC80\uC0C9 \uACB0\uACFC ")}}function So(a,t){if(a&1){let e=w();me(0),i(1,"div",96)(2,"button",97),u("click",function(){f(e);let o=p();return h(o.cancelRename())}),C(),i(3,"svg",98),m(4,"path",99),r()(),v(),i(5,"h3",42),l(6,"\uC774\uB984 \uBCC0\uACBD"),r()(),i(7,"div",100)(8,"label",101),l(9,"\uC0C8 \uC774\uB984"),r(),i(10,"input",102),W("ngModelChange",function(o){f(e);let s=p();return $(s.renameInputValue,o)||(s.renameInputValue=o),h(o)}),r(),i(11,"p",103),l(12,".pdf \uD655\uC7A5\uC790\uB294 \uC790\uB3D9\uC73C\uB85C \uCD94\uAC00\uB429\uB2C8\uB2E4."),r(),i(13,"div",104)(14,"button",105),u("click",function(){f(e);let o=p();return h(o.cancelRename())}),l(15,"\uCDE8\uC18C"),r(),i(16,"button",106),u("click",function(){f(e);let o=p();return h(o.confirmRename())}),l(17,"\uC644\uB8CC"),r()()(),ue()}if(a&2){let e=p();c(10),G("ngModel",e.renameInputValue)}}function Oo(a,t){if(a&1){let e=w();i(0,"div",41)(1,"h3",42),l(2),r()(),i(3,"div",107)(4,"button",108),u("click",function(){f(e);let o=p();return h(o.onFileMenuAction("edit"))}),C(),i(5,"svg",109),m(6,"path",110)(7,"path",111),r(),v(),i(8,"span"),l(9,"PDF \uD3B8\uC9D1"),r()(),i(10,"button",108),u("click",function(){f(e);let o=p();return h(o.onFileMenuAction("share"))}),C(),i(11,"svg",109),m(12,"path",112)(13,"polyline",113)(14,"line",114),r(),v(),i(15,"span"),l(16,"\uACF5\uC720"),r()(),i(17,"button",108),u("click",function(){f(e);let o=p();return h(o.onFileMenuAction("rename"))}),C(),i(18,"svg",109),m(19,"path",110)(20,"path",111),r(),v(),i(21,"span"),l(22,"\uC774\uB984\uBCC0\uACBD"),r()(),i(23,"button",108),u("click",function(){f(e);let o=p();return h(o.onFileMenuAction("duplicate"))}),C(),i(24,"svg",109),m(25,"rect",115)(26,"path",116),r(),v(),i(27,"span"),l(28,"\uBCF5\uC81C"),r()(),i(29,"button",117),u("click",function(){f(e);let o=p();return h(o.onFileMenuAction("delete"))}),C(),i(30,"svg",109),m(31,"path",118)(32,"line",119)(33,"line",120),r(),v(),i(34,"span"),l(35,"\uC0AD\uC81C"),r()()()}if(a&2){let e=p();c(2),E(e.fileName)}}var jt=class a{constructor(t,e,n,o,s){this.router=t;this.route=e;this.dialog=n;this.geminiApiManager=o;this.toolActionService=s}pdfSrc=null;pdfBlob=null;fileName="";documentType="empty";currentActiveTab="viewer";currentDocumentId=null;currentDocumentIsFavorite=!1;pdfPages=[];currentPage=1;totalPages=0;zoomLevel=100;showThumbnails=!1;isDrawingMode=!1;isEraserMode=!1;drawingThickness=5;drawingColor="#000000";availableColors=["#FFFFFF","#FFEB3B","#4CAF50","#2196F3","#E91E63","#000000"];isSearchMode=!1;searchQuery="";searchResults=[];currentSearchIndex=0;pdfAnalysisData=null;vectorData=null;imageData=null;pdfTextStreamData=null;hasGeneratedDocument=!1;pdfViewerConfig={zoom:"page-width",height:"100%",mobileFriendlyZoom:"page-width",currentPage:1};toolsPanel;drawingCanvasRef;isDrawing=!1;lastX=0;lastY=0;canvasContext=null;fileMenuSheetState="collapsed";currentDocument=null;isRenameMode=!1;renameInputValue="";searchSheetState="collapsed";snackbar=O(U);documentService=O(Ne);analysisService=O(rt);editorStateService=O(Le);indexedDbService=O(J);pdfViewerService=O(Zn);toggleFileMenu(){this.fileMenuSheetState==="collapsed"?this.fileMenuSheetState="half":(this.fileMenuSheetState="collapsed",this.isRenameMode=!1)}closeFileMenu(){this.fileMenuSheetState="collapsed",this.isRenameMode=!1}onFileMenuAction(t){switch(t){case"share":this.shareCurrentDocument();break;case"rename":this.isRenameMode=!0,this.renameInputValue=this.fileName.replace(/\.pdf$/i,""),this.fileMenuSheetState="full";break;case"duplicate":this.duplicateCurrentDocument();break;case"delete":this.deleteCurrentDocument();break;case"edit":this.startPdfEdit();break}}startPdfEdit(){if(this.closeFileMenu(),this.documentType==="pdf-editor"&&this.pdfPages&&this.pdfPages.length>0){console.log("\u2705 [EZM] \uC774\uBBF8 \uD3B8\uC9D1 \uBAA8\uB4DC\uC785\uB2C8\uB2E4."),this.snackbar.showInfo("\uC774\uBBF8 \uD3B8\uC9D1 \uBAA8\uB4DC\uC785\uB2C8\uB2E4.");return}console.log("\u{1F50D} [EZM] PDF \uD3B8\uC9D1 \uC2DC\uC791 - \uBD84\uC11D \uC2E4\uD589"),this.onAddAnalyze()}openToolsPanel(){this.toolsPanel&&this.toolsPanel.toggleSheet()}shareCurrentDocument(){return x(this,null,function*(){if(this.closeFileMenu(),!!this.currentDocument)try{let t=this.currentDocument.pdfBase64||this.currentDocument.originalPdfBase64;if(!t){this.snackbar.showError("\uACF5\uC720\uD560 PDF \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let e=this.currentDocument.fileName||this.currentDocument.title+".pdf";if(this.tryNativeShare(e,t)){console.log("\u2705 Native \uACF5\uC720 \uD638\uCD9C \uC644\uB8CC"),this.snackbar.showSuccess("\uBB38\uC11C\uB97C \uACF5\uC720\uD588\uC2B5\uB2C8\uB2E4.");return}if(typeof navigator<"u"&&navigator.share){let n=this.base64ToBlob(t,"application/pdf"),o=[];try{o.push(new File([n],e,{type:"application/pdf"}))}catch(d){console.warn("File \uAC1D\uCCB4 \uC0DD\uC131 \uC2E4\uD328",d)}let s={title:e,text:`${e} \uBB38\uC11C\uB97C \uACF5\uC720\uD569\uB2C8\uB2E4.`};o.length&&(typeof navigator.canShare!="function"||navigator.canShare({files:o}))&&(s.files=o),yield navigator.share(s),this.snackbar.showSuccess("\uBB38\uC11C\uB97C \uACF5\uC720\uD588\uC2B5\uB2C8\uB2E4.");return}console.log("\u{1F4E5} Web Share API \uBBF8\uC9C0\uC6D0 - \uB2E4\uC6B4\uB85C\uB4DC \uC0AC\uC6A9"),this.downloadFile(e,t),this.snackbar.showSuccess("\uD30C\uC77C\uC774 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){if(t?.name==="AbortError")return;console.error("\uBB38\uC11C \uACF5\uC720 \uC2E4\uD328:",t),this.snackbar.showError("\uBB38\uC11C \uACF5\uC720\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}tryNativeShare(t,e){if(typeof window<"u"&&window.parent!==window)try{return console.log("\u{1F4E8} postMessage\uB97C \uD1B5\uD55C \uB124\uC774\uD2F0\uBE0C \uD1B5\uC2E0 \uC2DC\uB3C4"),window.parent.postMessage({type:"share",fileName:t,data:e},"*"),!0}catch(n){console.warn("postMessage \uC2E4\uD328:",n)}return window.ReactNativeWebView?(console.log("\u{1F4F1} React Native WebView \uAC10\uC9C0"),window.ReactNativeWebView.postMessage(JSON.stringify({type:"share",fileName:t,data:e})),!0):window.webkit?.messageHandlers?.shareFile?(console.log("\u{1F34E} iOS WKWebView \uAC10\uC9C0"),window.webkit.messageHandlers.shareFile.postMessage({fileName:t,data:e}),!0):window.Android?.shareFile?(console.log("\u{1F916} Android WebView \uAC10\uC9C0"),window.Android.shareFile(t,e),!0):(console.log("\u{1F310} Native Bridge \uBBF8\uAC10\uC9C0 - Web Share API \uC2DC\uB3C4"),!1)}downloadFile(t,e){let n=this.base64ToBlob(e,"application/pdf"),o=URL.createObjectURL(n),s=document.createElement("a");s.href=o,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)}confirmRename(){return x(this,null,function*(){if(!this.currentDocument)return;let t=this.renameInputValue.trim();if(!t){this.snackbar.showWarning("\uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694.");return}try{this.currentDocument.title=t,this.currentDocument.fileName=t+".pdf",yield this.indexedDbService.updateDocument(this.currentDocument),this.fileName=t+".pdf",this.snackbar.showSuccess("\uD30C\uC77C \uC774\uB984\uC774 \uBCC0\uACBD\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.isRenameMode=!1,this.fileMenuSheetState="collapsed"}catch(e){console.error("\uD30C\uC77C \uC774\uB984 \uBCC0\uACBD \uC2E4\uD328:",e),this.snackbar.showError("\uD30C\uC77C \uC774\uB984\uC744 \uBCC0\uACBD\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}cancelRename(){this.isRenameMode=!1,this.fileMenuSheetState="half"}duplicateCurrentDocument(){return x(this,null,function*(){if(this.closeFileMenu(),!!this.currentDocument)try{let t=new Date().toISOString(),e=(this.currentDocument.title||this.currentDocument.fileName||"\uBB38\uC11C").replace(/\.pdf$/i,""),n=se(oe({},this.currentDocument),{id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:`${e} \uC0AC\uBCF8`,fileName:`${e}_\uC0AC\uBCF8.pdf`,createdAt:t,updatedAt:t});yield this.indexedDbService.saveDocument(n),this.snackbar.showSuccess("\uC0AC\uBCF8\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("\uD30C\uC77C \uBCF5\uC81C \uC2E4\uD328:",t),this.snackbar.showError("\uD30C\uC77C\uC744 \uBCF5\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}deleteCurrentDocument(){return x(this,null,function*(){if(!(!this.currentDocument||!(yield ve(`"${this.fileName}" \uD30C\uC77C\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`))))try{yield this.indexedDbService.deleteDocument(this.currentDocument.id),this.snackbar.showSuccess("\uD30C\uC77C\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/myfiles","my-files"])}catch(e){console.error("\uD30C\uC77C \uC0AD\uC81C \uC2E4\uD328:",e),this.snackbar.showError("\uD30C\uC77C \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}base64ToBlob(t,e="application/pdf"){let n=t.includes(",")?t.split(",")[1]:t,o=atob(n),s=new Array(o.length);for(let _=0;_<o.length;_++)s[_]=o.charCodeAt(_);let d=new Uint8Array(s);return new Blob([d],{type:e})}ngOnInit(){this.route.queryParams.subscribe(t=>x(this,null,function*(){if(console.log("\u{1F50D} Query params:",t),t.mode==="new-document"){console.log("\u{1F4DD} [EzReaderMobile] \uC0C8\uBB38\uC11C \uB9CC\uB4E4\uAE30 \uBAA8\uB4DC"),this.initializeNewDocument(t.fileName||"\uC0C8\uBB38\uC11C.pdf");return}if(t.docId){console.log("\u{1F4C2} [EzReaderMobile] docId\uB85C \uBB38\uC11C \uB85C\uB4DC:",t.docId);try{let o=yield this.indexedDbService.getDocumentById(t.docId);if(o){yield this.loadDocumentFromIndexedDB(o,"viewer");return}else{console.error("\u274C \uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4:",t.docId),this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.goBack();return}}catch(o){console.error("\u274C \uBB38\uC11C \uB85C\uB4DC \uC2E4\uD328:",o),this.snackbar.showError("\uBB38\uC11C \uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),this.goBack();return}}let n=this.router.getCurrentNavigation()?.extras?.state||history.state;if(console.log("\u{1F50D} Router state:",n),n?.pdfUrl)this.loadNewPdfFile(n.pdfUrl,n.fileName,n.pdfBlob);else if(n?.document){let o=n.mode||"auto";this.loadDocumentFromIndexedDB(n.document,o)}else console.log("\u26A0\uFE0F No PDF data - showing empty state"),this.documentType="empty"}))}ngAfterViewInit(){console.log("\u{1F527} ngAfterViewInit - toolsPanel:",!!this.toolsPanel)}initializeNewDocument(t){console.log("\u{1F4DD} [EzReaderMobile] \uC0C8\uBB38\uC11C \uCD08\uAE30\uD654:",t),this.documentType="pdf-editor",this.fileName=t,this.pdfPages=[{pageNumber:1,elements:[],width:595,height:842}],this.totalPages=1,this.currentPage=1,this.pdfSrc=null,this.pdfBlob=null,console.log("\u2705 [EzReaderMobile] \uC0C8\uBB38\uC11C \uCD08\uAE30\uD654 \uC644\uB8CC",{fileName:this.fileName,pages:this.pdfPages.length,documentType:this.documentType})}loadNewPdfFile(t,e,n){this.documentService.loadPdfFile({pdfUrl:t,fileName:e,pdfBlob:n}).subscribe({next:o=>{this.pdfSrc=o.pdfSrc,this.pdfBlob=o.pdfBlob,this.fileName=o.fileName,this.documentType=o.documentType,console.log("\u2705 PDF \uD30C\uC77C \uB85C\uB4DC \uC644\uB8CC:",e)},error:o=>{console.error("PDF \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328:",o),this.goBack()}})}loadDocumentFromIndexedDB(t,e="auto"){return x(this,null,function*(){this.currentDocument=t,this.documentService.loadDocumentFromIndexedDB(t,{mode:e}).subscribe({next:n=>x(this,null,function*(){if(this.pdfSrc=n.pdfSrc,this.pdfBlob=n.pdfBlob,this.fileName=n.fileName,this.documentType=n.documentType,this.currentDocumentId=t.id,n.pdfPages&&(this.pdfPages=n.pdfPages,this.totalPages=n.totalPages||n.pdfPages.length,this.currentPage=1),console.log("\u2705 IndexedDB \uBB38\uC11C \uB85C\uB4DC \uC644\uB8CC:",this.fileName),e==="viewer"||!e||e==="auto")try{yield this.indexedDbService.addToRecentFiles(t.id,n.fileName,t.thumbnail,t.documentType,t.folderId),console.log("\u{1F4CC} \uCD5C\uADFC \uBCF8 \uD30C\uC77C\uC5D0 \uCD94\uAC00\uB428:",n.fileName)}catch(o){console.error("\uCD5C\uADFC \uD30C\uC77C \uCD94\uAC00 \uC2E4\uD328:",o)}else console.log("\u23ED\uFE0F \uD3B8\uC9D1/\uBCC0\uD658 \uBAA8\uB4DC - \uCD5C\uADFC \uD30C\uC77C\uC5D0 \uCD94\uAC00 \uC548\uD568");this.updateFavoriteStatus(),(e==="editor"||e==="convert")&&!n.pdfPages&&(console.log("\u{1F4CA} [EZM] \uD398\uC774\uC9C0 \uB370\uC774\uD130 \uC5C6\uC74C \u2192 \uC790\uB3D9 \uBD84\uC11D \uC2DC\uC791"),setTimeout(()=>{this.onAddAnalyze()},300))}),error:n=>{console.error("\uBB38\uC11C \uB85C\uB4DC \uC2E4\uD328:",n),this.goBack()}})})}onAddAnalyze(){return x(this,null,function*(){if(console.log("\u{1F50D} [EZM] PDF \uBD84\uC11D \uC2DC\uC791"),!this.pdfSrc||!this.fileName){this.snackbar.showError("PDF \uD30C\uC77C\uC744 \uBA3C\uC800 \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}try{let t=yield this.analysisService.startPdfAnalysis({pdfSrc:this.pdfSrc,fileName:this.fileName},this.hasGeneratedDocument&&this.documentType==="pdf-editor");console.log("\u2705 [EZM] PDF \uBD84\uC11D \uC644\uB8CC, Editor\uB85C \uC804\uD658"),this.editorStateService.setEditingDocument({fileName:this.fileName,pdfSrc:this.pdfSrc,pdfBlob:this.pdfBlob,pdfPages:t.pdfPages,currentPage:1,totalPages:t.pdfPages.length,pdfAnalysisData:t.pdfAnalysisData,vectorData:t.vectorData,imageData:t.imageData,pdfTextStreamData:t.pdfTextStreamData,hasGeneratedDocument:!0,lastModified:new Date().toISOString()}),this.router.navigate(["/ezm/editor"])}catch(t){if(t.message==="\uD398\uC774\uC9C0 \uC120\uD0DD \uCDE8\uC18C\uB428"){console.log("\u274C [EZM] \uC0AC\uC6A9\uC790\uAC00 \uD398\uC774\uC9C0 \uC120\uD0DD \uCDE8\uC18C - \uB4A4\uB85C\uAC00\uAE30"),this.goBack();return}else if(t.message==="\uBD84\uC11D \uCDE8\uC18C\uB428"){console.log("\u274C [EZM] \uC0AC\uC6A9\uC790\uAC00 \uBD84\uC11D \uCDE8\uC18C - \uB4A4\uB85C\uAC00\uAE30"),this.goBack();return}else if(t.message==="\uAE30\uC874 \uD3B8\uC9D1 \uACC4\uC18D"){console.log("\u2705 [EZM] \uAE30\uC874 \uD3B8\uC9D1 \uACC4\uC18D");return}console.error("\u274C [EZM] PDF \uBD84\uC11D \uC2E4\uD328:",t),this.snackbar.showError("PDF \uBD84\uC11D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}onPdfLoaded(t){console.log("\u2705 PDF \uB85C\uB4DC \uC644\uB8CC:",t),this.totalPages=t.pagesCount||0,this.currentPage=1}onThumbnailPageSelected(t){console.log("\u{1F4C4} \uC378\uB124\uC77C\uC5D0\uC11C \uD398\uC774\uC9C0 \uC120\uD0DD:",t),this.currentPage=t,this.pdfViewerConfig=se(oe({},this.pdfViewerConfig),{currentPage:t})}onPageChanged(t){console.log("\u{1F4C4} \uD398\uC774\uC9C0 \uBCC0\uACBD:",t),this.currentPage=t}onZoomIn(){this.zoomLevel=Math.min(this.zoomLevel+25,300),this.updateZoomConfig(),console.log("\u{1F50D} \uD655\uB300:",this.zoomLevel)}onZoomOut(){this.zoomLevel=Math.max(this.zoomLevel-25,50),this.updateZoomConfig(),console.log("\u{1F50D} \uCD95\uC18C:",this.zoomLevel)}updateZoomConfig(){this.pdfViewerConfig=se(oe({},this.pdfViewerConfig),{zoom:this.zoomLevel.toString()})}toggleThumbnails(){this.showThumbnails=!this.showThumbnails,console.log("\u{1F4C4} \uC378\uB124\uC77C \uD45C\uC2DC:",this.showThumbnails)}toggleFavorite(){return x(this,null,function*(){if(!this.currentDocumentId){this.snackbar.showWarning("\uBB38\uC11C \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{yield this.documentService.indexedDbService.toggleFavorite(this.currentDocumentId),this.currentDocumentIsFavorite=!this.currentDocumentIsFavorite;let t=this.currentDocumentIsFavorite?`"${this.fileName}"\uC744(\uB97C) \uC990\uACA8\uCC3E\uAE30\uC5D0 \uCD94\uAC00\uD588\uC2B5\uB2C8\uB2E4.`:`"${this.fileName}"\uC744(\uB97C) \uC990\uACA8\uCC3E\uAE30\uC5D0\uC11C \uC81C\uAC70\uD588\uC2B5\uB2C8\uB2E4.`;this.snackbar.showSuccess(t),console.log("\u2B50 \uC990\uACA8\uCC3E\uAE30 \uC0C1\uD0DC:",this.currentDocumentIsFavorite)}catch(t){console.error("\u274C \uC990\uACA8\uCC3E\uAE30 \uD1A0\uAE00 \uC2E4\uD328:",t),this.snackbar.showError("\uC990\uACA8\uCC3E\uAE30 \uBCC0\uACBD\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}updateFavoriteStatus(){return x(this,null,function*(){if(!this.currentDocumentId){this.currentDocumentIsFavorite=!1;return}try{let t=yield this.documentService.indexedDbService.getDocumentById(this.currentDocumentId);this.currentDocumentIsFavorite=t?.isFavorite||!1,console.log("\u2B50 \uC990\uACA8\uCC3E\uAE30 \uC0C1\uD0DC \uB85C\uB4DC:",this.currentDocumentIsFavorite)}catch(t){console.error("\u274C \uC990\uACA8\uCC3E\uAE30 \uC0C1\uD0DC \uB85C\uB4DC \uC2E4\uD328:",t),this.currentDocumentIsFavorite=!1}})}onSaveDocument(){return x(this,null,function*(){try{console.log("\u{1F4BE} [EzReaderMobile] \uBB38\uC11C \uC800\uC7A5 \uC2DC\uC791");let t=prompt("\uBB38\uC11C \uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694:",this.fileName||"\uC0C8\uBB38\uC11C.pdf");if(!t||t.trim()===""){console.log("\u274C \uC81C\uBAA9 \uC785\uB825 \uCDE8\uC18C\uB428");return}this.snackbar.showInfo("\uBB38\uC11C\uB97C \uC800\uC7A5\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4..."),yield this.documentService.saveDocumentSimple(t.trim(),this.pdfPages,this.documentType==="pdf-editor"?"editor":"viewer",this.pdfBlob||void 0,this.pdfSrc||void 0),this.fileName=t.trim();let e=yield this.documentService.indexedDbService.getDocumentByTitle(this.fileName);e&&(this.currentDocumentId=e.id,yield this.updateFavoriteStatus()),console.log("\u2705 \uBB38\uC11C \uC800\uC7A5 \uC644\uB8CC")}catch(t){console.error("\u274C \uBB38\uC11C \uC800\uC7A5 \uC2E4\uD328:",t),this.snackbar.showError("\uBB38\uC11C \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}goBack(){this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.router.navigate(["/ezm/home"])}onAiTranslate(){if(console.log("\u{1F310} AI \uBC88\uC5ED \uC2DC\uC791"),!this.geminiApiManager.hasApiKey()){this.router.navigate(["/ezm/google-login-required"],{state:{featureName:"PDF AI \uBC88\uC5ED"}});return}this.currentDocumentId?this.router.navigate(["/ezm/ai-translate",this.currentDocumentId]):this.snackbar.showWarning("\uBB38\uC11C\uB97C \uBD88\uB7EC\uC624\uB294 \uC911\uC785\uB2C8\uB2E4.")}onAiSummary(){if(console.log("\u{1F4DD} AI \uC694\uC57D \uC2DC\uC791"),!this.geminiApiManager.hasApiKey()){this.router.navigate(["/ezm/google-login-required"],{state:{featureName:"PDF AI \uC694\uC57D"}});return}this.currentDocumentId?this.router.navigate(["/ezm/ai-summary",this.currentDocumentId]):this.snackbar.showWarning("\uBB38\uC11C\uB97C \uBD88\uB7EC\uC624\uB294 \uC911\uC785\uB2C8\uB2E4.")}onDraw(){this.isDrawingMode=!this.isDrawingMode,this.isDrawingMode?(console.log("\u{1F3A8} \uADF8\uB9AC\uAE30 \uBAA8\uB4DC \uD65C\uC131\uD654"),this.snackbar.showInfo("\uADF8\uB9AC\uAE30 \uBAA8\uB4DC\uAC00 \uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),setTimeout(()=>this.initializeCanvas(),100)):console.log("\u{1F3A8} \uADF8\uB9AC\uAE30 \uBAA8\uB4DC \uBE44\uD65C\uC131\uD654")}onDrawingThicknessChange(t){this.drawingThickness=t,console.log("\u{1F58C}\uFE0F \uADF8\uB9AC\uAE30 \uB450\uAED8 \uBCC0\uACBD:",t)}onDrawingColorChange(t){this.drawingColor=t,this.isEraserMode=!1,console.log("\u{1F3A8} \uADF8\uB9AC\uAE30 \uC0C9\uC0C1 \uBCC0\uACBD:",t)}onEraserMode(){this.isEraserMode=!this.isEraserMode,this.isEraserMode?(console.log("\u2702\uFE0F \uC9C0\uC6B0\uAC1C \uBAA8\uB4DC \uD65C\uC131\uD654"),this.snackbar.showInfo("\uC9C0\uC6B0\uAC1C \uBAA8\uB4DC\uAC00 \uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")):console.log("\u2702\uFE0F \uC9C0\uC6B0\uAC1C \uBAA8\uB4DC \uBE44\uD65C\uC131\uD654")}closeDrawingMode(){this.isDrawingMode=!1,console.log("\u274C \uADF8\uB9AC\uAE30 \uBAA8\uB4DC \uB2EB\uAE30")}initializeCanvas(){if(!this.drawingCanvasRef)return;let t=this.drawingCanvasRef.nativeElement,e=t.parentElement;e&&(t.width=e.clientWidth,t.height=e.clientHeight,this.canvasContext=t.getContext("2d"),this.canvasContext&&(this.canvasContext.lineCap="round",this.canvasContext.lineJoin="round"),console.log("\u{1F5BC}\uFE0F \uCEA0\uBC84\uC2A4 \uCD08\uAE30\uD654 \uC644\uB8CC:",t.width,"x",t.height))}onTouchStart(t){t.preventDefault();let e=t.touches[0],n=this.drawingCanvasRef?.nativeElement;if(!n)return;let o=n.getBoundingClientRect();this.lastX=e.clientX-o.left,this.lastY=e.clientY-o.top,this.isDrawing=!0}onTouchMove(t){if(!this.isDrawing)return;t.preventDefault();let e=t.touches[0],n=this.drawingCanvasRef?.nativeElement;if(!n)return;let o=n.getBoundingClientRect(),s=e.clientX-o.left,d=e.clientY-o.top;this.draw(this.lastX,this.lastY,s,d),this.lastX=s,this.lastY=d}onTouchEnd(t){this.isDrawing=!1}onMouseDown(t){let e=this.drawingCanvasRef?.nativeElement;if(!e)return;let n=e.getBoundingClientRect();this.lastX=t.clientX-n.left,this.lastY=t.clientY-n.top,this.isDrawing=!0}onMouseMove(t){if(!this.isDrawing)return;let e=this.drawingCanvasRef?.nativeElement;if(!e)return;let n=e.getBoundingClientRect(),o=t.clientX-n.left,s=t.clientY-n.top;this.draw(this.lastX,this.lastY,o,s),this.lastX=o,this.lastY=s}onMouseUp(t){this.isDrawing=!1}draw(t,e,n,o){this.canvasContext&&(this.isEraserMode?(this.canvasContext.globalCompositeOperation="destination-out",this.canvasContext.lineWidth=this.drawingThickness*4):(this.canvasContext.globalCompositeOperation="source-over",this.canvasContext.strokeStyle=this.drawingColor,this.canvasContext.lineWidth=this.drawingThickness*2),this.canvasContext.beginPath(),this.canvasContext.moveTo(t,e),this.canvasContext.lineTo(n,o),this.canvasContext.stroke())}onSearch(){this.searchSheetState="full",this.searchQuery="",this.searchResults=[],this.currentSearchIndex=0,console.log("\u{1F50D} \uD14D\uC2A4\uD2B8 \uAC80\uC0C9 \uBC14\uD140\uC2DC\uD2B8 \uC5F4\uB9BC")}performSearch(){return x(this,null,function*(){if(!this.searchQuery.trim()){this.snackbar.showWarning("\uAC80\uC0C9\uC5B4\uB97C \uC785\uB825\uD558\uC138\uC694.");return}console.log("\u{1F50E} \uAC80\uC0C9 \uC2E4\uD589:",this.searchQuery);try{let t=yield this.pdfViewerService.find(this.searchQuery,{highlightAll:!0,matchCase:!1,wholeWords:!1,findMultiple:!0});console.log("\u{1F50D} \uAC80\uC0C9 \uACB0\uACFC:",t),this.searchResults=[1],this.currentSearchIndex=0,setTimeout(()=>{let e=this.pdfViewerService.findState;console.log("\u{1F50D} findState:",e);let n=e?.matchesCount?.total;n!==void 0&&n>0&&(this.searchResults=Array(n).fill(0).map((o,s)=>s),console.log(`\u2705 \uAC80\uC0C9 \uACB0\uACFC: ${n}\uAC1C \uBC1C\uACAC`))},300)}catch(t){console.error("\u274C \uAC80\uC0C9 \uC624\uB958:",t),this.snackbar.showError("\uAC80\uC0C9 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}previousSearchResult(){if(this.searchResults.length===0){this.snackbar.showWarning("\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.pdfViewerService.findPrevious(),this.currentSearchIndex=Math.max(0,this.currentSearchIndex-1),console.log("\u2B05\uFE0F \uC774\uC804 \uAC80\uC0C9 \uACB0\uACFC:",this.currentSearchIndex+1)}nextSearchResult(){if(this.searchResults.length===0){this.snackbar.showWarning("\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.pdfViewerService.findNext(),this.currentSearchIndex=Math.min(this.searchResults.length-1,this.currentSearchIndex+1),console.log("\u27A1\uFE0F \uB2E4\uC74C \uAC80\uC0C9 \uACB0\uACFC:",this.currentSearchIndex+1)}goToSearchResult(){}closeSearchSheet(){this.searchSheetState="collapsed",this.searchQuery="",this.searchResults=[],this.currentSearchIndex=0,this.pdfViewerService&&this.pdfViewerService.find("",{highlightAll:!1}),console.log("\u{1F50D} \uD14D\uC2A4\uD2B8 \uAC80\uC0C9 \uBC14\uD140\uC2DC\uD2B8 \uB2EB\uD798")}ngOnDestroy(){console.log("\u{1F9F9} [EZM Viewer] \uCEF4\uD3EC\uB10C\uD2B8 \uD30C\uAD34 - \uB9AC\uC18C\uC2A4 \uC815\uB9AC \uC2DC\uC791"),this.analysisService.cleanup(),this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfPages&&this.pdfPages.length>0&&this.pdfPages.forEach(t=>{t.imageUrl&&t.imageUrl.startsWith("blob:")&&URL.revokeObjectURL(t.imageUrl)}),console.log("\u2705 [EZM Viewer] \uB9AC\uC18C\uC2A4 \uC815\uB9AC \uC644\uB8CC")}static \u0275fac=function(e){return new(e||a)(z(V),z(Pe),z(it),z(be),z(Te))};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-viewer"]],viewQuery:function(e,n){if(e&1&&(je(we,5),je(ho,5)),e&2){let o;He(o=Ge())&&(n.toolsPanel=o.first),He(o=Ge())&&(n.drawingCanvasRef=o.first)}},standalone:!1,decls:62,vars:16,consts:[["fileActionsTemplate",""],["drawingCanvas",""],[1,"mobile-viewer-container"],[1,"mobile-header"],[1,"header-back-btn",3,"click"],["src","images/ico-before@3x.png","alt","\uB4A4\uB85C\uAC00\uAE30","width","20","height","20",1,"back-icon"],[1,"header-actions"],["aria-label","\uD3B8\uC9D1",1,"header-action-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["aria-label","AI\uBC88\uC5ED",1,"header-action-btn",3,"click"],["cx","12","cy","12","r","9"],["x","12","y","15","text-anchor","middle","font-size","9","font-weight","bold","fill","currentColor","stroke","none"],["aria-label","AI\uC694\uC57D",1,"header-action-btn",3,"click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["x","12","y","16","text-anchor","middle","font-size","10","font-weight","bold","fill","currentColor","stroke","none"],["d","M8 3v2M16 3v2"],["aria-label","\uADF8\uB9AC\uAE30",1,"header-action-btn",3,"click"],["d","M12 19l7-7 3 3-7 7-3-3z"],["d","M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"],["d","M2 2l7.586 7.586"],["cx","11","cy","11","r","2"],["aria-label","\uAC80\uC0C9",1,"header-action-btn",3,"click"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["aria-label","\uC804\uCCB4 \uD398\uC774\uC9C0 \uBCF4\uAE30",1,"header-action-btn",3,"click"],["x","3","y","3","width","7","height","7","rx","1"],["x","14","y","3","width","7","height","7","rx","1"],["x","3","y","14","width","7","height","7","rx","1"],["x","14","y","14","width","7","height","7","rx","1"],[3,"pdfSrc","isMobile","config","showFloatingZoom","pdfLoaded","pageChange",4,"ngIf"],["class","drawing-canvas",3,"touchstart","touchmove","touchend","mousedown","mousemove","mouseup",4,"ngIf"],["class","floating-zoom-controls",4,"ngIf"],["class","empty-state",4,"ngIf"],[3,"currentPage","totalPages","isPdfViewer","analyze","saveDocument",4,"ngIf"],[3,"pdfSrc","totalPages","currentPage","visible","pageSelected",4,"ngIf"],["class","drawing-tools-panel",4,"ngIf"],[3,"activeTab"],[1,"search-bottom-sheet",3,"sheetStateChange","close","sheetState"],[1,"search-sheet-content"],[1,"sheet-header"],[1,"sheet-title"],[1,"search-sheet-body"],[1,"search-input-wrapper"],["type","text","placeholder","\uAC80\uC0C9\uC5B4\uB97C \uC785\uB825\uD558\uC138\uC694","aria-label","\uAC80\uC0C9\uC5B4 \uC785\uB825",1,"search-input",3,"ngModelChange","keyup.enter","ngModel"],["aria-label","\uAC80\uC0C9",1,"search-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["class","search-results",4,"ngIf"],[3,"sheetStateChange","close","sheetState"],[1,"file-menu-content"],[4,"ngIf","ngIfElse"],[3,"pdfLoaded","pageChange","pdfSrc","isMobile","config","showFloatingZoom"],[1,"drawing-canvas",3,"touchstart","touchmove","touchend","mousedown","mousemove","mouseup"],[1,"floating-zoom-controls"],["aria-label","\uD655\uB300",1,"zoom-btn","zoom-in-btn",3,"click"],["d","M21 21l-4.35-4.35"],["x1","11","y1","8","x2","11","y2","14"],["x1","8","y1","11","x2","14","y2","11"],["aria-label","\uCD95\uC18C",1,"zoom-btn","zoom-out-btn",3,"click"],[1,"zoom-level-display"],[1,"empty-state"],["src","images/ico-pdf@3x.png","alt","\uBB38\uC11C \uC5C6\uC74C","width","64","height","64",1,"empty-icon"],[1,"btn-primary",3,"click"],[3,"analyze","saveDocument","currentPage","totalPages","isPdfViewer"],[3,"pageSelected","pdfSrc","totalPages","currentPage","visible"],[1,"drawing-tools-panel"],[1,"drawing-tools-header"],["aria-label","\uADF8\uB9AC\uAE30 \uB2EB\uAE30",1,"drawing-close-btn",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"drawing-title"],[1,"drawing-tools-content"],[1,"drawing-section"],[1,"drawing-section-header"],[1,"drawing-badge"],[1,"drawing-section-title"],[1,"drawing-thickness-slider"],["type","range","min","1","max","20","aria-label","\uB450\uAED8 \uC870\uC808",1,"thickness-range",3,"ngModelChange","input","ngModel"],[1,"thickness-preview"],[1,"thickness-value"],[1,"thickness-circle"],[1,"drawing-color-options"],["class","color-option",3,"active","background-color","click",4,"ngFor","ngForOf"],["aria-label","\uC9C0\uC6B0\uAC1C",1,"color-option","eraser-btn",3,"click"],["d","M16.24 3.56l4.2 4.2-11 11-4.2-4.2 11-11z"],["d","M12 8l-8.5 8.5"],["d","M7 22h14"],[1,"color-option",3,"click"],[1,"search-results"],[1,"search-results-info"],[1,"search-navigation"],["aria-label","\uC774\uC804 \uACB0\uACFC",1,"search-nav-btn",3,"click"],["d","M15 18l-6-6 6-6"],["aria-label","\uB2E4\uC74C \uACB0\uACFC",1,"search-nav-btn",3,"click"],["d","M9 18l6-6-6-6"],[1,"sheet-header","rename-mode"],["aria-label","\uC774\uB984 \uBCC0\uACBD \uCDE8\uC18C",1,"sheet-back-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M15 18l-6-6 6-6","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"rename-form"],["for","renameInput",1,"rename-label"],["id","renameInput","type","text","maxlength","80","placeholder","\uC0C8 \uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694",1,"rename-input",3,"ngModelChange","ngModel"],[1,"rename-helper"],[1,"rename-actions"],["type","button",1,"rename-cancel",3,"click"],["type","button",1,"rename-confirm",3,"click"],[1,"sheet-options"],[1,"sheet-option",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","16 6 12 2 8 6","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","12","y1","2","x2","12","y2","15","stroke","#333","stroke-width","2","stroke-linecap","round"],["x","9","y","9","width","13","height","13","rx","2","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"sheet-option","danger",3,"click"],["d","M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","10","y1","11","x2","10","y2","17","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["x1","14","y1","11","x2","14","y2","17","stroke","currentColor","stroke-width","2","stroke-linecap","round"]],template:function(e,n){if(e&1){let o=w();i(0,"div",2)(1,"header",3)(2,"button",4),u("click",function(){return f(o),h(n.goBack())}),m(3,"img",5),r(),i(4,"div",6)(5,"button",7),u("click",function(){return f(o),h(n.onAddAnalyze())}),C(),i(6,"svg",8),m(7,"path",9)(8,"path",10),r()(),v(),i(9,"button",11),u("click",function(){return f(o),h(n.onAiTranslate())}),C(),i(10,"svg",8),m(11,"circle",12),i(12,"text",13),l(13,"AI"),r()()(),v(),i(14,"button",14),u("click",function(){return f(o),h(n.onAiSummary())}),C(),i(15,"svg",8),m(16,"rect",15),i(17,"text",16),l(18,"AI"),r(),m(19,"path",17),r()(),v(),i(20,"button",18),u("click",function(){return f(o),h(n.onDraw())}),C(),i(21,"svg",8),m(22,"path",19)(23,"path",20)(24,"path",21)(25,"circle",22),r()(),v(),i(26,"button",23),u("click",function(){return f(o),h(n.onSearch())}),C(),i(27,"svg",8),m(28,"circle",24)(29,"path",25),r()(),v(),i(30,"button",26),u("click",function(){return f(o),h(n.toggleThumbnails())}),C(),i(31,"svg",8),m(32,"rect",27)(33,"rect",28)(34,"rect",29)(35,"rect",30),r()()()(),P(36,Co,1,4,"shared-pdf-viewer",31)(37,_o,2,0,"canvas",32)(38,bo,14,1,"div",33)(39,xo,8,0,"div",34)(40,vo,1,3,"shared-pdf-tools-panel-mobile",35)(41,Po,1,4,"shared-pdf-thumbnail-strip",36)(42,wo,34,9,"div",37),r(),v(),m(43,"ez-reader-mobile-bottom-nav",38),i(44,"app-bottom-sheet",39),W("sheetStateChange",function(d){return f(o),$(n.searchSheetState,d)||(n.searchSheetState=d),h(d)}),u("close",function(){return f(o),h(n.closeSearchSheet())}),i(45,"div",40)(46,"div",41)(47,"h3",42),l(48,"\uD14D\uC2A4\uD2B8 \uAC80\uC0C9"),r()(),i(49,"div",43)(50,"div",44)(51,"input",45),W("ngModelChange",function(d){return f(o),$(n.searchQuery,d)||(n.searchQuery=d),h(d)}),u("keyup.enter",function(){return f(o),h(n.performSearch())}),r(),i(52,"button",46),u("click",function(){return f(o),h(n.performSearch())}),C(),i(53,"svg",47),m(54,"circle",24)(55,"path",25),r()()(),P(56,yo,10,2,"div",48),r()()(),v(),i(57,"app-bottom-sheet",49),W("sheetStateChange",function(d){return f(o),$(n.fileMenuSheetState,d)||(n.fileMenuSheetState=d),h(d)}),u("close",function(){return f(o),h(n.closeFileMenu())}),i(58,"div",50),P(59,So,18,1,"ng-container",51)(60,Oo,36,1,"ng-template",null,0,Xe),r()()}if(e&2){let o=ht(61);R("thumbnail-hidden",!n.showThumbnails),c(36),g("ngIf",n.documentType==="pdf-viewer"&&n.pdfSrc),c(),g("ngIf",n.isDrawingMode&&n.documentType==="pdf-viewer"&&n.pdfSrc),c(),g("ngIf",n.documentType==="pdf-viewer"&&n.pdfSrc),c(),g("ngIf",n.documentType==="empty"),c(),g("ngIf",n.pdfSrc),c(),g("ngIf",n.documentType==="pdf-viewer"&&n.pdfSrc&&n.showThumbnails),c(),g("ngIf",n.isDrawingMode),c(),g("activeTab",n.currentActiveTab),c(),G("sheetState",n.searchSheetState),c(7),G("ngModel",n.searchQuery),c(5),g("ngIf",n.searchResults.length>0),c(),G("sheetState",n.fileMenuSheetState),c(2),g("ngIf",n.isRenameMode)("ngIfElse",o)}},dependencies:[ne,j,ce,Wn,re,vt,ae,St,pi,we,he,de],styles:[".mobile-viewer-container[_ngcontent-%COMP%]{position:fixed;inset:0 0 60px;background:#f5f5f5;display:flex;flex-direction:column}.drawing-canvas[_ngcontent-%COMP%]{position:absolute;inset:56px 0 110px;z-index:900;touch-action:none;cursor:crosshair}.mobile-header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:56px;background:#fff;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;justify-content:space-between;padding:0 8px;z-index:1000}.header-back-btn[_ngcontent-%COMP%], .header-action-btn[_ngcontent-%COMP%]{width:40px;height:40px;background:none;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s;color:#333}.header-back-btn[_ngcontent-%COMP%]:hover, .header-action-btn[_ngcontent-%COMP%]:hover{background:#0000000d}.header-back-btn[_ngcontent-%COMP%]:active, .header-action-btn[_ngcontent-%COMP%]:active{background:#0000001a}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.back-icon[_ngcontent-%COMP%]{font-size:24px;color:#333}shared-pdf-viewer[_ngcontent-%COMP%], shared-pdf-editor-mobile[_ngcontent-%COMP%]{position:absolute;inset:56px 0 110px;overflow-x:hidden;overflow-y:auto;width:100%;transition:bottom .3s ease;background:#f5f5f5}.thumbnail-hidden[_ngcontent-%COMP%]   shared-pdf-viewer[_ngcontent-%COMP%], .thumbnail-hidden[_ngcontent-%COMP%]   shared-pdf-editor-mobile[_ngcontent-%COMP%]{bottom:10px}.empty-state[_ngcontent-%COMP%]{position:absolute;inset:56px 0 110px;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;text-align:center;transition:bottom .3s ease}.thumbnail-hidden[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{bottom:10px}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px}.btn-primary[_ngcontent-%COMP%]{margin-top:24px;padding:12px 24px;background:#007acc;color:#fff;border:none;border-radius:8px;font-size:16px;cursor:pointer}.floating-zoom-controls[_ngcontent-%COMP%]{position:fixed;right:16px;bottom:80px;display:flex;flex-direction:column;gap:8px;z-index:950}.zoom-btn[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:#fff;border:none;box-shadow:0 2px 8px #00000026;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#333;transition:all .2s ease}.zoom-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0003;transform:scale(1.05)}.zoom-btn[_ngcontent-%COMP%]:active{transform:scale(.95);background:#f0f0f0}.zoom-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.zoom-level-display[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:6px 12px;font-size:12px;font-weight:600;color:#333;text-align:center;box-shadow:0 2px 8px #00000026;min-width:48px}.thumbnail-toggle-btn[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:#fff;border:none;box-shadow:0 2px 8px #00000026;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#333;transition:all .2s ease}.thumbnail-toggle-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0003;transform:scale(1.05)}.thumbnail-toggle-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.thumbnail-toggle-btn.active[_ngcontent-%COMP%]{background:#007aff;color:#fff}.thumbnail-toggle-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#fff}.thumbnail-toggle-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.file-menu-content[_ngcontent-%COMP%]   .sheet-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #e5e7eb}.file-menu-content[_ngcontent-%COMP%]   .sheet-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#222;margin:0;text-align:center}.file-menu-content[_ngcontent-%COMP%]   .sheet-options[_ngcontent-%COMP%]{padding:8px 0}.file-menu-content[_ngcontent-%COMP%]   .rename-mode[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.file-menu-content[_ngcontent-%COMP%]   .sheet-back-btn[_ngcontent-%COMP%]{width:40px;height:40px;border:none;background:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer}.file-menu-content[_ngcontent-%COMP%]   .sheet-back-btn[_ngcontent-%COMP%]:active{background:#f3f4f6}.file-menu-content[_ngcontent-%COMP%]   .sheet-option[_ngcontent-%COMP%]{width:100%;padding:16px 20px;background:none;border:none;display:flex;align-items:center;gap:16px;cursor:pointer;font-size:16px;color:#333;transition:background .2s ease}.file-menu-content[_ngcontent-%COMP%]   .sheet-option[_ngcontent-%COMP%]:active{background:#f3f4f6}.file-menu-content[_ngcontent-%COMP%]   .sheet-option.danger[_ngcontent-%COMP%]{color:#ef5350}.file-menu-content[_ngcontent-%COMP%]   .sheet-option.danger[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .file-menu-content[_ngcontent-%COMP%]   .sheet-option.danger[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#ef5350!important}.file-menu-content[_ngcontent-%COMP%]   .sheet-option[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.file-menu-content[_ngcontent-%COMP%]   .sheet-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.file-menu-content[_ngcontent-%COMP%]   .rename-form[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;gap:16px}.file-menu-content[_ngcontent-%COMP%]   .rename-label[_ngcontent-%COMP%]{font-size:14px;color:#555}.file-menu-content[_ngcontent-%COMP%]   .rename-input[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #e0e0e0;border-radius:10px;font-size:15px;outline:none;transition:border .15s ease}.file-menu-content[_ngcontent-%COMP%]   .rename-input[_ngcontent-%COMP%]:focus{border-color:#007acc;box-shadow:0 0 0 2px #007acc1f}.file-menu-content[_ngcontent-%COMP%]   .rename-helper[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#888}.file-menu-content[_ngcontent-%COMP%]   .rename-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px}.file-menu-content[_ngcontent-%COMP%]   .rename-cancel[_ngcontent-%COMP%], .file-menu-content[_ngcontent-%COMP%]   .rename-confirm[_ngcontent-%COMP%]{min-width:80px;padding:10px 16px;border-radius:8px;border:none;font-size:14px;font-weight:500;cursor:pointer}.file-menu-content[_ngcontent-%COMP%]   .rename-cancel[_ngcontent-%COMP%]{background:#f3f4f6;color:#555}.file-menu-content[_ngcontent-%COMP%]   .rename-cancel[_ngcontent-%COMP%]:active{background:#e2e6ea}.file-menu-content[_ngcontent-%COMP%]   .rename-confirm[_ngcontent-%COMP%]{background:#007acc;color:#fff;box-shadow:0 4px 10px #007acc40}.file-menu-content[_ngcontent-%COMP%]   .rename-confirm[_ngcontent-%COMP%]:active{background:#0061b5}.drawing-tools-panel[_ngcontent-%COMP%]{position:fixed;bottom:60px;left:0;right:0;background:#fff;border-top:1px solid #e0e0e0;box-shadow:0 -2px 8px #0000001a;z-index:1000;max-height:300px;overflow-y:auto}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-tools-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;border-bottom:1px solid #f0f0f0;position:sticky;top:0;background:#fff;z-index:1}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-tools-header[_ngcontent-%COMP%]   .drawing-close-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:none;background:transparent;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#666}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-tools-header[_ngcontent-%COMP%]   .drawing-close-btn[_ngcontent-%COMP%]:active{background:#f5f5f5;border-radius:4px}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-tools-header[_ngcontent-%COMP%]   .drawing-title[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:16px;font-weight:600;color:#333;margin:0;padding-right:32px}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-tools-content[_ngcontent-%COMP%]{padding:16px}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]{margin-bottom:24px}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-section-header[_ngcontent-%COMP%]   .drawing-badge[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:24px;height:24px;background:#f44;color:#fff;font-size:14px;font-weight:700;border-radius:4px}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-section-header[_ngcontent-%COMP%]   .drawing-section-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#666}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-thickness-slider[_ngcontent-%COMP%]{padding:8px 0}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-thickness-slider[_ngcontent-%COMP%]   .thickness-range[_ngcontent-%COMP%]{width:100%;height:6px;border-radius:3px;background:linear-gradient(to right,#e0e0e0,#2196f3);outline:none;-webkit-appearance:none;appearance:none}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-thickness-slider[_ngcontent-%COMP%]   .thickness-range[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:24px;height:24px;border-radius:50%;background:#2196f3;cursor:pointer;box-shadow:0 2px 4px #0003;transition:all .2s}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-thickness-slider[_ngcontent-%COMP%]   .thickness-range[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{background:#1976d2;transform:scale(1.1)}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-thickness-slider[_ngcontent-%COMP%]   .thickness-range[_ngcontent-%COMP%]::-webkit-slider-thumb:active{transform:scale(.95)}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-thickness-slider[_ngcontent-%COMP%]   .thickness-range[_ngcontent-%COMP%]::-moz-range-thumb{width:24px;height:24px;border-radius:50%;background:#2196f3;cursor:pointer;border:none;box-shadow:0 2px 4px #0003;transition:all .2s}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-thickness-slider[_ngcontent-%COMP%]   .thickness-range[_ngcontent-%COMP%]::-moz-range-thumb:hover{background:#1976d2;transform:scale(1.1)}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-thickness-slider[_ngcontent-%COMP%]   .thickness-range[_ngcontent-%COMP%]::-moz-range-thumb:active{transform:scale(.95)}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-thickness-slider[_ngcontent-%COMP%]   .thickness-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:12px;padding:8px 12px;background:#f9f9f9;border-radius:6px}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-thickness-slider[_ngcontent-%COMP%]   .thickness-preview[_ngcontent-%COMP%]   .thickness-value[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#2196f3}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-thickness-slider[_ngcontent-%COMP%]   .thickness-preview[_ngcontent-%COMP%]   .thickness-circle[_ngcontent-%COMP%]{background:#2196f3;border-radius:50%;transition:all .2s}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-color-options[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-color-options[_ngcontent-%COMP%]   .color-option[_ngcontent-%COMP%]{width:48px;height:48px;border:2px solid #e0e0e0;border-radius:50%;cursor:pointer;transition:all .2s;position:relative}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-color-options[_ngcontent-%COMP%]   .color-option.active[_ngcontent-%COMP%]{border-color:#2196f3;border-width:3px;box-shadow:0 0 0 2px #2196f333}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-color-options[_ngcontent-%COMP%]   .color-option[_ngcontent-%COMP%]:active{transform:scale(.9)}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-color-options[_ngcontent-%COMP%]   .color-option.eraser-btn[_ngcontent-%COMP%]{background:#f5f5f5;display:flex;align-items:center;justify-content:center}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-color-options[_ngcontent-%COMP%]   .color-option.eraser-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#666}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-color-options[_ngcontent-%COMP%]   .color-option.eraser-btn.active[_ngcontent-%COMP%]{background:#e3f2fd}.drawing-tools-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .drawing-color-options[_ngcontent-%COMP%]   .color-option.eraser-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#2196f3}  .search-bottom-sheet .sheet-overlay{-webkit-backdrop-filter:none!important;backdrop-filter:none!important;background:#0000004d}.search-sheet-content[_ngcontent-%COMP%]   .sheet-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #e5e7eb}.search-sheet-content[_ngcontent-%COMP%]   .sheet-header[_ngcontent-%COMP%]   .sheet-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#222;margin:0;text-align:center}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]{padding:20px}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:16px}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{flex:1;padding:12px 16px;border:2px solid #e0e0e0;border-radius:12px;font-size:16px;outline:none;transition:all .2s}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{border-color:#2196f3;box-shadow:0 0 0 3px #2196f31a}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#999}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]{background:#2196f3;border:none;border-radius:12px;padding:12px 16px;cursor:pointer;color:#fff;display:flex;align-items:center;justify-content:center;transition:all .2s}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]:hover{background:#1976d2}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px;background:#f5f5f5;border-radius:12px}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .search-results-info[_ngcontent-%COMP%]{font-size:14px;color:#666;font-weight:500}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .search-navigation[_ngcontent-%COMP%]{display:flex;gap:8px}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .search-navigation[_ngcontent-%COMP%]   .search-nav-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:8px;padding:8px 12px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .search-navigation[_ngcontent-%COMP%]   .search-nav-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-color:#2196f3}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .search-navigation[_ngcontent-%COMP%]   .search-nav-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.search-sheet-content[_ngcontent-%COMP%]   .search-sheet-body[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .search-navigation[_ngcontent-%COMP%]   .search-nav-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;stroke:#666}"]})};function ko(a,t){if(a&1){let e=w();i(0,"button",8),u("click",function(){let o=f(e).$implicit,s=p();return h(s.onToolClick(o.id))}),i(1,"div",9)(2,"span",10),l(3),r()(),i(4,"span",11),l(5),r()()}if(a&2){let e=t.$implicit;c(3),E(e.icon),c(2),E(e.label)}}function Eo(a,t){a&1&&(C(),i(0,"svg",15),m(1,"path",16)(2,"polyline",17)(3,"circle",18),r())}function Do(a,t){a&1&&(C(),i(0,"svg",15),m(1,"path",19)(2,"polyline",20)(3,"path",21),r())}function To(a,t){a&1&&(C(),i(0,"svg",15),m(1,"path",22)(2,"polyline",23)(3,"path",24),r())}function Ao(a,t){a&1&&(C(),i(0,"svg",15),m(1,"path",25)(2,"polyline",26),r())}function zo(a,t){a&1&&(C(),i(0,"svg",15),m(1,"path",27)(2,"polyline",28),r())}function Bo(a,t){if(a&1){let e=w();i(0,"button",8),u("click",function(){let o=f(e).$implicit,s=p();return h(s.onToolClick(o.id))}),i(1,"div",12),me(2,13),P(3,Eo,4,0,"svg",14)(4,Do,4,0,"svg",14)(5,To,4,0,"svg",14)(6,Ao,3,0,"svg",14)(7,zo,3,0,"svg",14),ue(),r(),i(8,"span",11),l(9),r()()}if(a&2){let e=t.$implicit;c(),g("ngClass",e.icon+"-icon"),c(),g("ngSwitch",e.icon),c(),g("ngSwitchCase","pdf-to-image"),c(),g("ngSwitchCase","pdf-to-excel"),c(),g("ngSwitchCase","pdf-to-word"),c(),g("ngSwitchCase","pdf-to-jpg"),c(),g("ngSwitchCase","pdf-to-ppt"),c(2),E(e.label)}}function Fo(a,t){a&1&&(C(),i(0,"svg",15),m(1,"rect",29)(2,"circle",30)(3,"path",31),r())}function Io(a,t){a&1&&(C(),i(0,"svg",15),m(1,"rect",32)(2,"path",33),r())}function Ro(a,t){a&1&&(C(),i(0,"svg",15),m(1,"rect",34)(2,"path",35),r())}function Vo(a,t){a&1&&(C(),i(0,"svg",15),m(1,"rect",36)(2,"path",37),r())}function No(a,t){a&1&&(C(),i(0,"svg",15),m(1,"rect",38)(2,"circle",39)(3,"path",40),r())}function Lo(a,t){if(a&1){let e=w();i(0,"button",8),u("click",function(){let o=f(e).$implicit,s=p();return h(s.onToolClick(o.id))}),i(1,"div",12),me(2,13),P(3,Fo,4,0,"svg",14)(4,Io,3,0,"svg",14)(5,Ro,3,0,"svg",14)(6,Vo,3,0,"svg",14)(7,No,4,0,"svg",14),ue(),r(),i(8,"span",11),l(9),r()()}if(a&2){let e=t.$implicit;c(),g("ngClass",e.icon+"-icon"),c(),g("ngSwitch",e.icon),c(),g("ngSwitchCase","image-to-pdf"),c(),g("ngSwitchCase","excel-to-pdf"),c(),g("ngSwitchCase","word-to-pdf"),c(),g("ngSwitchCase","ppt-to-pdf"),c(),g("ngSwitchCase","photo-to-pdf"),c(2),E(e.label)}}function jo(a,t){a&1&&(C(),i(0,"svg",15),m(1,"rect",41)(2,"rect",42),r())}function Ho(a,t){a&1&&(C(),i(0,"svg",15),m(1,"rect",43)(2,"path",44),r())}function Go(a,t){a&1&&(C(),i(0,"svg",15),m(1,"path",45)(2,"path",46),r())}function $o(a,t){a&1&&(C(),i(0,"svg",15),m(1,"rect",47)(2,"path",48),r())}function Wo(a,t){a&1&&(C(),i(0,"svg",15),m(1,"rect",49)(2,"path",50),r())}function Uo(a,t){a&1&&(C(),i(0,"svg",15),m(1,"rect",51),i(2,"text",52),l(3,"1"),r()())}function Ko(a,t){a&1&&(C(),i(0,"svg",15),m(1,"rect",53)(2,"line",54),r())}function Yo(a,t){a&1&&(C(),i(0,"svg",15),m(1,"rect",55)(2,"rect",56)(3,"rect",57)(4,"rect",58),r())}function qo(a,t){a&1&&(C(),i(0,"svg",15),m(1,"path",59)(2,"path",60),r())}function Zo(a,t){if(a&1){let e=w();i(0,"button",8),u("click",function(){let o=f(e).$implicit,s=p();return h(s.onToolClick(o.id))}),i(1,"div",12),me(2,13),P(3,jo,3,0,"svg",14)(4,Ho,3,0,"svg",14)(5,Go,3,0,"svg",14)(6,$o,3,0,"svg",14)(7,Wo,3,0,"svg",14)(8,Uo,4,0,"svg",14)(9,Ko,3,0,"svg",14)(10,Yo,5,0,"svg",14)(11,qo,3,0,"svg",14),ue(),r(),i(12,"span",11),l(13),r()()}if(a&2){let e=t.$implicit;c(),g("ngClass",e.icon+"-icon"),c(),g("ngSwitch",e.icon),c(),g("ngSwitchCase","merge"),c(),g("ngSwitchCase","create"),c(),g("ngSwitchCase","rotate"),c(),g("ngSwitchCase","encrypt"),c(),g("ngSwitchCase","decrypt"),c(),g("ngSwitchCase","page-number"),c(),g("ngSwitchCase","split"),c(),g("ngSwitchCase","organize"),c(),g("ngSwitchCase","edit"),c(2),E(e.label)}}var Ht=class a{constructor(t,e){this.router=t;this.toolActionService=e;window.scrollTo(0,0)}currentActiveTab="tools";aiTools=[{id:"ai-summary",label:"PDF AI \uC694\uC57D",icon:"AI",iconType:"badge",color:"ai"},{id:"ai-translate",label:"PDF AI \uBC88\uC5ED",icon:"AI",iconType:"badge",color:"ai"}];fromPdfTools=[{id:"pdf-to-image",label:"PDF\uB97C \uC774\uBBF8\uC9C0\uB85C",icon:"pdf-to-image",iconType:"svg"},{id:"pdf-to-excel",label:"PDF\uB97C Excel\uB85C",icon:"pdf-to-excel",iconType:"svg"},{id:"pdf-to-word",label:"PDF\uB97C Word\uB85C",icon:"pdf-to-word",iconType:"svg"},{id:"pdf-to-jpg",label:"PDF\uB97C JPG\uB85C",icon:"pdf-to-jpg",iconType:"svg"},{id:"pdf-to-powerpoint",label:"PDF\uB97C PowerPoint",icon:"pdf-to-ppt",iconType:"svg"}];toPdfTools=[{id:"image-to-pdf",label:"\uC774\uBBF8\uC9C0\uB97C PDF\uB85C",icon:"image-to-pdf",iconType:"svg"},{id:"excel-to-pdf",label:"Excel\uC744 PDF\uB85C",icon:"excel-to-pdf",iconType:"svg"},{id:"word-to-pdf",label:"Word\uB97C PDF\uB85C",icon:"word-to-pdf",iconType:"svg"},{id:"ppt-to-pdf",label:"PowerPoint\uB97C PDF\uB85C",icon:"ppt-to-pdf",iconType:"svg"},{id:"photo-to-pdf",label:"\uC0AC\uC9C4\uC744 PDF\uB85C",icon:"photo-to-pdf",iconType:"svg"}];documentTools=[{id:"merge",label:"PDF \uBCD1\uD569",icon:"merge",iconType:"svg"},{id:"split",label:"PDF \uBD84\uD560",icon:"split",iconType:"svg"},{id:"create",label:"PDF \uB9CC\uB4E4\uAE30",icon:"create",iconType:"svg"},{id:"rotate",label:"PDF \uD68C\uC804",icon:"rotate",iconType:"svg"},{id:"encrypt",label:"PDF \uC554\uD638\uD654",icon:"encrypt",iconType:"svg"},{id:"decrypt",label:"PDF \uC554\uD638 \uD574\uC81C",icon:"decrypt",iconType:"svg"},{id:"organize",label:"PDF \uAD6C\uC131",icon:"organize",iconType:"svg"},{id:"page-number",label:"PDF \uD398\uC774\uC9C0 \uBC88\uD638",icon:"page-number",iconType:"svg"},{id:"edit",label:"PDF \uD3B8\uC9D1",icon:"edit",iconType:"svg"}];reversePdfConverter=O(Re);indexedDbService=O(J);snackbar=O(U);geminiApiManager=O(be);onToolClick(t){if(console.log("Tool clicked:",t),["image-to-pdf","excel-to-pdf","word-to-pdf","ppt-to-pdf","photo-to-pdf"].includes(t)){let o={"image-to-pdf":"\uC774\uBBF8\uC9C0 \u2192 PDF","photo-to-pdf":"\uC0AC\uC9C4 \u2192 PDF","excel-to-pdf":"\uC5D1\uC140 \u2192 PDF","word-to-pdf":"\uC6CC\uB4DC \u2192 PDF","ppt-to-pdf":"PPT \u2192 PDF"},s={"image-to-pdf":"image","photo-to-pdf":"image","excel-to-pdf":"excel","word-to-pdf":"word","ppt-to-pdf":"ppt"};this.toolActionService.setPendingAction({toolId:t,toolLabel:o[t]||"\uBB38\uC11C \uBCC0\uD658",action:"convert-to-pdf",requiresFileSelection:!0,data:{convertType:t,sourceFileType:s[t]}}),this.router.navigate(["/ezm/myfiles"]);return}if(t==="ai-summary"){if(!this.geminiApiManager.hasApiKey()){this.router.navigate(["/ezm/google-login-required"],{state:{featureName:"PDF AI \uC694\uC57D"}});return}this.toolActionService.setPendingAction({toolId:"ai-summary",toolLabel:"PDF AI \uC694\uC57D",action:"ai-summary",requiresFileSelection:!0}),this.router.navigate(["/ezm/myfiles"]);return}if(t==="ai-translate"){if(!this.geminiApiManager.hasApiKey()){this.router.navigate(["/ezm/google-login-required"],{state:{featureName:"PDF AI \uBC88\uC5ED"}});return}this.toolActionService.setPendingAction({toolId:"ai-translate",toolLabel:"PDF AI \uBC88\uC5ED",action:"ai-translate",requiresFileSelection:!0}),this.router.navigate(["/ezm/myfiles"]);return}if(["pdf-to-image","pdf-to-excel","pdf-to-word","pdf-to-jpg","pdf-to-powerpoint"].includes(t)){let o={"pdf-to-image":"PDF\uB97C \uC774\uBBF8\uC9C0\uB85C","pdf-to-excel":"PDF\uB97C Excel\uB85C","pdf-to-word":"PDF\uB97C Word\uB85C","pdf-to-jpg":"PDF\uB97C JPG\uB85C","pdf-to-powerpoint":"PDF\uB97C PowerPoint"};this.toolActionService.setPendingAction({toolId:t,toolLabel:o[t],action:"convert-pdf",requiresFileSelection:!0}),this.router.navigate(["/ezm/myfiles"]);return}if(t==="merge"){this.toolActionService.setPendingAction({toolId:"merge",toolLabel:"PDF \uBCD1\uD569",action:"merge-pdf",requiresFileSelection:!0}),this.router.navigate(["/ezm/myfiles"]);return}if(t==="create"){this.router.navigate(["/ezm/pdf-create"]);return}if(t==="encrypt"){this.toolActionService.setPendingAction({toolId:"encrypt",toolLabel:"PDF \uC554\uD638\uD654",action:"encrypt-pdf",requiresFileSelection:!0}),this.router.navigate(["/ezm/myfiles"]);return}if(t==="decrypt"){this.toolActionService.setPendingAction({toolId:"decrypt",toolLabel:"PDF \uC554\uD638 \uD574\uC81C",action:"decrypt-pdf",requiresFileSelection:!0}),this.router.navigate(["/ezm/myfiles"]);return}if(t==="rotate"){this.toolActionService.setPendingAction({toolId:"rotate",toolLabel:"PDF \uD68C\uC804",action:"rotate-pdf",requiresFileSelection:!0}),this.router.navigate(["/ezm/myfiles"]);return}if(t==="split"){this.toolActionService.setPendingAction({toolId:"split",toolLabel:"PDF \uBD84\uD560",action:"split-pdf",requiresFileSelection:!0}),this.router.navigate(["/ezm/myfiles"]);return}if(t==="organize"){this.toolActionService.setPendingAction({toolId:"organize",toolLabel:"PDF \uAD6C\uC131",action:"organize-pdf",requiresFileSelection:!0}),this.router.navigate(["/ezm/myfiles"]);return}if(t==="edit"){this.toolActionService.setPendingAction({toolId:"edit",toolLabel:"PDF \uD3B8\uC9D1",action:"edit",requiresFileSelection:!0}),this.router.navigate(["/ezm/myfiles"]);return}if(t==="page-number"){this.toolActionService.setPendingAction({toolId:"page-number",toolLabel:"PDF \uD398\uC774\uC9C0 \uBC88\uD638",action:"add-page-numbers",requiresFileSelection:!0}),this.router.navigate(["/ezm/myfiles"]);return}if(t==="image-to-pdf"||t==="photo-to-pdf"||t==="excel-to-pdf"||t==="word-to-pdf"||t==="ppt-to-pdf"){let o={"image-to-pdf":"\uC774\uBBF8\uC9C0 \u2192 PDF","photo-to-pdf":"\uC0AC\uC9C4 \u2192 PDF","excel-to-pdf":"\uC5D1\uC140 \u2192 PDF","word-to-pdf":"\uC6CC\uB4DC \u2192 PDF","ppt-to-pdf":"PPT \u2192 PDF"},s={"image-to-pdf":"image","photo-to-pdf":"image","excel-to-pdf":"excel","word-to-pdf":"word","ppt-to-pdf":"ppt"};this.toolActionService.setPendingAction({toolId:t,toolLabel:o[t]||"\uBB38\uC11C \uBCC0\uD658",action:"convert-to-pdf",requiresFileSelection:!0,data:{convertType:t,sourceFileType:s[t]}}),this.router.navigate(["/ezm/myfiles","my-files"]);return}}handleToPdfConversion(t){let e=document.createElement("input");switch(e.type="file",e.multiple=t==="image-to-pdf"||t==="photo-to-pdf",t){case"image-to-pdf":case"photo-to-pdf":e.accept="image/*";break;case"excel-to-pdf":e.accept=".xlsx,.xls";break;case"word-to-pdf":e.accept=".docx";break;case"ppt-to-pdf":e.accept=".pptx";break}e.onchange=n=>x(this,null,function*(){let o=Array.from(n.target.files||[]);if(o.length!==0)try{console.log(`\u{1F504} [${t}] \uBCC0\uD658 \uC2DC\uC791:`,o.map(S=>S.name)),this.snackbar.showInfo("\uD30C\uC77C \uBCC0\uD658 \uC911...");let s=null,d="";switch(t){case"image-to-pdf":case"photo-to-pdf":s=yield this.reversePdfConverter.imageToPdf(o);let S=new Date,M=S.getHours().toString().padStart(2,"0")+S.getMinutes().toString().padStart(2,"0")+S.getSeconds().toString().padStart(2,"0");d=o.length===1?`\uC774\uBBF8\uC9C0\uBCC0\uD658_${M}.pdf`:`\uC774\uBBF8\uC9C0\uBCC0\uD658_${M}.pdf`;break;case"excel-to-pdf":s=yield this.reversePdfConverter.excelToPdf(o[0]);let y=new Date;d=`\uC5D1\uC140\uBCC0\uD658_${y.getHours().toString().padStart(2,"0")+y.getMinutes().toString().padStart(2,"0")+y.getSeconds().toString().padStart(2,"0")}.pdf`;break;case"word-to-pdf":s=yield this.reversePdfConverter.wordToPdf(o[0]);let T=new Date;d=`\uC6CC\uB4DC\uBCC0\uD658_${T.getHours().toString().padStart(2,"0")+T.getMinutes().toString().padStart(2,"0")+T.getSeconds().toString().padStart(2,"0")}.pdf`;break;case"ppt-to-pdf":s=yield this.reversePdfConverter.powerPointToPdf(o[0]);let A=new Date;d=`PPT\uBCC0\uD658_${A.getHours().toString().padStart(2,"0")+A.getMinutes().toString().padStart(2,"0")+A.getSeconds().toString().padStart(2,"0")}.pdf`;break}if(!s)throw new Error("PDF \uC0DD\uC131 \uC2E4\uD328");console.log(`\u2705 [${t}] PDF \uC0DD\uC131 \uC644\uB8CC:`,d,`(${s.length} bytes)`);let _=`doc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,b=this.uint8ArrayToBase64(s);yield this.indexedDbService.saveDocument({id:_,title:d,fileName:d,pdfBase64:b,thumbnail:"",pages:[],elementCount:0,version:"1.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),documentType:"converted"}),console.log("\u{1F4BE} [IndexedDB] \uC800\uC7A5 \uC644\uB8CC:",_),this.router.navigate(["/ezm/file-saved"],{state:{fileId:_,fileName:d,fileCount:1,title:"\uBCC0\uD658 \uC644\uB8CC!",subtitle:`${d} \uD30C\uC77C\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`}})}catch(s){console.error(`\u274C [${t}] \uBCC0\uD658 \uC2E4\uD328:`,s),this.snackbar.showError("\uBCC0\uD658 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}}),e.click()}uint8ArrayToBase64(t){let n="";for(let o=0;o<t.length;o+=32768){let s=t.subarray(o,Math.min(o+32768,t.length));n+=String.fromCharCode(...Array.from(s))}return btoa(n)}static \u0275fac=function(e){return new(e||a)(z(V),z(Te))};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-tools"]],standalone:!1,decls:26,vars:5,consts:[[1,"header"],[1,"header-center"],[1,"main-content"],[1,"section"],[1,"section-title"],[1,"tools-grid"],["class","tool-item",3,"click",4,"ngFor","ngForOf"],[3,"activeTab"],[1,"tool-item",3,"click"],[1,"tool-icon"],[1,"icon-badge","ai"],[1,"tool-label"],[1,"tool-icon",3,"ngClass"],[3,"ngSwitch"],["width","24","height","24","viewBox","0 0 24 24","fill","none",4,"ngSwitchCase"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","stroke","#9C27B0","stroke-width","2"],["points","14 2 14 8 20 8","stroke","#9C27B0","stroke-width","2"],["cx","10","cy","13","r","2","fill","#9C27B0"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","stroke","#4CAF50","stroke-width","2"],["points","14 2 14 8 20 8","stroke","#4CAF50","stroke-width","2"],["d","M8 11h8M8 14h8M11 11v6M14 11v6","stroke","#4CAF50","stroke-width","1.5"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","stroke","#2196F3","stroke-width","2"],["points","14 2 14 8 20 8","stroke","#2196F3","stroke-width","2"],["d","M8 13l1 4 1-2 1 2 1-4","stroke","#2196F3","stroke-width","1.5"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","stroke","#FF9800","stroke-width","2"],["points","14 2 14 8 20 8","stroke","#FF9800","stroke-width","2"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","stroke","#F44336","stroke-width","2"],["points","14 2 14 8 20 8","stroke","#F44336","stroke-width","2"],["x","3","y","3","width","18","height","18","rx","2","stroke","#9C27B0","stroke-width","2"],["cx","8.5","cy","8.5","r","1.5","fill","#9C27B0"],["d","M21 15L16 10L5 21","stroke","#9C27B0","stroke-width","2"],["x","3","y","3","width","18","height","18","rx","2","stroke","#4CAF50","stroke-width","2"],["d","M3 9h18M3 15h18M9 3v18M15 3v18","stroke","#4CAF50","stroke-width","2"],["x","3","y","3","width","18","height","18","rx","2","stroke","#2196F3","stroke-width","2"],["d","M7 8l2 8 2-6 2 6 2-8","stroke","#2196F3","stroke-width","2"],["x","3","y","3","width","18","height","18","rx","2","stroke","#F44336","stroke-width","2"],["d","M8 7h8M8 12h8M8 17h4","stroke","#F44336","stroke-width","2"],["x","2","y","2","width","20","height","20","rx","2","stroke","#FF9800","stroke-width","2"],["cx","12","cy","10","r","3","stroke","#FF9800","stroke-width","2"],["d","M2 18l5-5 5 5 8-8","stroke","#FF9800","stroke-width","2","stroke-linecap","round"],["x","2","y","3","width","9","height","12","rx","1","stroke","#FFC107","stroke-width","2"],["x","13","y","9","width","9","height","12","rx","1","stroke","#FFC107","stroke-width","2"],["x","3","y","3","width","18","height","18","rx","2","stroke","#E91E63","stroke-width","2"],["d","M8 12h8M12 8v8","stroke","#E91E63","stroke-width","2"],["d","M21 12a9 9 0 1 1-9-9c2.52 0 4.77 1 6.42 2.65L21 9","stroke","#FF5722","stroke-width","2"],["d","M21 3v6h-6","stroke","#FF5722","stroke-width","2"],["x","3","y","11","width","18","height","11","rx","2","stroke","#3F51B5","stroke-width","2"],["d","M7 11V7a5 5 0 0 1 10 0v4","stroke","#3F51B5","stroke-width","2"],["x","3","y","11","width","18","height","11","rx","2","stroke","#00BCD4","stroke-width","2"],["d","M7 11V7a5 5 0 0 1 9.9-1","stroke","#00BCD4","stroke-width","2"],["x","4","y","2","width","16","height","20","rx","2","stroke","#673AB7","stroke-width","2"],["x","12","y","16","text-anchor","middle","fill","#673AB7","font-size","10","font-weight","bold"],["x","3","y","3","width","18","height","18","rx","2","stroke","#FF9800","stroke-width","2"],["x1","12","y1","3","x2","12","y2","21","stroke","#FF9800","stroke-width","2","stroke-dasharray","2 2"],["x","3","y","3","width","7","height","7","rx","1","stroke","#2196F3","stroke-width","2"],["x","14","y","3","width","7","height","7","rx","1","stroke","#2196F3","stroke-width","2"],["x","3","y","14","width","7","height","7","rx","1","stroke","#2196F3","stroke-width","2"],["x","14","y","14","width","7","height","7","rx","1","stroke","#2196F3","stroke-width","2"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7","stroke","#4CAF50","stroke-width","2"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z","stroke","#4CAF50","stroke-width","2"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),l(3,"\uB3C4\uAD6C"),r()()(),i(4,"div",2)(5,"div",3)(6,"h3",4),l(7,"AI \uAE30\uB2A5"),r(),i(8,"div",5),P(9,ko,6,2,"button",6),r()(),i(10,"div",3)(11,"h3",4),l(12,"PDF\uB97C \uBB38\uC11C\uB85C \uBCC0\uD658"),r(),i(13,"div",5),P(14,Bo,10,8,"button",6),r()(),i(15,"div",3)(16,"h3",4),l(17,"\uBB38\uC11C\uB97C PDF\uB85C \uBCC0\uD658"),r(),i(18,"div",5),P(19,Lo,10,8,"button",6),r()(),i(20,"div",3)(21,"h3",4),l(22,"\uBB38\uC11C \uAE30\uB2A5"),r(),i(23,"div",5),P(24,Zo,14,12,"button",6),r()()(),m(25,"ez-reader-mobile-bottom-nav",7)),e&2&&(c(9),g("ngForOf",n.aiTools),c(5),g("ngForOf",n.fromPdfTools),c(5),g("ngForOf",n.toPdfTools),c(5),g("ngForOf",n.documentTools),c(),g("activeTab",n.currentActiveTab))},dependencies:[Qe,ne,Ct,_t,de],styles:[".header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:56px;background:#fff;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;justify-content:center;z-index:100}.header-center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.main-content[_ngcontent-%COMP%]{padding-top:56px;padding-bottom:60px;background:#f5f5f5}.section[_ngcontent-%COMP%]{padding:16px;margin-bottom:8px;background:#fff}.section-title[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:600;color:#333}.tools-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.tool-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:16px;background:#f8f9fa;border:1px solid #e0e0e0;border-radius:12px;cursor:pointer;transition:all .2s}.tool-item[_ngcontent-%COMP%]:active{background:#e9ecef;transform:scale(.98)}.tool-icon[_ngcontent-%COMP%]{width:48px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:12px}.icon-badge.ai[_ngcontent-%COMP%]{padding:4px 8px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;font-size:12px;font-weight:600;border-radius:4px}.tool-label[_ngcontent-%COMP%]{font-size:13px;color:#333;text-align:center}"]})};function Xo(a,t){if(a&1){let e=w();i(0,"div",2),u("click",function(){f(e);let o=p();return h(o.onOverlayClick())}),i(1,"div",3),u("click",function(o){return f(e),h(o.stopPropagation())}),i(2,"div",4)(3,"h3",5),l(4),r()(),i(5,"div",6)(6,"input",7,0),W("ngModelChange",function(o){f(e);let s=p();return $(s.inputValue,o)||(s.inputValue=o),h(o)}),u("keyup.enter",function(){f(e);let o=p();return h(o.onConfirm())})("keyup.escape",function(){f(e);let o=p();return h(o.onCancel())}),r()(),i(8,"div",8)(9,"button",9),u("click",function(){f(e);let o=p();return h(o.onCancel())}),l(10," \uCDE8\uC18C "),r(),i(11,"button",10),u("click",function(){f(e);let o=p();return h(o.onConfirm())}),l(12," \uD655\uC778 "),r()()()()}if(a&2){let e=p();c(4),E(e.title),c(2),G("ngModel",e.inputValue),g("placeholder",e.placeholder),c(5),g("disabled",!e.inputValue.trim())}}var at=class a{isOpen=!1;title="\uC785\uB825";placeholder="\uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694";initialValue="";confirm=new N;cancel=new N;isOpenChange=new N;inputValue="";ngOnChanges(){this.isOpen&&this.initialValue?this.inputValue=this.initialValue:this.isOpen&&(this.inputValue="")}onConfirm(){this.inputValue.trim()&&(this.confirm.emit(this.inputValue.trim()),this.close())}onCancel(){this.cancel.emit(),this.close()}onOverlayClick(){this.onCancel()}close(){this.isOpen=!1,this.inputValue="",this.isOpenChange.emit(!1)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=F({type:a,selectors:[["app-input-dialog"]],inputs:{isOpen:"isOpen",title:"title",placeholder:"placeholder",initialValue:"initialValue"},outputs:{confirm:"confirm",cancel:"cancel",isOpenChange:"isOpenChange"},features:[Ye],decls:1,vars:1,consts:[["inputField",""],["class","dialog-overlay",3,"click",4,"ngIf"],[1,"dialog-overlay",3,"click"],[1,"dialog-content",3,"click"],[1,"dialog-header"],[1,"dialog-title"],[1,"dialog-body"],["type","text",1,"dialog-input",3,"ngModelChange","keyup.enter","keyup.escape","ngModel","placeholder"],[1,"dialog-footer"],[1,"dialog-btn","cancel-btn",3,"click"],[1,"dialog-btn","confirm-btn",3,"click","disabled"]],template:function(e,n){e&1&&P(0,Xo,13,4,"div",1),e&2&&g("ngIf",n.isOpen)},dependencies:[_e,j,Fe,ce,re,ae],styles:[".dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.dialog-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:400px;box-shadow:0 4px 20px #00000026;animation:_ngcontent-%COMP%_slideUp .2s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.dialog-header[_ngcontent-%COMP%]{padding:20px 20px 16px;border-bottom:1px solid #e5e7eb}.dialog-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#222}.dialog-body[_ngcontent-%COMP%]{padding:20px}.dialog-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #d1d5db;border-radius:8px;font-size:16px;outline:none;transition:border-color .2s ease}.dialog-input[_ngcontent-%COMP%]:focus{border-color:#2196f3;box-shadow:0 0 0 3px #2196f31a}.dialog-footer[_ngcontent-%COMP%]{padding:16px 20px 20px;display:flex;gap:12px;justify-content:flex-end}.dialog-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.cancel-btn[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.cancel-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb}.confirm-btn[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.confirm-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#1976d2}.confirm-btn[_ngcontent-%COMP%]:disabled{background:#d1d5db;cursor:not-allowed}"],changeDetection:0})};function Jo(a,t){a&1&&(i(0,"div",20)(1,"div",21),l(2,"\uB0B4\uD30C\uC77C"),r()())}function er(a,t){if(a&1){let e=w();i(0,"div",22)(1,"button",23),u("click",function(){f(e);let o=p();return h(o.goBack())}),C(),i(2,"svg",24),m(3,"path",25),r()(),v(),i(4,"div",21),l(5),r()()}if(a&2){let e=p();c(5),E(e.currentFolderName)}}function tr(a,t){if(a&1&&(i(0,"div",36)(1,"strong"),l(2),r(),l(3,"\uC744 \uC704\uD55C PDF\uB97C \uC120\uD0DD\uD558\uC138\uC694 "),r()),a&2){let e=p(2);c(2),E(e.pendingAction.toolLabel)}}function nr(a,t){if(a&1&&(i(0,"span"),l(1),r()),a&2){let e=p(3);c(),D("(",e.selectedItems.size,"\uAC1C \uC120\uD0DD\uB428)")}}function ir(a,t){if(a&1&&(i(0,"div",36)(1,"strong"),l(2,"\uBCD1\uD569\uD560 PDF\uB97C 2\uAC1C \uC774\uC0C1 \uC120\uD0DD"),r(),l(3,"\uD558\uC138\uC694 "),P(4,nr,2,1,"span",37),r()),a&2){let e=p(2);c(4),g("ngIf",e.selectedItems.size>0)}}function or(a,t){if(a&1){let e=w();i(0,"div",26)(1,"div",27)(2,"div",28),C(),i(3,"svg",29),m(4,"circle",30)(5,"path",31),r()(),P(6,tr,4,1,"div",32)(7,ir,5,1,"div",32),v(),i(8,"button",33),u("click",function(){f(e);let o=p();return h(o.onCancelPendingAction())}),C(),i(9,"svg",34),m(10,"path",35),r()()()()}if(a&2){let e=p();c(6),g("ngIf",e.pendingAction.action!=="merge-pdf"),c(),g("ngIf",e.pendingAction.action==="merge-pdf")}}function rr(a,t){a&1&&(C(),i(0,"svg",59),m(1,"path",60),r())}function ar(a,t){if(a&1&&(i(0,"div",56)(1,"div",57),P(2,rr,2,0,"svg",58),r()()),a&2){let e=p().$implicit,n=p(2);c(),R("checked",n.isItemSelected(e.id)),c(),g("ngIf",n.isItemSelected(e.id))}}function sr(a,t){a&1&&(C(),i(0,"svg",29),m(1,"path",61),r())}function lr(a,t){a&1&&(C(),i(0,"svg",29),m(1,"path",62),r())}function cr(a,t){a&1&&(C(),i(0,"svg",29),m(1,"rect",63)(2,"path",64),r())}function dr(a,t){a&1&&(C(),i(0,"svg",29),m(1,"circle",65)(2,"polyline",66),r())}function pr(a,t){a&1&&(C(),i(0,"svg",29),m(1,"path",61),r())}function gr(a,t){a&1&&(i(0,"div",67),C(),i(1,"svg",68),m(2,"path",69)(3,"path",70),i(4,"text",71),l(5,"PDF"),r()()())}function mr(a,t){a&1&&(i(0,"div",72),C(),i(1,"svg",68),m(2,"rect",73)(3,"circle",74)(4,"path",75),r()())}function ur(a,t){a&1&&(i(0,"div",76),C(),i(1,"svg",68),m(2,"path",77)(3,"path",78)(4,"path",79),i(5,"text",80),l(6,"XLS"),r()()())}function fr(a,t){a&1&&(i(0,"div",81),C(),i(1,"svg",68),m(2,"path",82)(3,"path",83)(4,"path",84),i(5,"text",80),l(6,"DOC"),r()()())}function hr(a,t){a&1&&(i(0,"div",85),C(),i(1,"svg",68),m(2,"path",86)(3,"path",87)(4,"rect",88),i(5,"text",89),l(6,"PPT"),r()()())}function Cr(a,t){if(a&1&&(i(0,"span",90),l(1),r()),a&2){let e=p().$implicit;c(),D(" ",e.fileCount," ")}}function _r(a,t){if(a&1&&(i(0,"div",91),l(1),xe(2,"date"),r()),a&2){let e=p().$implicit;c(),D(" \uB9C8\uC9C0\uB9C9 \uBCC0\uACBD: ",$e(2,1,e.date,"yyyy.MM.dd HH:mm:ss")," ")}}function br(a,t){if(a&1&&(i(0,"span",95),l(1),r()),a&2){let e=p(2).$implicit,n=p(2);c(),D(" \xB7 ",n.formatFileSize(e.size))}}function xr(a,t){if(a&1&&(i(0,"div",92)(1,"span",93),l(2),xe(3,"date"),r(),P(4,br,2,1,"span",94),r()),a&2){let e=p().$implicit;c(2),E($e(3,2,e.date,"yyyy.MM.dd HH:mm:ss")),c(2),g("ngIf",e.size)}}function vr(a,t){if(a&1){let e=w();i(0,"button",96),u("click",function(o){f(e);let s=p().$implicit,d=p(2);return h(d.toggleFavorite(s,o))}),C(),i(1,"svg",97),m(2,"path",98),r()()}if(a&2){let e=p().$implicit;R("active",e.isFavorite),le("aria-label",e.isFavorite?"\uC990\uACA8\uCC3E\uAE30 \uC81C\uAC70":"\uC990\uACA8\uCC3E\uAE30 \uCD94\uAC00"),c(),le("fill",e.isFavorite?"currentColor":"none")}}function Pr(a,t){if(a&1){let e=w();i(0,"button",99),u("click",function(o){f(e);let s=p().$implicit,d=p(2);return h(d.onMoreClick(s,o))}),C(),i(1,"svg",29),m(2,"circle",100)(3,"circle",101)(4,"circle",102),r()()}if(a&2){let e=p().$implicit;le("aria-label","\uB354\uBCF4\uAE30: "+e.name)}}function Mr(a,t){if(a&1){let e=w();i(0,"div",40),u("click",function(){let o=f(e).$implicit,s=p(2);return h(s.onItemClick(o))}),P(1,ar,3,3,"div",41),i(2,"div",42),P(3,sr,2,0,"svg",43)(4,lr,2,0,"svg",43)(5,cr,3,0,"svg",43)(6,dr,3,0,"svg",43)(7,pr,2,0,"svg",43)(8,gr,6,0,"div",44)(9,mr,5,0,"div",45)(10,ur,7,0,"div",46)(11,fr,7,0,"div",47)(12,hr,7,0,"div",48),r(),i(13,"div",49)(14,"div",50),l(15),P(16,Cr,2,1,"span",51),r(),P(17,_r,3,4,"div",52)(18,xr,5,5,"div",53),r(),P(19,vr,3,4,"button",54)(20,Pr,5,1,"button",55),r()}if(a&2){let e=t.$implicit,n=p(2);R("selected",n.isItemSelected(e.id))("special-folder",e.id==="recent-files")("disabled",n.isItemDisabled(e)),le("data-file-id",e.id),c(),g("ngIf",n.isSelectionMode&&n.canSelectItem(e)),c(),R("folder-icon",e.type==="folder")("special-folder-icon",e.isSpecialFolder)("my-files-icon",e.folderType==="my-files")("favorites-icon",e.folderType==="favorites")("results-icon",e.folderType==="results")("recent-folder-icon",e.folderType==="recent-files"),c(),g("ngIf",e.folderType==="my-files"),c(),g("ngIf",e.folderType==="favorites"),c(),g("ngIf",e.folderType==="results"),c(),g("ngIf",e.folderType==="recent-files"),c(),g("ngIf",e.type==="folder"&&!e.isSpecialFolder),c(),g("ngIf",e.type==="pdf"&&(!e.documentType||e.documentType==="viewer"||e.documentType==="editor"||e.documentType==="converted"||e.documentType==="page-numbered")),c(),g("ngIf",e.documentType==="image"),c(),g("ngIf",e.documentType==="excel"),c(),g("ngIf",e.documentType==="word"),c(),g("ngIf",e.documentType==="ppt"),c(3),D(" ",e.name," "),c(),g("ngIf",e.type==="folder"&&e.fileCount&&e.fileCount>0),c(),g("ngIf",e.type==="folder"&&!e.isSpecialFolder&&e.date),c(),g("ngIf",e.type==="pdf"),c(),g("ngIf",e.type==="pdf"&&!n.isSelectionMode&&(n.pendingAction==null?null:n.pendingAction.action)!=="convert-to-pdf"&&(n.pendingAction==null?null:n.pendingAction.action)!=="convert-pdf"),c(),g("ngIf",!n.isSelectionMode&&!e.isSpecialFolder&&(n.pendingAction==null?null:n.pendingAction.action)!=="convert-to-pdf"&&(n.pendingAction==null?null:n.pendingAction.action)!=="convert-pdf")}}function wr(a,t){if(a&1&&(i(0,"div",38),P(1,Mr,21,36,"div",39),r()),a&2){let e=p();c(),g("ngForOf",e.items)}}function yr(a,t){a&1&&(i(0,"p",109),l(1,"\uD3F4\uB354\uB97C \uC120\uD0DD\uD558\uC138\uC694"),r())}function Sr(a,t){a&1&&(i(0,"p",109),l(1,"\uD3F4\uB354\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"),r())}function Or(a,t){a&1&&(i(0,"p",109),l(1,"\uCD5C\uADFC \uBCF8 \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),r())}function kr(a,t){a&1&&(i(0,"p",109),l(1,"\uC990\uACA8\uCC3E\uAE30\uD55C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),r())}function Er(a,t){a&1&&(i(0,"p",109),l(1,"\uC0DD\uC131\uB41C \uACB0\uACFC\uBB3C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),r())}function Dr(a,t){a&1&&(i(0,"p",109),l(1,"\uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),r())}function Tr(a,t){a&1&&(i(0,"p",110),l(1,"\uD558\uB2E8\uC758 + \uBC84\uD2BC\uC744 \uB20C\uB7EC \uD30C\uC77C\uC744 \uCD94\uAC00\uD558\uC138\uC694"),r())}function Ar(a,t){a&1&&(i(0,"p",110),l(1,"\uD30C\uC77C \uBAA9\uB85D\uC5D0\uC11C \uBCC4 \uC544\uC774\uCF58\uC744 \uB20C\uB7EC \uC990\uACA8\uCC3E\uAE30\uC5D0 \uCD94\uAC00\uD558\uC138\uC694"),r())}function zr(a,t){a&1&&(i(0,"p",110),l(1,"AI \uC694\uC57D, \uBC88\uC5ED \uB4F1\uC758 \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD558\uBA74 \uACB0\uACFC\uBB3C\uC774 \uC5EC\uAE30\uC5D0 \uC800\uC7A5\uB429\uB2C8\uB2E4"),r())}function Br(a,t){if(a&1&&(i(0,"div",103),C(),i(1,"svg",104),m(2,"path",105)(3,"polyline",106),r(),P(4,yr,2,0,"p",107)(5,Sr,2,0,"p",107)(6,Or,2,0,"p",107)(7,kr,2,0,"p",107)(8,Er,2,0,"p",107)(9,Dr,2,0,"p",107)(10,Tr,2,0,"p",108)(11,Ar,2,0,"p",108)(12,zr,2,0,"p",108),r()),a&2){let e=p();c(4),g("ngIf",!e.currentFolder),c(),g("ngIf",e.currentFolder==="my-files"),c(),g("ngIf",e.currentFolder==="recent-files"),c(),g("ngIf",e.currentFolder==="favorites"),c(),g("ngIf",e.currentFolder==="results"),c(),g("ngIf",e.currentFolder&&e.currentFolder!=="my-files"&&e.currentFolder!=="recent-files"&&e.currentFolder!=="favorites"&&e.currentFolder!=="results"),c(),g("ngIf",e.shouldShowFab),c(),g("ngIf",e.currentFolder==="favorites"),c(),g("ngIf",e.currentFolder==="results")}}function Fr(a,t){if(a&1){let e=w();i(0,"div",111)(1,"span",112),l(2),r(),i(3,"button",113),u("click",function(){f(e);let o=p();return h(o.deleteSelectedItems())}),C(),i(4,"svg",29),m(5,"path",114),r(),l(6," \uC0AD\uC81C "),r()()}if(a&2){let e=p();c(2),D("",e.selectedItems.size,"\uAC1C \uC120\uD0DD\uB428")}}function Ir(a,t){if(a&1){let e=w();i(0,"div",115)(1,"span",112),l(2),r(),i(3,"button",116),u("click",function(){f(e);let o=p();return h(o.onConfirmMergeSelection())}),C(),i(4,"svg",29),m(5,"path",117)(6,"polyline",118)(7,"line",119)(8,"line",120),r(),l(9," \uBCD1\uD569\uD558\uAE30 "),r()()}if(a&2){let e=p();c(2),D("",e.selectedItems.size,"\uAC1C \uC120\uD0DD\uB428"),c(),g("disabled",e.selectedItems.size<2)}}function Rr(a,t){if(a&1){let e=w();i(0,"button",121),u("click",function(){f(e);let o=p();return h(o.onAddClick())}),C(),i(1,"svg",24),m(2,"path",122),r()()}}function Vr(a,t){if(a&1){let e=w();i(0,"button",123),u("click",function(){f(e);let o=p();return h(o.onActionSelected("file"))}),i(1,"div",124),C(),i(2,"svg",24),m(3,"path",125)(4,"polyline",126)(5,"path",127),r()(),v(),i(6,"span",128),l(7,"\uD30C\uC77C \uCD94\uAC00"),r()()}}function Nr(a,t){if(a&1){let e=w();i(0,"button",123),u("click",function(){f(e);let o=p();return h(o.onActionSelected("folder"))}),i(1,"div",124),C(),i(2,"svg",24),m(3,"path",129)(4,"path",130),r()(),v(),i(5,"span",128),l(6,"\uD3F4\uB354 \uB9CC\uB4E4\uAE30"),r()()}}function Lr(a,t){a&1&&(i(0,"p",143),l(1,".pdf \uD655\uC7A5\uC790\uB294 \uC790\uB3D9\uC73C\uB85C \uCD94\uAC00\uB429\uB2C8\uB2E4."),r())}function jr(a,t){if(a&1){let e=w();me(0),i(1,"div",133)(2,"button",134),u("click",function(){f(e);let o=p(2);return h(o.cancelRenameFromSheet())}),C(),i(3,"svg",29),m(4,"path",25),r()(),v(),i(5,"h3",135),l(6,"\uC774\uB984 \uBCC0\uACBD"),r()(),i(7,"div",136)(8,"label",137),l(9,"\uC0C8 \uC774\uB984"),r(),i(10,"input",138),u("input",function(o){f(e);let s=p(2);return h(s.renameInputValue=o.target.value||"")}),r(),P(11,Lr,2,0,"p",139),i(12,"div",140)(13,"button",141),u("click",function(){f(e);let o=p(2);return h(o.cancelRenameFromSheet())}),l(14,"\uCDE8\uC18C"),r(),i(15,"button",142),u("click",function(){f(e);let o=p(2);return h(o.confirmRenameFromSheet())}),l(16,"\uC644\uB8CC"),r()()(),ue()}if(a&2){let e=p(2);c(10),g("value",e.renameInputValue),c(),g("ngIf",(e.renameTarget==null?null:e.renameTarget.type)==="pdf")}}function Hr(a,t){if(a&1){let e=w();me(0),i(1,"button",146),u("click",function(){f(e);let o=p(3);return h(o.onItemAction("open"))}),C(),i(2,"svg",24),m(3,"path",147)(4,"polyline",148),r(),v(),i(5,"span"),l(6,"\uD3B8\uC9D1"),r()(),i(7,"button",146),u("click",function(){f(e);let o=p(3);return h(o.onItemAction("share"))}),C(),i(8,"svg",24),m(9,"path",149)(10,"polyline",150)(11,"line",151),r(),v(),i(12,"span"),l(13,"\uACF5\uC720"),r()(),i(14,"button",146),u("click",function(){f(e);let o=p(3);return h(o.onItemAction("rename"))}),C(),i(15,"svg",24),m(16,"path",152)(17,"path",153),r(),v(),i(18,"span"),l(19,"\uC774\uB984\uBCC0\uACBD"),r()(),i(20,"button",146),u("click",function(){f(e);let o=p(3);return h(o.onItemAction("duplicate"))}),C(),i(21,"svg",24),m(22,"rect",154)(23,"path",155),r(),v(),i(24,"span"),l(25,"\uBCF5\uC81C"),r()(),i(26,"button",156),u("click",function(){f(e);let o=p(3);return h(o.onItemAction("delete"))}),C(),i(27,"svg",24),m(28,"path",157)(29,"line",158)(30,"line",159),r(),v(),i(31,"span"),l(32,"\uC0AD\uC81C"),r()(),ue()}}function Gr(a,t){if(a&1){let e=w();me(0),i(1,"button",146),u("click",function(){f(e);let o=p(3);return h(o.onItemAction("rename"))}),C(),i(2,"svg",24),m(3,"path",152)(4,"path",153),r(),v(),i(5,"span"),l(6,"\uC774\uB984 \uBCC0\uACBD"),r()(),i(7,"button",156),u("click",function(){f(e);let o=p(3);return h(o.onItemAction("delete"))}),C(),i(8,"svg",24),m(9,"path",157)(10,"line",158)(11,"line",159),r(),v(),i(12,"span"),l(13,"\uC0AD\uC81C"),r()(),ue()}}function $r(a,t){if(a&1&&(i(0,"div",144)(1,"h3",135),l(2),r()(),i(3,"div",145),P(4,Hr,33,0,"ng-container",37)(5,Gr,14,0,"ng-container",37),r()),a&2){let e=p(2);c(2),E(e.selectedItem.name),c(2),g("ngIf",e.selectedItem.type==="pdf"),c(),g("ngIf",e.selectedItem.type==="folder")}}function Wr(a,t){if(a&1&&(i(0,"div",131),P(1,jr,17,2,"ng-container",132)(2,$r,6,3,"ng-template",null,0,Xe),r()),a&2){let e=ht(3),n=p();c(),g("ngIf",n.isRenameMode)("ngIfElse",e)}}var pt=class a{currentActiveTab="files";sheetState="collapsed";selectedItems=new Set;isSelectionMode=!1;pendingAction=null;pendingActionSubscription;slideDirection="left";currentFolder=null;currentFolderName="";recentFilesCount=0;favoritesCount=0;resultsCount=0;rootDocumentsCount=0;showFolderDialog=!1;folderDialogTitle="\uD3F4\uB354 \uB9CC\uB4E4\uAE30";folderDialogInitialValue="";editingFolderId=null;itemSheetState="collapsed";selectedItem=null;folders=[];documents=[];childFolders=[];activeFileMenuId=null;isRenameMode=!1;renameInputValue="";renameTarget=null;get items(){if(this.currentFolder){if(this.currentFolder==="my-files"){let n=this.folders.map(s=>{let d=this.getFolderLastModifiedDate(s);return{id:s.id,name:s.name,type:"folder",date:d,createdAt:this.safeParseDate(s.createdAt),updatedAt:this.safeParseDate(s.updatedAt),fileCount:s.fileCount||0,folderType:"normal"}}),o=this.documents.map(s=>({id:s.id,name:s.fileName||s.title,type:"pdf",date:this.getDocumentLastModifiedDate(s),size:s.fileSize||0,isFavorite:s.isFavorite,documentType:s.documentType}));return[...n,...o]}if(this.currentFolder==="recent-files")return this.documents.map(n=>({id:n.id,name:n.fileName||n.title,type:"pdf",date:this.getDocumentLastModifiedDate(n),size:0,isFavorite:n.isFavorite,documentType:n.documentType}));if(this.currentFolder==="favorites")return this.documents.map(n=>({id:n.id,name:n.fileName||n.title,type:"pdf",date:this.getDocumentLastModifiedDate(n),size:0,isFavorite:n.isFavorite,documentType:n.documentType}));if(this.currentFolder==="results")return this.documents.map(n=>({id:n.id,name:n.fileName||n.title,type:"pdf",date:this.getDocumentLastModifiedDate(n),size:0,isFavorite:n.isFavorite,documentType:n.documentType}));let t=this.childFolders.map(n=>({id:n.id,name:n.name,type:"folder",date:this.getFolderLastModifiedDate(n),fileCount:n.fileCount||0,folderType:"normal",isSpecialFolder:!1})),e=this.documents.map(n=>({id:n.id,name:n.fileName||n.title,type:"pdf",date:this.getDocumentLastModifiedDate(n),size:n.fileSize||0,isFavorite:n.isFavorite,documentType:n.documentType}));return[...t,...e]}else{let t={id:"my-files",name:"\uB0B4\uD30C\uC77C",type:"folder",date:null,fileCount:this.folders.length+this.rootDocumentsCount,isSpecialFolder:!0,folderType:"my-files"},e={id:"recent-files",name:"\uCD5C\uADFC \uBCF8 \uD30C\uC77C",type:"folder",date:null,fileCount:this.recentFilesCount,isSpecialFolder:!0,folderType:"recent-files"},n={id:"favorites",name:"\uC990\uACA8\uCC3E\uAE30",type:"folder",date:null,fileCount:this.favoritesCount,isSpecialFolder:!0,folderType:"favorites"},o={id:"results",name:"\uB0B4\uACB0\uACFC\uBB3C",type:"folder",date:null,fileCount:this.resultsCount,isSpecialFolder:!0,folderType:"results"};return[t,e,n,o]}}router=O(V);route=O(Pe);snackbar=O(U);indexedDbService=O(J);cdr=O(fe);toolActionService=O(Te);reversePdfConverter=O(Re);pdfFormatConverter=O(At);ngOnInit(){window.scrollTo(0,0),this.pendingActionSubscription=this.toolActionService.pendingAction$.subscribe(n=>{this.pendingAction=n,console.log("\u{1F4CB} [MyFiles] Pending action \uAC10\uC9C0:",n),n?.action==="merge-pdf"&&(this.isSelectionMode=!0,this.selectedItems.clear(),console.log("\u2705 \uBCD1\uD569 \uBAA8\uB4DC: \uC120\uD0DD \uBAA8\uB4DC \uD65C\uC131\uD654")),n?.action==="convert-to-pdf"&&(this.isSelectionMode=!1,this.selectedItems.clear(),console.log("\u2705 PDF \uBCC0\uD658 \uBAA8\uB4DC: \uC9C1\uC811 \uD074\uB9AD \uBC29\uC2DD")),this.cdr.detectChanges()});let e=this.router.getCurrentNavigation()?.extras?.state||history.state;e&&e.selectMode==="merge"&&e.currentDocument&&(this.pendingAction={toolId:"merge-additional",toolLabel:"PDF \uBCD1\uD569 - \uCD94\uAC00 \uD30C\uC77C \uC120\uD0DD",action:"merge-additional",requiresFileSelection:!0,data:{currentDocument:e.currentDocument}}),this.route.params.subscribe(n=>x(this,null,function*(){let o=n.folderId;o?yield this.loadFolderById(o):this.loadFolders()}))}loadFolders(){return x(this,null,function*(){try{this.folders=yield this.indexedDbService.getFolders(null),this.childFolders=[],this.currentFolder==="my-files"?yield this.loadRootDocuments():this.documents=[];for(let s of this.folders){let d=yield this.indexedDbService.getFolderDocumentCount(s.id);s.fileCount=d}let t=yield this.indexedDbService.getRecentFileEntries(30);this.recentFilesCount=t.length;let e=yield this.indexedDbService.getFavoriteDocuments();this.favoritesCount=e.length;let n=yield this.indexedDbService.getResultDocuments();this.resultsCount=n.length;let o=yield this.indexedDbService.getFolderContents(null);this.rootDocumentsCount=o.length,console.log("\u{1F4C2} \uD3F4\uB354 \uB85C\uB4DC \uC644\uB8CC:",this.folders.length,this.folders),console.log("\u2B50 \uC990\uACA8\uCC3E\uAE30:",this.favoritesCount,"\u{1F4CA} \uACB0\uACFC\uBB3C:",this.resultsCount,"\u{1F4C4} \uB8E8\uD2B8 \uBB38\uC11C:",this.rootDocumentsCount),this.cdr.detectChanges()}catch(t){console.error("\uD3F4\uB354 \uB85C\uB4DC \uC2E4\uD328:",t),this.snackbar.showError("\uD3F4\uB354 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}loadFolderById(t){return x(this,null,function*(){try{if(t==="my-files"){this.currentFolder="my-files",this.currentFolderName="\uB0B4\uD30C\uC77C",yield this.loadFolders(),console.log("\u{1F4C2} \uB0B4\uD30C\uC77C \uD3F4\uB354 \uC5F4\uAE30");return}if(t==="recent-files"){this.currentFolder="recent-files",this.currentFolderName="\uCD5C\uADFC \uBCF8 \uD30C\uC77C",this.childFolders=[],yield this.loadRecentFiles(),console.log("\u{1F4C2} \uCD5C\uADFC \uBCF8 \uD30C\uC77C \uC5F4\uAE30:",this.documents.length);return}if(t==="favorites"){this.currentFolder="favorites",this.currentFolderName="\uC990\uACA8\uCC3E\uAE30",this.childFolders=[],yield this.loadFavoriteFiles(),console.log("\u2B50 \uC990\uACA8\uCC3E\uAE30 \uD3F4\uB354 \uC5F4\uAE30:",this.documents.length);return}if(t==="results"){this.currentFolder="results",this.currentFolderName="\uB0B4\uACB0\uACFC\uBB3C",this.childFolders=[],yield this.loadResultFiles(),this.cdr.detectChanges(),console.log("\u{1F4CA} \uB0B4\uACB0\uACFC\uBB3C \uD3F4\uB354 \uC5F4\uAE30:",this.documents.length);return}let e=yield this.indexedDbService.getFolderById(t);if(!e){this.snackbar.showError("\uD3F4\uB354\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/myfiles"]);return}this.currentFolder=e.id,this.currentFolderName=e.name,yield this.loadChildFolders(t),yield this.loadFolderContents(t),console.log("\u{1F4C2} \uD3F4\uB354 \uC5F4\uAE30:",e.name)}catch(e){console.error("\uD3F4\uB354 \uB85C\uB4DC \uC2E4\uD328:",e),this.snackbar.showError("\uD3F4\uB354\uB97C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/myfiles"])}})}loadFolderContents(t){return x(this,null,function*(){try{this.documents=yield this.indexedDbService.getFolderContents(t),console.log(`\u{1F4C4} \uD3F4\uB354 \uB0B4\uC6A9 \uB85C\uB4DC \uC644\uB8CC: ${this.documents.length}\uAC1C`),this.cdr.detectChanges()}catch(e){console.error("\uD3F4\uB354 \uB0B4\uC6A9 \uB85C\uB4DC \uC2E4\uD328:",e),this.snackbar.showError("\uD3F4\uB354 \uB0B4\uC6A9\uC744 \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}loadChildFolders(t){return x(this,null,function*(){try{this.childFolders=yield this.indexedDbService.getFolders(t);for(let e of this.childFolders){let n=yield this.indexedDbService.getFolderDocumentCount(e.id);e.fileCount=n}}catch(e){console.error("\uD558\uC704 \uD3F4\uB354 \uB85C\uB4DC \uC2E4\uD328:",e),this.childFolders=[]}})}loadRootDocuments(){return x(this,null,function*(){try{this.documents=yield this.indexedDbService.getFolderContents(null),this.cdr.detectChanges()}catch(t){console.error("\uB8E8\uD2B8 \uBB38\uC11C \uB85C\uB4DC \uC2E4\uD328:",t),this.documents=[]}})}loadRecentFiles(){return x(this,null,function*(){try{let t=yield this.indexedDbService.getRecentFileEntries(30),e=[];for(let n of t){let o=yield this.indexedDbService.getDocumentById(n.documentId);o&&e.push(o)}this.documents=e,console.log(`\u{1F4C4} \uCD5C\uADFC \uD30C\uC77C \uB85C\uB4DC \uC644\uB8CC: ${this.documents.length}\uAC1C`),this.cdr.detectChanges()}catch(t){console.error("\uCD5C\uADFC \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328:",t),this.snackbar.showError("\uCD5C\uADFC \uD30C\uC77C\uC744 \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}loadFavoriteFiles(){return x(this,null,function*(){try{this.documents=yield this.indexedDbService.getFavoriteDocuments(),console.log(`\u2B50 \uC990\uACA8\uCC3E\uAE30 \uD30C\uC77C \uB85C\uB4DC \uC644\uB8CC: ${this.documents.length}\uAC1C`),this.cdr.detectChanges()}catch(t){console.error("\uC990\uACA8\uCC3E\uAE30 \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328:",t),this.snackbar.showError("\uC990\uACA8\uCC3E\uAE30 \uD30C\uC77C\uC744 \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}loadResultFiles(){return x(this,null,function*(){try{this.documents=yield this.indexedDbService.getResultDocuments(),console.log(`\u{1F4CA} \uACB0\uACFC\uBB3C \uD30C\uC77C \uB85C\uB4DC \uC644\uB8CC: ${this.documents.length}\uAC1C`),this.cdr.detectChanges()}catch(t){console.error("\uACB0\uACFC\uBB3C \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328:",t),this.snackbar.showError("\uACB0\uACFC\uBB3C \uD30C\uC77C\uC744 \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}formatFileSize(t){return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(2)+" KB":(t/(1024*1024)).toFixed(2)+" MB"}safeParseDate(t){if(!t)return null;let e=new Date(t);return isNaN(e.getTime())?null:e}getDocumentLastModifiedDate(t){return this.safeParseDate(t.updatedAt)||this.safeParseDate(t.createdAt)||new Date}getFolderLastModifiedDate(t){return this.safeParseDate(t.updatedAt)||this.safeParseDate(t.createdAt)}isRestrictedSystemFolder(t){return t==="favorites"||t==="results"||t==="recent-files"}isFolderListingContext(){return!this.currentFolder||this.currentFolder==="my-files"}getActiveFolderId(){return!this.currentFolder||this.currentFolder==="my-files"||this.isRestrictedSystemFolder(this.currentFolder)?null:this.currentFolder}toggleFileMenu(t){this.activeFileMenuId=this.activeFileMenuId===t?null:t}closeFileMenu(){this.activeFileMenuId&&(this.activeFileMenuId=null)}resetRenameState(){this.isRenameMode=!1,this.renameInputValue="",this.renameTarget=null}openRenameSheet(t){this.isRenameMode=!0,this.renameTarget=t,this.renameInputValue=t.name,this.selectedItem=t,this.itemSheetState="full"}cancelRenameFromSheet(){this.resetRenameState(),this.selectedItem=null,this.itemSheetState="collapsed"}confirmRenameFromSheet(){return x(this,null,function*(){if(!this.renameTarget)return;let t=this.renameInputValue.trim();if(!t){this.snackbar.showWarning("\uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694.");return}try{this.renameTarget.type==="folder"?(yield this.indexedDbService.updateFolder(this.renameTarget.id,t),this.snackbar.showSuccess("\uD3F4\uB354 \uC774\uB984\uC774 \uBCC0\uACBD\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")):(yield this.renamePdfDocument(this.renameTarget,t),this.snackbar.showSuccess("\uD30C\uC77C \uC774\uB984\uC774 \uBCC0\uACBD\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")),yield this.refreshCurrentView(),this.cancelRenameFromSheet()}catch(e){console.error("\uC774\uB984 \uBCC0\uACBD \uC2E4\uD328:",e),this.snackbar.showError("\uC774\uB984\uC744 \uBCC0\uACBD\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}onAddClick(){this.sheetState="half"}onSelectClick(){if(this.items.length===0){this.snackbar.showWarning("\uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.isSelectionMode=!this.isSelectionMode,this.isSelectionMode||this.selectedItems.clear()}toggleItemSelection(t){this.isSelectionMode&&this.canSelectItem(t)&&(this.selectedItems.has(t.id)?this.selectedItems.delete(t.id):this.selectedItems.add(t.id))}isItemSelected(t){return this.selectedItems.has(t)}canSelectItem(t){if(!this.isSelectionMode||t.isSpecialFolder)return!1;if(this.pendingAction?.action==="merge-pdf")return t.type==="pdf";if(this.pendingAction?.action==="convert-to-pdf"){let e=this.pendingAction.data?.sourceFileType;return e&&t.type==="pdf"?t.documentType===e:!1}return this.isFolderListingContext()?t.type==="folder":t.type==="pdf"}isItemDisabled(t){if(t.isSpecialFolder)return!1;if(this.pendingAction?.action==="convert-to-pdf"){if(console.log("\u{1F50D} convert-to-pdf \uBAA8\uB4DC - item:",t.name,"documentType:",t.documentType,"sourceFileType:",this.pendingAction.data?.sourceFileType),t.type==="folder")return!1;let e=this.pendingAction.data?.sourceFileType,n=t.documentType!==e;return console.log("  \u2192 disabled:",n),n}if(this.pendingAction?.action==="convert-pdf"){if(console.log("\u{1F50D} convert-pdf \uBAA8\uB4DC - item:",t.name,"documentType:",t.documentType),t.type==="folder")return!1;let e=!t.documentType||t.documentType==="viewer"||t.documentType==="editor"||t.documentType==="converted";return console.log("  \u2192 isPdf:",e,", disabled:",!e),!e}return!1}onItemClick(t){if(this.closeFileMenu(),console.log("\u{1F535} [MyFiles] onItemClick:",t.name,"type:",t.type),console.log("\u{1F535} [MyFiles] pendingAction:",this.pendingAction),console.log("\u{1F535} [MyFiles] isSelectionMode:",this.isSelectionMode),this.isSelectionMode){if(this.pendingAction?.action==="merge-pdf"&&t.type==="folder"){this.openFolder(t);return}this.toggleItemSelection(t);return}if(this.pendingAction&&this.pendingAction.requiresFileSelection){if(console.log("\u{1F7E2} [MyFiles] Pending action \uC788\uC74C - action:",this.pendingAction.action),this.pendingAction.action==="convert-to-pdf"&&t.type==="folder"){console.log("\u{1F7E2} [MyFiles] convert-to-pdf \uD3F4\uB354 \uC5F4\uAE30"),this.openFolder(t);return}if(this.pendingAction.action==="convert-to-pdf"&&t.type==="pdf"){let e=this.pendingAction.data?.sourceFileType;if(t.documentType===e){console.log("\u{1F7E2} [MyFiles] convert-to-pdf \uD30C\uC77C \uBCC0\uD658"),this.handlePendingAction(t);return}}if(this.pendingAction.action!=="merge-pdf"&&t.type==="pdf"){console.log("\u{1F7E2} [MyFiles] \uAE30\uD0C0 pending action \uC2E4\uD589:",this.pendingAction.action),this.handlePendingAction(t);return}}console.log("\u{1F534} [MyFiles] \uC77C\uBC18 \uD074\uB9AD \uCC98\uB9AC - item.type:",t.type),t.type==="folder"?(console.log("\u{1F534} [MyFiles] openFolder \uD638\uCD9C"),this.openFolder(t)):t.type==="pdf"&&(console.log("\u{1F534} [MyFiles] openPdf \uD638\uCD9C - \uBDF0\uC5B4\uB85C \uC774\uB3D9"),this.openPdf(t))}handlePendingAction(t){return x(this,null,function*(){if(this.pendingAction){console.log("\u{1F3AF} [MyFiles] Pending action \uC2E4\uD589:",this.pendingAction.action,t.name);try{let e=yield this.indexedDbService.getDocumentById(t.id);if(!e){this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(this.pendingAction.action==="ai-summary"){this.router.navigate(["/ezm/ai-summary"],{state:{document:e}}),this.toolActionService.clearPendingAction();return}if(this.pendingAction.action==="ai-translate"){this.router.navigate(["/ezm/ai-translate"],{state:{document:e}}),this.toolActionService.clearPendingAction();return}if(this.pendingAction.action==="convert-pdf"){yield this.convertPdfToFormat(e,this.pendingAction.toolId),this.toolActionService.clearPendingAction();return}if(this.pendingAction.action==="convert-to-pdf"){let n=this.pendingAction.data?.sourceFileType;if(e.documentType!==n){this.snackbar.showError(`${n} \uD30C\uC77C\uB9CC \uC120\uD0DD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.`);return}if(!e.originalFileData||!e.mimeType){this.snackbar.showError("\uC6D0\uBCF8 \uD30C\uC77C \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}yield this.convertFileToPdf(e,this.pendingAction.data?.convertType),this.toolActionService.clearPendingAction();return}if(this.pendingAction.action==="rotate-pdf"){this.router.navigate(["/ezm/rotate"],{state:{document:e}}),this.toolActionService.clearPendingAction();return}if(this.pendingAction.action==="split-pdf"){this.router.navigate(["/ezm/split"],{state:{document:e}}),this.toolActionService.clearPendingAction();return}if(this.pendingAction.action==="encrypt-pdf"){this.router.navigate(["/ezm/encrypt"],{state:{document:e}}),this.toolActionService.clearPendingAction();return}if(this.pendingAction.action==="decrypt-pdf"){this.router.navigate(["/ezm/decrypt"],{state:{document:e}}),this.toolActionService.clearPendingAction();return}if(this.pendingAction.action==="edit"){let o=(e.fileName||e.title||"").toLowerCase().split(".").pop();if(o!=="pdf"){["jpg","jpeg","png","gif","bmp","webp"].includes(o||"")?this.snackbar.showError("\uC774\uBBF8\uC9C0 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):["xlsx","xls","csv"].includes(o||"")?this.snackbar.showError("\uC5D1\uC140 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):["docx","doc"].includes(o||"")?this.snackbar.showError("\uC6CC\uB4DC \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):["pptx","ppt"].includes(o||"")?this.snackbar.showError("\uD30C\uC6CC\uD3EC\uC778\uD2B8 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):this.snackbar.showError("PDF \uD30C\uC77C\uB9CC \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),this.toolActionService.clearPendingAction();return}this.router.navigate(["/ezm/viewer"],{state:{document:e,mode:"convert"}}),this.toolActionService.clearPendingAction();return}if(this.pendingAction.action==="organize-pdf"){console.log("\u2705 [MyFiles] organize-pdf \uC561\uC158 - organize \uD398\uC774\uC9C0\uB85C \uC774\uB3D9"),this.router.navigate(["/ezm/organize"],{state:{document:e}}),this.toolActionService.clearPendingAction();return}if(this.pendingAction.action==="add-page-numbers"){this.router.navigate(["/ezm/page-number"],{state:{docData:e}}),this.toolActionService.clearPendingAction();return}if(this.pendingAction.action==="merge-additional"){let n=this.pendingAction.data?.currentDocument;if(!n){this.snackbar.showError("\uC6D0\uBCF8 \uBB38\uC11C \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.router.navigate(["/ezm/organize"],{state:{document:n,additionalDocument:e}}),this.pendingAction=null;return}}catch(e){console.error("Pending action \uCC98\uB9AC \uC2E4\uD328:",e),this.snackbar.showError("\uC791\uC5C5\uC744 \uC218\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}}})}onCancelPendingAction(){this.toolActionService.clearPendingAction(),this.pendingAction?.action==="merge-pdf"&&(this.isSelectionMode=!1,this.selectedItems.clear()),this.snackbar.showInfo("\uC791\uC5C5\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}onMoreClick(t,e){e.stopPropagation(),this.resetRenameState(),!(this.pendingAction&&this.pendingAction.action==="merge-additional")&&(this.selectedItem=t,this.itemSheetState="half")}onItemSheetClose(){this.itemSheetState="collapsed",this.resetRenameState(),this.selectedItem=null}onFileMenuAction(t,e,n){return x(this,null,function*(){if(n.stopPropagation(),e.type==="pdf")switch(this.closeFileMenu(),t){case"share":yield this.sharePdfFile(e);break;case"rename":this.openRenameSheet(e);return;case"duplicate":yield this.duplicatePdfFile(e);break;case"delete":yield this.deletePdfFile(e);break}})}onItemAction(t){return x(this,null,function*(){if(!this.selectedItem)return;let e=this.selectedItem;if(t==="rename"){this.openRenameSheet(e);return}if(t==="share"){this.itemSheetState="collapsed",this.selectedItem=null,yield this.sharePdfFile(e);return}if(t==="duplicate"){this.itemSheetState="collapsed",this.selectedItem=null,yield this.duplicatePdfFile(e);return}if(this.itemSheetState="collapsed",this.selectedItem=null,e.type==="pdf"&&t==="open"){try{let n=yield this.indexedDbService.getDocumentById(e.id);if(!n){this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let s=(n.fileName||n.title||"").toLowerCase().split(".").pop();if(s!=="pdf"){["jpg","jpeg","png","gif","bmp","webp"].includes(s||"")?this.snackbar.showError("\uC774\uBBF8\uC9C0 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):["xlsx","xls","csv"].includes(s||"")?this.snackbar.showError("\uC5D1\uC140 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):["docx","doc"].includes(s||"")?this.snackbar.showError("\uC6CC\uB4DC \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):["pptx","ppt"].includes(s||"")?this.snackbar.showError("\uD30C\uC6CC\uD3EC\uC778\uD2B8 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."):this.snackbar.showError("PDF \uD30C\uC77C\uB9CC \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC788\uC2B5\uB2C8\uB2E4.");return}this.router.navigate(["/ezm/viewer"],{state:{document:n,mode:"editor"}})}catch(n){console.error("\uBB38\uC11C \uB85C\uB4DC \uC2E4\uD328:",n),this.snackbar.showError("\uBB38\uC11C\uB97C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}return}if(t==="delete")if(e.type==="folder")yield this.deleteSingleFolder(e);else{if(!(yield ve(`"${e.name}" \uD30C\uC77C\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`)))return;try{yield this.indexedDbService.deleteDocument(e.id),this.snackbar.showSuccess("\uD30C\uC77C\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.currentFolder?yield this.loadFolderContents(this.currentFolder):yield this.loadFolders()}catch(o){console.error("\uD30C\uC77C \uC0AD\uC81C \uC2E4\uD328:",o),this.snackbar.showError("\uD30C\uC77C \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}})}deleteSingleFolder(t){return x(this,null,function*(){if(yield ve(`"${t.name}" \uD3F4\uB354\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?
(\uD3F4\uB354 \uB0B4 \uD30C\uC77C\uC740 \uB8E8\uD2B8\uB85C \uC774\uB3D9\uB429\uB2C8\uB2E4)`))try{yield this.indexedDbService.deleteFolder(t.id),this.snackbar.showSuccess("\uD3F4\uB354\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),yield this.loadFolders()}catch(n){console.error("\uD3F4\uB354 \uC0AD\uC81C \uC2E4\uD328:",n),this.snackbar.showError("\uD3F4\uB354 \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}openFolder(t){this.slideDirection="left",this.router.navigate(["/ezm/myfiles",t.id]),console.log("\uD3F4\uB354 \uC5F4\uAE30:",t.name)}openPdf(t){return x(this,null,function*(){console.log("PDF \uC5F4\uAE30:",t.name);try{let e=yield this.indexedDbService.getDocumentById(t.id);if(!e){this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let o=(e.fileName||e.title||"").toLowerCase().split(".").pop();if(o&&["jpg","jpeg","png","gif","bmp","webp"].includes(o)){this.snackbar.showError("\uC774\uBBF8\uC9C0 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}else if(o&&["xlsx","xls","csv"].includes(o)){this.snackbar.showError("\uC5D1\uC140 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}else if(o&&["docx","doc"].includes(o)){this.snackbar.showError("\uC6CC\uB4DC \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}else if(o&&["pptx","ppt"].includes(o)){this.snackbar.showError("\uD30C\uC6CC\uD3EC\uC778\uD2B8 \uD30C\uC77C\uC740 \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}else if(o!=="pdf"){this.snackbar.showError("PDF \uD30C\uC77C\uB9CC \uBDF0\uC5B4\uC5D0\uC11C \uC5F4 \uC218 \uC788\uC2B5\uB2C8\uB2E4.");return}this.router.navigate(["/ezm/viewer"],{queryParams:{docId:e.id}})}catch(e){console.error("\uBB38\uC11C \uC5F4\uAE30 \uC2E4\uD328:",e),this.snackbar.showError("\uBB38\uC11C\uB97C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}goBack(){this.currentFolder&&(this.currentFolder==="my-files"||this.currentFolder==="favorites"||this.currentFolder==="results"||this.currentFolder==="recent-files"?this.currentFolder==="recent-files"?(this.slideDirection="right",this.router.navigate(["/ezm/myfiles","my-files"])):(this.slideDirection="right",this.router.navigate(["/ezm/myfiles"])):(this.slideDirection="right",this.router.navigate(["/ezm/myfiles","my-files"])),this.isSelectionMode=!1,this.selectedItems.clear())}toggleFavorite(t,e){return x(this,null,function*(){e.stopPropagation();try{if(yield this.indexedDbService.toggleFavorite(t.id),t.isFavorite=!t.isFavorite,this.currentFolder==="favorites")yield this.loadFavoriteFiles();else{let o=this.documents.find(s=>s.id===t.id);o&&(o.isFavorite=t.isFavorite)}let n=yield this.indexedDbService.getFavoriteDocuments();this.favoritesCount=n.length,this.snackbar.showSuccess(t.isFavorite?"\uC990\uACA8\uCC3E\uAE30\uC5D0 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.":"\uC990\uACA8\uCC3E\uAE30\uC5D0\uC11C \uC81C\uAC70\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.cdr.detectChanges()}catch(n){console.error("\uC990\uACA8\uCC3E\uAE30 \uD1A0\uAE00 \uC2E4\uD328:",n),this.snackbar.showError("\uC990\uACA8\uCC3E\uAE30 \uBCC0\uACBD\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}get shouldShowFab(){return!this.isRestrictedSystemFolder(this.currentFolder)}get canCreateFolderOption(){return!this.isRestrictedSystemFolder(this.currentFolder)}get canAddFileOption(){return this.currentFolder==="my-files"?!0:!!this.getActiveFolderId()}onDocumentClick(){this.closeFileMenu()}onWindowScroll(){this.closeFileMenu()}closeBottomSheet(){this.sheetState="collapsed"}onSheetStateChange(t){this.sheetState=t}onActionSelected(t){switch(this.sheetState="collapsed",t){case"folder":this.createFolder();break;case"image":this.uploadImage();break;case"file":this.uploadFile();break;case"create-pdf":this.createPdf();break}}createFolder(){this.folderDialogTitle="\uD3F4\uB354 \uB9CC\uB4E4\uAE30",this.folderDialogInitialValue="",this.editingFolderId=null,this.showFolderDialog=!0}onFolderDialogConfirm(t){return x(this,null,function*(){try{if(this.editingFolderId)yield this.indexedDbService.updateFolder(this.editingFolderId,t),this.snackbar.showSuccess("\uD3F4\uB354 \uC774\uB984\uC774 \uBCC0\uACBD\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");else{let e=this.getActiveFolderId();yield this.indexedDbService.createFolder(t,e),this.snackbar.showSuccess(`"${t}" \uD3F4\uB354\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),e&&(yield this.loadChildFolders(e))}this.isFolderListingContext()&&(yield this.loadFolders())}catch(e){console.error("\uD3F4\uB354 \uC791\uC5C5 \uC2E4\uD328:",e),this.snackbar.showError("\uD3F4\uB354 \uC791\uC5C5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}onFolderDialogCancel(){this.showFolderDialog=!1,this.editingFolderId=null}uploadImage(){this.snackbar.showInfo("\uC0AC\uC9C4 \uC5C5\uB85C\uB4DC \uAE30\uB2A5\uC740 \uC900\uBE44 \uC911\uC785\uB2C8\uB2E4.")}uploadFile(){let t=document.createElement("input");t.type="file",t.accept=".pdf,.jpg,.jpeg,.png,.gif,.xlsx,.xls,.docx,.pptx",t.onchange=e=>x(this,null,function*(){let n=e.target.files[0];n&&(yield this.handleFileUpload(n))}),t.click()}handleFileUpload(t){return x(this,null,function*(){try{let e=this.getActiveFolderId(),n=this.currentFolder==="my-files";if(!e&&!n){this.snackbar.showWarning("\uD30C\uC77C\uC744 \uCD94\uAC00\uD560 \uD3F4\uB354\uB97C \uBA3C\uC800 \uC120\uD0DD\uD558\uC138\uC694.");return}this.snackbar.showInfo(`"${t.name}" \uC5C5\uB85C\uB4DC \uC911...`);let o=t.name.split(".").pop()?.toLowerCase()||"",s=t.type==="application/pdf"||o==="pdf",d=t.type.startsWith("image/")||["jpg","jpeg","png","gif"].includes(o),_=["xlsx","xls"].includes(o),b=o==="docx",S=o==="pptx",M=yield this.fileToBase64(t),y="viewer";d?y="image":_?y="excel":b?y="word":S&&(y="ppt");let k={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:t.name.replace(/\.[^/.]+$/,""),fileName:t.name,pages:[],elementCount:0,version:"1.0",folderId:e??null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),documentType:y,fileSize:t.size};s?k.pdfBase64=M:(k.originalFileData=M,k.mimeType=t.type),yield this.indexedDbService.saveDocument(k),this.snackbar.showSuccess("\uD30C\uC77C\uC774 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),n?yield this.loadRootDocuments():e&&(yield this.loadFolderContents(e))}catch(e){console.error("\uD30C\uC77C \uC5C5\uB85C\uB4DC \uC2E4\uD328:",e),this.snackbar.showError("\uD30C\uC77C \uC5C5\uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}performMerge(t,e){return x(this,null,function*(){try{this.snackbar.showInfo("PDF \uBCD1\uD569 \uC911...");let n=this.createBlobUrl(t.pdfBase64||""),o=this.createBlobUrl(e.pdfBase64||""),s=window.PDFLib,d=yield s.PDFDocument.create(),b=yield(yield fetch(n)).arrayBuffer(),S=yield s.PDFDocument.load(b);(yield d.copyPages(S,Array.from({length:S.getPageCount()},(Z,te)=>te))).forEach(Z=>d.addPage(Z));let k=yield(yield fetch(o)).arrayBuffer(),T=yield s.PDFDocument.load(k);(yield d.copyPages(T,Array.from({length:T.getPageCount()},(Z,te)=>te))).forEach(Z=>d.addPage(Z));let A=yield d.save(),B=new Blob([A],{type:"application/pdf"}),K=yield this.blobToBase64(B),X=this.getActiveFolderId(),q={id:`merged-${Date.now()}`,title:`${t.title||t.fileName} + ${e.title||e.fileName}`,fileName:`\uBCD1\uD569_${t.fileName||t.title}_${e.fileName||e.title}.pdf`,pdfBase64:K,pages:[],elementCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),version:"1.0",documentType:"viewer",folderId:X,pageCount:S.getPageCount()+T.getPageCount()};yield this.indexedDbService.saveDocument(q),URL.revokeObjectURL(n),URL.revokeObjectURL(o),this.snackbar.showSuccess("PDF \uBCD1\uD569\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),X?yield this.loadFolderContents(X):yield this.loadFolders(),this.pendingAction=null}catch(n){console.error("PDF \uBCD1\uD569 \uC2E4\uD328:",n),this.snackbar.showError("PDF \uBCD1\uD569\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}createBlobUrl(t){let e=t;e.includes(",")&&(e=e.split(",")[1]);let n=atob(e),o=new Uint8Array(n.length);for(let d=0;d<n.length;d++)o[d]=n.charCodeAt(d);let s=new Blob([o],{type:"application/pdf"});return URL.createObjectURL(s)}blobToBase64(t){return new Promise((e,n)=>{let o=new FileReader;o.onloadend=()=>{let s=o.result.split(",")[1];e(s)},o.onerror=n,o.readAsDataURL(t)})}onConfirmMergeSelection(){return x(this,null,function*(){if(this.selectedItems.size<2){this.snackbar.showWarning("\uCD5C\uC18C 2\uAC1C \uC774\uC0C1\uC758 PDF\uB97C \uC120\uD0DD\uD558\uC138\uC694.");return}let t=Array.from(this.selectedItems);yield this.performMultiMerge(t)})}performMultiMerge(t){return x(this,null,function*(){try{this.snackbar.showInfo(`${t.length}\uAC1C PDF \uBCD1\uD569 \uC911...`);let n=(yield Promise.all(t.map(T=>this.indexedDbService.getDocumentById(T)))).filter(T=>T!==void 0);if(n.length<2){this.snackbar.showError("\uC720\uD6A8\uD55C PDF \uD30C\uC77C\uC774 \uBD80\uC871\uD569\uB2C8\uB2E4.");return}let o=window.PDFLib;if(!o){this.snackbar.showError("PDF \uB77C\uC774\uBE0C\uB7EC\uB9AC\uB97C \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let s=yield o.PDFDocument.create(),d=0;for(let T of n){let I=this.createBlobUrl(T.pdfBase64||"");try{let B=yield(yield fetch(I)).arrayBuffer(),K=yield o.PDFDocument.load(B),X=K.getPageCount();(yield s.copyPages(K,Array.from({length:X},(Z,te)=>te))).forEach(Z=>s.addPage(Z)),d+=X,console.log(`\u2705 ${T.fileName||T.title}: ${X}\uD398\uC774\uC9C0 \uCD94\uAC00`)}catch(A){console.error(`\u274C ${T.fileName||T.title} \uBCD1\uD569 \uC2E4\uD328:`,A)}finally{URL.revokeObjectURL(I)}}if(d===0){this.snackbar.showError("\uBCD1\uD569\uD560 \uD398\uC774\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let _=yield s.save(),b=new Blob([_],{type:"application/pdf"}),S=yield this.blobToBase64(b),M=this.getActiveFolderId(),y=new Date().toISOString().slice(0,19).replace(/[:-]/g,"").replace("T","_"),k={id:`merged-${Date.now()}`,title:`\uBCD1\uD569\uB41C_PDF_${n.length}\uAC1C`,fileName:`\uBCD1\uD569_${n.length}\uAC1C_${y}.pdf`,pdfBase64:S,pages:[],elementCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),version:"1.0",documentType:"viewer",folderId:M,pageCount:d};yield this.indexedDbService.saveDocument(k),this.snackbar.showSuccess(`${n.length}\uAC1C PDF\uAC00 \uBCD1\uD569\uB418\uC5C8\uC2B5\uB2C8\uB2E4. (\uCD1D ${d}\uD398\uC774\uC9C0)`),this.isSelectionMode=!1,this.selectedItems.clear(),this.toolActionService.clearPendingAction(),this.pendingAction=null,this.router.navigate(["/ezm/organize"],{state:{document:k}})}catch(e){console.error("\uB2E4\uC911 PDF \uBCD1\uD569 \uC2E4\uD328:",e),this.snackbar.showError("PDF \uBCD1\uD569\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}fileToBase64(t){return new Promise((e,n)=>{let o=new FileReader;o.onload=()=>{let s=o.result;e(s)},o.onerror=n,o.readAsDataURL(t)})}createPdf(){this.snackbar.showInfo("PDF \uB9CC\uB4E4\uAE30 \uAE30\uB2A5\uC740 \uC900\uBE44 \uC911\uC785\uB2C8\uB2E4.")}deleteSelectedItems(){return x(this,null,function*(){if(this.selectedItems.size===0){this.snackbar.showWarning("\uC120\uD0DD\uB41C \uD56D\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(yield ve(`${this.selectedItems.size}\uAC1C \uD56D\uBAA9\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?${this.currentFolder?"":`
(\uD3F4\uB354 \uB0B4 \uD30C\uC77C\uC740 \uB8E8\uD2B8\uB85C \uC774\uB3D9\uB429\uB2C8\uB2E4)`}`))try{for(let e of this.selectedItems)this.isFolderListingContext()?yield this.indexedDbService.deleteFolder(e):yield this.indexedDbService.deleteDocument(e);this.snackbar.showSuccess(`${this.selectedItems.size}\uAC1C \uD56D\uBAA9\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),this.selectedItems.clear(),this.isSelectionMode=!1,this.isFolderListingContext()?yield this.loadFolders():this.currentFolder&&(yield this.loadFolderContents(this.currentFolder))}catch(e){console.error("\uC0AD\uC81C \uC2E4\uD328:",e),this.snackbar.showError("\uD56D\uBAA9 \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}ngOnDestroy(){this.pendingActionSubscription&&this.pendingActionSubscription.unsubscribe()}sharePdfFile(t){return x(this,null,function*(){try{let e=yield this.indexedDbService.getDocumentById(t.id);if(!e){this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let n=e.pdfBase64||e.originalPdfBase64;if(!n){this.snackbar.showError("\uACF5\uC720\uD560 PDF \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let o=this.ensurePdfExtension(e.fileName||e.title||t.name||"document.pdf");if(this.tryNativeShare(o,n)){console.log("\u2705 Native \uACF5\uC720 \uD638\uCD9C \uC644\uB8CC"),this.snackbar.showSuccess("\uBB38\uC11C\uB97C \uACF5\uC720\uD588\uC2B5\uB2C8\uB2E4.");return}if(typeof navigator<"u"&&navigator.share){let s=this.base64ToBlob(n,"application/pdf"),d=[];try{d.push(new File([s],o,{type:"application/pdf"}))}catch(b){console.warn("File \uAC1D\uCCB4 \uC0DD\uC131 \uC2E4\uD328",b)}let _={title:o,text:`${o} \uBB38\uC11C\uB97C \uACF5\uC720\uD569\uB2C8\uB2E4.`};d.length&&(typeof navigator.canShare!="function"||navigator.canShare({files:d}))&&(_.files=d),yield navigator.share(_),this.snackbar.showSuccess("\uBB38\uC11C\uB97C \uACF5\uC720\uD588\uC2B5\uB2C8\uB2E4.");return}console.log("\u{1F4E5} Web Share API \uBBF8\uC9C0\uC6D0 - \uB2E4\uC6B4\uB85C\uB4DC \uC0AC\uC6A9"),this.downloadFile(o,n),this.snackbar.showSuccess("\uD30C\uC77C\uC774 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(e){if(e?.name==="AbortError"){console.log("\uACF5\uC720 \uCDE8\uC18C\uB428");return}console.error("\uBB38\uC11C \uACF5\uC720 \uC2E4\uD328:",e),this.snackbar.showError("\uBB38\uC11C \uACF5\uC720\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}tryNativeShare(t,e){if(typeof window<"u"&&window.parent!==window)try{return console.log("\u{1F4E8} postMessage\uB97C \uD1B5\uD55C \uB124\uC774\uD2F0\uBE0C \uD1B5\uC2E0 \uC2DC\uB3C4"),window.parent.postMessage({type:"share",fileName:t,data:e},"*"),!0}catch(n){console.warn("postMessage \uC2E4\uD328:",n)}return window.ReactNativeWebView?(console.log("\u{1F4F1} React Native WebView \uAC10\uC9C0"),window.ReactNativeWebView.postMessage(JSON.stringify({type:"share",fileName:t,data:e})),!0):window.webkit?.messageHandlers?.shareFile?(console.log("\u{1F34E} iOS WKWebView \uAC10\uC9C0"),window.webkit.messageHandlers.shareFile.postMessage({fileName:t,data:e}),!0):window.Android?.shareFile?(console.log("\u{1F916} Android WebView \uAC10\uC9C0"),window.Android.shareFile(t,e),!0):(console.log("\u{1F310} Native Bridge \uBBF8\uAC10\uC9C0 - Web Share API \uC2DC\uB3C4"),!1)}downloadFile(t,e){let n=this.base64ToBlob(e,"application/pdf"),o=URL.createObjectURL(n),s=document.createElement("a");s.href=o,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)}renamePdfDocument(t,e){return x(this,null,function*(){let n=yield this.indexedDbService.getDocumentById(t.id);if(!n)throw new Error("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let o=e.replace(/\.pdf$/i,""),s=this.ensurePdfExtension(e);n.title=o,n.fileName=s,yield this.indexedDbService.updateDocument(n)})}duplicatePdfFile(t){return x(this,null,function*(){try{let e=yield this.indexedDbService.getDocumentById(t.id);if(!e){this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let n=new Date().toISOString(),o=(e.title||e.fileName||t.name||"\uBB38\uC11C").replace(/\.pdf$/i,""),s=se(oe({},e),{id:this.generateDocumentId(),title:`${o} \uC0AC\uBCF8`,fileName:`${o}_\uC0AC\uBCF8.pdf`,createdAt:n,updatedAt:n});yield this.indexedDbService.saveDocument(s),this.snackbar.showSuccess("\uC0AC\uBCF8\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),yield this.refreshCurrentView()}catch(e){console.error("\uD30C\uC77C \uBCF5\uC81C \uC2E4\uD328:",e),this.snackbar.showError("\uD30C\uC77C\uC744 \uBCF5\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}deletePdfFile(t){return x(this,null,function*(){try{if(!(yield ve(`"${t.name}" \uD30C\uC77C\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`)))return;yield this.indexedDbService.deleteDocument(t.id),this.snackbar.showSuccess("\uD30C\uC77C\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),yield this.refreshCurrentView()}catch(e){console.error("\uD30C\uC77C \uC0AD\uC81C \uC2E4\uD328:",e),this.snackbar.showError("\uD30C\uC77C \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}refreshCurrentView(){return x(this,null,function*(){if(!this.currentFolder){yield this.loadFolders();return}switch(this.currentFolder){case"my-files":yield this.loadFolders();break;case"recent-files":yield this.loadRecentFiles();break;case"favorites":yield this.loadFavoriteFiles();break;case"results":yield this.loadResultFiles();break;default:yield this.loadFolderContents(this.currentFolder),yield this.loadChildFolders(this.currentFolder);break}})}ensurePdfExtension(t){let e=t.trim();return/\.pdf$/i.test(e)?e:`${e}.pdf`}base64ToBlob(t,e="application/pdf"){let n=t.includes(",")?t.split(",")[1]:t,o=atob(n),s=new Array(o.length);for(let _=0;_<o.length;_++)s[_]=o.charCodeAt(_);let d=new Uint8Array(s);return new Blob([d],{type:e})}generateDocumentId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}convertFileToPdf(t,e){return x(this,null,function*(){try{this.snackbar.showInfo("\uD30C\uC77C \uBCC0\uD658 \uC911...");let n=t.originalFileData.includes(",")?t.originalFileData.split(",")[1]:t.originalFileData,o=atob(n),s=new Uint8Array(o.length);for(let T=0;T<o.length;T++)s[T]=o.charCodeAt(T);let d=new File([s],t.fileName||"file",{type:t.mimeType}),_=null,b="",S=new Date,M=S.getHours().toString().padStart(2,"0")+S.getMinutes().toString().padStart(2,"0")+S.getSeconds().toString().padStart(2,"0");switch(e){case"image-to-pdf":case"photo-to-pdf":_=yield this.reversePdfConverter.imageToPdf([d]),b=`\uC774\uBBF8\uC9C0\uBCC0\uD658_${M}.pdf`;break;case"excel-to-pdf":_=yield this.reversePdfConverter.excelToPdf(d),b=`\uC5D1\uC140\uBCC0\uD658_${M}.pdf`;break;case"word-to-pdf":_=yield this.reversePdfConverter.wordToPdf(d),b=`\uC6CC\uB4DC\uBCC0\uD658_${M}.pdf`;break;case"ppt-to-pdf":_=yield this.reversePdfConverter.powerPointToPdf(d),b=`PPT\uBCC0\uD658_${M}.pdf`;break}if(!_)throw new Error("PDF \uC0DD\uC131 \uC2E4\uD328");console.log("\u2705 PDF \uC0DD\uC131 \uC644\uB8CC:",b,`(${_.length} bytes)`);let y=`doc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,k=this.uint8ArrayToBase64(_);yield this.indexedDbService.saveDocument({id:y,title:b,fileName:b,pdfBase64:k,thumbnail:"",pages:[],elementCount:0,version:"1.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),documentType:"converted"}),console.log("\u{1F4BE} [IndexedDB] \uC800\uC7A5 \uC644\uB8CC:",y),this.router.navigate(["/ezm/file-saved"],{state:{fileId:y,fileName:b,fileCount:1,title:"\uBCC0\uD658 \uC644\uB8CC!",subtitle:`${b} \uD30C\uC77C\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`}})}catch(n){console.error("\u274C \uBCC0\uD658 \uC2E4\uD328:",n),this.snackbar.showError("\uBCC0\uD658 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}uint8ArrayToBase64(t){let n="";for(let o=0;o<t.length;o+=32768){let s=t.subarray(o,Math.min(o+32768,t.length));n+=String.fromCharCode(...Array.from(s))}return btoa(n)}convertPdfToFormat(t,e){return x(this,null,function*(){try{if(this.snackbar.showInfo("\uBCC0\uD658 \uC911..."),!t.pdfBase64){this.snackbar.showError("PDF \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let n=t.pdfBase64.split(",")[1]||t.pdfBase64,o=atob(n),s=new Uint8Array(o.length);for(let q=0;q<o.length;q++)s[q]=o.charCodeAt(q);let d=new Blob([s],{type:"application/pdf"}),_=URL.createObjectURL(d),b=yield this.pdfFormatConverter.loadPdfDocument(_),M=(t.fileName||"document").replace(/\.pdf$/i,""),y=new Date,k=y.getHours().toString().padStart(2,"0")+y.getMinutes().toString().padStart(2,"0")+y.getSeconds().toString().padStart(2,"0"),T=null,I="",A="",B="image";switch(e){case"pdf-to-powerpoint":T=yield this.pdfFormatConverter.exportToPptBlob(b,M),I=`${M}_\uBCC0\uD658_${k}.pptx`,A="application/vnd.openxmlformats-officedocument.presentationml.presentation",B="ppt";break;case"pdf-to-word":T=yield this.pdfFormatConverter.exportToDocxBlob(b,M),I=`${M}_\uBCC0\uD658_${k}.docx`,A="application/vnd.openxmlformats-officedocument.wordprocessingml.document",B="word";break;case"pdf-to-excel":T=yield this.pdfFormatConverter.exportToExcelBlob(b,M),I=`${M}_\uBCC0\uD658_${k}.xlsx`,A="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",B="excel";break;case"pdf-to-image":T=yield this.pdfFormatConverter.exportToImageBlob(b,M,{scale:2,format:"png"}),I=`${M}_\uBCC0\uD658_${k}.png`,A="image/png",B="image";break;case"pdf-to-jpg":T=yield this.pdfFormatConverter.exportToImageBlob(b,M,{scale:2,format:"jpeg",quality:.9}),I=`${M}_\uBCC0\uD658_${k}.jpg`,A="image/jpeg",B="image";break}if(!T)throw new Error("\uBCC0\uD658 \uC2E4\uD328");URL.revokeObjectURL(_);let K=yield this.blobToBase64(T),X=`doc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;yield this.indexedDbService.saveDocument({id:X,title:I,fileName:I,originalFileData:K,mimeType:A,fileSize:T.size,thumbnail:"",pages:[],elementCount:0,version:"1.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),documentType:B}),console.log("\u2705 PDF \uBCC0\uD658 \uC644\uB8CC \uBC0F \uC800\uC7A5:",I),this.router.navigate(["/ezm/file-saved"],{state:{fileId:X,fileName:I,fileCount:1,title:"\uBCC0\uD658 \uC644\uB8CC!",subtitle:`${I} \uD30C\uC77C\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`}})}catch(n){console.error("\u274C PDF \uBCC0\uD658 \uC2E4\uD328:",n),this.snackbar.showError("\uBCC0\uD658 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-myfiles"]],hostBindings:function(e,n){e&1&&u("click",function(){return n.onDocumentClick()},kn)("scroll",function(){return n.onWindowScroll()},On)},standalone:!1,decls:23,vars:21,consts:[["itemActionsTemplate",""],["class","header",4,"ngIf"],["class","header folder-header",4,"ngIf"],["class","pending-action-banner",4,"ngIf"],[1,"main-content"],[1,"view-container"],["class","files-list",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","selection-bar",4,"ngIf"],["class","selection-bar merge-bar",4,"ngIf"],["class","fab-button",3,"click",4,"ngIf"],[3,"activeTab"],[3,"sheetStateChange","close","sheetState"],[1,"bottom-sheet-header"],[1,"bottom-sheet-title"],[1,"bottom-sheet-content"],[1,"option-list"],["class","option-item",3,"click",4,"ngIf"],[3,"isOpenChange","confirm","cancel","isOpen","title","placeholder","initialValue"],["class","item-sheet-content",4,"ngIf"],[1,"header"],[1,"header-title"],[1,"header","folder-header"],[1,"back-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M15 18l-6-6 6-6","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"pending-action-banner"],[1,"banner-content"],[1,"banner-icon"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["cx","12","cy","12","r","10","stroke","#2196F3","stroke-width","2"],["d","M12 6v6l4 2","stroke","#2196F3","stroke-width","2","stroke-linecap","round"],["class","banner-text",4,"ngIf"],[1,"banner-close",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","#666","stroke-width","2","stroke-linecap","round"],[1,"banner-text"],[4,"ngIf"],[1,"files-list"],["class","file-item",3,"selected","special-folder","disabled","click",4,"ngFor","ngForOf"],[1,"file-item",3,"click"],["class","selection-checkbox",4,"ngIf"],[1,"file-icon"],["width","20","height","20","viewBox","0 0 24 24","fill","none",4,"ngIf"],["class","file-type-icon pdf-icon",4,"ngIf"],["class","file-type-icon image-icon",4,"ngIf"],["class","file-type-icon excel-icon",4,"ngIf"],["class","file-type-icon word-icon",4,"ngIf"],["class","file-type-icon ppt-icon",4,"ngIf"],[1,"file-info"],[1,"file-name"],["class","file-count",4,"ngIf"],["class","folder-last-updated",4,"ngIf"],["class","file-meta",4,"ngIf"],["class","favorite-btn",3,"active","click",4,"ngIf"],["class","more-btn",3,"click",4,"ngIf"],[1,"selection-checkbox"],[1,"checkbox"],["width","16","height","16","viewBox","0 0 24 24","fill","none",4,"ngIf"],["width","16","height","16","viewBox","0 0 24 24","fill","none"],["d","M5 12l5 5L20 7","stroke","white","stroke-width","3","stroke-linecap","round","stroke-linejoin","round"],["d","M3 7v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2h-8L9 5H5c-1.1 0-2 .9-2 2z","stroke","currentColor","stroke-width","2","fill","none"],["d","M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z","stroke","currentColor","stroke-width","2","fill","none"],["x","3","y","3","width","18","height","18","rx","2","stroke","currentColor","stroke-width","2","fill","none"],["d","M9 12l2 2 4-4","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2","fill","none"],["points","12 6 12 12 16 14","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"file-type-icon","pdf-icon"],["width","30","height","30","viewBox","0 0 24 24","fill","none"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z","fill","#E53935"],["d","M14 2v6h6","fill","#C62828"],["x","12","y","17","font-size","7","font-weight","bold","text-anchor","middle","fill","white"],[1,"file-type-icon","image-icon"],["x","3","y","3","width","18","height","18","rx","2","fill","#4CAF50"],["cx","8.5","cy","8.5","r","1.5","fill","white"],["d","M21 15l-5-5L5 21","stroke","white","stroke-width","2","stroke-linecap","round"],[1,"file-type-icon","excel-icon"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z","fill","#1E7E34"],["d","M14 2v6h6","fill","#155724"],["d","M8 13h8M8 16h8","stroke","white","stroke-width","1.5"],["x","12","y","19","font-size","5","font-weight","bold","text-anchor","middle","fill","white"],[1,"file-type-icon","word-icon"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z","fill","#2962FF"],["d","M14 2v6h6","fill","#1565C0"],["d","M8 12h8M8 15h6","stroke","white","stroke-width","1.5","stroke-linecap","round"],[1,"file-type-icon","ppt-icon"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z","fill","#FF6D00"],["d","M14 2v6h6","fill","#E65100"],["x","8","y","11","width","8","height","5","rx","1","stroke","white","stroke-width","1.5","fill","none"],["x","12","y","19.5","font-size","5","font-weight","bold","text-anchor","middle","fill","white"],[1,"file-count"],[1,"folder-last-updated"],[1,"file-meta"],[1,"file-date"],["class","file-size",4,"ngIf"],[1,"file-size"],[1,"favorite-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24"],["d","M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z","stroke","currentColor","stroke-width","2"],[1,"more-btn",3,"click"],["cx","12","cy","5","r","2","fill","currentColor"],["cx","12","cy","12","r","2","fill","currentColor"],["cx","12","cy","19","r","2","fill","currentColor"],[1,"empty-state"],["width","64","height","64","viewBox","0 0 24 24","fill","none"],["d","M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z","stroke","#ccc","stroke-width","2"],["points","13 2 13 9 20 9","stroke","#ccc","stroke-width","2"],["class","empty-text",4,"ngIf"],["class","empty-subtext",4,"ngIf"],[1,"empty-text"],[1,"empty-subtext"],[1,"selection-bar"],[1,"selection-count"],[1,"delete-btn",3,"click"],["d","M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6","stroke","currentColor","stroke-width","2"],[1,"selection-bar","merge-bar"],[1,"merge-btn",3,"click","disabled"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","stroke","currentColor","stroke-width","2"],["points","14 2 14 8 20 8","stroke","currentColor","stroke-width","2"],["x1","12","y1","11","x2","12","y2","17","stroke","currentColor","stroke-width","2"],["x1","9","y1","14","x2","15","y2","14","stroke","currentColor","stroke-width","2"],[1,"fab-button",3,"click"],["d","M12 5v14M5 12h14","stroke","white","stroke-width","2.5","stroke-linecap","round"],[1,"option-item",3,"click"],[1,"option-icon"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","fill","#EF5350","stroke","#E53935","stroke-width","1.5"],["points","14 2 14 8 20 8","stroke","#E53935","stroke-width","1.5"],["d","M12 11v6M9 14h6","stroke","white","stroke-width","1.5","stroke-linecap","round"],[1,"option-label"],["d","M3 7v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2h-8L9 5H5c-1.1 0-2 .9-2 2z","fill","#90A4AE","stroke","#78909C","stroke-width","1.5"],["d","M12 10v6M9 13h6","stroke","white","stroke-width","1.5","stroke-linecap","round"],[1,"item-sheet-content"],[4,"ngIf","ngIfElse"],[1,"sheet-header","rename-mode"],["aria-label","\uC774\uB984 \uBCC0\uACBD \uCDE8\uC18C",1,"sheet-back-btn",3,"click"],[1,"sheet-title"],[1,"rename-form"],["for","renameInput",1,"rename-label"],["id","renameInput","type","text","maxlength","80","placeholder","\uC0C8 \uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694",1,"rename-input",3,"input","value"],["class","rename-helper",4,"ngIf"],[1,"rename-actions"],["type","button",1,"rename-cancel",3,"click"],["type","button",1,"rename-confirm",3,"click"],[1,"rename-helper"],[1,"sheet-header"],[1,"sheet-options"],[1,"sheet-option",3,"click"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","14 2 14 8 20 8","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","16 6 12 2 8 6","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","12","y1","2","x2","12","y2","15","stroke","#333","stroke-width","2","stroke-linecap","round"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x","9","y","9","width","13","height","13","rx","2","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"sheet-option","danger",3,"click"],["d","M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","10","y1","11","x2","10","y2","17","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["x1","14","y1","11","x2","14","y2","17","stroke","currentColor","stroke-width","2","stroke-linecap","round"]],template:function(e,n){e&1&&(P(0,Jo,3,0,"div",1)(1,er,6,1,"div",2)(2,or,11,2,"div",3),i(3,"div",4)(4,"div",5),P(5,wr,2,1,"div",6)(6,Br,13,9,"div",7),r()(),P(7,Fr,7,1,"div",8)(8,Ir,10,2,"div",9)(9,Rr,3,0,"button",10),m(10,"ez-reader-mobile-bottom-nav",11),i(11,"app-bottom-sheet",12),u("sheetStateChange",function(s){return n.onSheetStateChange(s)})("close",function(){return n.closeBottomSheet()}),i(12,"div",13)(13,"h3",14),l(14,"\uD30C\uC77C \xB7 \uD3F4\uB354 \uCD94\uAC00"),r()(),i(15,"div",15)(16,"div",16),P(17,Vr,8,0,"button",17)(18,Nr,7,0,"button",17),r()()(),i(19,"app-input-dialog",18),W("isOpenChange",function(s){return $(n.showFolderDialog,s)||(n.showFolderDialog=s),s}),u("confirm",function(s){return n.onFolderDialogConfirm(s)})("cancel",function(){return n.onFolderDialogCancel()}),r(),i(20,"app-bottom-sheet",12),W("sheetStateChange",function(s){return $(n.itemSheetState,s)||(n.itemSheetState=s),s}),u("close",function(){return n.onItemSheetClose()}),P(21,Wr,4,2,"div",19),r(),m(22,"ez-reader-mobile-bottom-nav",11)),e&2&&(g("ngIf",!n.currentFolder),c(),g("ngIf",n.currentFolder),c(),g("ngIf",n.pendingAction),c(),R("has-banner",n.pendingAction),c(2),g("ngIf",n.items.length>0),c(),g("ngIf",n.items.length===0),c(),g("ngIf",n.isSelectionMode&&n.selectedItems.size>0&&!n.pendingAction),c(),g("ngIf",n.isSelectionMode&&n.selectedItems.size>0&&(n.pendingAction==null?null:n.pendingAction.action)==="merge-pdf"),c(),g("ngIf",!n.isSelectionMode&&n.shouldShowFab),c(),g("activeTab",n.currentActiveTab),c(),g("sheetState",n.sheetState),c(6),g("ngIf",n.canAddFileOption),c(),g("ngIf",n.canCreateFolderOption),c(),G("isOpen",n.showFolderDialog),g("title",n.folderDialogTitle)("placeholder","\uD3F4\uB354 \uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694")("initialValue",n.folderDialogInitialValue),c(),G("sheetState",n.itemSheetState),c(),g("ngIf",n.selectedItem),c(),g("activeTab",n.currentActiveTab))},dependencies:[ne,j,he,at,de,Je],styles:['.header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:56px;background:#fff;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;justify-content:space-between;padding:0 16px;z-index:100}.header.folder-header[_ngcontent-%COMP%]{justify-content:flex-start;gap:12px}.header.folder-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{flex:1}.header-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.header-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.icon-btn[_ngcontent-%COMP%], .back-btn[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%]{width:40px;height:40px;padding:0;background:none;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;border-radius:50%}.icon-btn[_ngcontent-%COMP%]:active, .back-btn[_ngcontent-%COMP%]:active, .close-btn[_ngcontent-%COMP%]:active{background:#f5f5f5}.back-btn[_ngcontent-%COMP%]{margin-left:-8px}.header-btn[_ngcontent-%COMP%]{padding:8px 16px;background:none;border:none;color:#007acc;font-size:15px;font-weight:500;cursor:pointer}.header-btn[_ngcontent-%COMP%]:active{opacity:.6}.pending-action-banner[_ngcontent-%COMP%]{position:fixed;top:56px;left:0;right:0;height:44px;background:linear-gradient(135deg,#e3f2fd,#bbdefb);border-bottom:1px solid #90CAF9;z-index:99;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.banner-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;gap:12px;height:100%}.banner-icon[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.banner-text[_ngcontent-%COMP%]{flex:1;font-size:14px;color:#1565c0;line-height:1.4}.banner-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:#0d47a1}.banner-close[_ngcontent-%COMP%]{flex-shrink:0;width:32px;height:32px;padding:0;background:none;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;border-radius:50%;transition:background .2s}.banner-close[_ngcontent-%COMP%]:active{background:#0000001a}.banner-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.6}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translateY(-100%);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}}.main-content[_ngcontent-%COMP%]{margin-top:56px;background:#f5f5f5;position:relative}.main-content.has-banner[_ngcontent-%COMP%]{margin-top:100px}.view-container[_ngcontent-%COMP%]{position:relative;width:100%;background:#fff}.view-container.slide-in-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInLeft .3s cubic-bezier(.4,0,.2,1) forwards}.view-container.slide-out-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideOutLeft .3s cubic-bezier(.4,0,.2,1) forwards}.view-container.slide-in-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInRight .3s cubic-bezier(.4,0,.2,1) forwards}.view-container.slide-out-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideOutRight .3s cubic-bezier(.4,0,.2,1) forwards}@keyframes _ngcontent-%COMP%_slideInLeft{0%{transform:translate(100%)}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_slideOutLeft{0%{transform:translate(0)}to{transform:translate(-100%)}}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(-100%)}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_slideOutRight{0%{transform:translate(0)}to{transform:translate(100%)}}.categories-section[_ngcontent-%COMP%]{background:#fff;margin-bottom:8px}.category-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;border-bottom:1px solid #f0f0f0;cursor:pointer;transition:background .2s}.category-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.category-item[_ngcontent-%COMP%]:active{background:#f5f5f5}.category-icon[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;justify-content:center}.category-info[_ngcontent-%COMP%]{flex:1;min-width:0}.category-label[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#333;display:flex;align-items:center;gap:8px}.category-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:20px;height:20px;padding:0 6px;background:#ef5350;color:#fff;font-size:12px;font-weight:600;border-radius:10px}.category-arrow[_ngcontent-%COMP%]{flex-shrink:0}.files-list[_ngcontent-%COMP%]{padding:8px 0}.file-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#fff;border-bottom:1px solid #f0f0f0;cursor:pointer;transition:background .2s;position:relative;overflow:visible}.file-item[_ngcontent-%COMP%]:active{background:#f5f5f5}.file-item.selected[_ngcontent-%COMP%]{background:#e3f2fd}.file-item.disabled[_ngcontent-%COMP%]{opacity:1;cursor:default;background:#fafafa}.file-item.disabled[_ngcontent-%COMP%]:active{background:#fafafa}.file-item.disabled[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{color:#bdbdbd!important}.file-item.disabled[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-meta[_ngcontent-%COMP%]{color:#e0e0e0!important}.file-item.disabled[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{opacity:.3;filter:grayscale(100%)}.file-item.disabled[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#bdbdbd!important}.file-item.disabled[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   .file-type-icon[_ngcontent-%COMP%]{opacity:.3}.file-item.disabled[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   .file-type-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.3}.file-item.disabled[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   .file-type-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .file-item.disabled[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   .file-type-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%], .file-item.disabled[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   .file-type-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], .file-item.disabled[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   .file-type-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{fill:#bdbdbd!important;stroke:#bdbdbd!important}.file-item[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0 120px 0 0;z-index:1}.selection-checkbox[_ngcontent-%COMP%]{flex-shrink:0;position:relative;z-index:2}.selection-checkbox[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{width:24px;height:24px;border:2px solid #ccc;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s}.selection-checkbox[_ngcontent-%COMP%]   .checkbox.checked[_ngcontent-%COMP%]{background:#007acc;border-color:#007acc}.file-icon[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;justify-content:center;position:relative;z-index:2}.file-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#999}.file-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.file-icon.folder-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#999}.file-icon.special-folder-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.file-icon.my-files-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#666}.file-icon.favorites-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#666}.file-icon.results-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#666}.file-icon.recent-folder-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#666}.file-type-icon[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;justify-content:center}.file-type-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:30px;height:30px}.file-type-icon.pdf-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 1px 3px rgba(0,0,0,.2))}.file-type-icon.image-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 1px 3px rgba(0,0,0,.15))}.file-type-icon.excel-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 1px 3px rgba(0,0,0,.15))}.file-type-icon.word-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 1px 3px rgba(0,0,0,.15))}.file-type-icon.ppt-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 1px 3px rgba(0,0,0,.15))}.file-info[_ngcontent-%COMP%]{flex:1;min-width:0;position:relative;z-index:2}.favorite-btn[_ngcontent-%COMP%]{flex-shrink:0;width:36px;height:36px;padding:0;background:none;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#ccc;transition:all .2s;position:relative;z-index:3}.favorite-btn[_ngcontent-%COMP%]:active{transform:scale(1.2)}.favorite-btn.active[_ngcontent-%COMP%]{color:#f44336;animation:_ngcontent-%COMP%_heartBeat .3s ease-in-out}.favorite-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}@keyframes _ngcontent-%COMP%_heartBeat{0%,to{transform:scale(1)}25%{transform:scale(1.3)}50%{transform:scale(1.1)}75%{transform:scale(1.2)}}.more-btn[_ngcontent-%COMP%]{flex-shrink:0;width:36px;height:36px;padding:0;background:#0000000d;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#666;transition:all .2s;position:relative;z-index:3}.more-btn[_ngcontent-%COMP%]:active{background:#0000001a;transform:scale(.95)}.more-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.more-menu-wrapper[_ngcontent-%COMP%]{position:relative;flex-shrink:0;display:flex;align-items:center;z-index:4}.file-dropdown[_ngcontent-%COMP%]{position:absolute;top:44px;right:0;min-width:148px;padding:4px 0;background:#fff;border-radius:12px;box-shadow:0 12px 24px #0f172a2e;border:1px solid rgba(15,23,42,.08);animation:_ngcontent-%COMP%_dropdownFade .18s ease}.file-dropdown[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-6px;right:16px;width:12px;height:12px;background:#fff;border-left:1px solid rgba(15,23,42,.08);border-top:1px solid rgba(15,23,42,.08);transform:rotate(45deg);z-index:-1}.file-dropdown-option[_ngcontent-%COMP%]{width:100%;padding:10px 18px;background:none;border:none;text-align:left;font-size:14px;color:#111;cursor:pointer;transition:background .15s ease}.file-dropdown-option[_ngcontent-%COMP%]:active{background:#f3f4f6}.file-dropdown-option.danger[_ngcontent-%COMP%]{color:#e53935}@keyframes _ngcontent-%COMP%_dropdownFade{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.file-name[_ngcontent-%COMP%]{font-size:15px;font-weight:500;color:#333;display:flex;align-items:center;gap:8px;margin-bottom:4px}.folder-last-updated[_ngcontent-%COMP%]{font-size:13px;color:#777;margin-bottom:2px}.file-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:20px;height:20px;padding:0 6px;background:#ef5350;color:#fff;font-size:12px;font-weight:600;border-radius:10px}.file-date[_ngcontent-%COMP%]{font-size:13px;color:#999}.file-meta[_ngcontent-%COMP%]{font-size:13px;color:#999;display:flex;align-items:center}.file-size[_ngcontent-%COMP%]{color:#999}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;text-align:center}.empty-text[_ngcontent-%COMP%]{margin:16px 0 8px;font-size:16px;font-weight:500;color:#666}.empty-subtext[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#999}.selection-bar[_ngcontent-%COMP%]{position:fixed;bottom:60px;left:0;right:0;height:56px;background:#fff;border-top:1px solid #e0e0e0;display:flex;align-items:center;justify-content:space-between;padding:0 16px;z-index:99}.selection-count[_ngcontent-%COMP%]{font-size:15px;font-weight:500;color:#333}.delete-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;background:#ef5350;color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer}.delete-btn[_ngcontent-%COMP%]:active{background:#e53935}.merge-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;background:#2196f3;color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer}.merge-btn[_ngcontent-%COMP%]:active{background:#1976d2}.merge-btn[_ngcontent-%COMP%]:disabled{background:#bdbdbd;cursor:not-allowed;opacity:.6}.merge-bar[_ngcontent-%COMP%]{background:linear-gradient(to right,#e3f2fd,#bbdefb);border-top:1px solid #90CAF9}.fab-button[_ngcontent-%COMP%]{position:fixed;bottom:76px;right:16px;width:56px;height:56px;background:#007acc;border:none;border-radius:50%;box-shadow:0 4px 12px #007acc66;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:98;transition:all .2s}.fab-button[_ngcontent-%COMP%]:active{transform:scale(.95);box-shadow:0 2px 8px #007acc66}.bottom-sheet-header[_ngcontent-%COMP%]{padding:20px 20px 0}.bottom-sheet-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.bottom-sheet-content[_ngcontent-%COMP%]{padding:20px}.upload-options[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px}.upload-option-large[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;padding:24px 16px;background:#f8f9fa;border:1px solid #e0e0e0;border-radius:12px;cursor:pointer;transition:all .2s}.upload-option-large[_ngcontent-%COMP%]:active{background:#e9ecef;transform:scale(.98)}.option-icon-large[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.option-label-large[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333}.option-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.option-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:#fff;border:1px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .2s}.option-item[_ngcontent-%COMP%]:active{background:#f5f5f5}.option-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.option-label[_ngcontent-%COMP%]{font-size:15px;color:#333}.context-menu-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:10000;display:flex;align-items:flex-end;animation:fadeIn .2s ease}.context-menu[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:16px 16px 0 0;animation:slideUp .3s ease}.context-menu-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #e5e7eb}.context-menu-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#222}.context-menu-options[_ngcontent-%COMP%]{padding:8px 0}.context-menu-option[_ngcontent-%COMP%]{width:100%;padding:16px 20px;background:none;border:none;display:flex;align-items:center;gap:16px;cursor:pointer;font-size:16px;color:#333;transition:background .2s ease}.context-menu-option[_ngcontent-%COMP%]:active{background:#f3f4f6}.context-menu-option.delete[_ngcontent-%COMP%]{color:#ef5350}.context-menu-option[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.context-menu-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.item-sheet-content[_ngcontent-%COMP%]   .sheet-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #e5e7eb}.item-sheet-content[_ngcontent-%COMP%]   .sheet-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#222;margin:0;text-align:center}.item-sheet-content[_ngcontent-%COMP%]   .sheet-options[_ngcontent-%COMP%]{padding:8px 0}.item-sheet-content[_ngcontent-%COMP%]   .rename-mode[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.item-sheet-content[_ngcontent-%COMP%]   .sheet-back-btn[_ngcontent-%COMP%]{width:40px;height:40px;border:none;background:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer}.item-sheet-content[_ngcontent-%COMP%]   .sheet-back-btn[_ngcontent-%COMP%]:active{background:#f3f4f6}.item-sheet-content[_ngcontent-%COMP%]   .sheet-option[_ngcontent-%COMP%]{width:100%;padding:16px 20px;background:none;border:none;display:flex;align-items:center;gap:16px;cursor:pointer;font-size:16px;color:#333;transition:background .2s ease}.item-sheet-content[_ngcontent-%COMP%]   .sheet-option[_ngcontent-%COMP%]:active{background:#f3f4f6}.item-sheet-content[_ngcontent-%COMP%]   .sheet-option.danger[_ngcontent-%COMP%]{color:#ef5350}.item-sheet-content[_ngcontent-%COMP%]   .sheet-option.danger[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .item-sheet-content[_ngcontent-%COMP%]   .sheet-option.danger[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#ef5350!important}.item-sheet-content[_ngcontent-%COMP%]   .sheet-option[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.item-sheet-content[_ngcontent-%COMP%]   .sheet-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.item-sheet-content[_ngcontent-%COMP%]   .rename-form[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;gap:16px}.item-sheet-content[_ngcontent-%COMP%]   .rename-label[_ngcontent-%COMP%]{font-size:14px;color:#555}.item-sheet-content[_ngcontent-%COMP%]   .rename-input[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #e0e0e0;border-radius:10px;font-size:15px;outline:none;transition:border .15s ease}.item-sheet-content[_ngcontent-%COMP%]   .rename-input[_ngcontent-%COMP%]:focus{border-color:#007acc;box-shadow:0 0 0 2px #007acc1f}.item-sheet-content[_ngcontent-%COMP%]   .rename-helper[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#888}.item-sheet-content[_ngcontent-%COMP%]   .rename-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px}.item-sheet-content[_ngcontent-%COMP%]   .rename-cancel[_ngcontent-%COMP%], .item-sheet-content[_ngcontent-%COMP%]   .rename-confirm[_ngcontent-%COMP%]{min-width:80px;padding:10px 16px;border-radius:8px;border:none;font-size:14px;font-weight:500;cursor:pointer}.item-sheet-content[_ngcontent-%COMP%]   .rename-cancel[_ngcontent-%COMP%]{background:#f3f4f6;color:#555}.item-sheet-content[_ngcontent-%COMP%]   .rename-cancel[_ngcontent-%COMP%]:active{background:#e2e6ea}.item-sheet-content[_ngcontent-%COMP%]   .rename-confirm[_ngcontent-%COMP%]{background:#007acc;color:#fff;box-shadow:0 4px 10px #007acc40}.item-sheet-content[_ngcontent-%COMP%]   .rename-confirm[_ngcontent-%COMP%]:active{background:#0061b5}']})};var Se=class a{constructor(t){this.router=t;this.initHistoryTracking()}history=[];MAX_HISTORY=50;initHistoryTracking(){this.router.events.pipe(Mn(t=>t instanceof qn)).subscribe(t=>{t.urlAfterRedirects.includes("/splash")||this.addToHistory(t.urlAfterRedirects)})}addToHistory(t){(this.history.length===0||this.history[this.history.length-1]!==t)&&(this.history.push(t),this.history.length>this.MAX_HISTORY&&this.history.shift(),console.log("\u{1F4CD} [NavigationHistory] \uD604\uC7AC \uD788\uC2A4\uD1A0\uB9AC:",this.history))}getPreviousUrl(){return this.history.length<2?null:this.history[this.history.length-2]}goBack(t="/ezm/home"){let e=this.getPreviousUrl();e?(console.log("\u2B05\uFE0F [NavigationHistory] \uC774\uC804 \uD398\uC774\uC9C0\uB85C \uC774\uB3D9:",e),this.history.pop(),this.router.navigateByUrl(e)):(console.log("\u2B05\uFE0F [NavigationHistory] \uD788\uC2A4\uD1A0\uB9AC \uC5C6\uC74C, fallback\uC73C\uB85C \uC774\uB3D9:",t),this.router.navigateByUrl(t))}getCurrentUrl(){return this.history.length>0?this.history[this.history.length-1]:null}clearHistory(){this.history=[],console.log("\u{1F5D1}\uFE0F [NavigationHistory] \uD788\uC2A4\uD1A0\uB9AC \uCD08\uAE30\uD654\uB428")}getHistory(){return[...this.history]}static \u0275fac=function(e){return new(e||a)(Y(V))};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};function Ur(a,t){if(a&1&&m(0,"img",27),a&2){let e=p();g("src",e.userProfile.picture,Oe)}}function Kr(a,t){a&1&&(C(),i(0,"svg",28),m(1,"path",29)(2,"circle",30),r())}function Yr(a,t){if(a&1&&(i(0,"p",37),C(),i(1,"svg",38),m(2,"path",29)(3,"circle",30),r(),l(4),r()),a&2){let e=p(2);c(4),D(" ",e.getLoginTypeDisplay()," ")}}function qr(a,t){if(a&1&&(i(0,"div",39)(1,"p",40),C(),i(2,"svg",38),m(3,"rect",41)(4,"path",42),r(),l(5," Gemini API Key "),r(),v(),i(6,"p",43),l(7),r()()),a&2){let e=p(2);c(7),E(e.apiKeyMasked)}}function Zr(a,t){a&1&&(i(0,"div",44)(1,"p",40),C(),i(2,"svg",38),m(3,"circle",19)(4,"line",45)(5,"line",46),r(),l(6," Gemini API Key "),r(),v(),i(7,"p",43),l(8,"API \uD0A4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"),r(),i(9,"p",47),l(10,"AI \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD558\uB824\uBA74 Google\uC5D0\uC11C API \uD0A4\uB97C \uAC00\uC838\uC640\uC57C \uD569\uB2C8\uB2E4"),r()())}function Xr(a,t){if(a&1&&(i(0,"div",31)(1,"h3",32),l(2),r(),i(3,"p",33),l(4),r(),P(5,Yr,5,1,"p",34)(6,qr,8,1,"div",35)(7,Zr,11,0,"div",36),r()),a&2){let e=p();c(2),E(e.userProfile.name),c(2),E(e.userProfile.email),c(),g("ngIf",e.loginType),c(),g("ngIf",e.geminiApiKey),c(),g("ngIf",!e.geminiApiKey)}}function Qr(a,t){if(a&1&&(i(0,"div",50)(1,"p",40),C(),i(2,"svg",38),m(3,"rect",41)(4,"path",42),r(),l(5," Gemini API Key "),r(),v(),i(6,"p",43),l(7),r()()),a&2){let e=p(2);c(7),E(e.apiKeyMasked)}}function Jr(a,t){a&1&&(i(0,"div",51)(1,"p",40),C(),i(2,"svg",38),m(3,"circle",19)(4,"line",45)(5,"line",46),r(),l(6," Gemini API Key "),r(),v(),i(7,"p",43),l(8,"API \uD0A4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"),r(),i(9,"p",47),l(10,"AI \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD558\uB824\uBA74 Google\uC5D0\uC11C API \uD0A4\uB97C \uAC00\uC838\uC640\uC57C \uD569\uB2C8\uB2E4"),r()())}function ea(a,t){if(a&1&&(i(0,"div",31)(1,"h3",32),l(2,"\uB85C\uADF8\uC778\uC774 \uD544\uC694\uD569\uB2C8\uB2E4"),r(),i(3,"p",33),l(4,"\uB85C\uADF8\uC778\uD558\uC5EC \uC11C\uBE44\uC2A4\uB97C \uC774\uC6A9\uD558\uC138\uC694"),r(),P(5,Qr,8,1,"div",48)(6,Jr,11,0,"div",49),r()),a&2){let e=p();c(5),g("ngIf",e.geminiApiKey),c(),g("ngIf",!e.geminiApiKey)}}function ta(a,t){if(a&1){let e=w();i(0,"button",52),u("click",function(){f(e);let o=p();return h(o.onGetGoogleApiKey())}),C(),i(1,"svg",15),m(2,"path",53),r(),v(),i(3,"span",17),l(4,"Google\uC5D0\uC11C API \uD0A4 \uAC00\uC838\uC624\uAE30"),r(),m(5,"img",18),r()}}function na(a,t){if(a&1){let e=w();i(0,"button",54),u("click",function(){f(e);let o=p();return h(o.onRemoveApiKey())}),C(),i(1,"svg",15),m(2,"polyline",55)(3,"path",56),r(),v(),i(4,"span",17),l(5,"API \uD0A4 \uC0AD\uC81C"),r(),m(6,"img",18),r()}}function ia(a,t){if(a&1){let e=w();i(0,"button",57),u("click",function(){f(e);let o=p();return h(o.onLogin())}),C(),i(1,"svg",15),m(2,"path",58)(3,"polyline",59)(4,"line",60),r(),v(),i(5,"span",17),l(6,"\uB85C\uADF8\uC778"),r(),m(7,"img",18),r()}}function oa(a,t){if(a&1){let e=w();i(0,"button",61),u("click",function(){f(e);let o=p();return h(o.onLogout())}),C(),i(1,"svg",15),m(2,"path",62)(3,"polyline",63)(4,"line",64),r(),v(),i(5,"span",17),l(6,"\uB85C\uADF8\uC544\uC6C3"),r(),m(7,"img",18),r()}}var gt=class a{constructor(t,e,n,o,s){this.authService=t;this.geminiApiManager=e;this.googleOAuthService=n;this.navigationHistory=o;this.router=s}currentActiveTab="profile";isLoggedIn=!1;userProfile=null;loginType=null;geminiApiKey=null;apiKeyMasked="";buildVersion="0.0.0.45";buildInfo="EZ Reader Mobile";authSubscription;androidAuthSubscription;snackbar=O(U);ngOnInit(){window.scrollTo(0,0),this.loadGeminiApiKey(),this.subscribeToAndroidAuth(),this.authSubscription=this.authService.isAuthenticated$.subscribe(t=>{this.isLoggedIn=t,t?(this.userProfile=this.authService.getUserProfile(),this.loginType=this.authService.getLoginType(),this.loadGeminiApiKey()):(this.userProfile=null,this.loginType=null)})}subscribeToAndroidAuth(){this.androidAuthSubscription=this.googleOAuthService.nativeAuth$.subscribe(t=>x(this,null,function*(){if(t.purpose!=="apiKey"){console.log("\u23ED\uFE0F [Settings] purpose\uAC00 apiKey\uAC00 \uC544\uB2D8, \uBB34\uC2DC:",t.purpose);return}if(console.log("\u{1F4E9} [Settings] Native \uC778\uC99D \uACB0\uACFC \uC218\uC2E0 (API \uD0A4 \uD68D\uB4DD \uC804\uC6A9):",t),t.success&&t.geminiApiKey){console.log("\u2705 [Settings] \uC778\uC99D \uC131\uACF5!");try{yield this.geminiApiManager.setApiKey(t.geminiApiKey,"android-user",t.userInfo?.email||"android@local",!1),console.log("\u2705 [Settings] Gemini API \uD0A4 \uC800\uC7A5 \uC644\uB8CC"),yield this.loadGeminiApiKey(),this.snackbar.showSuccess(`\u{1F389} Google \uC778\uC99D \uC131\uACF5!
Gemini API \uD0A4\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),console.log("\u2705 [Settings] \uC778\uC99D \uD504\uB85C\uC138\uC2A4 \uC644\uB8CC")}catch(e){console.error("\u274C [Settings] API \uD0A4 \uC800\uC7A5 \uC2E4\uD328:",e),this.snackbar.showError("API \uD0A4 \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}else console.error("\u274C [Settings] \uC778\uC99D \uC2E4\uD328:",t.error),this.snackbar.showError(`Google \uC778\uC99D \uC2E4\uD328
${t.error||"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`)}))}loadGeminiApiKey(){return x(this,null,function*(){let t=yield this.geminiApiManager.getApiKeyInfo();if(t&&t.apiKey){if(this.geminiApiKey=t.apiKey,this.geminiApiKey.length>20){let e=this.geminiApiKey.substring(0,12),n=this.geminiApiKey.substring(this.geminiApiKey.length-8);this.apiKeyMasked=`${e}...${n}`}else if(this.geminiApiKey.length>15){let e=this.geminiApiKey.substring(0,8),n=this.geminiApiKey.substring(this.geminiApiKey.length-4);this.apiKeyMasked=`${e}...${n}`}else this.apiKeyMasked="**********";console.log("\u2705 Gemini API \uD0A4 \uB85C\uB4DC:",this.apiKeyMasked)}else this.geminiApiKey=null,this.apiKeyMasked="",console.log("\u26A0\uFE0F Gemini API \uD0A4 \uC5C6\uC74C")})}getLoginTypeDisplay(){switch(this.loginType){case"google":return"Google \uB85C\uADF8\uC778";case"local":return"\uB85C\uCEEC \uB85C\uADF8\uC778";case"guest":return"\uAC8C\uC2A4\uD2B8";default:return""}}ngOnDestroy(){this.authSubscription&&this.authSubscription.unsubscribe(),this.androidAuthSubscription&&this.androidAuthSubscription.unsubscribe()}onBack(){this.navigationHistory.goBack("/ezm/home")}onLogin(){this.router.navigate(["/ezm/login"])}onLogout(){return x(this,null,function*(){yield this.authService.logout(),this.snackbar.showSuccess("\uB85C\uADF8\uC544\uC6C3\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/home"])})}onPrivacyPolicy(){this.snackbar.showInfo("\uC900\uBE44\uC911 \uC785\uB2C8\uB2E4")}onCustomerSupport(){this.snackbar.showInfo("\uC900\uBE44\uC911 \uC785\uB2C8\uB2E4")}onVersionInfo(){this.snackbar.showInfo("\uC900\uBE44\uC911 \uC785\uB2C8\uB2E4")}onGetGoogleApiKey(){console.log("=".repeat(60)),console.log("\u{1F511} Google API \uD0A4 \uAC00\uC838\uC624\uAE30 \uC2DC\uC791..."),console.log("\uD658\uACBD \uC815\uBCF4:"),console.log("- User Agent:",navigator.userAgent),console.log("- Android WebView:",ke()),ke()?console.log("\u2705 Android WebView \uD658\uACBD \uAC10\uC9C0\uB428 (postMessage \uBC29\uC2DD)"):console.log("\u{1F310} \uC77C\uBC18 \uBE0C\uB77C\uC6B0\uC800 \uD658\uACBD"),console.log("\uCF5C\uBC31 \uD568\uC218 \uB4F1\uB85D \uD655\uC778:"),console.log("- window.onAndroidMessage:",typeof window.onAndroidMessage),console.log("=".repeat(60)),this.snackbar.showInfo("Google API \uD0A4\uB97C \uAC00\uC838\uC635\uB2C8\uB2E4..."),this.googleOAuthService.startGoogleLogin("apiKey"),console.log('\u{1F4DE} startGoogleLogin("apiKey") \uD638\uCD9C \uC644\uB8CC'),console.log("\u{1F4A1} \uB85C\uADF8\uC778 \uC138\uC158\uC740 \uC0DD\uC131\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4 (API \uD0A4\uB9CC \uC800\uC7A5)")}onRemoveApiKey(){return x(this,null,function*(){if(yield ve(`Gemini API \uD0A4\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

AI \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uAC8C \uB429\uB2C8\uB2E4.`))try{console.log("\u{1F5D1}\uFE0F API \uD0A4 \uC0AD\uC81C \uC2DC\uC791..."),yield this.geminiApiManager.clearApiKey(),yield this.loadGeminiApiKey(),this.snackbar.showSuccess("API \uD0A4\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),console.log("\u2705 API \uD0A4 \uC0AD\uC81C \uBC0F UI \uC5C5\uB370\uC774\uD2B8 \uC644\uB8CC")}catch(e){console.error("\u274C API \uD0A4 \uC0AD\uC81C \uC2E4\uD328:",e),this.snackbar.showError("API \uD0A4 \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}static \u0275fac=function(e){return new(e||a)(z(Me),z(be),z(Ie),z(Se),z(V))};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-settings"]],standalone:!1,decls:42,vars:10,consts:[[1,"header"],[1,"header-center"],[1,"main-content"],[1,"profile-section"],[1,"profile-avatar"],["alt","\uD504\uB85C\uD544","style","width: 80px; height: 80px; border-radius: 50%; object-fit: cover;",3,"src",4,"ngIf"],["width","80","height","80","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5",4,"ngIf"],["class","profile-info",4,"ngIf"],[1,"settings-menu"],["class","menu-item google-api-key",3,"click",4,"ngIf"],["class","menu-item remove-api-key",3,"click",4,"ngIf"],[1,"menu-divider"],["class","menu-item primary",3,"click",4,"ngIf"],["class","menu-item logout",3,"click",4,"ngIf"],[1,"menu-item",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],[1,"menu-text"],["src","images/ico-after@3x.png","alt",">","width","16","height","16",1,"menu-arrow"],["cx","12","cy","12","r","10"],["d","M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"],["x1","12","y1","17","x2","12.01","y2","17"],[1,"menu-item","version-item",3,"click"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"version-number"],[3,"activeTab"],["alt","\uD504\uB85C\uD544",2,"width","80px","height","80px","border-radius","50%","object-fit","cover",3,"src"],["width","80","height","80","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"profile-info"],[1,"profile-name"],[1,"profile-email"],["class","profile-login-type",4,"ngIf"],["class","api-key-info",4,"ngIf"],["class","api-key-info warning",4,"ngIf"],[1,"profile-login-type"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",2,"display","inline-block","vertical-align","middle","margin-right","4px"],[1,"api-key-info"],[1,"api-key-label"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],[1,"api-key-value"],[1,"api-key-info","warning"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"api-key-description"],["class","api-key-info","style","margin-top: 12px;",4,"ngIf"],["class","api-key-info warning","style","margin-top: 12px;",4,"ngIf"],[1,"api-key-info",2,"margin-top","12px"],[1,"api-key-info","warning",2,"margin-top","12px"],[1,"menu-item","google-api-key",3,"click"],["d","M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"],[1,"menu-item","remove-api-key",3,"click"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"menu-item","primary",3,"click"],["d","M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"],["points","10 17 15 12 10 7"],["x1","15","y1","12","x2","3","y2","12"],[1,"menu-item","logout",3,"click"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),l(3,"\uB0B4\uC815\uBCF4"),r()()(),i(4,"div",2)(5,"div",3)(6,"div",4),P(7,Ur,1,1,"img",5)(8,Kr,3,0,"svg",6),r(),P(9,Xr,8,5,"div",7)(10,ea,7,2,"div",7),r(),i(11,"div",8),P(12,ta,6,0,"button",9)(13,na,7,0,"button",10),m(14,"div",11),P(15,ia,8,0,"button",12)(16,oa,8,0,"button",13),m(17,"div",11),i(18,"button",14),u("click",function(){return n.onPrivacyPolicy()}),C(),i(19,"svg",15),m(20,"path",16),r(),v(),i(21,"span",17),l(22,"\uAC1C\uC778\uC815\uBCF4 \uCC98\uB9AC \uBC29\uCE68"),r(),m(23,"img",18),r(),i(24,"button",14),u("click",function(){return n.onCustomerSupport()}),C(),i(25,"svg",15),m(26,"circle",19)(27,"path",20)(28,"line",21),r(),v(),i(29,"span",17),l(30,"\uACE0\uAC1D \uC9C0\uC6D0"),r(),m(31,"img",18),r(),i(32,"button",22),u("click",function(){return n.onVersionInfo()}),C(),i(33,"svg",15),m(34,"circle",19)(35,"line",23)(36,"line",24),r(),v(),i(37,"span",17),l(38,"\uBC84\uC804 \uC815\uBCF4"),r(),i(39,"span",25),l(40),r()()()(),m(41,"ez-reader-mobile-bottom-nav",26)),e&2&&(c(7),g("ngIf",n.isLoggedIn&&n.userProfile&&n.userProfile.picture),c(),g("ngIf",!n.isLoggedIn||!n.userProfile||!n.userProfile.picture),c(),g("ngIf",n.isLoggedIn&&n.userProfile),c(),g("ngIf",!n.isLoggedIn),c(2),g("ngIf",!n.geminiApiKey),c(),g("ngIf",n.geminiApiKey),c(2),g("ngIf",!n.isLoggedIn),c(),g("ngIf",n.isLoggedIn),c(24),D("v",n.buildVersion),c(),g("activeTab",n.currentActiveTab))},dependencies:[j,de],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}[_nghost-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background-color:#f5f5f5;min-height:100vh;display:flex;flex-direction:column}.header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:56px;background:#fff;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;justify-content:center;z-index:100}.header[_ngcontent-%COMP%]   .header-center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#333;margin:0}.main-content[_ngcontent-%COMP%]{margin-top:56px;margin-bottom:60px;overflow-y:visible}.profile-section[_ngcontent-%COMP%]{background:#fff;padding:40px 20px;text-align:center;margin-bottom:12px}.profile-section[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 16px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center}.profile-section[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff}.profile-section[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#333;margin:0 0 8px}.profile-section[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .profile-email[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0 0 4px}.profile-section[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .profile-login-type[_ngcontent-%COMP%]{font-size:13px;color:#888;margin:4px 0 12px;display:flex;align-items:center;justify-content:center}.profile-section[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .api-key-info[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background:#f8f9fa;border-radius:8px;text-align:left}.profile-section[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .api-key-info.warning[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffc107}.profile-section[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .api-key-info[_ngcontent-%COMP%]   .api-key-label[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:0 0 6px;display:flex;align-items:center;font-weight:500}.profile-section[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .api-key-info[_ngcontent-%COMP%]   .api-key-value[_ngcontent-%COMP%]{font-size:13px;color:#333;font-family:Courier New,monospace;background:#fff;padding:8px 12px;border-radius:6px;word-break:break-all;margin:0;border:1px solid #e0e0e0}.profile-section[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .api-key-info[_ngcontent-%COMP%]   .api-key-description[_ngcontent-%COMP%]{font-size:12px;color:#856404;margin:8px 0 0;line-height:1.4}.settings-menu[_ngcontent-%COMP%]{background:#fff}.settings-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:12px;padding:16px 20px;background:#fff;border:none;border-bottom:1px solid #f0f0f0;cursor:pointer;transition:background-color .2s}.settings-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:#f8f9fa}.settings-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.settings-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;color:#666}.settings-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-text[_ngcontent-%COMP%]{flex:1;font-size:16px;color:#333;font-weight:400;text-align:left}.settings-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-arrow[_ngcontent-%COMP%]{flex-shrink:0;opacity:.5}.settings-menu[_ngcontent-%COMP%]   .menu-item.primary[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#2196f3}.settings-menu[_ngcontent-%COMP%]   .menu-item.primary[_ngcontent-%COMP%]   .menu-text[_ngcontent-%COMP%]{color:#2196f3}.settings-menu[_ngcontent-%COMP%]   .menu-item.logout[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#f44336}.settings-menu[_ngcontent-%COMP%]   .menu-item.logout[_ngcontent-%COMP%]   .menu-text[_ngcontent-%COMP%]{color:#f44336}.settings-menu[_ngcontent-%COMP%]   .menu-item.google-api-key[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#4285f4}.settings-menu[_ngcontent-%COMP%]   .menu-item.google-api-key[_ngcontent-%COMP%]   .menu-text[_ngcontent-%COMP%]{color:#4285f4;font-weight:500}.settings-menu[_ngcontent-%COMP%]   .menu-item.remove-api-key[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#f44336}.settings-menu[_ngcontent-%COMP%]   .menu-item.remove-api-key[_ngcontent-%COMP%]   .menu-text[_ngcontent-%COMP%]{color:#f44336}.settings-menu[_ngcontent-%COMP%]   .menu-divider[_ngcontent-%COMP%]{height:8px;background:#f5f5f5}.settings-menu[_ngcontent-%COMP%]   .version-item[_ngcontent-%COMP%]{cursor:default}.settings-menu[_ngcontent-%COMP%]   .version-item[_ngcontent-%COMP%]:hover{background:#fff}.settings-menu[_ngcontent-%COMP%]   .version-item[_ngcontent-%COMP%]   .version-number[_ngcontent-%COMP%]{font-size:14px;color:#999;font-weight:400;margin-left:auto}.settings-menu[_ngcontent-%COMP%]   .version-item[_ngcontent-%COMP%]   .menu-arrow[_ngcontent-%COMP%]{display:none}@media (max-width: 375px){.main-content[_ngcontent-%COMP%]{padding:0}}"]})};function ra(a,t){if(a&1&&(i(0,"div",25)(1,"span",26),l(2,"\u26A0\uFE0F"),r(),i(3,"span",27),l(4),r()()),a&2){let e=p();c(4),E(e.errorMessage)}}function aa(a,t){a&1&&(i(0,"span"),l(1,"\u{1F513} \uB85C\uADF8\uC778"),r())}function sa(a,t){a&1&&(i(0,"span",28),m(1,"span",29),i(2,"span"),l(3,"\uB85C\uADF8\uC778 \uC911..."),r()())}var Gt=class a{constructor(t,e,n,o){this.authService=t;this.navigationHistory=e;this.router=n;this.route=o}username="";password="";errorMessage="";isLoading=!1;returnUrl="/ez-reader-mobile";showPassword=!1;ngOnInit(){if(this.authService.isAuthenticated()){this.router.navigate(["/ezm/profile"]);return}this.route.queryParams.subscribe(t=>{this.returnUrl=t.returnUrl||"/ezm/profile"})}onBack(){this.navigationHistory.goBack("/ezm/home")}onGuestMode(){this.isLoading||(this.authService.setGuestMode(!0),this.router.navigate(["/ezm"]))}onLogin(){if(this.errorMessage="",!this.username||!this.password){this.errorMessage="\uC544\uC774\uB514\uC640 \uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.";return}this.isLoading=!0,setTimeout(()=>{this.authService.login(this.username,this.password)?this.router.navigate([this.returnUrl]):(this.errorMessage="\uC544\uC774\uB514 \uB610\uB294 \uBE44\uBC00\uBC88\uD638\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",this.password=""),this.isLoading=!1},500)}onKeyPress(t){t.key==="Enter"&&this.onLogin()}togglePasswordVisibility(){this.showPassword=!this.showPassword}clearError(){this.errorMessage=""}static \u0275fac=function(e){return new(e||a)(z(Me),z(Se),z(V),z(Pe))};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-login"]],standalone:!1,decls:36,vars:14,consts:[[1,"header"],[1,"back-btn",3,"click"],["src","images/ico-before@3x.png","alt","\uB4A4\uB85C","width","24","height","24"],[1,"header-spacer"],[1,"main-content"],[1,"logo-section"],[1,"logo-container"],[1,"logo-icon"],["src","./images/logo-ezreader@3x.png","alt","EZ Reader","height","48"],[1,"app-description"],["class","error-message",4,"ngIf"],[1,"login-form-section"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","username",1,"form-label"],[1,"label-icon"],[1,"label-text"],["type","text","id","username","name","username","placeholder","\uC544\uC774\uB514\uB97C \uC785\uB825\uD558\uC138\uC694","autocomplete","username","required","",1,"form-input",3,"ngModelChange","focus","keypress","ngModel","disabled"],["for","password",1,"form-label"],[1,"password-input-wrapper"],["id","password","name","password","placeholder","\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694","autocomplete","current-password","required","",1,"form-input",3,"ngModelChange","focus","keypress","type","ngModel","disabled"],["type","button",1,"toggle-password-btn",3,"click","disabled"],["type","submit",1,"login-btn",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"error-message"],[1,"error-icon"],[1,"error-text"],[1,"loading-spinner"],[1,"spinner"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"button",1),u("click",function(){return n.onBack()}),m(2,"img",2),r(),i(3,"h2"),l(4,"\uB85C\uADF8\uC778"),r(),m(5,"div",3),r(),i(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),m(10,"img",8),r(),i(11,"p",9),l(12,"\uB85C\uADF8\uC778 \uD6C4 \uC774\uC6A9\uD574\uBCF4\uC138\uC694"),r()()(),P(13,ra,5,1,"div",10),i(14,"div",11)(15,"form",12),u("ngSubmit",function(){return n.onLogin()}),i(16,"div",13)(17,"label",14)(18,"span",15),l(19,"\u{1F464}"),r(),i(20,"span",16),l(21,"\uC544\uC774\uB514"),r()(),i(22,"input",17),W("ngModelChange",function(s){return $(n.username,s)||(n.username=s),s}),u("focus",function(){return n.clearError()})("keypress",function(s){return n.onKeyPress(s)}),r()(),i(23,"div",13)(24,"label",18)(25,"span",15),l(26,"\u{1F512}"),r(),i(27,"span",16),l(28,"\uBE44\uBC00\uBC88\uD638"),r()(),i(29,"div",19)(30,"input",20),W("ngModelChange",function(s){return $(n.password,s)||(n.password=s),s}),u("focus",function(){return n.clearError()})("keypress",function(s){return n.onKeyPress(s)}),r(),i(31,"button",21),u("click",function(){return n.togglePasswordVisibility()}),l(32),r()()(),i(33,"button",22),P(34,aa,2,0,"span",23)(35,sa,4,0,"span",24),r()()()()),e&2&&(c(13),g("ngIf",n.errorMessage),c(9),G("ngModel",n.username),g("disabled",n.isLoading),c(8),g("type",n.showPassword?"text":"password"),G("ngModel",n.password),g("disabled",n.isLoading),c(),g("disabled",n.isLoading),le("title",n.showPassword?"\uBE44\uBC00\uBC88\uD638 \uC228\uAE30\uAE30":"\uBE44\uBC00\uBC88\uD638 \uBCF4\uAE30"),c(),D(" ",n.showPassword?"\u{1F648}":"\u{1F441}\uFE0F"," "),c(),R("loading",n.isLoading),g("disabled",n.isLoading||!n.username||!n.password),c(),g("ngIf",!n.isLoading),c(),g("ngIf",n.isLoading))},dependencies:[j,Hn,ce,re,Ln,Yn,ae,jn],styles:['.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;background:#fff;border-bottom:1px solid #f0f0f0;position:sticky;top:0;z-index:100}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#333;display:flex;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{opacity:.7}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#333;margin:0}.header[_ngcontent-%COMP%]   .header-spacer[_ngcontent-%COMP%]{width:40px}.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 56px);display:flex;flex-direction:column;justify-content:center;padding:40px 20px;max-width:400px;margin:0 auto;background:linear-gradient(135deg,#f5f7fa,#c3cfe2)}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:48px}.logo-section[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{margin-bottom:24px}.logo-section[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:48px;width:auto;object-fit:contain;filter:drop-shadow(0 2px 8px rgba(0,0,0,.1))}.logo-section[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#2c3e50;margin:0 0 8px;letter-spacing:-.5px}.logo-section[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .app-description[_ngcontent-%COMP%]{font-size:15px;color:#7f8c8d;margin:0;font-weight:400}.error-message[_ngcontent-%COMP%]{background:#fff5f5;border:2px solid #fc8181;border-radius:12px;padding:14px 18px;margin-bottom:24px;display:flex;align-items:center;gap:10px;color:#c53030;font-size:14px;font-weight:500;box-shadow:0 2px 8px #fc818133;animation:_ngcontent-%COMP%_shake .4s ease}.error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.error-message[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{flex:1}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-8px)}75%{transform:translate(8px)}}.login-form-section[_ngcontent-%COMP%]{background:#fff;padding:32px 24px;border-radius:16px;box-shadow:0 8px 32px #0000001a;margin-bottom:0}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:24px}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:10px;font-size:14px;font-weight:600;color:#2c3e50}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   .label-icon[_ngcontent-%COMP%]{font-size:18px}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{flex:1}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:100%;padding:16px;border:2px solid #e8ecef;border-radius:12px;font-size:16px;transition:all .3s ease;box-sizing:border-box;background:#f8f9fa}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4a90e2;background:#fff;box-shadow:0 0 0 4px #4a90e21a}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:disabled{background:#e9ecef;cursor:not-allowed;opacity:.6}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]{position:relative}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{padding-right:50px}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-password-btn[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;padding:8px;cursor:pointer;font-size:20px;display:flex;align-items:center;justify-content:center;transition:transform .2s}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-password-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-50%) scale(1.1)}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-password-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-50%) scale(.95)}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-password-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.3}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{width:100%;padding:18px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:12px;font-size:17px;font-weight:700;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 16px #667eea66;letter-spacing:.5px}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #667eea80}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#b8b8b8,#9a9a9a);cursor:not-allowed;box-shadow:none}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-btn.loading[_ngcontent-%COMP%]{background:linear-gradient(135deg,#999,#777);cursor:wait}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:3px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.login-divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:24px 0;padding:0 24px}.login-divider[_ngcontent-%COMP%]:before, .login-divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:linear-gradient(to right,transparent,#e2e8f0,transparent)}.login-divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 16px;color:#a0aec0;font-size:13px;font-weight:500}.social-login-section[_ngcontent-%COMP%]{padding:0 24px 24px}.google-login-btn[_ngcontent-%COMP%]{width:100%;height:52px;display:flex;align-items:center;justify-content:center;gap:12px;background:#fff;border:2px solid #e2e8f0;border-radius:12px;cursor:pointer;transition:all .3s ease;font-size:15px;font-weight:600;color:#2d3748;box-shadow:0 2px 8px #0000000d}.google-login-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7fafc;border-color:#cbd5e0;box-shadow:0 4px 12px #0000001a;transform:translateY(-1px)}.google-login-btn[_ngcontent-%COMP%]:active:not(:disabled){background:#edf2f7;transform:translateY(0)}.google-login-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.google-login-btn[_ngcontent-%COMP%]   .google-icon[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}@media (max-width: 480px){.main-content[_ngcontent-%COMP%]{padding:24px 16px}.logo-section[_ngcontent-%COMP%]{margin-bottom:32px}.logo-section[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px}.logo-section[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{font-size:24px}.logo-section[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .app-description[_ngcontent-%COMP%]{font-size:14px}.login-form-section[_ngcontent-%COMP%]{padding:24px 20px}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{padding:14px;font-size:15px}.login-form-section[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{padding:16px;font-size:16px}}.login-footer[_ngcontent-%COMP%]{background:#f7fafc;padding:20px 30px;text-align:center;border-top:1px solid #e2e8f0}.login-footer[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]{margin:0 0 4px;font-size:13px;color:#718096;font-weight:500}.login-footer[_ngcontent-%COMP%]   .footer-info[_ngcontent-%COMP%]{margin:0 0 12px;font-size:12px;color:#a0aec0}.login-footer[_ngcontent-%COMP%]   .version-info[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px;border-top:1px solid #e2e8f0}.login-footer[_ngcontent-%COMP%]   .version-info[_ngcontent-%COMP%]   .version-text[_ngcontent-%COMP%]{margin:0 0 4px;font-size:11px;color:#667eea;font-weight:600;font-family:Monaco,Courier New,monospace}.login-footer[_ngcontent-%COMP%]   .version-info[_ngcontent-%COMP%]   .build-info[_ngcontent-%COMP%]{margin:0;font-size:10px;color:#a0aec0;font-style:italic}']})};function la(a,t){if(a&1&&m(0,"div",83),a&2){let e=p();L("left",e.getDropIndicatorLeft(),"px")("top",e.getDropIndicatorTop(),"px")("height",e.getDropIndicatorHeight(),"px")}}function ca(a,t){a&1&&(i(0,"div",89),C(),i(1,"svg",90),m(2,"circle",91)(3,"path",92),r()())}function da(a,t){if(a&1){let e=w();i(0,"div",84),u("touchstart",function(o){let s=f(e).index,d=p();return h(d.onTouchStart(o,s))})("touchmove",function(o){f(e);let s=p();return h(s.onTouchMove(o))})("touchend",function(o){f(e);let s=p();return h(s.onTouchEnd(o))}),i(1,"div",85),u("click",function(){let o=f(e).$implicit,s=p();return h(s.togglePageSelection(o))}),m(2,"img",86),P(3,ca,4,0,"div",87),r(),i(4,"div",88),l(5),r()()}if(a&2){let e=t.$implicit,n=t.index,o=p();R("selected",e.selected)("landscape",e.isLandscape)("dragging",o.draggingPageIndex===n),c(2),L("transform","rotate("+e.rotation+"deg)"),g("src",e.thumbnail,Oe)("alt","\uD398\uC774\uC9C0 "+e.pageNumber),c(),g("ngIf",e.selected),c(2),E(e.pageNumber)}}var $t=class a{constructor(t){this.router=t;let e=this.router.getCurrentNavigation();e?.extras?.state&&(this.documentData=e.extras.state.document)}pages=[];documentData=null;sheetState="collapsed";completeSheetState="collapsed";addPageSheetState="collapsed";saveAsSheetState="collapsed";saveAsFileName="";newPageConfig={backgroundColor:"#FFFFFF",pageCount:1,insertAfterPage:0};selectedPages=[];clipboard=[];clipboardMode=null;history=[];historyIndex=-1;isDragging=!1;draggingPageIndex=-1;dropTargetIndex=-1;dropPosition="after";touchStartX=0;touchStartY=0;dragThreshold=10;hasMoved=!1;dragPreviewElement=null;indexedDbService=O(J);snackbar=O(U);cdr=O(fe);ngOnInit(){return x(this,null,function*(){this.documentData?yield this.loadPdfPages():(this.snackbar.showWarning("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.goBack())})}loadPdfPages(){return x(this,null,function*(){try{let t=window["pdfjs-dist/build/pdf"];if(!t){console.error("PDF.js\uAC00 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");return}let e=this.getPdfSource(this.documentData),o=yield t.getDocument(e).promise;this.pages=[];for(let s=1;s<=o.numPages;s++){let d=yield o.getPage(s),_=d.getViewport({scale:.5}),b=_.width>_.height,S=document.createElement("canvas"),M=S.getContext("2d");S.width=_.width,S.height=_.height,yield d.render({canvasContext:M,viewport:_}).promise,this.pages.push({pageNumber:s,thumbnail:S.toDataURL(),selected:!1,rotation:0,isLandscape:b,originalPageNumber:s})}this.history=[JSON.parse(JSON.stringify(this.pages))],this.historyIndex=0,console.log(`\u2705 ${this.pages.length}\uAC1C \uD398\uC774\uC9C0 \uB85C\uB4DC \uC644\uB8CC`)}catch(t){console.error("PDF \uD398\uC774\uC9C0 \uB85C\uB4DC \uC2E4\uD328:",t),this.snackbar.showError("PDF \uD398\uC774\uC9C0\uB97C \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}getPdfSource(t){if(t.pdfBase64)return{url:t.pdfBase64.includes(",")?t.pdfBase64:`data:application/pdf;base64,${t.pdfBase64}`};if(t.originalPdfBase64)return{url:t.originalPdfBase64.includes(",")?t.originalPdfBase64:`data:application/pdf;base64,${t.originalPdfBase64}`};if(t.pdfSrc)return{url:t.pdfSrc};throw new Error("PDF \uC18C\uC2A4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}togglePageSelection(t){t.selected=!t.selected,this.updateSelectedPages()}selectAllPages(){let t=this.pages.every(e=>e.selected);this.pages.forEach(e=>e.selected=!t),this.updateSelectedPages()}updateSelectedPages(){this.selectedPages=this.pages.filter(t=>t.selected).map(t=>t.pageNumber)}addPage(){this.addPageSheetState="half"}closeAddPageSheet(){this.addPageSheetState="collapsed",this.newPageConfig={backgroundColor:"#FFFFFF",pageCount:1,insertAfterPage:0}}onAddPageSheetStateChange(t){this.addPageSheetState=t}increasePageCount(){this.newPageConfig.pageCount<250&&this.newPageConfig.pageCount++}decreasePageCount(){this.newPageConfig.pageCount>1&&this.newPageConfig.pageCount--}getInsertPositionText(){let t=this.newPageConfig.insertAfterPage||0,e=this.newPageConfig.pageCount;return t===0?`\uB9E8 \uC55E\uC5D0 ${e}\uD398\uC774\uC9C0 \uCD94\uAC00`:`${t}\uD398\uC774\uC9C0 \uB4A4\uC5D0 ${e}\uD398\uC774\uC9C0 \uCD94\uAC00`}confirmAddPage(){return x(this,null,function*(){try{this.snackbar.showInfo(`${this.newPageConfig.pageCount}\uAC1C \uD398\uC774\uC9C0\uB97C \uC0DD\uC131 \uC911...`);let t=window.PDFLib,e=window["pdfjs-dist/build/pdf"];if(!t||!e)throw new Error("PDF \uB77C\uC774\uBE0C\uB7EC\uB9AC\uAC00 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");let n=this.hexToRgb(this.newPageConfig.backgroundColor),o=this.newPageConfig.insertAfterPage||0,s=o;console.log("\u{1F50D} \uC0AC\uC6A9\uC790 \uC9C0\uC815 \uD398\uC774\uC9C0:",o,"insertIndex:",s),console.log("\u{1F50D} \uC804\uCCB4 \uD398\uC774\uC9C0 \uC218:",this.pages.length);let d=[];for(let _=0;_<this.newPageConfig.pageCount;_++){let b=yield t.PDFDocument.create();b.addPage([595,842]).drawRectangle({x:0,y:0,width:595,height:842,color:t.rgb(n.r/255,n.g/255,n.b/255)});let M=yield b.save(),y=new Blob([M],{type:"application/pdf"}),k=URL.createObjectURL(y),A=yield(yield e.getDocument(k).promise).getPage(1),B=A.getViewport({scale:.5}),K=document.createElement("canvas"),X=K.getContext("2d");K.width=B.width,K.height=B.height,yield A.render({canvasContext:X,viewport:B}).promise;let q=K.toDataURL();URL.revokeObjectURL(k);let Z={pageNumber:s+_+1,thumbnail:q,selected:!1,rotation:0,isLandscape:!1,originalPageNumber:-1,backgroundColor:this.newPageConfig.backgroundColor};d.push(Z)}this.pages.splice(s,0,...d),this.pages.forEach((_,b)=>{_.pageNumber=b+1}),this.snackbar.showSuccess(`${this.newPageConfig.pageCount}\uAC1C \uD398\uC774\uC9C0\uB97C \uCD94\uAC00\uD588\uC2B5\uB2C8\uB2E4.`),this.closeAddPageSheet()}catch(t){console.error("\uD398\uC774\uC9C0 \uCD94\uAC00 \uC624\uB958:",t),this.snackbar.showError("\uD398\uC774\uC9C0 \uCD94\uAC00\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}hexToRgb(t){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:{r:255,g:255,b:255}}openBottomSheet(){console.log("\u{1F535} \uB354\uBCF4\uAE30 \uBC84\uD2BC \uD074\uB9AD\uB428"),console.log("\u{1F535} \uD604\uC7AC sheetState:",this.sheetState),this.sheetState="half",console.log("\u{1F535} \uBCC0\uACBD \uD6C4 sheetState:",this.sheetState),this.cdr.detectChanges(),console.log("\u{1F535} detectChanges \uD638\uCD9C \uC644\uB8CC")}openCompleteSheet(){this.completeSheetState="half"}closeCompleteSheet(){this.completeSheetState="collapsed"}onCompleteSheetStateChange(t){this.completeSheetState=t}onCompleteAction(t){switch(this.completeSheetState="collapsed",t){case"save":this.saveDocument(!1);break;case"save-as":this.openSaveAsSheet();break;case"discard":this.discardChanges();break;case"cancel":break}}openSaveAsSheet(){let e=(this.documentData.title||this.documentData.fileName||"\uBB38\uC11C").replace(/\.pdf$/i,"");this.saveAsFileName=e,this.saveAsSheetState="half"}closeSaveAsSheet(){this.saveAsSheetState="collapsed",this.saveAsFileName=""}onSaveAsSheetStateChange(t){this.saveAsSheetState=t}confirmSaveAs(){if(!this.saveAsFileName.trim()){this.snackbar.showWarning("\uD30C\uC77C\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694.");return}this.saveAsSheetState="collapsed",this.saveDocument(!0,this.saveAsFileName.trim())}saveDocument(t,e){return x(this,null,function*(){if(this.pages.length===0){this.snackbar.showWarning("\uD398\uC774\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{this.snackbar.showInfo("PDF \uAD6C\uC131 \uC911...");let n=window.PDFLib,o=window["pdfjs-dist/build/pdf"];if(!n||!o)throw new Error("PDF \uB77C\uC774\uBE0C\uB7EC\uB9AC\uAC00 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");let s=yield n.PDFDocument.create(),d=this.getPdfSource(this.documentData),S=yield(yield o.getDocument(d).promise).getData(),M=yield n.PDFDocument.load(S);console.log("\u2705 \uC6D0\uBCF8 \uBB38\uC11C \uB85C\uB4DC \uC644\uB8CC");for(let q of this.pages){let Z;if(q.originalPageNumber===-1){if(Z=s.addPage([595,842]),q.backgroundColor){let te=this.hexToRgb(q.backgroundColor);Z.drawRectangle({x:0,y:0,width:595,height:842,color:n.rgb(te.r/255,te.g/255,te.b/255)})}}else[Z]=yield s.copyPages(M,[q.originalPageNumber-1]),s.addPage(Z);q.rotation!==0&&Z.setRotation(n.degrees(q.rotation))}console.log(`\u2705 ${this.pages.length}\uAC1C \uD398\uC774\uC9C0 \uAD6C\uC131 \uC644\uB8CC`);let y=yield s.save(),k=new Blob([y],{type:"application/pdf"}),I=`data:application/pdf;base64,${yield this.blobToBase64(k)}`,A,B;t?(A=`organized-${Date.now()}`,e?B=e.endsWith(".pdf")?e:`${e}.pdf`:B=`${(this.documentData.title||this.documentData.fileName).replace(/\.pdf$/i,"")}(\uBCF5\uC0AC).pdf`):(A=this.documentData.id,B=this.documentData.fileName||this.documentData.title);let K={id:A,title:B.replace(/\.pdf$/i,""),fileName:B,pdfBase64:I,originalPdfBase64:I,pages:[],elementCount:0,createdAt:this.documentData.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString(),version:"1.0",documentType:"viewer",pageCount:this.pages.length,folderId:this.documentData.folderId||null};yield this.indexedDbService.saveDocument(K);let X=t?"PDF \uAD6C\uC131\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.":"\uBB38\uC11C\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.";this.router.navigate(["/ezm/file-saved"],{state:{fileId:A,fileName:B,fileCount:1,title:X,subtitle:`${this.pages.length}\uAC1C \uD398\uC774\uC9C0\uB85C \uAD6C\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`,folderId:this.documentData.folderId||null}})}catch(n){console.error("PDF \uAD6C\uC131 \uC2E4\uD328:",n),this.snackbar.showError("PDF \uAD6C\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}discardChanges(){this.router.navigate(["/ezm/myfiles"])}goBack(){this.router.navigate(["/ezm/home"])}onMenuAction(t){switch(t!=="select-all"&&(this.sheetState="collapsed"),t){case"select-all":this.selectAllPages();break;case"cut":this.cutPages();break;case"copy":this.copyPages();break;case"paste":this.pastePages();break;case"paste-into":this.pasteIntoPages();break;case"undo":this.undo();break;case"redo":this.redo();break}}saveHistory(){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.push(JSON.parse(JSON.stringify(this.pages))),this.historyIndex++,this.history.length>50&&(this.history.shift(),this.historyIndex--)}cutPages(){if(this.selectedPages.length===0){this.snackbar.showWarning("\uC798\uB77C\uB0BC \uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD558\uC138\uC694.");return}this.saveHistory(),this.clipboard=this.pages.filter(t=>t.selected).map(t=>se(oe({},t),{selected:!1})),this.clipboardMode="cut",this.pages=this.pages.filter(t=>!t.selected),this.renumberPages(),this.selectedPages=[],this.snackbar.showSuccess(`${this.clipboard.length}\uAC1C \uD398\uC774\uC9C0\uB97C \uC798\uB77C\uB0C8\uC2B5\uB2C8\uB2E4.`)}copyPages(){if(this.selectedPages.length===0){this.snackbar.showWarning("\uBCF5\uC0AC\uD560 \uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD558\uC138\uC694.");return}this.clipboard=this.pages.filter(t=>t.selected).map(t=>se(oe({},t),{selected:!1})),this.clipboardMode="copy",this.snackbar.showSuccess(`${this.clipboard.length}\uAC1C \uD398\uC774\uC9C0\uB97C \uBCF5\uC0AC\uD588\uC2B5\uB2C8\uB2E4.`)}pastePages(){if(this.clipboard.length===0){this.snackbar.showWarning("\uBD99\uC5EC\uB123\uC744 \uD398\uC774\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.saveHistory();let t=this.clipboard.map(e=>oe({},e));this.pages.push(...t),this.renumberPages(),this.clipboardMode==="cut"&&(this.clipboard=[],this.clipboardMode=null),this.snackbar.showSuccess(`${t.length}\uAC1C \uD398\uC774\uC9C0\uB97C \uBD99\uC5EC\uB123\uC5C8\uC2B5\uB2C8\uB2E4.`)}pasteIntoPages(){if(this.clipboard.length===0){this.snackbar.showWarning("\uBD99\uC5EC\uB123\uC744 \uD398\uC774\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(this.selectedPages.length===0){this.snackbar.showWarning("\uBD99\uC5EC\uB123\uC744 \uC704\uCE58\uB97C \uC120\uD0DD\uD558\uC138\uC694.");return}this.saveHistory();let t=this.pages.findIndex(n=>n.selected),e=this.clipboard.map(n=>se(oe({},n),{selected:!1}));this.pages.splice(t+1,0,...e),this.renumberPages(),this.clipboardMode==="cut"&&(this.clipboard=[],this.clipboardMode=null),this.snackbar.showSuccess(`${e.length}\uAC1C \uD398\uC774\uC9C0\uB97C \uC0BD\uC785\uD588\uC2B5\uB2C8\uB2E4.`)}renumberPages(){this.pages.forEach((t,e)=>{t.pageNumber=e+1})}canUndo(){return this.historyIndex>0}canRedo(){return this.historyIndex<this.history.length-1}undo(){if(!this.canUndo()){this.snackbar.showWarning("\uC2E4\uD589 \uCDE8\uC18C\uD560 \uB0B4\uC5ED\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.historyIndex--,this.pages=JSON.parse(JSON.stringify(this.history[this.historyIndex])),this.updateSelectedPages(),this.snackbar.showSuccess("\uC2E4\uD589 \uCDE8\uC18C\uD588\uC2B5\uB2C8\uB2E4.")}redo(){if(!this.canRedo()){this.snackbar.showWarning("\uC2E4\uD589 \uBCF5\uAD6C\uD560 \uB0B4\uC5ED\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.historyIndex++,this.pages=JSON.parse(JSON.stringify(this.history[this.historyIndex])),this.updateSelectedPages(),this.snackbar.showSuccess("\uC2E4\uD589 \uBCF5\uAD6C\uD588\uC2B5\uB2C8\uB2E4.")}blobToBase64(t){return new Promise((e,n)=>{let o=new FileReader;o.onloadend=()=>{let s=o.result.split(",")[1];e(s)},o.onerror=n,o.readAsDataURL(t)})}closeBottomSheet(){console.log("\u{1F534} \uBC14\uD140\uC2DC\uD2B8 \uB2EB\uAE30"),this.sheetState="collapsed"}onSheetStateChange(t){console.log("\u{1F7E1} \uBC14\uD140\uC2DC\uD2B8 \uC0C1\uD0DC \uBCC0\uACBD:",t),this.sheetState=t}onTouchStart(t,e){t.target.closest(".selection-overlay")||(this.isDragging=!1,this.hasMoved=!1,this.draggingPageIndex=e,this.touchStartX=t.touches[0].clientX,this.touchStartY=t.touches[0].clientY)}onTouchMove(t){if(this.draggingPageIndex===-1)return;let e=t.touches[0].clientX,n=t.touches[0].clientY,o=Math.abs(e-this.touchStartX),s=Math.abs(n-this.touchStartY);!this.hasMoved&&(o>this.dragThreshold||s>this.dragThreshold)&&(this.hasMoved=!0,this.isDragging=!0,this.createDragPreview(t),t.preventDefault()),this.isDragging&&(t.preventDefault(),this.updateDragPreview(e,n),this.updateDropTarget(e,n))}onTouchEnd(t){this.isDragging&&this.dropTargetIndex!==-1&&this.performDrop(),this.isDragging=!1,this.draggingPageIndex=-1,this.dropTargetIndex=-1,this.hasMoved=!1,this.removeDragPreview(),this.cdr.detectChanges()}createDragPreview(t){let e=t.target.closest(".page-item");if(!e)return;this.dragPreviewElement=e.cloneNode(!0),this.dragPreviewElement.classList.add("drag-preview"),this.dragPreviewElement.style.position="fixed",this.dragPreviewElement.style.pointerEvents="none",this.dragPreviewElement.style.zIndex="1000",this.dragPreviewElement.style.width=e.offsetWidth+"px",this.dragPreviewElement.style.height=e.offsetHeight+"px";let n=t.touches[0];this.dragPreviewElement.style.left=n.clientX-e.offsetWidth/2+"px",this.dragPreviewElement.style.top=n.clientY-e.offsetHeight/2+"px",document.body.appendChild(this.dragPreviewElement)}updateDragPreview(t,e){if(!this.dragPreviewElement)return;let n=parseInt(this.dragPreviewElement.style.width),o=parseInt(this.dragPreviewElement.style.height);this.dragPreviewElement.style.left=t-n/2+"px",this.dragPreviewElement.style.top=e-o/2+"px"}updateDropTarget(t,e){let n=document.querySelector(".pages-grid");if(!n)return;let o=n.getBoundingClientRect(),s=t-o.left,d=e-o.top;if(s<0||s>o.width||d<0||d>o.height){this.dropTargetIndex=-1,this.cdr.detectChanges();return}let _=12,b=(o.width-_*2)/3,S=b*1.414,M=Math.floor(s/(b+_)),y=Math.floor(d/(S+_)),k=Math.min(y*3+M,this.pages.length-1);if(k===this.draggingPageIndex){this.dropTargetIndex=-1,this.cdr.detectChanges();return}let T=M*(b+_),A=s-T<b/2;this.dropTargetIndex=k,this.draggingPageIndex<k?this.dropPosition=A?"before":"after":this.dropPosition=A?"before":"after",this.cdr.detectChanges()}performDrop(){if(this.draggingPageIndex===-1||this.dropTargetIndex===-1)return;let t=this.draggingPageIndex,e=this.dropTargetIndex;if(this.dropPosition==="after"&&e++,t===e||t+1===e)return;let[n]=this.pages.splice(t,1);t<e&&e--,this.pages.splice(e,0,n),this.pages.forEach((o,s)=>{o.pageNumber=s+1}),this.snackbar.showInfo("\uD398\uC774\uC9C0 \uC21C\uC11C\uAC00 \uBCC0\uACBD\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}removeDragPreview(){this.dragPreviewElement&&this.dragPreviewElement.parentNode&&(this.dragPreviewElement.parentNode.removeChild(this.dragPreviewElement),this.dragPreviewElement=null)}getDropIndicatorLeft(){if(this.dropTargetIndex===-1)return 0;let t=document.querySelector(".pages-grid");if(!t)return 0;let e=t.getBoundingClientRect(),n=12,o=(e.width-n*2)/3,s=this.dropTargetIndex%3;return this.dropPosition==="before"?s*(o+n)-6:s*(o+n)+o+6}getDropIndicatorTop(){if(this.dropTargetIndex===-1)return 0;let t=document.querySelector(".pages-grid");if(!t)return 0;let e=t.querySelectorAll(".page-item");if(e.length===0)return 0;let n=Math.floor(this.dropTargetIndex/3),s=e[0].offsetHeight;return n*(s+12)}getDropIndicatorHeight(){let t=document.querySelector(".pages-grid");if(!t)return 100;let e=t.querySelectorAll(".page-item");return e.length===0?100:e[0].offsetHeight}rotatePages(t){if(this.selectedPages.length===0){this.snackbar.showWarning("\uD68C\uC804\uD560 \uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD558\uC138\uC694.");return}this.saveHistory(),this.pages.forEach(e=>{e.selected&&(e.rotation=(e.rotation+t+360)%360)}),this.snackbar.showSuccess(`${this.selectedPages.length}\uAC1C \uD398\uC774\uC9C0\uB97C ${t>0?"\uC624\uB978\uCABD":"\uC67C\uCABD"}\uC73C\uB85C \uD68C\uC804\uD588\uC2B5\uB2C8\uB2E4.`)}deletePages(){if(this.selectedPages.length===0){this.snackbar.showWarning("\uC0AD\uC81C\uD560 \uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD558\uC138\uC694.");return}if(this.selectedPages.length===this.pages.length){this.snackbar.showWarning("\uBAA8\uB4E0 \uD398\uC774\uC9C0\uB97C \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.saveHistory(),this.pages=this.pages.filter(t=>!t.selected),this.renumberPages(),this.selectedPages=[],this.snackbar.showSuccess("\uC120\uD0DD\uD55C \uD398\uC774\uC9C0\uB97C \uC0AD\uC81C\uD588\uC2B5\uB2C8\uB2E4.")}duplicatePages(){if(this.selectedPages.length===0){this.snackbar.showWarning("\uBCF5\uC81C\uD560 \uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD558\uC138\uC694.");return}this.saveHistory();let t=[];this.pages.forEach(e=>{e.selected&&t.push(se(oe({},e),{pageNumber:0,selected:!1}))}),this.pages.push(...t),this.renumberPages(),this.pages.forEach(e=>e.selected=!1),this.selectedPages=[],this.snackbar.showSuccess(`${t.length}\uAC1C \uD398\uC774\uC9C0\uB97C \uBCF5\uC81C\uD588\uC2B5\uB2C8\uB2E4.`)}static \u0275fac=function(e){return new(e||a)(z(V))};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-organize"]],standalone:!1,decls:222,vars:40,consts:[["pagesGrid",""],[1,"header"],[1,"header-left"],["title","\uD398\uC774\uC9C0 \uCD94\uAC00",1,"icon-btn",3,"click"],["width","22","height","22","viewBox","0 0 24 24","fill","none"],["d","M12 5v14M5 12h14","stroke","currentColor","stroke-width","2.5","stroke-linecap","round"],["title","\uC120\uD0DD \uC0AD\uC81C",1,"icon-btn",3,"click","disabled"],["d","M3 6h18","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M8 6V4a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M19 6v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M10 11v6M14 11v6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["title","\uC120\uD0DD \uBCF5\uC81C",1,"icon-btn",3,"click","disabled"],["x","9","y","9","width","13","height","13","rx","2","stroke","currentColor","stroke-width","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1","stroke","currentColor","stroke-width","2"],["title","\uC120\uD0DD \uD68C\uC804",1,"icon-btn",3,"click","disabled"],["d","M21 12a9 9 0 1 1-9-9c2.52 0 4.77 1 6.36 2.64","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M21 3v6h-6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"header-right"],["title","\uB354\uBCF4\uAE30",1,"icon-btn",3,"click"],["cx","12","cy","5","r","2","fill","currentColor"],["cx","12","cy","12","r","2","fill","currentColor"],["cx","12","cy","19","r","2","fill","currentColor"],["title","\uC644\uB8CC",1,"icon-btn",3,"click"],["d","M20 6L9 17l-5-5","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],[1,"main-content"],[1,"pages-container"],["class","drop-indicator",3,"left","top","height",4,"ngIf"],[1,"pages-grid"],["class","page-item",3,"selected","landscape","dragging","touchstart","touchmove","touchend",4,"ngFor","ngForOf"],[3,"sheetStateChange","close","sheetState"],[1,"bottom-sheet-header"],[1,"bottom-sheet-title"],[1,"bottom-sheet-content"],[1,"option-list"],[1,"option-item",3,"click"],[1,"option-icon"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["x","3","y","3","width","7","height","7","rx","1","stroke","currentColor","stroke-width","2"],["x","14","y","3","width","7","height","7","rx","1","stroke","currentColor","stroke-width","2"],["x","3","y","14","width","7","height","7","rx","1","stroke","currentColor","stroke-width","2"],["x","14","y","14","width","7","height","7","rx","1","stroke","currentColor","stroke-width","2"],[1,"option-text"],[1,"option-label"],[1,"option-desc"],["cx","6","cy","6","r","3","stroke","currentColor","stroke-width","2"],["cx","6","cy","18","r","3","stroke","currentColor","stroke-width","2"],["d","M20 4L8.5 15.5M20 20L8.5 8.5","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["x","8","y","2","width","8","height","4","rx","1","stroke","currentColor","stroke-width","2"],["d","M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2","stroke","currentColor","stroke-width","2"],["d","M12 11v6m-3-3h6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M3 10h6M3 10l4-4M3 10l4 4","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M9 10h6a6 6 0 0 1 0 12h-2","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M21 10h-6M21 10l-4-4M21 10l-4 4","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M15 10H9a6 6 0 0 0 0 12h2","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z","stroke","currentColor","stroke-width","2"],["points","17 21 17 13 7 13 7 21","stroke","currentColor","stroke-width","2"],["points","7 3 7 8 15 8","stroke","currentColor","stroke-width","2"],["cx","17","cy","7","r","3","fill","currentColor"],["d","M17 6v2m-1-1h2","stroke","white","stroke-width","1.5","stroke-linecap","round"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],["d","M15 9l-6 6M9 9l6 6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"close-btn",3,"click"],[1,"bottom-sheet-content","add-page-content"],[1,"setting-group"],[1,"setting-label"],[1,"color-picker-wrapper"],["type","color","id","pageColorPicker",1,"color-input",3,"ngModelChange","ngModel"],["for","pageColorPicker",1,"color-display"],[1,"color-preview"],[1,"color-hex"],[1,"page-count-control"],[1,"count-btn",3,"click","disabled"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M5 12h14","stroke","currentColor","stroke-width","2.5","stroke-linecap","round"],[1,"count-value"],[1,"setting-hint"],[1,"insert-position-control"],["type","number","placeholder","0",1,"position-input",3,"ngModelChange","ngModel","min","max"],[1,"position-label"],[1,"confirm-btn",3,"click"],["type","text","placeholder","\uD30C\uC77C\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",1,"file-name-input",3,"ngModelChange","ngModel"],[3,"activeTab"],[1,"drop-indicator"],[1,"page-item",3,"touchstart","touchmove","touchend"],[1,"page-thumbnail",3,"click"],[3,"src","alt"],["class","selection-overlay",4,"ngIf"],[1,"page-number"],[1,"selection-overlay"],["width","32","height","32","viewBox","0 0 24 24","fill","none"],["cx","12","cy","12","r","10","fill","#007acc"],["d","M8 12l2 2 4-4","stroke","white","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(e,n){if(e&1){let o=w();i(0,"div",1)(1,"div",2)(2,"button",3),u("click",function(){return f(o),h(n.addPage())}),C(),i(3,"svg",4),m(4,"path",5),r()(),v(),i(5,"button",6),u("click",function(){return f(o),h(n.deletePages())}),C(),i(6,"svg",4),m(7,"path",7)(8,"path",8)(9,"path",9)(10,"path",10),r()(),v(),i(11,"button",11),u("click",function(){return f(o),h(n.duplicatePages())}),C(),i(12,"svg",4),m(13,"rect",12)(14,"path",13),r()(),v(),i(15,"button",14),u("click",function(){return f(o),h(n.rotatePages(90))}),C(),i(16,"svg",4),m(17,"path",15)(18,"path",16),r()()(),v(),i(19,"div",17)(20,"button",18),u("click",function(){return f(o),h(n.openBottomSheet())}),C(),i(21,"svg",4),m(22,"circle",19)(23,"circle",20)(24,"circle",21),r()(),v(),i(25,"button",22),u("click",function(){return f(o),h(n.openCompleteSheet())}),C(),i(26,"svg",4),m(27,"path",23),r()()()(),v(),i(28,"div",24)(29,"div",25),P(30,la,1,6,"div",26),i(31,"div",27,0),P(33,da,6,12,"div",28),r()()(),i(34,"app-bottom-sheet",29),u("sheetStateChange",function(d){return f(o),h(n.onSheetStateChange(d))})("close",function(){return f(o),h(n.closeBottomSheet())}),i(35,"div",30)(36,"h3",31),l(37,"\uB354\uBCF4\uAE30"),r()(),i(38,"div",32)(39,"div",33)(40,"button",34),u("click",function(){return f(o),h(n.onMenuAction("select-all"))}),i(41,"div",35),C(),i(42,"svg",36),m(43,"rect",37)(44,"rect",38)(45,"rect",39)(46,"rect",40),r()(),v(),i(47,"div",41)(48,"span",42),l(49,"\uBAA8\uB4E0 \uD398\uC774\uC9C0 \uC120\uD0DD"),r(),i(50,"span",43),l(51,"\uD074\uB9AD \uC2DC \uBB38\uC11C\uD398\uC774\uC9C0 \uC804\uCCB4 \uC120\uD0DD"),r()()(),i(52,"button",34),u("click",function(){return f(o),h(n.onMenuAction("cut"))}),i(53,"div",35),C(),i(54,"svg",36),m(55,"circle",44)(56,"circle",45)(57,"path",46),r()(),v(),i(58,"div",41)(59,"span",42),l(60,"\uD398\uC774\uC9C0 \uC798\uB77C\uB0B4\uAE30"),r(),i(61,"span",43),l(62,"\uC120\uD0DD\uD55C \uD56D\uBAA9 \uC798\uB77C\uB0B4\uAE30"),r()()(),i(63,"button",34),u("click",function(){return f(o),h(n.onMenuAction("copy"))}),i(64,"div",35),C(),i(65,"svg",36),m(66,"rect",12)(67,"path",13),r()(),v(),i(68,"div",41)(69,"span",42),l(70,"\uD398\uC774\uC9C0 \uBCF5\uC0AC"),r(),i(71,"span",43),l(72,"\uC120\uD0DD\uD55C \uD56D\uBAA9 \uBCF5\uC0AC"),r()()(),i(73,"button",34),u("click",function(){return f(o),h(n.onMenuAction("paste"))}),i(74,"div",35),C(),i(75,"svg",36),m(76,"rect",47)(77,"path",48),r()(),v(),i(78,"div",41)(79,"span",42),l(80,"\uD398\uC774\uC9C0 \uBD99\uC5EC\uB123\uAE30"),r(),i(81,"span",43),l(82,"\uBCF5\uC0AC\uB41C \uD398\uC774\uC9C0 \uD56D\uBAA9 \uB9E8\uB4A4 \uD398\uC774\uC9C0\uC5D0 \uBD99\uC774\uAE30"),r()()(),i(83,"button",34),u("click",function(){return f(o),h(n.onMenuAction("paste-into"))}),i(84,"div",35),C(),i(85,"svg",36),m(86,"rect",47)(87,"path",48)(88,"path",49),r()(),v(),i(89,"div",41)(90,"span",42),l(91,"\uD398\uC774\uC9C0 \uBD99\uC544\uAE30"),r(),i(92,"span",43),l(93,"\uC120\uD0DD\uD55C \uBB38\uC11C\uAC00 \uC788\uC744 \uC2DC \uBE44\uD65C\uC131\uD654 / \uC120\uD0DD \uC2DC \uD65C\uC131\uD654"),r()()(),i(94,"button",34),u("click",function(){return f(o),h(n.onMenuAction("undo"))}),i(95,"div",35),C(),i(96,"svg",36),m(97,"path",50)(98,"path",51),r()(),v(),i(99,"div",41)(100,"span",42),l(101,"\uC2E4\uD589\uCDE8\uC18C"),r(),i(102,"span",43),l(103,"\uC774\uC804 \uD3B8\uC9D1\uB41C \uC0C1\uD0DC\uB85C \uB418\uB3CC\uB9AC\uAE30 (\uACC4\uC18D \uD074\uB9AD \uC2DC \uCC98\uC74C\uC0C1\uD0DC)"),r()()(),i(104,"button",34),u("click",function(){return f(o),h(n.onMenuAction("redo"))}),i(105,"div",35),C(),i(106,"svg",36),m(107,"path",52)(108,"path",53),r()(),v(),i(109,"div",41)(110,"span",42),l(111,"\uC2E4\uD589\uBCF5\uAD6C"),r(),i(112,"span",43),l(113,"\uD3B8\uC9D1\uB41C \uC0C1\uD0DC\uB85C \uBCF5\uADC0 (\uACC4\uC18D \uD074\uB9AD \uC2DC \uCC98\uC74C\uC0C1\uD0DC)"),r()()()()()(),i(114,"app-bottom-sheet",29),u("sheetStateChange",function(d){return f(o),h(n.onCompleteSheetStateChange(d))})("close",function(){return f(o),h(n.closeCompleteSheet())}),i(115,"div",30)(116,"h3",31),l(117,"\uC791\uC5C5 \uC644\uB8CC"),r()(),i(118,"div",32)(119,"div",33)(120,"button",34),u("click",function(){return f(o),h(n.onCompleteAction("save"))}),i(121,"div",35),C(),i(122,"svg",36),m(123,"path",54)(124,"polyline",55)(125,"polyline",56),r()(),v(),i(126,"div",41)(127,"span",42),l(128,"\uC800\uC7A5"),r(),i(129,"span",43),l(130,"\uAE30\uC874 \uBB38\uC11C\uC5D0 \uC800\uC7A5 / \uC800\uC7A5 \uC131\uACF5 \uBA54\uC138\uC9C0 \uC81C\uACF5"),r()()(),i(131,"button",34),u("click",function(){return f(o),h(n.onCompleteAction("save-as"))}),i(132,"div",35),C(),i(133,"svg",36),m(134,"path",54)(135,"polyline",55)(136,"polyline",56)(137,"circle",57)(138,"path",58),r()(),v(),i(139,"div",41)(140,"span",42),l(141,"\uB2E4\uB978 \uC774\uB984\uC73C\uB85C \uC800\uC7A5"),r(),i(142,"span",43),l(143,"\uD30C\uC77C\uBA85 \uB4A4\uC5D0 (\uBCF5\uC0AC) \uBD99\uC5EC\uC11C \uC800\uC7A5"),r()()(),i(144,"button",34),u("click",function(){return f(o),h(n.onCompleteAction("discard"))}),i(145,"div",35),C(),i(146,"svg",36),m(147,"circle",59)(148,"path",60),r()(),v(),i(149,"div",41)(150,"span",42),l(151,"\uBCC0\uACBD\uC0AC\uD56D \uBB34\uC2DC"),r(),i(152,"span",43),l(153,"\uD3B8\uC9D1\uB0B4\uC6A9 \uCDE8\uC18C \uD6C4 \uD604\uC7AC \uBB38\uC11C\uB85C \uB418\uB3CC\uC544\uAC10"),r()()(),i(154,"button",34),u("click",function(){return f(o),h(n.onCompleteAction("cancel"))}),i(155,"div",35),C(),i(156,"svg",36),m(157,"path",61),r()(),v(),i(158,"div",41)(159,"span",42),l(160,"\uCDE8\uC18C"),r(),i(161,"span",43),l(162,"\uD31D\uC5C5 \uB2EB\uD798"),r()()()()()(),i(163,"app-bottom-sheet",29),u("sheetStateChange",function(d){return f(o),h(n.onAddPageSheetStateChange(d))})("close",function(){return f(o),h(n.closeAddPageSheet())}),i(164,"div",30)(165,"h3",31),l(166,"\uD398\uC774\uC9C0 \uCD94\uAC00"),r(),i(167,"button",62),u("click",function(){return f(o),h(n.closeAddPageSheet())}),C(),i(168,"svg",36),m(169,"path",61),r()()(),v(),i(170,"div",63)(171,"div",64)(172,"label",65),l(173,"\uBC30\uACBD \uC0C9\uC0C1"),r(),i(174,"div",66)(175,"input",67),W("ngModelChange",function(d){return f(o),$(n.newPageConfig.backgroundColor,d)||(n.newPageConfig.backgroundColor=d),h(d)}),r(),i(176,"label",68),m(177,"div",69),i(178,"span",70),l(179),r()()()(),i(180,"div",64)(181,"label",65),l(182,"\uD398\uC774\uC9C0 \uC218"),r(),i(183,"div",71)(184,"button",72),u("click",function(){return f(o),h(n.decreasePageCount())}),C(),i(185,"svg",73),m(186,"path",74),r()(),v(),i(187,"span",75),l(188),r(),i(189,"button",72),u("click",function(){return f(o),h(n.increasePageCount())}),C(),i(190,"svg",73),m(191,"path",5),r()()(),v(),i(192,"div",76),l(193,"\uD398\uC774\uC9C0 \uC218 \uC801\uC6A9 \uCD5C\uB300 250\uAC74\uC774\uC9C0 \uAE4C\uC9C0"),r()(),i(194,"div",64)(195,"label",65),l(196,"\uC0BD\uC785 \uC704\uCE58"),r(),i(197,"div",77)(198,"input",78),W("ngModelChange",function(d){return f(o),$(n.newPageConfig.insertAfterPage,d)||(n.newPageConfig.insertAfterPage=d),h(d)}),r(),i(199,"span",79),l(200,"\uD398\uC774\uC9C0 \uB4A4\uC5D0 \uCD94\uAC00"),r()(),i(201,"div",76),l(202,"0\uC744 \uC785\uB825\uD558\uBA74 \uB9E8 \uC55E\uC5D0 \uCD94\uAC00\uB429\uB2C8\uB2E4"),r()(),i(203,"button",80),u("click",function(){return f(o),h(n.confirmAddPage())}),l(204),r()()(),i(205,"app-bottom-sheet",29),u("sheetStateChange",function(d){return f(o),h(n.onSaveAsSheetStateChange(d))})("close",function(){return f(o),h(n.closeSaveAsSheet())}),i(206,"div",30)(207,"h3",31),l(208,"\uB2E4\uB978 \uC774\uB984\uC73C\uB85C \uC800\uC7A5"),r(),i(209,"button",62),u("click",function(){return f(o),h(n.closeSaveAsSheet())}),C(),i(210,"svg",36),m(211,"path",61),r()()(),v(),i(212,"div",63)(213,"div",64)(214,"label",65),l(215,"\uD30C\uC77C\uBA85"),r(),i(216,"input",81),W("ngModelChange",function(d){return f(o),$(n.saveAsFileName,d)||(n.saveAsFileName=d),h(d)}),r(),i(217,"div",76),l(218,".pdf \uD655\uC7A5\uC790\uB294 \uC790\uB3D9\uC73C\uB85C \uCD94\uAC00\uB429\uB2C8\uB2E4"),r()(),i(219,"button",80),u("click",function(){return f(o),h(n.confirmSaveAs())}),l(220," \uC800\uC7A5 "),r()()(),m(221,"ez-reader-mobile-bottom-nav",82)}e&2&&(c(5),R("disabled",n.selectedPages.length===0),g("disabled",n.selectedPages.length===0),c(6),R("disabled",n.selectedPages.length===0),g("disabled",n.selectedPages.length===0),c(4),R("disabled",n.selectedPages.length===0),g("disabled",n.selectedPages.length===0),c(15),g("ngIf",n.isDragging&&n.dropTargetIndex!==-1),c(3),g("ngForOf",n.pages),c(),g("sheetState",n.sheetState),c(18),R("disabled",n.selectedPages.length===0),c(11),R("disabled",n.selectedPages.length===0),c(10),R("disabled",n.clipboard.length===0),c(10),R("disabled",n.clipboard.length===0||n.selectedPages.length===0),c(11),R("disabled",!n.canUndo()),c(10),R("disabled",!n.canRedo()),c(10),g("sheetState",n.completeSheetState),c(49),g("sheetState",n.addPageSheetState),c(12),G("ngModel",n.newPageConfig.backgroundColor),c(2),L("background-color",n.newPageConfig.backgroundColor),c(2),E(n.newPageConfig.backgroundColor),c(5),g("disabled",n.newPageConfig.pageCount<=1),c(4),E(n.newPageConfig.pageCount),c(),g("disabled",n.newPageConfig.pageCount>=250),c(9),G("ngModel",n.newPageConfig.insertAfterPage),g("min",0)("max",n.pages.length),c(6),D(" ",n.getInsertPositionText()," "),c(),g("sheetState",n.saveAsSheetState),c(11),G("ngModel",n.saveAsFileName),c(5),g("activeTab","home"))},dependencies:[ne,j,ce,Gn,re,Kn,Un,ae,he,de],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh;background:#f5f5f5}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;background:#fff;border-bottom:1px solid #e0e0e0;position:sticky;top:0;z-index:100;gap:12px}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{width:40px;height:40px;padding:0;background:none;border:none;cursor:pointer;color:#333;display:flex;align-items:center;justify-content:center;border-radius:8px;transition:all .2s}.header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:active:not(:disabled){background:#f0f0f0;transform:scale(.95)}.header[_ngcontent-%COMP%]   .icon-btn.disabled[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{pointer-events:none}.main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px 16px 80px}.pages-container[_ngcontent-%COMP%]{position:relative}.pages-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}.drop-indicator[_ngcontent-%COMP%]{position:absolute;width:6px;background:linear-gradient(180deg,#007acc,#005a9e);border-radius:3px;box-shadow:0 0 16px #007acce6,0 0 32px #007acc80,inset 0 0 8px #ffffff4d;animation:_ngcontent-%COMP%_dropIndicatorPulse .8s ease-in-out infinite;z-index:10;pointer-events:none}@keyframes _ngcontent-%COMP%_dropIndicatorPulse{0%,to{opacity:1;transform:scaleX(1);box-shadow:0 0 16px #007acce6,0 0 32px #007acc80,inset 0 0 8px #ffffff4d}50%{opacity:.8;transform:scaleX(1.3);box-shadow:0 0 20px #007acc,0 0 40px #007accb3,inset 0 0 12px #ffffff80}}.drag-preview[_ngcontent-%COMP%]{opacity:.9;transform:scale(1.08) rotate(3deg);box-shadow:0 10px 40px #0000004d,0 0 0 2px #007acc80;transition:none}.drag-preview[_ngcontent-%COMP%]   .selection-overlay[_ngcontent-%COMP%]{display:none}.page-item[_ngcontent-%COMP%]{position:relative;cursor:default;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a;transition:all .2s;touch-action:none;-webkit-user-select:none;user-select:none}.page-item.selected[_ngcontent-%COMP%]{box-shadow:0 0 0 3px #007acc}.page-item.dragging[_ngcontent-%COMP%]{opacity:.3;transform:scale(.95)}.page-item.landscape[_ngcontent-%COMP%]   .page-thumbnail[_ngcontent-%COMP%]{aspect-ratio:1.414}.page-item.landscape[_ngcontent-%COMP%]   .page-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:100%;height:auto}.page-item[_ngcontent-%COMP%]   .page-thumbnail[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:.707;overflow:hidden;background:#fafafa;display:flex;align-items:center;justify-content:center;cursor:pointer}.page-item[_ngcontent-%COMP%]   .page-thumbnail[_ngcontent-%COMP%]:active{opacity:.8}.page-item[_ngcontent-%COMP%]   .page-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;transition:transform .3s ease;pointer-events:none;transform-origin:center center}.page-item[_ngcontent-%COMP%]   .page-thumbnail[_ngcontent-%COMP%]   .selection-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#007acc33;display:flex;align-items:center;justify-content:center;pointer-events:none}.page-item[_ngcontent-%COMP%]   .page-number[_ngcontent-%COMP%]{padding:8px;text-align:center;font-size:13px;color:#666;background:#fff}.bottom-sheet-header[_ngcontent-%COMP%]{padding:20px 20px 10px}.bottom-sheet-header[_ngcontent-%COMP%]   .bottom-sheet-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.bottom-sheet-content[_ngcontent-%COMP%]{padding:10px 20px 30px}.option-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.option-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:none;border:none;border-bottom:1px solid #f0f0f0;cursor:pointer;text-align:left;transition:background .2s}.option-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.option-item[_ngcontent-%COMP%]:active{background:#f5f5f5}.option-item[_ngcontent-%COMP%]:disabled, .option-item.disabled[_ngcontent-%COMP%]{opacity:.4;cursor:not-allowed;pointer-events:none}.option-item[_ngcontent-%COMP%]:disabled   .option-icon[_ngcontent-%COMP%], .option-item.disabled[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]{background:#e0e0e0;color:#999}.option-item[_ngcontent-%COMP%]:disabled   .option-label[_ngcontent-%COMP%], .option-item.disabled[_ngcontent-%COMP%]   .option-label[_ngcontent-%COMP%]{color:#999}.option-item[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background:#f5f5f5;color:#007acc;flex-shrink:0}.option-item[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.option-item[_ngcontent-%COMP%]   .option-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;flex:1}.option-item[_ngcontent-%COMP%]   .option-label[_ngcontent-%COMP%]{font-size:16px;color:#333;font-weight:500}.option-item[_ngcontent-%COMP%]   .option-desc[_ngcontent-%COMP%]{font-size:12px;color:#999;line-height:1.4}.add-page-content[_ngcontent-%COMP%]{padding:20px}.add-page-content[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]{margin-bottom:24px}.add-page-content[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .setting-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#333;margin-bottom:12px}.add-page-content[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .setting-hint[_ngcontent-%COMP%]{font-size:12px;color:#999;margin-top:8px}.add-page-content[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]{position:relative}.add-page-content[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]   .color-input[_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.add-page-content[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]   .color-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#f5f5f5;border-radius:8px;cursor:pointer;transition:background .2s}.add-page-content[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]   .color-display[_ngcontent-%COMP%]:active{background:#ebebeb}.add-page-content[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]   .color-display[_ngcontent-%COMP%]   .color-preview[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;border:2px solid #ddd;box-shadow:inset 0 2px 4px #0000001a}.add-page-content[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]   .color-display[_ngcontent-%COMP%]   .color-hex[_ngcontent-%COMP%]{font-family:monospace;font-size:14px;font-weight:600;color:#333}.add-page-content[_ngcontent-%COMP%]   .page-count-control[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:20px}.add-page-content[_ngcontent-%COMP%]   .page-count-control[_ngcontent-%COMP%]   .count-btn[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:#007acc;border:none;color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s}.add-page-content[_ngcontent-%COMP%]   .page-count-control[_ngcontent-%COMP%]   .count-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.95);background:#005a9e}.add-page-content[_ngcontent-%COMP%]   .page-count-control[_ngcontent-%COMP%]   .count-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.add-page-content[_ngcontent-%COMP%]   .page-count-control[_ngcontent-%COMP%]   .count-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{pointer-events:none}.add-page-content[_ngcontent-%COMP%]   .page-count-control[_ngcontent-%COMP%]   .count-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#333;min-width:80px;text-align:center}.add-page-content[_ngcontent-%COMP%]   .insert-position-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.add-page-content[_ngcontent-%COMP%]   .insert-position-control[_ngcontent-%COMP%]   .position-input[_ngcontent-%COMP%]{width:80px;padding:12px 16px;border:2px solid #ddd;border-radius:8px;font-size:18px;font-weight:600;text-align:center;color:#333}.add-page-content[_ngcontent-%COMP%]   .insert-position-control[_ngcontent-%COMP%]   .position-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007acc}.add-page-content[_ngcontent-%COMP%]   .insert-position-control[_ngcontent-%COMP%]   .position-label[_ngcontent-%COMP%]{font-size:14px;color:#666;flex:1}.add-page-content[_ngcontent-%COMP%]   .file-name-input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;border:2px solid #ddd;border-radius:8px;font-size:16px;color:#333}.add-page-content[_ngcontent-%COMP%]   .file-name-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007acc}.add-page-content[_ngcontent-%COMP%]   .file-name-input[_ngcontent-%COMP%]::placeholder{color:#999}.add-page-content[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]{width:100%;padding:16px;background:#007acc;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:background .2s;margin-top:20px}.add-page-content[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]:active{background:#005a9e}.close-btn[_ngcontent-%COMP%]{position:absolute;right:20px;top:20px;width:32px;height:32px;padding:0;background:none;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#666;transition:all .2s}.close-btn[_ngcontent-%COMP%]:active{background:#f0f0f0}"]})};function pa(a,t){if(a&1&&(i(0,"div",8)(1,"div",9),C(),i(2,"svg",10),m(3,"circle",11),r()(),v(),i(4,"div",12),l(5,"PDF\uB97C \uBD84\uC11D\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4..."),r(),i(6,"div",13),m(7,"div",14),r(),i(8,"div",15),l(9),r()()),a&2){let e=p();c(7),L("width",e.analysisProgress,"%"),c(2),D("",e.analysisProgress,"%")}}function ga(a,t){if(a&1&&(i(0,"div",37),l(1),r()),a&2){let e=p(2);c(),D(" ",e.pdfContent.length>500?e.pdfContent.substring(0,500)+"...":e.pdfContent," ")}}function ma(a,t){a&1&&(i(0,"div",38),l(1," \uD14D\uC2A4\uD2B8\uB97C \uCD94\uCD9C\uD558\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4. "),r())}function ua(a,t){if(a&1&&(i(0,"option",39),l(1),r()),a&2){let e=t.$implicit;g("value",e.value),c(),D(" ",e.label," ")}}function fa(a,t){if(a&1&&(i(0,"option",39),l(1),r()),a&2){let e=t.$implicit;g("value",e.value),c(),D(" ",e.label," ")}}function ha(a,t){a&1&&(C(),i(0,"svg",40),m(1,"path",41),r())}function Ca(a,t){a&1&&(C(),i(0,"svg",42),m(1,"circle",11),r())}function _a(a,t){a&1&&(i(0,"span"),l(1,"Gemini AI \uC694\uC57D \uC0DD\uC131"),r())}function ba(a,t){a&1&&(i(0,"span"),l(1,"\uC0DD\uC131 \uC911..."),r())}function xa(a,t){if(a&1){let e=w();i(0,"div",24)(1,"div",25),l(2,"\uC694\uC57D \uACB0\uACFC"),r(),i(3,"div",43),l(4),r(),i(5,"div",44)(6,"button",45),u("click",function(){f(e);let o=p(2);return h(o.onCopySummary())}),C(),i(7,"svg",46),m(8,"rect",47)(9,"path",48),r(),l(10," \uBCF5\uC0AC "),r(),v(),i(11,"button",49),u("click",function(){f(e);let o=p(2);return h(o.onExportSummary())}),C(),i(12,"svg",46),m(13,"path",50),r(),l(14," \uB2E4\uC6B4\uB85C\uB4DC "),r()()()}if(a&2){let e=p(2);c(4),D(" ",e.summaryText," ")}}function va(a,t){if(a&1){let e=w();i(0,"div",16)(1,"div",17),C(),i(2,"svg",18),m(3,"rect",19)(4,"path",20),r(),v(),i(5,"div",21)(6,"div",22),l(7),r(),i(8,"div",23),l(9),xe(10,"number"),r()()(),i(11,"div",24)(12,"div",25),l(13,"PDF \uBCF8\uBB38 \uB0B4\uC6A9"),r(),P(14,ga,2,1,"div",26)(15,ma,2,0,"div",27),r(),i(16,"div",24)(17,"div",25),l(18,"\uC694\uC57D \uC124\uC815"),r(),i(19,"div",28)(20,"label",29),l(21,"\uC694\uC57D \uAE38\uC774"),r(),i(22,"select",30),W("ngModelChange",function(o){f(e);let s=p();return $(s.summaryLength,o)||(s.summaryLength=o),h(o)}),P(23,ua,2,2,"option",31),r()(),i(24,"div",28)(25,"label",29),l(26,"\uC694\uC57D \uC720\uD615"),r(),i(27,"select",30),W("ngModelChange",function(o){f(e);let s=p();return $(s.summaryType,o)||(s.summaryType=o),h(o)}),P(28,fa,2,2,"option",31),r()(),i(29,"button",32),u("click",function(){f(e);let o=p();return h(o.onGenerateSummary())}),P(30,ha,2,0,"svg",33)(31,Ca,2,0,"svg",34)(32,_a,2,0,"span",35)(33,ba,2,0,"span",35),r()(),P(34,xa,15,1,"div",36),r()}if(a&2){let e=p();c(7),E(e.document==null?null:e.document.fileName),c(2),D(" \uCD1D ",Ze(10,14,e.pdfContent.length)," \uAE00\uC790 "),c(5),g("ngIf",e.pdfContent),c(),g("ngIf",!e.pdfContent),c(7),G("ngModel",e.summaryLength),c(),g("ngForOf",e.summaryLengthOptions),c(4),G("ngModel",e.summaryType),c(),g("ngForOf",e.summaryTypeOptions),c(),g("disabled",e.isGenerating||!e.pdfContent),c(),g("ngIf",!e.isGenerating),c(),g("ngIf",e.isGenerating),c(),g("ngIf",!e.isGenerating),c(),g("ngIf",e.isGenerating),c(),g("ngIf",e.summaryText)}}var Wt=class a{document=null;pdfTextStreamData=null;pdfContent="";isAnalyzing=!1;analysisProgress=0;summaryLength="medium";summaryType="general";summaryLengthOptions=[{value:"short",label:"\uC9E7\uAC8C (1-2\uBB38\uB2E8)"},{value:"medium",label:"\uBCF4\uD1B5 (3-4\uBB38\uB2E8)"},{value:"long",label:"\uC790\uC138\uD788 (5-6\uBB38\uB2E8)"}];summaryTypeOptions=[{value:"general",label:"\uC77C\uBC18 \uC694\uC57D"},{value:"bullet",label:"\uD575\uC2EC \uD3EC\uC778\uD2B8"},{value:"qa",label:"Q&A \uD615\uC2DD"},{value:"structure",label:"\uAD6C\uC870\uC801 \uC694\uC57D"}];summaryText="";isGenerating=!1;router=O(V);snackbar=O(U);pdfTextAnalyzerService=O(Pt);geminiService=O(Bt);geminiApiManager=O(be);ngOnInit(){let e=this.router.getCurrentNavigation()?.extras?.state||history.state;if(!e?.document){this.snackbar.showError("\uBB38\uC11C \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/myfiles"]);return}this.document=e.document,console.log("\u{1F4C4} [AISummary] \uBB38\uC11C \uB85C\uB4DC:",this.document?.fileName),this.analyzePdf()}analyzePdf(){return x(this,null,function*(){if(!(!this.document||!this.document.pdfBase64)){this.isAnalyzing=!0,this.analysisProgress=0;try{console.log("\u{1F50D} [AISummary] PDF \uBD84\uC11D \uC2DC\uC791...");let t=this.document.pdfBase64.split(",")[1]||this.document.pdfBase64,e=atob(t),n=new Uint8Array(e.length);for(let d=0;d<e.length;d++)n[d]=e.charCodeAt(d);let o=new Blob([n],{type:"application/pdf"});this.analysisProgress=30;let s=new File([o],this.document.fileName||"document.pdf",{type:"application/pdf"});this.pdfTextStreamData=yield this.pdfTextAnalyzerService.extractTextStreamAsJson(s),this.analysisProgress=70,this.pdfContent=this.extractTextFromPdf(),this.analysisProgress=100,console.log("\u2705 [AISummary] PDF \uBD84\uC11D \uC644\uB8CC. \uAE00\uC790 \uC218:",this.pdfContent.length)}catch(t){console.error("\u274C [AISummary] PDF \uBD84\uC11D \uC2E4\uD328:",t),this.snackbar.showError("PDF \uBD84\uC11D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}finally{this.isAnalyzing=!1}}})}extractTextFromPdf(){if(!this.pdfTextStreamData?.pages)return"";let t=[];for(let e of this.pdfTextStreamData.pages)if(e.sentences)for(let n of e.sentences){let o=n.text?.trim();o&&(this.isFooterText(n,e)||t.push(o))}return t.join(" ")}isFooterText(t,e){if(!t.position||!e.height)return!1;let n=t.position.y,s=(e.height||842)*.9;if(n>s){let d=t.text?.toLowerCase()||"";if(/\.(pdf|doc|docx|xls|xlsx)/.test(d)||/^(page\s*\d+|\d+\s*\/\s*\d+|p\.\s*\d+|\d+$)/.test(d)||/\d{4}[-/.]\d{1,2}[-/.]\d{1,2}/.test(d)||d.length<50)return!0}return!1}onGenerateSummary(){return x(this,null,function*(){if(!this.pdfContent){this.snackbar.showWarning("PDF \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. \uBA3C\uC800 \uBD84\uC11D\uC744 \uC644\uB8CC\uD574\uC8FC\uC138\uC694.");return}this.isGenerating=!0,this.summaryText="";try{console.log("\u{1F916} [AISummary] Gemini AI \uC694\uC57D \uC2DC\uC791...");let t=this.generateSummaryPrompt(),e=yield new Promise((n,o)=>{this.geminiService.translateText(t,"korean").subscribe({next:s=>{s.success&&s.translatedText?n(s.translatedText):o(new Error(s.error||"\uC694\uC57D \uC0DD\uC131 \uC2E4\uD328"))},error:s=>o(s)})});this.summaryText=e,console.log("\u2705 [AISummary] \uC694\uC57D \uC644\uB8CC")}catch(t){console.error("\u274C [AISummary] \uC694\uC57D \uC0DD\uC131 \uC2E4\uD328:",t),this.snackbar.showError("\uC694\uC57D \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),this.summaryText="\uC694\uC57D \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."}finally{this.isGenerating=!1}})}generateSummaryPrompt(){let t="";switch(this.summaryType){case"general":t="\uB2E4\uC74C \uBB38\uC11C\uB97C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;case"bullet":t="\uB2E4\uC74C \uBB38\uC11C\uC758 \uD575\uC2EC \uD3EC\uC778\uD2B8\uB97C \uBC88\uD638\uAC00 \uB9E4\uACA8\uC9C4 \uBAA9\uB85D\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;case"qa":t="\uB2E4\uC74C \uBB38\uC11C\uC758 \uC8FC\uC694 \uB0B4\uC6A9\uC744 Q&A \uD615\uC2DD\uC73C\uB85C \uC815\uB9AC\uD574\uC8FC\uC138\uC694. ";break;case"structure":t="\uB2E4\uC74C \uBB38\uC11C\uB97C \uAD6C\uC870\uC801\uC73C\uB85C \uBD84\uC11D\uD558\uC5EC \uC139\uC158\uBCC4\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break}switch(this.summaryLength){case"short":t+="\uAC04\uACB0\uD558\uAC8C 1-2\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;case"medium":t+="\uC801\uC808\uD55C \uAE38\uC774\uB85C 3-4\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;case"long":t+="\uC0C1\uC138\uD558\uAC8C 5-6\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break}return t+=`\uD55C\uAD6D\uC5B4\uB85C \uC791\uC131\uD574\uC8FC\uC138\uC694.

\uBB38\uC11C \uB0B4\uC6A9:
`+this.pdfContent,t}onCopySummary(){this.summaryText&&navigator.clipboard.writeText(this.summaryText).then(()=>{this.snackbar.showSuccess("\uC694\uC57D\uC774 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}).catch(()=>{this.snackbar.showError("\uBCF5\uC0AC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")})}onExportSummary(){if(!this.summaryText)return;let t=new Blob([this.summaryText],{type:"text/plain;charset=utf-8"}),e=URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.download=`${this.document?.fileName||"document"}_summary.txt`,n.click(),URL.revokeObjectURL(e),this.snackbar.showSuccess("\uC694\uC57D\uC774 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}onGoBack(){this.router.navigate(["/ezm/myfiles"])}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-ai-summary"]],standalone:!1,decls:9,vars:2,consts:[[1,"header"],[1,"back-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M15 18l-6-6 6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"header-title"],[1,"main-content"],["class","analyzing-section",4,"ngIf"],["class","content-section",4,"ngIf"],[1,"analyzing-section"],[1,"analyzing-icon"],["width","64","height","64","viewBox","0 0 24 24","fill","none",1,"spin"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2","stroke-dasharray","50 20"],[1,"analyzing-text"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"content-section"],[1,"document-info"],["width","40","height","40","viewBox","0 0 24 24","fill","none"],["x","4","y","2","width","16","height","20","rx","2","stroke","currentColor","stroke-width","1.5"],["d","M8 7h8M8 11h8M8 15h5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],[1,"document-details"],[1,"document-name"],[1,"document-meta"],[1,"section"],[1,"section-title"],["class","pdf-preview",4,"ngIf"],["class","no-content",4,"ngIf"],[1,"setting-group"],[1,"setting-label"],[1,"setting-input",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"generate-btn",3,"click","disabled"],["width","20","height","20","viewBox","0 0 24 24","fill","none",4,"ngIf"],["width","20","height","20","viewBox","0 0 24 24","fill","none","class","spin-slow",4,"ngIf"],[4,"ngIf"],["class","section",4,"ngIf"],[1,"pdf-preview"],[1,"no-content"],[3,"value"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M13 2L3 14h8l-1 8 10-12h-8l1-8z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"spin-slow"],[1,"summary-result"],[1,"result-actions"],[1,"action-btn","copy-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none"],["x","9","y","9","width","13","height","13","rx","2","stroke","currentColor","stroke-width","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1","stroke","currentColor","stroke-width","2"],[1,"action-btn","export-btn",3,"click"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"button",1),u("click",function(){return n.onGoBack()}),C(),i(2,"svg",2),m(3,"path",3),r()(),v(),i(4,"div",4),l(5,"PDF AI \uC694\uC57D"),r()(),i(6,"div",5),P(7,pa,10,3,"div",6)(8,va,35,16,"div",7),r()),e&2&&(c(7),g("ngIf",n.isAnalyzing),c(),g("ngIf",!n.isAnalyzing))},dependencies:[ne,j,Ee,De,nt,re,ae,bt],styles:[".header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:56px;background:#fff;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;padding:0 16px;gap:12px;z-index:100}.back-btn[_ngcontent-%COMP%]{width:40px;height:40px;padding:0;background:none;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;border-radius:50%;margin-left:-8px}.back-btn[_ngcontent-%COMP%]:active{background:#f5f5f5}.header-title[_ngcontent-%COMP%]{flex:1;font-size:18px;font-weight:600}.main-content[_ngcontent-%COMP%]{padding-top:56px;padding-bottom:24px;min-height:100vh;background:#f5f5f5}.analyzing-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 24px;background:#fff;margin:16px;border-radius:12px}.analyzing-icon[_ngcontent-%COMP%]{margin-bottom:24px}.analyzing-text[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-bottom:24px;font-weight:500}.progress-bar[_ngcontent-%COMP%]{width:100%;max-width:300px;height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden;margin-bottom:12px}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#2196f3,#64b5f6);transition:width .3s ease}.progress-text[_ngcontent-%COMP%]{font-size:14px;color:#666}.content-section[_ngcontent-%COMP%]{padding:16px}.document-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px;background:#fff;border-radius:12px;margin-bottom:16px;box-shadow:0 1px 3px #0000001a}.document-details[_ngcontent-%COMP%]{flex:1}.document-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin-bottom:4px;word-break:break-word}.document-meta[_ngcontent-%COMP%]{font-size:13px;color:#666}.section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;margin-bottom:16px;box-shadow:0 1px 3px #0000001a}.section-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#333;margin-bottom:16px}.pdf-preview[_ngcontent-%COMP%]{padding:16px;background:#f8f9fa;border-radius:8px;font-size:14px;line-height:1.6;color:#555;max-height:200px;overflow-y:auto;white-space:pre-wrap;word-break:break-word}.no-content[_ngcontent-%COMP%]{padding:40px 16px;text-align:center;color:#999;font-size:14px}.setting-group[_ngcontent-%COMP%]{margin-bottom:16px}.setting-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:20px}.setting-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#555;margin-bottom:8px}.setting-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #e0e0e0;border-radius:8px;font-size:15px;background:#fff;cursor:pointer;transition:border-color .2s}.setting-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3}.generate-btn[_ngcontent-%COMP%]{width:100%;padding:16px;background:linear-gradient(135deg,#2196f3,#1976d2);color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:transform .2s}.generate-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98)}.generate-btn[_ngcontent-%COMP%]:disabled{background:#bdbdbd;cursor:not-allowed}.summary-result[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;border-radius:8px;font-size:15px;line-height:1.8;color:#333;white-space:pre-wrap;word-break:break-word;margin-bottom:16px}.result-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.action-btn[_ngcontent-%COMP%]{flex:1;padding:12px;border:1px solid #e0e0e0;border-radius:8px;background:#fff;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:6px;transition:all .2s}.action-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.action-btn.copy-btn[_ngcontent-%COMP%]{color:#2196f3;border-color:#2196f3}.action-btn.copy-btn[_ngcontent-%COMP%]:active{background:#e3f2fd}.action-btn.export-btn[_ngcontent-%COMP%]{color:#4caf50;border-color:#4caf50}.action-btn.export-btn[_ngcontent-%COMP%]:active{background:#e8f5e9}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.spin-slow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 2s linear infinite}"]})};function Pa(a,t){if(a&1&&(i(0,"div",8)(1,"div",9),C(),i(2,"svg",10),m(3,"circle",11),r()(),v(),i(4,"div",12),l(5,"PDF\uB97C \uBD84\uC11D\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4..."),r(),i(6,"div",13),m(7,"div",14),r(),i(8,"div",15),l(9),r()()),a&2){let e=p();c(7),L("width",e.analysisProgress,"%"),c(2),D("",e.analysisProgress,"%")}}function Ma(a,t){if(a&1&&(i(0,"div",38),l(1),r()),a&2){let e=p(2);c(),D(" ",e.pdfContent.length>500?e.pdfContent.substring(0,500)+"...":e.pdfContent," ")}}function wa(a,t){a&1&&(i(0,"div",39),l(1," \uD14D\uC2A4\uD2B8\uB97C \uCD94\uCD9C\uD558\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4. "),r())}function ya(a,t){if(a&1&&(i(0,"option",40),l(1),r()),a&2){let e=t.$implicit;g("value",e.value),c(),D(" ",e.label," ")}}function Sa(a,t){a&1&&(C(),i(0,"svg",41),m(1,"path",42),r())}function Oa(a,t){a&1&&(C(),i(0,"svg",43),m(1,"circle",44),r())}function ka(a,t){a&1&&(i(0,"span"),l(1,"Gemini AI \uBC88\uC5ED\uD558\uAE30"),r())}function Ea(a,t){a&1&&(i(0,"span"),l(1,"\uBC88\uC5ED \uC911..."),r())}function Da(a,t){if(a&1&&(i(0,"div",48),l(1),r()),a&2){let e=p(3);c(),D(" ",e.translationResult.translatedText," ")}}function Ta(a,t){if(a&1&&(i(0,"div",49),l(1),r()),a&2){let e=p(3);c(),D(" \uBC88\uC5ED \uC2E4\uD328: ",e.translationResult.error," ")}}function Aa(a,t){if(a&1){let e=w();i(0,"div",50)(1,"button",51),u("click",function(){f(e);let o=p(3);return h(o.onCopyTranslation())}),C(),i(2,"svg",52),m(3,"rect",53)(4,"path",54),r(),l(5," \uBCF5\uC0AC "),r(),v(),i(6,"button",55),u("click",function(){f(e);let o=p(3);return h(o.onExportTranslation())}),C(),i(7,"svg",52),m(8,"path",56),r(),l(9," \uB2E4\uC6B4\uB85C\uB4DC "),r()()}}function za(a,t){if(a&1&&(i(0,"div",24)(1,"div",25),l(2,"\uBC88\uC5ED \uACB0\uACFC"),r(),P(3,Da,2,1,"div",45)(4,Ta,2,1,"div",46)(5,Aa,10,0,"div",47),r()),a&2){let e=p(2);c(3),g("ngIf",e.translationResult.success),c(),g("ngIf",!e.translationResult.success),c(),g("ngIf",e.translationResult.success)}}function Ba(a,t){a&1&&(i(0,"div",57)(1,"div",58),l(2," AI\uAC00 \uC0DD\uC131\uD55C \uBC88\uC5ED\uC740 \uC644\uBCBD\uD558\uC9C0 \uC54A\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),m(3,"br"),l(4," \uC911\uC694\uD55C \uB0B4\uC6A9\uC740 \uC6D0\uBB38\uACFC \uD568\uAED8 \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694. "),r()())}function Fa(a,t){if(a&1){let e=w();i(0,"div",16)(1,"div",17),C(),i(2,"svg",18),m(3,"rect",19)(4,"path",20),r(),v(),i(5,"div",21)(6,"div",22),l(7),r(),i(8,"div",23),l(9),xe(10,"number"),r()()(),i(11,"div",24)(12,"div",25),l(13,"PDF \uBCF8\uBB38 \uB0B4\uC6A9"),r(),P(14,Ma,2,1,"div",26)(15,wa,2,0,"div",27),r(),i(16,"div",24)(17,"div",25),l(18,"\uBC88\uC5ED \uC124\uC815"),r(),i(19,"div",28)(20,"label",29),l(21,"\uBC88\uC5ED\uD560 \uC5B8\uC5B4"),r(),i(22,"select",30),W("ngModelChange",function(o){f(e);let s=p();return $(s.selectedLanguage,o)||(s.selectedLanguage=o),h(o)}),P(23,ya,2,2,"option",31),r()(),i(24,"button",32),u("click",function(){f(e);let o=p();return h(o.onStartTranslation())}),P(25,Sa,2,0,"svg",33)(26,Oa,2,0,"svg",34)(27,ka,2,0,"span",35)(28,Ea,2,0,"span",35),r()(),P(29,za,6,3,"div",36)(30,Ba,5,0,"div",37),r()}if(a&2){let e=p();c(7),E(e.document==null?null:e.document.fileName),c(2),D(" \uCD1D ",Ze(10,13,e.pdfContent.length)," \uAE00\uC790 "),c(5),g("ngIf",e.pdfContent),c(),g("ngIf",!e.pdfContent),c(7),G("ngModel",e.selectedLanguage),c(),g("ngForOf",e.languages),c(),g("disabled",e.isTranslating||!e.pdfContent),c(),g("ngIf",!e.isTranslating),c(),g("ngIf",e.isTranslating),c(),g("ngIf",!e.isTranslating),c(),g("ngIf",e.isTranslating),c(),g("ngIf",e.translationResult),c(),g("ngIf",e.translationResult)}}var Ut=class a{document=null;pdfTextStreamData=null;pdfContent="";isAnalyzing=!1;analysisProgress=0;selectedLanguage="english";languages=[{value:"english",label:"\uC601\uC5B4 (English)"},{value:"korean",label:"\uD55C\uAD6D\uC5B4 (Korean)"},{value:"japanese",label:"\uC77C\uBCF8\uC5B4 (Japanese)"},{value:"chinese",label:"\uC911\uAD6D\uC5B4 (Chinese)"},{value:"spanish",label:"\uC2A4\uD398\uC778\uC5B4 (Spanish)"},{value:"french",label:"\uD504\uB791\uC2A4\uC5B4 (French)"},{value:"german",label:"\uB3C5\uC77C\uC5B4 (German)"}];translationResult=null;isTranslating=!1;router=O(V);snackbar=O(U);pdfTextAnalyzerService=O(Pt);geminiService=O(Bt);geminiApiManager=O(be);ngOnInit(){let e=this.router.getCurrentNavigation()?.extras?.state||history.state;if(!e?.document){this.snackbar.showError("\uBB38\uC11C \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/myfiles"]);return}this.document=e.document,console.log("\u{1F4C4} [AITranslate] \uBB38\uC11C \uB85C\uB4DC:",this.document?.fileName),this.analyzePdf()}analyzePdf(){return x(this,null,function*(){if(!(!this.document||!this.document.pdfBase64)){this.isAnalyzing=!0,this.analysisProgress=0;try{console.log("\u{1F50D} [AITranslate] PDF \uBD84\uC11D \uC2DC\uC791...");let t=this.document.pdfBase64.split(",")[1]||this.document.pdfBase64,e=atob(t),n=new Uint8Array(e.length);for(let d=0;d<e.length;d++)n[d]=e.charCodeAt(d);let o=new Blob([n],{type:"application/pdf"});this.analysisProgress=30;let s=new File([o],this.document.fileName||"document.pdf",{type:"application/pdf"});this.pdfTextStreamData=yield this.pdfTextAnalyzerService.extractTextStreamAsJson(s),this.analysisProgress=70,this.pdfContent=this.extractTextFromPdf(),this.analysisProgress=100,console.log("\u2705 [AITranslate] PDF \uBD84\uC11D \uC644\uB8CC. \uAE00\uC790 \uC218:",this.pdfContent.length)}catch(t){console.error("\u274C [AITranslate] PDF \uBD84\uC11D \uC2E4\uD328:",t),this.snackbar.showError("PDF \uBD84\uC11D\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}finally{this.isAnalyzing=!1}}})}extractTextFromPdf(){if(!this.pdfTextStreamData?.pages)return"";let t=[];for(let e of this.pdfTextStreamData.pages)if(e.sentences)for(let n of e.sentences){let o=n.text?.trim();o&&(this.isFooterText(n,e)||t.push(o))}return t.join(" ")}isFooterText(t,e){if(!t.position||!e.height)return!1;let n=t.position.y,s=(e.height||842)*.9;if(n>s){let d=t.text?.toLowerCase()||"";if(/\.(pdf|doc|docx|xls|xlsx)/.test(d)||/^(page\s*\d+|\d+\s*\/\s*\d+|p\.\s*\d+|\d+$)/.test(d)||/\d{4}[-/.]\d{1,2}[-/.]\d{1,2}/.test(d)||d.length<50)return!0}return!1}onStartTranslation(){return x(this,null,function*(){if(!this.pdfContent){this.snackbar.showWarning("PDF \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. \uBA3C\uC800 \uBD84\uC11D\uC744 \uC644\uB8CC\uD574\uC8FC\uC138\uC694.");return}this.isTranslating=!0,this.translationResult=null;try{console.log("\u{1F916} [AITranslate] Gemini AI \uBC88\uC5ED \uC2DC\uC791..."),console.log("   - \uB300\uC0C1 \uC5B8\uC5B4:",this.selectedLanguage),console.log("   - \uD14D\uC2A4\uD2B8 \uAE38\uC774:",this.pdfContent.length);let t=yield new Promise((e,n)=>{this.geminiService.translateText(this.pdfContent,this.selectedLanguage).subscribe({next:o=>{o.success?e(o):n(new Error(o.error||"\uBC88\uC5ED \uC2E4\uD328"))},error:o=>n(o)})});this.translationResult=t,console.log("\u2705 [AITranslate] \uBC88\uC5ED \uC644\uB8CC"),this.snackbar.showSuccess("\uBC88\uC5ED\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("\u274C [AITranslate] \uBC88\uC5ED \uC2E4\uD328:",t),this.snackbar.showError("\uBC88\uC5ED\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),this.translationResult={originalText:this.pdfContent,translatedText:"\uBC88\uC5ED \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",targetLanguage:this.selectedLanguage,success:!1,error:t instanceof Error?t.message:"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}}finally{this.isTranslating=!1}})}onCopyTranslation(){this.translationResult?.translatedText&&navigator.clipboard.writeText(this.translationResult.translatedText).then(()=>{this.snackbar.showSuccess("\uBC88\uC5ED\uC774 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}).catch(()=>{this.snackbar.showError("\uBCF5\uC0AC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")})}onExportTranslation(){if(!this.translationResult?.translatedText)return;let t=new Blob([this.translationResult.translatedText],{type:"text/plain;charset=utf-8"}),e=URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.download=`${this.document?.fileName||"document"}_translation.txt`,n.click(),URL.revokeObjectURL(e),this.snackbar.showSuccess("\uBC88\uC5ED\uC774 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}onGoBack(){this.router.navigate(["/ezm/myfiles"])}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-ai-translate"]],standalone:!1,decls:9,vars:2,consts:[[1,"header"],[1,"back-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M15 18l-6-6 6-6","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"header-title"],[1,"main-content"],["class","analyzing-section",4,"ngIf"],["class","content-section",4,"ngIf"],[1,"analyzing-section"],[1,"analyzing-icon"],["width","64","height","64","viewBox","0 0 24 24","fill","none",1,"spin"],["cx","12","cy","12","r","10","stroke","#2196F3","stroke-width","2","stroke-dasharray","50 20"],[1,"analyzing-text"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"content-section"],[1,"document-info"],["width","40","height","40","viewBox","0 0 24 24","fill","none"],["x","4","y","2","width","16","height","20","rx","2","fill","#E3F2FD","stroke","#2196F3","stroke-width","1.5"],["d","M8 7h8M8 11h8M8 15h5","stroke","#2196F3","stroke-width","1.5","stroke-linecap","round"],[1,"document-details"],[1,"document-name"],[1,"document-meta"],[1,"section"],[1,"section-title"],["class","pdf-preview",4,"ngIf"],["class","no-content",4,"ngIf"],[1,"setting-group"],[1,"setting-label"],[1,"setting-input",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"generate-btn",3,"click","disabled"],["width","20","height","20","viewBox","0 0 24 24","fill","none",4,"ngIf"],["width","20","height","20","viewBox","0 0 24 24","fill","none","class","spin-slow",4,"ngIf"],[4,"ngIf"],["class","section",4,"ngIf"],["class","info-section",4,"ngIf"],[1,"pdf-preview"],[1,"no-content"],[3,"value"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 0 1 6.412 9m0 0a18.022 18.022 0 0 1-3.412-4.5m0 0a18.022 18.022 0 0 1 9 9m0 0a18.022 18.022 0 0 1 9-9m-9 9v6m0 0l3-3m-3 3l-3-3","stroke","white","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["width","20","height","20","viewBox","0 0 24 24","fill","none",1,"spin-slow"],["cx","12","cy","12","r","10","stroke","white","stroke-width","2","stroke-dasharray","50 20"],["class","translation-result",4,"ngIf"],["class","translation-error",4,"ngIf"],["class","result-actions",4,"ngIf"],[1,"translation-result"],[1,"translation-error"],[1,"result-actions"],[1,"action-btn","copy-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none"],["x","9","y","9","width","13","height","13","rx","2","stroke","currentColor","stroke-width","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1","stroke","currentColor","stroke-width","2"],[1,"action-btn","export-btn",3,"click"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"info-section"],[1,"info-text"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"button",1),u("click",function(){return n.onGoBack()}),C(),i(2,"svg",2),m(3,"path",3),r()(),v(),i(4,"div",4),l(5,"PDF AI \uBC88\uC5ED"),r()(),i(6,"div",5),P(7,Pa,10,3,"div",6)(8,Fa,31,15,"div",7),r()),e&2&&(c(7),g("ngIf",n.isAnalyzing),c(),g("ngIf",!n.isAnalyzing))},dependencies:[ne,j,Ee,De,nt,re,ae,bt],styles:[".header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:56px;background:#fff;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;padding:0 16px;gap:12px;z-index:100}.back-btn[_ngcontent-%COMP%]{width:40px;height:40px;padding:0;background:none;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;border-radius:50%;margin-left:-8px}.back-btn[_ngcontent-%COMP%]:active{background:#f5f5f5}.header-title[_ngcontent-%COMP%]{flex:1;font-size:18px;font-weight:600}.main-content[_ngcontent-%COMP%]{padding-top:56px;padding-bottom:24px;min-height:100vh;background:#f5f5f5}.analyzing-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 24px;background:#fff;margin:16px;border-radius:12px}.analyzing-icon[_ngcontent-%COMP%]{margin-bottom:24px}.analyzing-text[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-bottom:24px;font-weight:500}.progress-bar[_ngcontent-%COMP%]{width:100%;max-width:300px;height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden;margin-bottom:12px}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#2196f3,#64b5f6);transition:width .3s ease}.progress-text[_ngcontent-%COMP%]{font-size:14px;color:#666}.content-section[_ngcontent-%COMP%]{padding:16px}.document-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px;background:#fff;border-radius:12px;margin-bottom:16px;box-shadow:0 1px 3px #0000001a}.document-details[_ngcontent-%COMP%]{flex:1}.document-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin-bottom:4px;word-break:break-word}.document-meta[_ngcontent-%COMP%]{font-size:13px;color:#666}.section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;margin-bottom:16px;box-shadow:0 1px 3px #0000001a}.section-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#333;margin-bottom:16px}.pdf-preview[_ngcontent-%COMP%]{padding:16px;background:#f8f9fa;border-radius:8px;font-size:14px;line-height:1.6;color:#555;max-height:200px;overflow-y:auto;white-space:pre-wrap;word-break:break-word}.no-content[_ngcontent-%COMP%]{padding:40px 16px;text-align:center;color:#999;font-size:14px}.setting-group[_ngcontent-%COMP%]{margin-bottom:20px}.setting-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#555;margin-bottom:8px}.setting-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #e0e0e0;border-radius:8px;font-size:15px;background:#fff;cursor:pointer;transition:border-color .2s}.setting-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3}.generate-btn[_ngcontent-%COMP%]{width:100%;padding:16px;background:linear-gradient(135deg,#4caf50,#388e3c);color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:transform .2s}.generate-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98)}.generate-btn[_ngcontent-%COMP%]:disabled{background:#bdbdbd;cursor:not-allowed}.translation-result[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;border-radius:8px;font-size:15px;line-height:1.8;color:#333;white-space:pre-wrap;word-break:break-word;margin-bottom:16px}.translation-error[_ngcontent-%COMP%]{padding:20px;background:#ffebee;border-radius:8px;font-size:14px;color:#c62828}.result-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.action-btn[_ngcontent-%COMP%]{flex:1;padding:12px;border:1px solid #e0e0e0;border-radius:8px;background:#fff;font-size:14px;font-weight:500;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:6px;transition:all .2s}.action-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.action-btn.copy-btn[_ngcontent-%COMP%]{color:#2196f3;border-color:#2196f3}.action-btn.copy-btn[_ngcontent-%COMP%]:active{background:#e3f2fd}.action-btn.export-btn[_ngcontent-%COMP%]{color:#4caf50;border-color:#4caf50}.action-btn.export-btn[_ngcontent-%COMP%]:active{background:#e8f5e9}.info-section[_ngcontent-%COMP%]{padding:16px;background:#fff3e0;border-radius:8px;margin:16px}.info-text[_ngcontent-%COMP%]{font-size:13px;line-height:1.6;color:#e65100;text-align:center}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.spin-slow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 2s linear infinite}"]})};function Ia(a,t){if(a&1&&(i(0,"div",8)(1,"div",9),C(),i(2,"svg",10),m(3,"circle",11),r()(),v(),i(4,"div",12),l(5,"\uBCC0\uD658\uD558\uB294 \uC911..."),r(),i(6,"div",13),m(7,"div",14),r(),i(8,"div",15),l(9),r()()),a&2){let e=p();c(7),L("width",e.conversionProgress,"%"),c(2),D("",e.conversionProgress,"%")}}function Ra(a,t){a&1&&(C(),i(0,"svg",42),m(1,"rect",43)(2,"path",44),r())}function Va(a,t){a&1&&(C(),i(0,"svg",42),m(1,"rect",43)(2,"path",45),r())}function Na(a,t){a&1&&(C(),i(0,"svg",42),m(1,"rect",43)(2,"path",46),r())}function La(a,t){a&1&&(C(),i(0,"svg",42),m(1,"rect",43)(2,"circle",47)(3,"path",48),r())}function ja(a,t){a&1&&(C(),i(0,"svg",42),m(1,"rect",43),i(2,"text",49),l(3,"JPG"),r()())}function Ha(a,t){a&1&&(i(0,"div",50),C(),i(1,"svg",2),m(2,"circle",51)(3,"path",52),r()())}function Ga(a,t){if(a&1){let e=w();i(0,"button",34),u("click",function(){let o=f(e).$implicit,s=p(2);return h(s.onOptionSelect(o))}),i(1,"div",35),P(2,Ra,3,0,"svg",36)(3,Va,3,0,"svg",36)(4,Na,3,0,"svg",36)(5,La,4,0,"svg",36)(6,ja,4,0,"svg",36),r(),i(7,"div",37)(8,"div",38),l(9),r(),i(10,"div",39),l(11),r(),i(12,"div",40),l(13),r()(),P(14,Ha,4,0,"div",41),r()}if(a&2){let e=t.$implicit,n=p(2);R("selected",(n.selectedOption==null?null:n.selectedOption.id)===e.id),c(),L("color",e.color),c(),g("ngIf",e.icon==="ppt"),c(),g("ngIf",e.icon==="word"),c(),g("ngIf",e.icon==="excel"),c(),g("ngIf",e.icon==="image"),c(),g("ngIf",e.icon==="jpg"),c(3),E(e.title),c(2),E(e.description),c(2),D(".",e.extension),c(),g("ngIf",(n.selectedOption==null?null:n.selectedOption.id)===e.id)}}function $a(a,t){if(a&1){let e=w();i(0,"div",16)(1,"div",17),C(),i(2,"svg",18),m(3,"path",19)(4,"polyline",20),r(),v(),i(5,"div",21)(6,"div",22),l(7),r(),i(8,"div",23),l(9,"PDF \uBB38\uC11C"),r()()(),i(10,"div",24)(11,"div",25),l(12,"\uBCC0\uD658\uD560 \uD615\uC2DD\uC744 \uC120\uD0DD\uD558\uC138\uC694"),r(),i(13,"div",26),P(14,Ga,15,13,"button",27),r()(),i(15,"div",28)(16,"button",29),u("click",function(){f(e);let o=p();return h(o.onStartConversion())}),C(),i(17,"svg",30),m(18,"path",31),r(),l(19," \uBCC0\uD658 \uC2DC\uC791 "),r()(),v(),i(20,"div",32)(21,"div",33),l(22," \u{1F4A1} \uBCC0\uD658\uB41C \uD30C\uC77C\uC740 \uC790\uB3D9\uC73C\uB85C \uB2E4\uC6B4\uB85C\uB4DC\uB429\uB2C8\uB2E4."),m(23,"br"),l(24," \uC774\uBBF8\uC9C0 \uBCC0\uD658 \uC2DC \uD398\uC774\uC9C0\uBCC4\uB85C \uAC1C\uBCC4 \uD30C\uC77C\uC774 \uC0DD\uC131\uB429\uB2C8\uB2E4. "),r()()()}if(a&2){let e=p();c(7),E(e.document==null?null:e.document.fileName),c(7),g("ngForOf",e.conversionOptions),c(2),g("disabled",!e.selectedOption)}}var Kt=class a{document=null;convertType="";isConverting=!1;conversionProgress=0;conversionOptions=[{id:"pdf-to-powerpoint",title:"PowerPoint",description:"PDF\uB97C PPT \uD504\uB808\uC820\uD14C\uC774\uC158\uC73C\uB85C \uBCC0\uD658",icon:"ppt",extension:"pptx",color:"#F44336"},{id:"pdf-to-word",title:"Word \uBB38\uC11C",description:"PDF\uB97C Word \uBB38\uC11C\uB85C \uBCC0\uD658",icon:"word",extension:"docx",color:"#2196F3"},{id:"pdf-to-excel",title:"Excel",description:"PDF\uB97C Excel \uC2A4\uD504\uB808\uB4DC\uC2DC\uD2B8\uB85C \uBCC0\uD658",icon:"excel",extension:"xlsx",color:"#4CAF50"},{id:"pdf-to-image",title:"\uC774\uBBF8\uC9C0 (PNG)",description:"PDF\uB97C PNG \uC774\uBBF8\uC9C0\uB85C \uBCC0\uD658",icon:"image",extension:"png",color:"#9C27B0"},{id:"pdf-to-jpg",title:"\uC774\uBBF8\uC9C0 (JPG)",description:"PDF\uB97C JPG \uC774\uBBF8\uC9C0\uB85C \uBCC0\uD658",icon:"jpg",extension:"jpg",color:"#FF9800"}];selectedOption=null;router=O(V);snackbar=O(U);pdfConverter=O(At);indexedDbService=O(J);ngOnInit(){let e=this.router.getCurrentNavigation()?.extras?.state||history.state;if(!e?.document){this.snackbar.showError("\uBB38\uC11C \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/myfiles"]);return}this.document=e.document,this.convertType=e.convertType||"",this.convertType&&(this.selectedOption=this.conversionOptions.find(n=>n.id===this.convertType)||null),console.log("\u{1F4C4} [PDFConvert] \uBB38\uC11C \uB85C\uB4DC:",this.document?.fileName),console.log("\u{1F527} [PDFConvert] \uBCC0\uD658 \uD0C0\uC785:",this.convertType)}onOptionSelect(t){this.selectedOption=t}onStartConversion(){return x(this,null,function*(){if(!this.selectedOption||!this.document||!this.document.pdfBase64){this.snackbar.showError("\uBCC0\uD658\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.isConverting=!0,this.conversionProgress=0;try{console.log("\u{1F504} [PDFConvert] \uBCC0\uD658 \uC2DC\uC791:",this.selectedOption.title);let t=this.document.pdfBase64.split(",")[1]||this.document.pdfBase64,e=atob(t),n=new Uint8Array(e.length);for(let K=0;K<e.length;K++)n[K]=e.charCodeAt(K);let o=new Blob([n],{type:"application/pdf"}),s=URL.createObjectURL(o);this.conversionProgress=30;let d=yield this.pdfConverter.loadPdfDocument(s);this.conversionProgress=50;let b=(this.document.fileName||"document").replace(/\.pdf$/i,""),S=new Date,M=S.getHours().toString().padStart(2,"0")+S.getMinutes().toString().padStart(2,"0")+S.getSeconds().toString().padStart(2,"0"),y=null,k="",T="",I="image";switch(this.selectedOption.id){case"pdf-to-powerpoint":y=yield this.pdfConverter.exportToPptBlob(d,b),k=`${b}_\uBCC0\uD658_${M}.pptx`,T="application/vnd.openxmlformats-officedocument.presentationml.presentation",I="ppt";break;case"pdf-to-word":y=yield this.pdfConverter.exportToDocxBlob(d,b),k=`${b}_\uBCC0\uD658_${M}.docx`,T="application/vnd.openxmlformats-officedocument.wordprocessingml.document",I="word";break;case"pdf-to-excel":y=yield this.pdfConverter.exportToExcelBlob(d,b),k=`${b}_\uBCC0\uD658_${M}.xlsx`,T="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",I="excel";break;case"pdf-to-image":y=yield this.pdfConverter.exportToImageBlob(d,b,{scale:2,format:"png"}),k=`${b}_\uBCC0\uD658_${M}.png`,T="image/png",I="image";break;case"pdf-to-jpg":y=yield this.pdfConverter.exportToImageBlob(d,b,{scale:2,format:"jpeg",quality:.9}),k=`${b}_\uBCC0\uD658_${M}.jpg`,T="image/jpeg",I="image";break}if(!y)throw new Error("\uBCC0\uD658 \uC2E4\uD328");this.conversionProgress=70,URL.revokeObjectURL(s);let A=yield this.blobToBase64(y);this.conversionProgress=80;let B=`doc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;yield this.indexedDbService.saveDocument({id:B,title:k,fileName:k,originalFileData:A,mimeType:T,fileSize:y.size,thumbnail:"",pages:[],elementCount:0,version:"1.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),documentType:I}),this.conversionProgress=100,console.log("\u2705 [PDFConvert] \uBCC0\uD658 \uC644\uB8CC \uBC0F \uC800\uC7A5:",k),this.router.navigate(["/ezm/file-saved"],{state:{fileId:B,fileName:k,fileCount:1,title:"\uBCC0\uD658 \uC644\uB8CC!",subtitle:`${k} \uD30C\uC77C\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`}})}catch(t){console.error("\u274C [PDFConvert] \uBCC0\uD658 \uC2E4\uD328:",t),this.snackbar.showError("\uBCC0\uD658\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),this.isConverting=!1}})}blobToBase64(t){return x(this,null,function*(){return new Promise((e,n)=>{let o=new FileReader;o.onloadend=()=>e(o.result),o.onerror=n,o.readAsDataURL(t)})})}onGoBack(){this.router.navigate(["/ezm/myfiles"])}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-pdf-convert"]],standalone:!1,decls:9,vars:2,consts:[[1,"header"],[1,"back-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M15 18l-6-6 6-6","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"header-title"],[1,"main-content"],["class","converting-section",4,"ngIf"],["class","content-section",4,"ngIf"],[1,"converting-section"],[1,"converting-icon"],["width","64","height","64","viewBox","0 0 24 24","fill","none",1,"spin"],["cx","12","cy","12","r","10","stroke","#2196F3","stroke-width","2","stroke-dasharray","50 20"],[1,"converting-text"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"content-section"],[1,"document-info"],["width","40","height","40","viewBox","0 0 24 24","fill","none"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","fill","#EF5350","stroke","#E53935","stroke-width","1.5"],["points","14 2 14 8 20 8","stroke","#E53935","stroke-width","1.5"],[1,"document-details"],[1,"document-name"],[1,"document-meta"],[1,"section"],[1,"section-title"],[1,"options-grid"],["class","option-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"action-section"],[1,"convert-btn",3,"click","disabled"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M4 12h16M12 4l8 8-8 8","stroke","white","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"info-section"],[1,"info-text"],[1,"option-card",3,"click"],[1,"option-icon"],["width","48","height","48","viewBox","0 0 24 24","fill","none",4,"ngIf"],[1,"option-content"],[1,"option-title"],[1,"option-description"],[1,"option-extension"],["class","option-check",4,"ngIf"],["width","48","height","48","viewBox","0 0 24 24","fill","none"],["x","3","y","3","width","18","height","18","rx","2","stroke","currentColor","stroke-width","2"],["d","M8 7h8M8 12h8M8 17h4","stroke","currentColor","stroke-width","2"],["d","M7 8l2 8 2-6 2 6 2-8","stroke","currentColor","stroke-width","2"],["d","M3 9h18M3 15h18M9 3v18M15 3v18","stroke","currentColor","stroke-width","2"],["cx","8.5","cy","8.5","r","1.5","fill","currentColor"],["d","M21 15L16 10L5 21","stroke","currentColor","stroke-width","2"],["x","12","y","16","text-anchor","middle","fill","currentColor","font-size","10","font-weight","bold"],[1,"option-check"],["cx","12","cy","12","r","10","fill","#2196F3"],["d","M8 12l2 2 4-4","stroke","white","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"button",1),u("click",function(){return n.onGoBack()}),C(),i(2,"svg",2),m(3,"path",3),r()(),v(),i(4,"div",4),l(5,"PDF \uBCC0\uD658"),r()(),i(6,"div",5),P(7,Ia,10,3,"div",6)(8,$a,25,3,"div",7),r()),e&2&&(c(7),g("ngIf",n.isConverting),c(),g("ngIf",!n.isConverting))},dependencies:[ne,j],styles:[".header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:56px;background:#fff;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;padding:0 16px;gap:12px;z-index:100}.back-btn[_ngcontent-%COMP%]{width:40px;height:40px;padding:0;background:none;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;border-radius:50%;margin-left:-8px}.back-btn[_ngcontent-%COMP%]:active{background:#f5f5f5}.header-title[_ngcontent-%COMP%]{flex:1;font-size:18px;font-weight:600}.main-content[_ngcontent-%COMP%]{padding-top:56px;padding-bottom:24px;min-height:100vh;background:#f5f5f5}.converting-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 24px;background:#fff;margin:16px;border-radius:12px}.converting-icon[_ngcontent-%COMP%]{margin-bottom:24px}.converting-text[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-bottom:24px;font-weight:500}.progress-bar[_ngcontent-%COMP%]{width:100%;max-width:300px;height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden;margin-bottom:12px}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#2196f3,#64b5f6);transition:width .3s ease}.progress-text[_ngcontent-%COMP%]{font-size:14px;color:#666}.content-section[_ngcontent-%COMP%]{padding:16px}.document-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px;background:#fff;border-radius:12px;margin-bottom:16px;box-shadow:0 1px 3px #0000001a}.document-details[_ngcontent-%COMP%]{flex:1}.document-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin-bottom:4px;word-break:break-word}.document-meta[_ngcontent-%COMP%]{font-size:13px;color:#666}.section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;margin-bottom:16px;box-shadow:0 1px 3px #0000001a}.section-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#333;margin-bottom:20px}.options-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.option-card[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:16px;padding:16px;background:#f8f9fa;border:2px solid transparent;border-radius:12px;cursor:pointer;transition:all .2s;text-align:left}.option-card[_ngcontent-%COMP%]:active{transform:scale(.98)}.option-card.selected[_ngcontent-%COMP%]{background:#e3f2fd;border-color:#2196f3}.option-icon[_ngcontent-%COMP%]{flex-shrink:0}.option-content[_ngcontent-%COMP%]{flex:1}.option-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin-bottom:4px}.option-description[_ngcontent-%COMP%]{font-size:13px;color:#666;margin-bottom:6px}.option-extension[_ngcontent-%COMP%]{font-size:12px;color:#999;font-family:monospace}.option-check[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px}.action-section[_ngcontent-%COMP%]{padding:0 16px;margin-bottom:16px}.convert-btn[_ngcontent-%COMP%]{width:100%;padding:16px;background:linear-gradient(135deg,#2196f3,#1976d2);color:#fff;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:transform .2s;box-shadow:0 4px 12px #2196f34d}.convert-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98)}.convert-btn[_ngcontent-%COMP%]:disabled{background:#bdbdbd;cursor:not-allowed;box-shadow:none}.info-section[_ngcontent-%COMP%]{padding:16px;background:#e3f2fd;border-radius:12px;margin:0 16px}.info-text[_ngcontent-%COMP%]{font-size:13px;line-height:1.6;color:#1976d2}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}"]})};var Yt=class a{constructor(){console.log("\u{1F5BC}\uFE0F PdfThumbnailService \uCD08\uAE30\uD654")}generatePdfThumbnailsOptimized(t,e){return x(this,null,function*(){if(console.log("\u{1F5BC}\uFE0F \uCD5C\uC801\uD654\uB41C PDF \uC378\uB124\uC77C \uC0DD\uC131 \uC2DC\uC791"),!t){console.warn("\u26A0\uFE0F PDF \uC18C\uC2A4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{let n=window["pdfjs-dist/build/pdf"];if(!n)throw new Error("PDF.js \uB77C\uC774\uBE0C\uB7EC\uB9AC\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let s=yield n.getDocument(t).promise;console.log(`\u{1F4C4} PDF \uB85C\uB4DC \uC644\uB8CC: ${s.numPages} \uD398\uC774\uC9C0`);for(let d=1;d<=s.numPages;d++)yield this.generateOptimizedThumbnail(s,d,e);console.log(`\u2705 ${s.numPages}\uAC1C \uD398\uC774\uC9C0 \uC378\uB124\uC77C \uC0DD\uC131 \uC644\uB8CC`)}catch(n){throw console.error("\u274C PDF \uC378\uB124\uC77C \uC0DD\uC131 \uC2E4\uD328:",n),n}})}generateOptimizedThumbnail(t,e,n){return x(this,null,function*(){try{let o=yield t.getPage(e),s=yield this.extractNativeThumbnail(o);if(s){console.log(`\u2705 \uD398\uC774\uC9C0 ${e}: \uB124\uC774\uD2F0\uBE0C \uC378\uB124\uC77C \uC0AC\uC6A9`),n&&n(e,s);return}console.log(`\u{1F3A8} \uD398\uC774\uC9C0 ${e}: \uACE0\uD488\uC9C8 \uB80C\uB354\uB9C1 \uC378\uB124\uC77C \uC0DD\uC131`);let d=yield this.renderHighQualityThumbnail(o,e);d&&n&&n(e,d)}catch(o){console.error(`\u274C \uD398\uC774\uC9C0 ${e} \uC378\uB124\uC77C \uC0DD\uC131 \uC2E4\uD328:`,o)}})}extractNativeThumbnail(t){return x(this,null,function*(){try{let e=yield t.getOperatorList();if(e&&e.fnArray&&e.fnArray.length>0){for(let n=0;n<e.fnArray.length;n++)if(e.fnArray[n]===85){let d=e.argsArray[n][0];try{let _=t.objs,b=yield new Promise((S,M)=>{_.get(d,y=>{y?S(y):M(new Error("\uC774\uBBF8\uC9C0\uB97C \uAC00\uC838\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."))})});if(b){let S=document.createElement("canvas"),M=S.getContext("2d");if(M&&b.width&&b.height){S.width=b.width,S.height=b.height;let y=M.createImageData(S.width,S.height);return y.data.set(b.data),M.putImageData(y,0,0),S.toDataURL("image/jpeg",.7)}}}catch(_){console.warn(`\u26A0\uFE0F \uC774\uBBF8\uC9C0 ${d} \uCD94\uCD9C \uC2E4\uD328:`,_)}}}return null}catch(e){return console.warn("\u26A0\uFE0F \uB124\uC774\uD2F0\uBE0C \uC378\uB124\uC77C \uCD94\uCD9C \uC2E4\uD328:",e),null}})}renderHighQualityThumbnail(t,e){return x(this,null,function*(){try{let n=t.getViewport({scale:1}),o=200,s=Math.min(o/n.width,o/n.height),d=t.getViewport({scale:s}),_=document.createElement("canvas");_.width=d.width,_.height=d.height;let b=_.getContext("2d");if(!b)throw new Error("Canvas \uCEE8\uD14D\uC2A4\uD2B8\uB97C \uC0DD\uC131\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return yield t.render({canvasContext:b,viewport:d}).promise,_.toDataURL("image/jpeg",.7)}catch(n){return console.error(`\u274C \uD398\uC774\uC9C0 ${e} \uACE0\uD488\uC9C8 \uB80C\uB354\uB9C1 \uC2E4\uD328:`,n),null}})}generateSinglePageThumbnail(t,e,n){return x(this,null,function*(){console.log(`\u{1F5BC}\uFE0F \uD398\uC774\uC9C0 ${e} \uC378\uB124\uC77C \uC0DD\uC131 \uC2DC\uC791`);try{let o=window["pdfjs-dist/build/pdf"];if(!o)throw new Error("PDF.js \uB77C\uC774\uBE0C\uB7EC\uB9AC\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let d=yield o.getDocument(t).promise;if(e<1||e>d.numPages)throw new Error(`\uD398\uC774\uC9C0 \uBC88\uD638\uAC00 \uBC94\uC704\uB97C \uBC97\uC5B4\uB0AC\uC2B5\uB2C8\uB2E4: ${e}`);yield this.generateOptimizedThumbnail(d,e,n),console.log(`\u2705 \uD398\uC774\uC9C0 ${e} \uC378\uB124\uC77C \uC0DD\uC131 \uC644\uB8CC`)}catch(o){throw console.error(`\u274C \uD398\uC774\uC9C0 ${e} \uC378\uB124\uC77C \uC0DD\uC131 \uC2E4\uD328:`,o),o}})}static \u0275fac=function(e){return new(e||a)};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};function Wa(a,t){if(a&1&&(i(0,"div",25),m(1,"img",26),r()),a&2){let e=p(2);c(),g("src",e.thumbnailUrl,Oe)}}function Ua(a,t){if(a&1){let e=w();i(0,"div",9)(1,"div",10),C(),i(2,"svg",11),m(3,"circle",12)(4,"path",13),r(),v(),i(5,"span"),l(6,"\uD68C\uC804 \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uC5EC PDF \uD30C\uC77C\uC744 \uD68C\uC804\uD574 \uBCF4\uC138\uC694."),r()(),i(7,"div",14),P(8,Wa,2,1,"div",15),i(9,"div",16)(10,"h3",17),l(11),r(),i(12,"div",18)(13,"span",19),l(14),r(),i(15,"span",20),l(16,"\xB7"),r(),i(17,"span",19),l(18,"PDF"),r()(),i(19,"div",21),l(20),xe(21,"date"),r()(),i(22,"button",22),u("click",function(){f(e);let o=p();return h(o.rotateThumbnail())}),C(),i(23,"svg",11),m(24,"path",23)(25,"polyline",24),r()()()()}if(a&2){let e=p();c(8),g("ngIf",e.thumbnailUrl),c(3),E(e.document.fileName||e.document.title),c(3),E(e.formatFileSize(e.document.fileSize||0)),c(6),D(" ",$e(21,4,e.document.updatedAt,"yyyy.MM.dd HH:mm:ss")," ")}}function Ka(a,t){if(a&1&&(i(0,"div",27)(1,"div",28),m(2,"div",29),i(3,"h3"),l(4,"PDF \uD68C\uC804 \uC911..."),r(),i(5,"div",30),m(6,"div",31),r(),i(7,"p",32),l(8),r()()()),a&2){let e=p();c(6),L("width",e.progress,"%"),c(2),D("",e.progress,"%")}}function Ya(a,t){if(a&1){let e=w();i(0,"div",33)(1,"button",34),u("click",function(){f(e);let o=p();return h(o.applyRotation())}),l(2," \uC801\uC6A9 "),r()()}}var qt=class a{document=null;isProcessing=!1;progress=0;selectedAngle=90;applyToAll=!0;selectedPages=new Set;thumbnailUrl="";totalPages=0;rotationOptions=[{angle:90,label:"90\xB0 \uD68C\uC804",icon:"\u21BB",description:"\uC2DC\uACC4\uBC29\uD5A5 90\uB3C4"},{angle:180,label:"180\xB0 \uD68C\uC804",icon:"\u21BB\u21BB",description:"180\uB3C4 \uB4A4\uC9D1\uAE30"},{angle:270,label:"270\xB0 \uD68C\uC804",icon:"\u21BA",description:"\uBC18\uC2DC\uACC4\uBC29\uD5A5 90\uB3C4"}];router=O(V);snackbar=O(U);pdfPageManagement=O(si);pdfThumbnail=O(Yt);indexedDb=O(J);ngOnInit(){let e=this.router.getCurrentNavigation()?.extras?.state||history.state;e&&e.document?(this.document=e.document,this.loadThumbnail()):(this.snackbar.showError("\uBB38\uC11C \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/myfiles"]))}formatFileSize(t){return t===0?"0 B":t<1024?t+" B":t<1024*1024?(t/1024).toFixed(1)+" KB":(t/(1024*1024)).toFixed(1)+" MB"}rotateThumbnail(){if(!this.thumbnailUrl)return;let t=new Image;t.onload=()=>{let e=document.createElement("canvas");e.width=t.height,e.height=t.width;let n=e.getContext("2d");n&&(n.translate(e.width/2,e.height/2),n.rotate(90*Math.PI/180),n.drawImage(t,-t.width/2,-t.height/2),this.thumbnailUrl=e.toDataURL("image/jpeg",.7))},t.src=this.thumbnailUrl}loadThumbnail(){return x(this,null,function*(){if(!this.document){console.warn("\uBB38\uC11C \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let t=this.document.pdfBase64||this.document.originalPdfBase64;if(!t){console.warn("PDF \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),this.snackbar.showWarning("\uBB38\uC11C \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{let e=this.createBlobUrl(t);this.totalPages=yield this.pdfPageManagement.getPageCount(e);let d=yield(yield window["pdfjs-dist/build/pdf"].getDocument(e).promise).getPage(1),_=d.getViewport({scale:1}),b=200,S=Math.min(b/_.width,b/_.height),M=d.getViewport({scale:S}),y=document.createElement("canvas");y.width=M.width,y.height=M.height;let k=y.getContext("2d");k&&(yield d.render({canvasContext:k,viewport:M}).promise,this.thumbnailUrl=y.toDataURL("image/jpeg",.7)),this.pdfPageManagement.revokeBlobUrl(e)}catch(e){console.error("\uC378\uB124\uC77C \uB85C\uB529 \uC2E4\uD328:",e),this.snackbar.showError("\uBB38\uC11C \uBBF8\uB9AC\uBCF4\uAE30\uB97C \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}selectAngle(t){this.selectedAngle=t}toggleApplyToAll(){this.applyToAll=!this.applyToAll,this.applyToAll&&this.selectedPages.clear()}togglePageSelection(t){this.selectedPages.has(t)?this.selectedPages.delete(t):this.selectedPages.add(t)}isPageSelected(t){return this.selectedPages.has(t)}applyRotation(){return x(this,null,function*(){if(!(!this.document||!this.document.pdfBase64)){if(!this.applyToAll&&this.selectedPages.size===0){this.snackbar.showWarning("\uD68C\uC804\uD560 \uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694.");return}this.isProcessing=!0,this.progress=0;try{let t=this.createBlobUrl(this.document.pdfBase64);this.progress=30;let e;if(this.applyToAll)e=yield this.pdfPageManagement.rotateAllPages(t,this.selectedAngle),this.snackbar.showInfo(`\uBAA8\uB4E0 \uD398\uC774\uC9C0\uB97C ${this.selectedAngle}\uB3C4 \uD68C\uC804\uD588\uC2B5\uB2C8\uB2E4.`);else{let S=yield(yield fetch(t)).arrayBuffer(),M=window.PDFLib,y=yield M.PDFDocument.load(S),k=y.getPages(),T=Array.from(this.selectedPages).sort((B,K)=>B-K);for(let B of T)if(B>=1&&B<=k.length){let K=k[B-1],X=K.getRotation().angle;K.setRotation(M.degrees(X+this.selectedAngle))}let I=yield y.save(),A=new Blob([I],{type:"application/pdf"});e=URL.createObjectURL(A),this.snackbar.showInfo(`${T.length}\uAC1C \uD398\uC774\uC9C0\uB97C ${this.selectedAngle}\uB3C4 \uD68C\uC804\uD588\uC2B5\uB2C8\uB2E4.`)}this.progress=70;let o=yield(yield fetch(e)).blob(),s=yield this.blobToBase64(o);this.progress=90;let d=se(oe({},this.document),{pdfBase64:s,updatedAt:new Date().toISOString()});yield this.indexedDb.saveDocument(d),this.progress=100,this.pdfPageManagement.revokeBlobUrl(t),this.pdfPageManagement.revokeBlobUrl(e);let _=this.applyToAll?this.totalPages:this.selectedPages.size;setTimeout(()=>{this.router.navigate(["/ezm/file-saved"],{state:{fileId:d.id,fileName:d.fileName||d.title,fileCount:1,title:"PDF \uD68C\uC804 \uC644\uB8CC!",subtitle:`${_}\uAC1C \uD398\uC774\uC9C0\uB97C ${this.selectedAngle}\uB3C4 \uD68C\uC804\uD588\uC2B5\uB2C8\uB2E4.`,folderId:d.folderId||null}})},500)}catch(t){console.error("PDF \uD68C\uC804 \uC2E4\uD328:",t),this.snackbar.showError("PDF \uD68C\uC804\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),this.isProcessing=!1,this.progress=0}}})}cancel(){this.router.navigate(["/ezm/myfiles"])}createBlobUrl(t){try{let e=t.includes(",")?t.split(",")[1]:t,n=atob(e),o=new Uint8Array(n.length);for(let d=0;d<n.length;d++)o[d]=n.charCodeAt(d);let s=new Blob([o],{type:"application/pdf"});return URL.createObjectURL(s)}catch(e){throw console.error("Blob URL \uC0DD\uC131 \uC2E4\uD328:",e),e}}blobToBase64(t){return new Promise((e,n)=>{let o=new FileReader;o.onloadend=()=>{let s=o.result.split(",")[1];e(s)},o.onerror=n,o.readAsDataURL(t)})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-rotate"]],standalone:!1,decls:11,vars:3,consts:[[1,"header"],[1,"back-button",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M15 18l-6-6 6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"header-center"],[1,"header-right"],["class","main-content",4,"ngIf"],["class","processing-overlay",4,"ngIf"],["class","bottom-action",4,"ngIf"],[1,"main-content"],[1,"info-message"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["cx","12","cy","12","r","10","stroke","#2196F3","stroke-width","2"],["d","M12 16v-4M12 8h.01","stroke","#2196F3","stroke-width","2","stroke-linecap","round"],[1,"document-card"],["class","thumbnail",4,"ngIf"],[1,"document-details"],[1,"document-title"],[1,"document-meta"],[1,"meta-item"],[1,"meta-divider"],[1,"document-date"],["title","\uBBF8\uB9AC\uBCF4\uAE30 \uD68C\uC804",1,"rotate-button",3,"click"],["d","M21 10.5a9 9 0 1 1-2.636-6.364L21 6.75","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","21 3 21 7 17 7","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"thumbnail"],["alt","PDF \uBBF8\uB9AC\uBCF4\uAE30",3,"src"],[1,"processing-overlay"],[1,"processing-content"],[1,"spinner"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"bottom-action"],[1,"apply-button",3,"click"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"button",1),u("click",function(){return n.cancel()}),C(),i(2,"svg",2),m(3,"path",3),r()(),v(),i(4,"div",4)(5,"h2"),l(6,"PDF \uD68C\uC804"),r()(),m(7,"div",5),r(),P(8,Ua,26,7,"div",6)(9,Ka,9,3,"div",7)(10,Ya,3,0,"div",8)),e&2&&(c(8),g("ngIf",n.document&&!n.isProcessing),c(),g("ngIf",n.isProcessing),c(),g("ngIf",!n.isProcessing))},dependencies:[j,Je],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh;background:#f5f5f5}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#fff;border-bottom:1px solid #e0e0e0;position:sticky;top:0;z-index:10}.header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{padding:8px;background:none;border:none;color:#333;cursor:pointer;border-radius:50%;display:flex;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:active{background:#f0f0f0}.header[_ngcontent-%COMP%]   .header-center[_ngcontent-%COMP%]{flex:1;text-align:center}.header[_ngcontent-%COMP%]   .header-center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{width:40px}.main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px 16px 100px;background:#f5f5f5}.info-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#e3f2fd;border-radius:8px;margin-bottom:16px}.info-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.info-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-size:14px;color:#1976d2;line-height:1.5}.document-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;gap:16px;align-items:flex-start;box-shadow:0 2px 8px #00000014;position:relative}.document-card[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:60px;height:80px;border-radius:4px;overflow:hidden;background:#f0f0f0;flex-shrink:0;border:1px solid #e0e0e0}.document-card[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.document-card[_ngcontent-%COMP%]   .document-details[_ngcontent-%COMP%]{flex:1;min-width:0}.document-card[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:15px;font-weight:600;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.document-card[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-bottom:6px}.document-card[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{font-size:13px;color:#666}.document-card[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .meta-divider[_ngcontent-%COMP%]{color:#ccc;font-size:12px}.document-card[_ngcontent-%COMP%]   .document-date[_ngcontent-%COMP%]{font-size:13px;color:#999}.document-card[_ngcontent-%COMP%]   .rotate-button[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;width:36px;height:36px;padding:0;background:#f5f5f5;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#666;transition:all .2s}.document-card[_ngcontent-%COMP%]   .rotate-button[_ngcontent-%COMP%]:active{background:#e0e0e0;transform:rotate(90deg)}.bottom-action[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;padding:16px;background:#fff;border-top:1px solid #e0e0e0;z-index:10}.bottom-action[_ngcontent-%COMP%]   .apply-button[_ngcontent-%COMP%]{width:100%;height:52px;background:#ef5350;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s}.bottom-action[_ngcontent-%COMP%]   .apply-button[_ngcontent-%COMP%]:active{background:#e53935;transform:scale(.98)}.section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px 16px;margin-bottom:16px;box-shadow:0 2px 8px #00000014}.section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:600;color:#333}.rotation-options[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}.rotation-options[_ngcontent-%COMP%]   .rotation-option[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid transparent;border-radius:12px;padding:20px 12px;cursor:pointer;transition:all .2s;display:flex;flex-direction:column;align-items:center;gap:8px}.rotation-options[_ngcontent-%COMP%]   .rotation-option.active[_ngcontent-%COMP%]{background:#e3f2fd;border-color:#2196f3}.rotation-options[_ngcontent-%COMP%]   .rotation-option.active[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#2196f3}.rotation-options[_ngcontent-%COMP%]   .rotation-option.active[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#2196f3;font-weight:600}.rotation-options[_ngcontent-%COMP%]   .rotation-option[_ngcontent-%COMP%]:active{transform:scale(.95)}.rotation-options[_ngcontent-%COMP%]   .rotation-option[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:32px;color:#666;transition:color .2s}.rotation-options[_ngcontent-%COMP%]   .rotation-option[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;transition:all .2s}.rotation-options[_ngcontent-%COMP%]   .rotation-option[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:12px;color:#999;text-align:center}.apply-scope[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.apply-scope[_ngcontent-%COMP%]   .scope-button[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid transparent;border-radius:12px;padding:16px;cursor:pointer;display:flex;align-items:center;gap:12px;transition:all .2s}.apply-scope[_ngcontent-%COMP%]   .scope-button.active[_ngcontent-%COMP%]{background:#e8f5e9;border-color:#4caf50}.apply-scope[_ngcontent-%COMP%]   .scope-button.active[_ngcontent-%COMP%]   .scope-icon[_ngcontent-%COMP%]{color:#4caf50}.apply-scope[_ngcontent-%COMP%]   .scope-button.active[_ngcontent-%COMP%]   .scope-label[_ngcontent-%COMP%]{color:#4caf50;font-weight:600}.apply-scope[_ngcontent-%COMP%]   .scope-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.apply-scope[_ngcontent-%COMP%]   .scope-button[_ngcontent-%COMP%]   .scope-icon[_ngcontent-%COMP%]{flex-shrink:0;color:#666;transition:color .2s}.apply-scope[_ngcontent-%COMP%]   .scope-button[_ngcontent-%COMP%]   .scope-info[_ngcontent-%COMP%]{flex:1;text-align:left}.apply-scope[_ngcontent-%COMP%]   .scope-button[_ngcontent-%COMP%]   .scope-info[_ngcontent-%COMP%]   .scope-label[_ngcontent-%COMP%]{font-size:15px;font-weight:500;color:#333;margin-bottom:4px;transition:all .2s}.apply-scope[_ngcontent-%COMP%]   .scope-button[_ngcontent-%COMP%]   .scope-info[_ngcontent-%COMP%]   .scope-description[_ngcontent-%COMP%]{font-size:13px;color:#999}.apply-scope[_ngcontent-%COMP%]   .scope-button[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{font-size:20px;color:#4caf50;font-weight:700}.page-selector[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid #e0e0e0}.page-selector[_ngcontent-%COMP%]   .page-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:8px;margin-bottom:12px}.page-selector[_ngcontent-%COMP%]   .page-grid[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]{aspect-ratio:1;background:#f8f9fa;border:2px solid transparent;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;position:relative;transition:all .2s;font-size:14px;font-weight:500;color:#666}.page-selector[_ngcontent-%COMP%]   .page-grid[_ngcontent-%COMP%]   .page-item.selected[_ngcontent-%COMP%]{background:#e3f2fd;border-color:#2196f3;color:#2196f3;font-weight:600}.page-selector[_ngcontent-%COMP%]   .page-grid[_ngcontent-%COMP%]   .page-item.selected[_ngcontent-%COMP%]   .check-badge[_ngcontent-%COMP%]{display:flex}.page-selector[_ngcontent-%COMP%]   .page-grid[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]:active{transform:scale(.95)}.page-selector[_ngcontent-%COMP%]   .page-grid[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .check-badge[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;width:18px;height:18px;background:#2196f3;color:#fff;border-radius:50%;font-size:12px;display:none;align-items:center;justify-content:center}.page-selector[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#2196f3;text-align:center;font-weight:500}.processing-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000}.processing-overlay[_ngcontent-%COMP%]   .processing-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:32px;text-align:center;max-width:300px;width:90%}.processing-overlay[_ngcontent-%COMP%]   .processing-content[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #e0e0e0;border-top-color:#2196f3;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.processing-overlay[_ngcontent-%COMP%]   .processing-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;font-weight:600;color:#333}.processing-overlay[_ngcontent-%COMP%]   .processing-content[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden;margin-bottom:12px}.processing-overlay[_ngcontent-%COMP%]   .processing-content[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#2196f3,#21cbf3);border-radius:4px;transition:width .3s ease}.processing-overlay[_ngcontent-%COMP%]   .processing-content[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#666;font-weight:500}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.action-buttons[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:#fff;border-top:1px solid #e0e0e0;padding:12px 16px;display:flex;gap:12px;z-index:10}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:14px 24px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.98)}.action-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}.action-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]:active{background:#e0e0e0}.action-buttons[_ngcontent-%COMP%]   .apply-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2196f3,#21cbf3);color:#fff;box-shadow:0 4px 12px #2196f34d}.action-buttons[_ngcontent-%COMP%]   .apply-button[_ngcontent-%COMP%]:active{box-shadow:0 2px 8px #2196f34d}"]})};function qa(a,t){if(a&1&&(i(0,"div",33),m(1,"img",34),r()),a&2){let e=p(2);c(),g("src",e.thumbnailUrl,Oe)}}function Za(a,t){if(a&1){let e=w();i(0,"div",39)(1,"div",40)(2,"div",41),C(),i(3,"svg",42),m(4,"path",25)(5,"polyline",26),r(),v(),i(6,"span"),l(7),r(),i(8,"span",43),l(9),r()(),i(10,"div",44),l(11),r()(),i(12,"button",45),u("click",function(){let o=f(e).$implicit,s=p(3);return h(s.removeSplitRange(o.id))}),C(),i(13,"svg",46),m(14,"path",47),r()()()}if(a&2){let e=t.$implicit;c(7),ze("",e.startPage," - ",e.endPage,"\uD398\uC774\uC9C0"),c(2),D("(",e.endPage-e.startPage+1,"\uD398\uC774\uC9C0)"),c(2),E(e.fileName)}}function Xa(a,t){if(a&1&&(i(0,"div",35)(1,"h3",36),l(2),r(),i(3,"div",37),P(4,Za,15,4,"div",38),r()()),a&2){let e=p(2);c(2),D("\uBD84\uD560 \uBAA9\uB85D (",e.splitRanges.length,"\uAC1C)"),c(2),g("ngForOf",e.splitRanges)}}function Qa(a,t){if(a&1){let e=w();i(0,"div",9)(1,"div",10),C(),i(2,"svg",11),m(3,"circle",12)(4,"path",13),r(),v(),i(5,"span"),l(6,"\uD398\uC774\uC9C0 \uBC94\uC704\uB97C \uC9C0\uC815\uD558\uC5EC PDF\uB97C \uC5EC\uB7EC \uD30C\uC77C\uB85C \uBD84\uD560\uD558\uC138\uC694."),r()(),i(7,"div",14),P(8,qa,2,1,"div",15),i(9,"div",16)(10,"h3",17),l(11),r(),i(12,"div",18)(13,"span",19),l(14),r(),i(15,"span",20),l(16,"\xB7"),r(),i(17,"span",19),l(18),r(),i(19,"span",20),l(20,"\xB7"),r(),i(21,"span",19),l(22,"PDF"),r()(),i(23,"div",21),l(24),xe(25,"date"),r()()(),i(26,"div",22)(27,"button",23),u("click",function(){f(e);let o=p();return h(o.extractAllPages())}),i(28,"div",24),C(),i(29,"svg",2),m(30,"path",25)(31,"polyline",26),r()(),v(),i(32,"div",27)(33,"h3",28),l(34,"\uBAA8\uB4E0 \uD398\uC774\uC9C0 \uCD94\uCD9C\uD558\uAE30"),r(),i(35,"p",29),l(36),r()(),i(37,"div",30),C(),i(38,"svg",11),m(39,"path",31),r()()()(),P(40,Xa,5,2,"div",32),r()}if(a&2){let e=p();c(8),g("ngIf",e.thumbnailUrl),c(3),E(e.document.fileName||e.document.title),c(3),E(e.formatFileSize(e.document.fileSize||0)),c(4),D("",e.totalPages,"\uD398\uC774\uC9C0"),c(6),D(" ",$e(25,7,e.document.updatedAt,"yyyy.MM.dd HH:mm:ss")," "),c(12),D("\uBAA8\uB4E0 \uD398\uC774\uC9C0\uB97C \uCD94\uCD9C\uD558\uC5EC ",e.totalPages,"\uAC1C pdf\uB85C \uBCC0\uD658\uD569\uB2C8\uB2E4."),c(4),g("ngIf",e.splitRanges.length>0)}}function Ja(a,t){if(a&1&&(i(0,"div",48)(1,"div",49),m(2,"div",50),i(3,"h3"),l(4,"PDF \uBD84\uD560 \uC911..."),r(),i(5,"div",51),m(6,"div",52),r(),i(7,"p",53),l(8),r()()()),a&2){let e=p();c(6),L("width",e.progress,"%"),c(2),D("",e.progress,"%")}}function es(a,t){if(a&1){let e=w();i(0,"div",54)(1,"button",55),u("click",function(){f(e);let o=p();return h(o.applySplit())}),l(2," \uBD84\uD560 \uC2E4\uD589 "),r()()}if(a&2){let e=p();c(),g("disabled",e.splitRanges.length===0)}}var Zt=class a{document=null;isProcessing=!1;progress=0;thumbnailUrl="";totalPages=0;originalFolderId=null;splitFolderId=null;splitRanges=[];nextRangeId=1;currentStartPage=1;currentEndPage=1;router=O(V);snackbar=O(U);indexedDb=O(J);ngOnInit(){let e=this.router.getCurrentNavigation()?.extras?.state||history.state;e&&e.document?(this.document=e.document,this.originalFolderId=this.document?.folderId||null,this.loadDocumentInfo()):(this.snackbar.showError("\uBB38\uC11C \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/myfiles"]))}loadDocumentInfo(){return x(this,null,function*(){if(!this.document){console.warn("\uBB38\uC11C \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let t=this.document.pdfBase64||this.document.originalPdfBase64;if(!t){console.warn("PDF \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),this.snackbar.showWarning("\uBB38\uC11C \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{let e=this.createBlobUrl(t),s=yield window["pdfjs-dist/build/pdf"].getDocument(e).promise;this.totalPages=s.numPages,this.currentEndPage=this.totalPages;let d=yield s.getPage(1),_=d.getViewport({scale:1}),b=200,S=Math.min(b/_.width,b/_.height),M=d.getViewport({scale:S}),y=document.createElement("canvas");y.width=M.width,y.height=M.height;let k=y.getContext("2d");k&&(yield d.render({canvasContext:k,viewport:M}).promise,this.thumbnailUrl=y.toDataURL("image/jpeg",.7)),URL.revokeObjectURL(e)}catch(e){console.error("\uBB38\uC11C \uC815\uBCF4 \uB85C\uB529 \uC2E4\uD328:",e),this.snackbar.showError("\uBB38\uC11C \uC815\uBCF4\uB97C \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}formatFileSize(t){return t===0?"0 B":t<1024?t+" B":t<1024*1024?(t/1024).toFixed(1)+" KB":(t/(1024*1024)).toFixed(1)+" MB"}extractAllPages(){if(!this.document||this.totalPages===0){this.snackbar.showWarning("\uBB38\uC11C \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.splitRanges=[];let e=(this.document.fileName||this.document.title||"\uBB38\uC11C").replace(/\.pdf$/i,"");for(let n=1;n<=this.totalPages;n++)this.splitRanges.push({id:this.nextRangeId++,startPage:n,endPage:n,fileName:`${e}_\uD398\uC774\uC9C0${n}.pdf`});this.snackbar.showSuccess(`${this.totalPages}\uAC1C \uD398\uC774\uC9C0\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}addSplitRange(){if(this.currentStartPage<1||this.currentStartPage>this.totalPages){this.snackbar.showWarning(`\uC2DC\uC791 \uD398\uC774\uC9C0\uB294 1\uC5D0\uC11C ${this.totalPages} \uC0AC\uC774\uC5EC\uC57C \uD569\uB2C8\uB2E4.`);return}if(this.currentEndPage<1||this.currentEndPage>this.totalPages){this.snackbar.showWarning(`\uB05D \uD398\uC774\uC9C0\uB294 1\uC5D0\uC11C ${this.totalPages} \uC0AC\uC774\uC5EC\uC57C \uD569\uB2C8\uB2E4.`);return}if(this.currentStartPage>this.currentEndPage){this.snackbar.showWarning("\uC2DC\uC791 \uD398\uC774\uC9C0\uB294 \uB05D \uD398\uC774\uC9C0\uBCF4\uB2E4 \uC791\uAC70\uB098 \uAC19\uC544\uC57C \uD569\uB2C8\uB2E4.");return}let e=`${(this.document?.fileName||this.document?.title||"\uBB38\uC11C").replace(".pdf","")}_${this.currentStartPage}-${this.currentEndPage}.pdf`;this.splitRanges.push({id:this.nextRangeId++,startPage:this.currentStartPage,endPage:this.currentEndPage,fileName:e}),this.currentStartPage=1,this.currentEndPage=this.totalPages,this.snackbar.showSuccess("\uBD84\uD560 \uBC94\uC704\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}removeSplitRange(t){this.splitRanges=this.splitRanges.filter(e=>e.id!==t),this.snackbar.showInfo("\uBD84\uD560 \uBC94\uC704\uAC00 \uC81C\uAC70\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}applySplit(){return x(this,null,function*(){if(!this.document||!this.document.pdfBase64){this.snackbar.showError("\uBB38\uC11C \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(this.splitRanges.length===0){this.snackbar.showWarning("\uBD84\uD560 \uBC94\uC704\uB97C \uCD94\uAC00\uD574\uC8FC\uC138\uC694.");return}this.isProcessing=!0,this.progress=0;try{let t=window.PDFLib,e=this.document.pdfBase64||this.document.originalPdfBase64;if(!e){this.snackbar.showError("PDF \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.isProcessing=!1;return}let n=this.createBlobUrl(e);this.progress=10;let s=yield(yield fetch(n)).arrayBuffer(),d=yield t.PDFDocument.load(s);this.progress=20;let b=(this.document.fileName||this.document.title||"\uBB38\uC11C").replace(/\.pdf$/i,"")+"_\uBD84\uD560",S=yield this.indexedDb.createFolder(b,this.originalFolderId);this.splitFolderId=S.id,this.progress=25;let M=this.splitRanges.length,y=0,k=[];for(let T of this.splitRanges){let I=yield t.PDFDocument.create(),A=[];for(let te=T.startPage-1;te<=T.endPage-1;te++)A.push(te);(yield I.copyPages(d,A)).forEach(te=>I.addPage(te));let K=yield I.save(),X=yield this.arrayBufferToBase64(K),q=`split-${Date.now()}-${T.id}`,Z={id:q,title:T.fileName.replace(".pdf",""),fileName:T.fileName,pdfBase64:X,pages:[],elementCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),version:"1.0",documentType:"viewer",pageCount:T.endPage-T.startPage+1,folderId:this.splitFolderId};yield this.indexedDb.saveDocument(Z),k.push(q),y++,this.progress=20+Math.floor(y/M*70)}this.progress=100,URL.revokeObjectURL(n),setTimeout(()=>{this.router.navigate(["/ezm/file-saved"],{state:{fileId:k[0],fileIds:k,fileName:this.splitRanges[0].fileName,fileCount:this.splitRanges.length,title:"PDF \uBD84\uD560 \uC644\uB8CC",subtitle:`${this.totalPages}\uD398\uC774\uC9C0\uB97C ${this.splitRanges.length}\uAC1C \uD30C\uC77C\uB85C \uBD84\uD560\uD588\uC2B5\uB2C8\uB2E4.`,folderId:this.splitFolderId}})},500)}catch(t){console.error("PDF \uBD84\uD560 \uC2E4\uD328:",t),this.snackbar.showError("PDF \uBD84\uD560\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),this.isProcessing=!1,this.progress=0}})}cancel(){this.router.navigate(["/ezm/myfiles"])}createBlobUrl(t){try{let e=t.includes(",")?t.split(",")[1]:t,n=atob(e),o=new Uint8Array(n.length);for(let d=0;d<n.length;d++)o[d]=n.charCodeAt(d);let s=new Blob([o],{type:"application/pdf"});return URL.createObjectURL(s)}catch(e){throw console.error("Blob URL \uC0DD\uC131 \uC2E4\uD328:",e),e}}arrayBufferToBase64(t){let e=new Uint8Array(t),n="";for(let o=0;o<e.byteLength;o++)n+=String.fromCharCode(e[o]);return btoa(n)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-split"]],standalone:!1,decls:11,vars:3,consts:[[1,"header"],[1,"back-button",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M15 18l-6-6 6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"header-center"],[1,"header-right"],["class","main-content",4,"ngIf"],["class","processing-overlay",4,"ngIf"],["class","bottom-action",4,"ngIf"],[1,"main-content"],[1,"info-message"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["cx","12","cy","12","r","10","stroke","#2196F3","stroke-width","2"],["d","M12 16v-4M12 8h.01","stroke","#2196F3","stroke-width","2","stroke-linecap","round"],[1,"document-card"],["class","thumbnail",4,"ngIf"],[1,"document-details"],[1,"document-title"],[1,"document-meta"],[1,"meta-item"],[1,"meta-divider"],[1,"document-date"],[1,"extract-all-section"],[1,"extract-all-card",3,"click"],[1,"card-icon"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","stroke","currentColor","stroke-width","2"],["points","14 2 14 8 20 8","stroke","currentColor","stroke-width","2"],[1,"card-content"],[1,"card-title"],[1,"card-description"],[1,"card-arrow"],["d","M9 18l6-6-6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["class","split-ranges-section",4,"ngIf"],[1,"thumbnail"],["alt","PDF \uBBF8\uB9AC\uBCF4\uAE30",3,"src"],[1,"split-ranges-section"],[1,"section-title"],[1,"split-range-list"],["class","split-range-item",4,"ngFor","ngForOf"],[1,"split-range-item"],[1,"range-info"],[1,"range-pages"],["width","16","height","16","viewBox","0 0 24 24","fill","none"],[1,"page-count"],[1,"range-filename"],[1,"remove-button",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"processing-overlay"],[1,"processing-content"],[1,"spinner"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"bottom-action"],[1,"apply-button",3,"click","disabled"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"button",1),u("click",function(){return n.cancel()}),C(),i(2,"svg",2),m(3,"path",3),r()(),v(),i(4,"div",4)(5,"h2"),l(6,"PDF \uBD84\uD560"),r()(),m(7,"div",5),r(),P(8,Qa,41,10,"div",6)(9,Ja,9,3,"div",7)(10,es,3,1,"div",8)),e&2&&(c(8),g("ngIf",n.document&&!n.isProcessing),c(),g("ngIf",n.isProcessing),c(),g("ngIf",!n.isProcessing))},dependencies:[ne,j,Je],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh;background:#f5f5f5}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#fff;border-bottom:1px solid #e0e0e0;position:sticky;top:0;z-index:10}.header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{padding:8px;background:none;border:none;color:#333;cursor:pointer;border-radius:50%;display:flex;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:active{background:#f0f0f0}.header[_ngcontent-%COMP%]   .header-center[_ngcontent-%COMP%]{flex:1;text-align:center}.header[_ngcontent-%COMP%]   .header-center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{width:40px}.main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px 16px 100px;background:#f5f5f5}.info-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#e3f2fd;border-radius:8px;margin-bottom:16px}.info-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.info-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-size:14px;color:#1976d2;line-height:1.5}.document-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;display:flex;gap:16px;align-items:flex-start;box-shadow:0 2px 8px #00000014;margin-bottom:16px}.document-card[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:60px;height:80px;border-radius:4px;overflow:hidden;background:#f0f0f0;flex-shrink:0;border:1px solid #e0e0e0}.document-card[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.document-card[_ngcontent-%COMP%]   .document-details[_ngcontent-%COMP%]{flex:1;min-width:0}.document-card[_ngcontent-%COMP%]   .document-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:15px;font-weight:600;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.document-card[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-bottom:6px}.document-card[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{font-size:13px;color:#666}.document-card[_ngcontent-%COMP%]   .document-meta[_ngcontent-%COMP%]   .meta-divider[_ngcontent-%COMP%]{color:#ccc;font-size:12px}.document-card[_ngcontent-%COMP%]   .document-date[_ngcontent-%COMP%]{font-size:13px;color:#999}.extract-all-section[_ngcontent-%COMP%]{margin-bottom:16px}.extract-all-section[_ngcontent-%COMP%]   .extract-all-card[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;background:#fff;border:none;border-radius:12px;padding:20px;box-shadow:0 2px 8px #00000014;cursor:pointer;transition:all .2s;text-align:left}.extract-all-section[_ngcontent-%COMP%]   .extract-all-card[_ngcontent-%COMP%]:active{transform:scale(.98);background:#f8f9fa}.extract-all-section[_ngcontent-%COMP%]   .extract-all-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:48px;height:48px;background:#ef5350;border-radius:12px;flex-shrink:0;margin-right:16px}.extract-all-section[_ngcontent-%COMP%]   .extract-all-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;stroke:#fff}.extract-all-section[_ngcontent-%COMP%]   .extract-all-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{flex:1}.extract-all-section[_ngcontent-%COMP%]   .extract-all-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin:0 0 6px;font-size:16px;font-weight:600;color:#333}.extract-all-section[_ngcontent-%COMP%]   .extract-all-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-description[_ngcontent-%COMP%]{margin:0;font-size:13px;line-height:1.5;color:#666}.extract-all-section[_ngcontent-%COMP%]   .extract-all-card[_ngcontent-%COMP%]   .card-arrow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-shrink:0}.extract-all-section[_ngcontent-%COMP%]   .extract-all-card[_ngcontent-%COMP%]   .card-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;stroke:#999}.range-input-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;margin-bottom:16px;box-shadow:0 2px 8px #00000014}.range-input-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.range-input-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#333}.range-input-section[_ngcontent-%COMP%]   .extract-all-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;background:#2196f3;color:#fff;border:none;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s}.range-input-section[_ngcontent-%COMP%]   .extract-all-button[_ngcontent-%COMP%]:hover{background:#1976d2}.range-input-section[_ngcontent-%COMP%]   .extract-all-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.range-input-section[_ngcontent-%COMP%]   .extract-all-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.range-input-section[_ngcontent-%COMP%]   .range-input-row[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:12px}.range-input-section[_ngcontent-%COMP%]   .range-input-row[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{flex:1}.range-input-section[_ngcontent-%COMP%]   .range-input-row[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:13px;color:#666;font-weight:500}.range-input-section[_ngcontent-%COMP%]   .range-input-row[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .page-input[_ngcontent-%COMP%]{width:100%;height:44px;padding:0 12px;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;color:#333;transition:all .2s}.range-input-section[_ngcontent-%COMP%]   .range-input-row[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .page-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;background:#f8f9fa}.range-input-section[_ngcontent-%COMP%]   .range-input-row[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{font-size:18px;color:#999;font-weight:500;margin-bottom:12px}.range-input-section[_ngcontent-%COMP%]   .range-input-row[_ngcontent-%COMP%]   .add-range-button[_ngcontent-%COMP%]{width:44px;height:44px;background:#2196f3;color:#fff;border:none;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .2s}.range-input-section[_ngcontent-%COMP%]   .range-input-row[_ngcontent-%COMP%]   .add-range-button[_ngcontent-%COMP%]:active{background:#1976d2;transform:scale(.95)}.split-ranges-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;margin-bottom:16px;box-shadow:0 2px 8px #00000014}.split-ranges-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:600;color:#333}.split-ranges-section[_ngcontent-%COMP%]   .split-range-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.split-ranges-section[_ngcontent-%COMP%]   .split-range-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#f8f9fa;border-radius:10px;border:1px solid #e0e0e0;transition:all .2s}.split-ranges-section[_ngcontent-%COMP%]   .split-range-item[_ngcontent-%COMP%]:active{background:#f0f1f2}.split-ranges-section[_ngcontent-%COMP%]   .split-range-item[_ngcontent-%COMP%]   .range-info[_ngcontent-%COMP%]{flex:1;min-width:0}.split-ranges-section[_ngcontent-%COMP%]   .split-range-item[_ngcontent-%COMP%]   .range-pages[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:6px}.split-ranges-section[_ngcontent-%COMP%]   .split-range-item[_ngcontent-%COMP%]   .range-pages[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;color:#666}.split-ranges-section[_ngcontent-%COMP%]   .split-range-item[_ngcontent-%COMP%]   .range-pages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333}.split-ranges-section[_ngcontent-%COMP%]   .split-range-item[_ngcontent-%COMP%]   .range-pages[_ngcontent-%COMP%]   .page-count[_ngcontent-%COMP%]{font-size:13px;color:#999;font-weight:400}.split-ranges-section[_ngcontent-%COMP%]   .split-range-item[_ngcontent-%COMP%]   .range-filename[_ngcontent-%COMP%]{font-size:13px;color:#666;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.split-ranges-section[_ngcontent-%COMP%]   .split-range-item[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{width:32px;height:32px;padding:0;background:#ffebee;color:#f44336;border:none;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .2s}.split-ranges-section[_ngcontent-%COMP%]   .split-range-item[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:active{background:#ffcdd2;transform:scale(.9)}.empty-state[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:48px 20px;text-align:center;box-shadow:0 2px 8px #00000014}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#999}.bottom-action[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;padding:16px;background:#fff;border-top:1px solid #e0e0e0;z-index:10}.bottom-action[_ngcontent-%COMP%]   .apply-button[_ngcontent-%COMP%]{width:100%;height:52px;background:#ef5350;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s}.bottom-action[_ngcontent-%COMP%]   .apply-button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed;opacity:.6}.bottom-action[_ngcontent-%COMP%]   .apply-button[_ngcontent-%COMP%]:not(:disabled):active{background:#e53935;transform:scale(.98)}.processing-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000}.processing-overlay[_ngcontent-%COMP%]   .processing-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:32px;text-align:center;max-width:300px;width:90%}.processing-overlay[_ngcontent-%COMP%]   .processing-content[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #e0e0e0;border-top-color:#2196f3;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.processing-overlay[_ngcontent-%COMP%]   .processing-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;font-weight:600;color:#333}.processing-overlay[_ngcontent-%COMP%]   .processing-content[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden;margin-bottom:12px}.processing-overlay[_ngcontent-%COMP%]   .processing-content[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ef5350,#e53935);border-radius:4px;transition:width .3s ease}.processing-overlay[_ngcontent-%COMP%]   .processing-content[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#666;font-weight:500}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};function ts(a,t){if(a&1&&(i(0,"option",33),l(1),r()),a&2){let e=t.$implicit;g("value",e.value),c(),D(" ",e.label," ")}}function ns(a,t){if(a&1){let e=w();i(0,"button",34),u("click",function(){let o=f(e).$implicit,s=p();return h(s.onPositionChange(o.value))}),i(1,"span",35),l(2,"1"),r()()}if(a&2){let e=t.$implicit,n=p();R("active",n.settings.position===e.value),le("aria-label",e.value)}}function is(a,t){if(a&1){let e=w();i(0,"button",36),u("click",function(){let o=f(e).$implicit,s=p();return h(s.onTemplateChange(o.value))}),l(1),r()}if(a&2){let e=t.$implicit,n=p();R("active",n.settings.template===e.value),c(),D(" ",e.label," ")}}function os(a,t){a&1&&(i(0,"span"),l(1,"\uD398\uC774\uC9C0 \uBC88\uD638 \uC801\uC6A9"),r())}function rs(a,t){a&1&&(i(0,"span"),l(1,"\uCC98\uB9AC \uC911..."),r())}var Xt=class a{constructor(t,e,n,o){this.router=t;this.indexedDbService=e;this.snackbar=n;this.cdr=o;let s=this.router.getCurrentNavigation();s?.extras.state&&(this.docData=s.extras.state.docData)}docData=null;pdfDoc=null;totalPages=0;isProcessing=!1;settings={font:"Arial",fontSize:12,color:"#000000",position:"bottom-center",template:"1",startNumber:1};positionOptions=[{value:"top-left",row:0,col:0},{value:"top-center",row:0,col:1},{value:"top-right",row:0,col:2},{value:"middle-left",row:1,col:0},{value:"middle-center",row:1,col:1},{value:"middle-right",row:1,col:2},{value:"bottom-left",row:2,col:0},{value:"bottom-center",row:2,col:1},{value:"bottom-right",row:2,col:2}];fontOptions=[{value:"Arial",label:"Arial"},{value:"Helvetica",label:"Helvetica"},{value:"Times",label:"Times New Roman"},{value:"Courier",label:"Courier"}];templateOptions=[{value:"1",label:"1, 2, 3..."},{value:"Page 1",label:"Page 1, Page 2..."},{value:"\uD398\uC774\uC9C0 1",label:"\uD398\uC774\uC9C0 1, \uD398\uC774\uC9C0 2..."},{value:"1/N",label:"1/N, 2/N..."}];ngOnInit(){return x(this,null,function*(){if(console.log("\u{1F522} [PageNumber] \uCEF4\uD3EC\uB10C\uD2B8 \uCD08\uAE30\uD654"),!this.docData){this.snackbar.showError("\uBB38\uC11C \uB370\uC774\uD130\uB97C \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/tools"]);return}try{yield this.loadPdf(),console.log(`\u2705 [PageNumber] PDF \uB85C\uB4DC \uC644\uB8CC: ${this.totalPages}\uD398\uC774\uC9C0`)}catch(t){console.error("\u274C [PageNumber] PDF \uB85C\uB4DC \uC2E4\uD328:",t),this.snackbar.showError("PDF\uB97C \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/tools"])}})}loadPdf(){return x(this,null,function*(){if(!this.docData?.pdfBase64)throw new Error("PDF \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");let t=this.docData.pdfBase64.includes(",")?this.docData.pdfBase64.split(",")[1]:this.docData.pdfBase64,e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);this.pdfDoc=yield PDFLib.PDFDocument.load(n),this.totalPages=this.pdfDoc.getPageCount()})}onFontChange(t){this.settings.font=t.target.value,console.log("\u{1F4DD} [PageNumber] \uD3F0\uD2B8 \uBCC0\uACBD:",this.settings.font)}onFontSizeChange(t){this.settings.fontSize=parseInt(t.target.value,10),console.log("\u{1F4DD} [PageNumber] \uD3F0\uD2B8 \uD06C\uAE30 \uBCC0\uACBD:",this.settings.fontSize)}onColorChange(t){this.settings.color=t.target.value,console.log("\u{1F4DD} [PageNumber] \uC0C9\uC0C1 \uBCC0\uACBD:",this.settings.color)}onPositionChange(t){this.settings.position=t,console.log("\u{1F4DD} [PageNumber] \uC704\uCE58 \uBCC0\uACBD:",t)}onTemplateChange(t){this.settings.template=t,console.log("\u{1F4DD} [PageNumber] \uD15C\uD50C\uB9BF \uBCC0\uACBD:",t)}onStartNumberChange(t){let e=parseInt(t.target.value,10);!isNaN(e)&&e>=1&&(this.settings.startNumber=e,console.log("\u{1F4DD} [PageNumber] \uC2DC\uC791 \uBC88\uD638 \uBCC0\uACBD:",this.settings.startNumber))}generatePageNumberText(t){let e=this.settings.startNumber+t;switch(this.settings.template){case"1":return`${e}`;case"Page 1":return`Page ${e}`;case"\uD398\uC774\uC9C0 1":return`\uD398\uC774\uC9C0 ${e}`;case"1/N":return`${e}/${this.totalPages}`;default:return`${e}`}}applyPageNumbers(){return x(this,null,function*(){if(!(!this.pdfDoc||this.isProcessing))try{this.isProcessing=!0,console.log("\u{1F522} [PageNumber] \uD398\uC774\uC9C0 \uBC88\uD638 \uC801\uC6A9 \uC2DC\uC791");let t;switch(this.settings.font){case"Helvetica":t=yield this.pdfDoc.embedFont(PDFLib.StandardFonts.Helvetica);break;case"Times":t=yield this.pdfDoc.embedFont(PDFLib.StandardFonts.TimesRoman);break;case"Courier":t=yield this.pdfDoc.embedFont(PDFLib.StandardFonts.Courier);break;default:t=yield this.pdfDoc.embedFont(PDFLib.StandardFonts.Helvetica)}let e=this.hexToRgb(this.settings.color),n=this.pdfDoc.getPages();for(let M=0;M<n.length;M++){let y=n[M],{width:k,height:T}=y.getSize(),I=this.generatePageNumberText(M),A=t.widthOfTextAtSize(I,this.settings.fontSize),B=this.settings.fontSize,[K,X]=this.settings.position.split("-"),q=0,Z=40;switch(X){case"left":q=Z;break;case"center":q=(k-A)/2;break;case"right":q=k-A-Z;break}let te=0;switch(K){case"top":te=T-Z;break;case"middle":te=T/2+B/2;break;case"bottom":te=Z;break}y.drawText(I,{x:q,y:te,size:this.settings.fontSize,font:t,color:PDFLib.rgb(e.r,e.g,e.b)}),console.log(`  \u2705 \uD398\uC774\uC9C0 ${M+1}: "${I}" at (${q.toFixed(1)}, ${te.toFixed(1)})`)}let o=yield this.pdfDoc.save();console.log(`\u{1F4BE} [PageNumber] PDF \uC0DD\uC131 \uC644\uB8CC: ${o.length} bytes`);let s=this.docData.fileName||this.docData.title,d=this.generateNewFileName(s),_=this.uint8ArrayToBase64(o),b=`doc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;yield this.indexedDbService.saveDocument({id:b,title:d,fileName:d,pdfBase64:`data:application/pdf;base64,${_}`,thumbnail:"",pages:[],elementCount:0,version:"1.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),documentType:"page-numbered",folderId:this.docData.folderId}),console.log("\u2705 [PageNumber] IndexedDB \uC800\uC7A5 \uC644\uB8CC:",b);let S={fileId:b,fileIds:[b],fileName:d,fileCount:1,title:"\uD398\uC774\uC9C0 \uBC88\uD638 \uCD94\uAC00 \uC644\uB8CC!",subtitle:`${d} \uD30C\uC77C\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`,folderId:this.docData.folderId};console.log("\u{1F500} [PageNumber] file-saved \uD398\uC774\uC9C0\uB85C \uC774\uB3D9:",S),yield this.router.navigate(["/ezm/file-saved"],{state:S}),this.isProcessing=!1}catch(t){console.error("\u274C [PageNumber] \uD398\uC774\uC9C0 \uBC88\uD638 \uC801\uC6A9 \uC2E4\uD328:",t),this.snackbar.showError("\uD398\uC774\uC9C0 \uBC88\uD638 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),this.isProcessing=!1}})}generateNewFileName(t){return`${t.replace(/\.pdf$/i,"")}_\uD398\uC774\uC9C0\uBC88\uD638.pdf`}hexToRgb(t){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16)/255,g:parseInt(e[2],16)/255,b:parseInt(e[3],16)/255}:{r:0,g:0,b:0}}uint8ArrayToBase64(t){let n="";for(let o=0;o<t.length;o+=32768){let s=t.subarray(o,Math.min(o+32768,t.length));n+=String.fromCharCode(...Array.from(s))}return btoa(n)}goBack(){this.router.navigate(["/ezm/myfiles"])}static \u0275fac=function(e){return new(e||a)(z(V),z(J),z(U),z(fe))};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-page-number"]],standalone:!1,decls:60,vars:14,consts:[[1,"header"],[1,"header-left",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M15 18l-6-6 6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"header-center"],[1,"header-right"],[1,"main-content"],[1,"info-card"],[1,"info-icon"],["width","32","height","32","viewBox","0 0 24 24","fill","none"],["x","4","y","2","width","16","height","20","rx","2","stroke","#673AB7","stroke-width","2"],["x","12","y","16","text-anchor","middle","fill","#673AB7","font-size","10","font-weight","bold"],[1,"info-content"],[1,"info-title"],[1,"info-subtitle"],[1,"settings-section"],[1,"setting-group"],[1,"setting-label"],[1,"setting-select",3,"change","value"],[3,"value",4,"ngFor","ngForOf"],["type","range","min","8","max","72",1,"setting-range",3,"input","value"],[1,"range-labels"],[1,"color-picker-wrapper"],["type","color",1,"color-picker",3,"input","value"],[1,"color-value"],[1,"position-grid"],["class","position-block",3,"active","click",4,"ngFor","ngForOf"],[1,"template-grid"],["class","template-btn",3,"active","click",4,"ngFor","ngForOf"],["type","number","min","1",1,"setting-input",3,"input","value"],[1,"action-section"],[1,"apply-btn",3,"click","disabled"],[4,"ngIf"],[3,"value"],[1,"position-block",3,"click"],[1,"position-number"],[1,"template-btn",3,"click"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"button",1),u("click",function(){return n.goBack()}),C(),i(2,"svg",2),m(3,"path",3),r()(),v(),i(4,"div",4)(5,"h2"),l(6,"\uD398\uC774\uC9C0 \uBC88\uD638 \uCD94\uAC00"),r()(),m(7,"div",5),r(),i(8,"div",6)(9,"div",7)(10,"div",8),C(),i(11,"svg",9),m(12,"rect",10),i(13,"text",11),l(14,"1"),r()()(),v(),i(15,"div",12)(16,"div",13),l(17),r(),i(18,"div",14),l(19),r()()(),i(20,"div",15)(21,"div",16)(22,"label",17),l(23,"\uD3F0\uD2B8"),r(),i(24,"select",18),u("change",function(s){return n.onFontChange(s)}),P(25,ts,2,2,"option",19),r()(),i(26,"div",16)(27,"label",17),l(28),r(),i(29,"input",20),u("input",function(s){return n.onFontSizeChange(s)}),r(),i(30,"div",21)(31,"span"),l(32,"8pt"),r(),i(33,"span"),l(34,"72pt"),r()()(),i(35,"div",16)(36,"label",17),l(37,"\uD14D\uC2A4\uD2B8 \uC0C9\uC0C1"),r(),i(38,"div",22)(39,"input",23),u("input",function(s){return n.onColorChange(s)}),r(),i(40,"span",24),l(41),r()()(),i(42,"div",16)(43,"label",17),l(44,"\uD398\uC774\uC9C0 \uBC88\uD638 \uC704\uCE58"),r(),i(45,"div",25),P(46,ns,3,3,"button",26),r()(),i(47,"div",16)(48,"label",17),l(49,"\uD15C\uD50C\uB9BF"),r(),i(50,"div",27),P(51,is,2,3,"button",28),r()(),i(52,"div",16)(53,"label",17),l(54,"\uC2DC\uC791 \uBC88\uD638"),r(),i(55,"input",29),u("input",function(s){return n.onStartNumberChange(s)}),r()()(),i(56,"div",30)(57,"button",31),u("click",function(){return n.applyPageNumbers()}),P(58,os,2,0,"span",32)(59,rs,2,0,"span",32),r()()()),e&2&&(c(17),E((n.docData==null?null:n.docData.fileName)||(n.docData==null?null:n.docData.title)),c(2),D("",n.totalPages,"\uAC1C \uD398\uC774\uC9C0"),c(5),g("value",n.settings.font),c(),g("ngForOf",n.fontOptions),c(3),D("\uD06C\uAE30: ",n.settings.fontSize,"pt"),c(),g("value",n.settings.fontSize),c(10),g("value",n.settings.color),c(2),E(n.settings.color),c(5),g("ngForOf",n.positionOptions),c(5),g("ngForOf",n.templateOptions),c(4),g("value",n.settings.startNumber),c(2),g("disabled",n.isProcessing),c(),g("ngIf",!n.isProcessing),c(),g("ngIf",n.isProcessing))},dependencies:[ne,j,Ee,De],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh;background-color:#f5f5f5}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:56px;padding:0 8px;background-color:#fff;border-bottom:1px solid #e0e0e0;position:sticky;top:0;z-index:100}.header-left[_ngcontent-%COMP%], .header-right[_ngcontent-%COMP%]{width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:none;border:none;cursor:pointer;color:#333}.header-left[_ngcontent-%COMP%]:active, .header-right[_ngcontent-%COMP%]:active{opacity:.6}.header-center[_ngcontent-%COMP%]{flex:1;text-align:center}.header-center[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px 16px 100px}.info-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background-color:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000d;margin-bottom:24px}.info-icon[_ngcontent-%COMP%]{flex-shrink:0;width:48px;height:48px;display:flex;align-items:center;justify-content:center;background-color:#f3e5f5;border-radius:12px}.info-content[_ngcontent-%COMP%]{flex:1;min-width:0}.info-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:4px}.info-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#666}.settings-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.setting-group[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;padding:16px;box-shadow:0 2px 8px #0000000d}.setting-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#333;margin-bottom:12px}.setting-select[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:15px;border:1px solid #e0e0e0;border-radius:8px;background-color:#fff;color:#333;cursor:pointer}.setting-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#673ab7}.setting-range[_ngcontent-%COMP%]{width:100%;height:6px;border-radius:3px;background:#e0e0e0;outline:none;-webkit-appearance:none;appearance:none}.setting-range[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;border-radius:50%;background:#673ab7;cursor:pointer}.setting-range[_ngcontent-%COMP%]::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:#673ab7;cursor:pointer;border:none}.range-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:8px;font-size:12px;color:#999}.color-picker-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.color-picker[_ngcontent-%COMP%]{width:60px;height:40px;border:1px solid #e0e0e0;border-radius:8px;cursor:pointer}.color-picker[_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:0}.color-picker[_ngcontent-%COMP%]::-webkit-color-swatch{border:none;border-radius:8px}.color-value[_ngcontent-%COMP%]{font-size:14px;font-family:monospace;color:#666}.position-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;padding:8px;background-color:#f8f9fa;border-radius:12px;max-width:280px;margin:0 auto}.position-block[_ngcontent-%COMP%]{aspect-ratio:1;display:flex;align-items:center;justify-content:center;background-color:#fff;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .2s;position:relative;min-height:70px}.position-block[_ngcontent-%COMP%]:active{transform:scale(.95)}.position-block.active[_ngcontent-%COMP%]{background-color:#673ab7;border-color:#673ab7;box-shadow:0 4px 12px #673ab74d}.position-block.active[_ngcontent-%COMP%]   .position-number[_ngcontent-%COMP%]{color:#fff;font-weight:700}.position-block[_ngcontent-%COMP%]:not(.active):hover{border-color:#673ab7;background-color:#f3e5f5}.position-number[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#666;transition:all .2s}.position-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.position-btn[_ngcontent-%COMP%]{flex:1;padding:12px;font-size:14px;font-weight:500;color:#666;background-color:#f5f5f5;border:1px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .2s}.position-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.position-btn.active[_ngcontent-%COMP%]{color:#fff;background-color:#673ab7;border-color:#673ab7}.template-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:8px}.template-btn[_ngcontent-%COMP%]{padding:12px;font-size:14px;font-weight:500;color:#666;background-color:#f5f5f5;border:1px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .2s;text-align:center}.template-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.template-btn.active[_ngcontent-%COMP%]{color:#fff;background-color:#673ab7;border-color:#673ab7}.setting-input[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:15px;border:1px solid #e0e0e0;border-radius:8px;background-color:#fff;color:#333}.setting-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#673ab7}.setting-input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield;appearance:textfield}.setting-input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .setting-input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.action-section[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;padding:16px;background-color:#fff;border-top:1px solid #e0e0e0;z-index:90}.apply-btn[_ngcontent-%COMP%]{width:100%;padding:16px;font-size:16px;font-weight:600;color:#fff;background-color:#673ab7;border:none;border-radius:12px;cursor:pointer;transition:all .2s}.apply-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98);background-color:#5e35b1}.apply-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}"]})};var st=class a{constructor(){this.setupMessageListener()}isNativeEncryptionAvailable(){return!!(window.webkit?.messageHandlers?.pdfEncryption||window.AndroidBridge?.postMessage)}encryptPdf(t,e,n){return x(this,null,function*(){return new Promise((o,s)=>{let d=`encrypt_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,_=S=>{let M=S.data;M.type==="PDF_ENCRYPT_RESPONSE"&&M.callbackId===d&&(window.removeEventListener("message",_),M.success?o(M.encryptedPdfBase64):s(new Error(M.error||"\uC554\uD638\uD654 \uC2E4\uD328")))};window.addEventListener("message",_);let b={type:"PDF_ENCRYPT_REQUEST",callbackId:d,data:{pdfBase64:t,password:e,permissions:n}};try{if(window.webkit?.messageHandlers?.pdfEncryption)window.webkit.messageHandlers.pdfEncryption.postMessage(b),console.log("\u{1F4E4} iOS Native\uC5D0 \uC554\uD638\uD654 \uC694\uCCAD \uC804\uC1A1:",d);else if(window.AndroidBridge?.postMessage)window.AndroidBridge.postMessage(JSON.stringify(b)),console.log("\u{1F4E4} Android Native\uC5D0 \uC554\uD638\uD654 \uC694\uCCAD \uC804\uC1A1:",d);else{window.removeEventListener("message",_),s(new Error("\uB124\uC774\uD2F0\uBE0C \uBE0C\uB9BF\uC9C0\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."));return}}catch(S){window.removeEventListener("message",_),s(S);return}setTimeout(()=>{window.removeEventListener("message",_),s(new Error("\uC554\uD638\uD654 \uD0C0\uC784\uC544\uC6C3 (30\uCD08 \uCD08\uACFC)"))},3e4)})})}setupMessageListener(){window.AndroidBridge&&(window.onNativeMessage=t=>{try{let e=JSON.parse(t);window.postMessage(e,"*")}catch(e){console.error("\u274C Native \uBA54\uC2DC\uC9C0 \uD30C\uC2F1 \uC2E4\uD328:",e)}})}decryptPdf(t,e){return x(this,null,function*(){return new Promise((n,o)=>{let s=`decrypt_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,d=b=>{let S=b.data;S.type==="PDF_DECRYPT_RESPONSE"&&S.callbackId===s&&(window.removeEventListener("message",d),S.success?n(S.encryptedPdfBase64):o(new Error(S.error||"\uBCF5\uD638\uD654 \uC2E4\uD328")))};window.addEventListener("message",d);let _={type:"PDF_DECRYPT_REQUEST",callbackId:s,data:{encryptedPdfBase64:t,password:e}};try{if(window.webkit?.messageHandlers?.pdfEncryption)window.webkit.messageHandlers.pdfEncryption.postMessage(_);else if(window.AndroidBridge?.postMessage)window.AndroidBridge.postMessage(JSON.stringify(_));else{window.removeEventListener("message",d),o(new Error("\uB124\uC774\uD2F0\uBE0C \uBE0C\uB9BF\uC9C0\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."));return}}catch(b){window.removeEventListener("message",d),o(b);return}setTimeout(()=>{window.removeEventListener("message",d),o(new Error("\uBCF5\uD638\uD654 \uD0C0\uC784\uC544\uC6C3"))},3e4)})})}static \u0275fac=function(e){return new(e||a)};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};function as(a,t){if(a&1&&(i(0,"div",37)(1,"div",38),l(2,"\u{1F4C4}"),r(),i(3,"div",39)(4,"div",40),l(5),r(),i(6,"div",41),l(7),r()()()),a&2){let e=p();c(5),E(e.document.title),c(2),E(e.document.fileSize?(e.document.fileSize/1024/1024).toFixed(2)+" MB":"\uD06C\uAE30 \uC815\uBCF4 \uC5C6\uC74C")}}function ss(a,t){a&1&&(C(),i(0,"svg",42),m(1,"path",43)(2,"circle",44),r())}function ls(a,t){a&1&&(C(),i(0,"svg",42),m(1,"path",45)(2,"line",46),r())}function cs(a,t){if(a&1&&(i(0,"div",47)(1,"div",48),m(2,"div",49),r(),i(3,"span",50),l(4),r()()),a&2){let e=p();c(2),L("width",e.passwordStrength.score,"%")("background-color",e.passwordStrength.color),c(),L("color",e.passwordStrength.color),c(),D(" ",e.passwordStrength.label," ")}}function ds(a,t){a&1&&(C(),i(0,"svg",42),m(1,"path",43)(2,"circle",44),r())}function ps(a,t){a&1&&(C(),i(0,"svg",42),m(1,"path",45)(2,"line",46),r())}function gs(a,t){a&1&&(i(0,"span"),l(1,"\uC554\uD638\uD654 \uC801\uC6A9"),r())}function ms(a,t){a&1&&(i(0,"span"),l(1,"\uC554\uD638\uD654 \uC911..."),r())}function us(a,t){a&1&&(i(0,"div",51),m(1,"div",52),i(2,"p"),l(3,"PDF \uC554\uD638\uD654 \uC911..."),r()())}var Qt=class a{document=null;password="";passwordConfirm="";showPassword=!1;showPasswordConfirm=!1;permissions={allowPrinting:!0,allowCopy:!1,allowEdit:!1,allowAnnotations:!1};encryptionLevel="256-bit";isLoading=!1;passwordStrength={score:0,label:"",color:""};router=O(V);indexedDbService=O(J);snackbar=O(U);pdfEncryptionService=O(st);ngOnInit(){let e=this.router.getCurrentNavigation()?.extras?.state||history.state;e&&e.document?(this.document=e.document,console.log("\u{1F4C4} \uC554\uD638\uD654\uD560 \uBB38\uC11C:",this.document?.title)):(this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/myfiles"]))}onPasswordChange(){this.passwordStrength=this.calculatePasswordStrength(this.password)}calculatePasswordStrength(t){if(!t)return{score:0,label:"",color:""};let e=0;t.length>=8&&(e+=25),t.length>=12&&(e+=25),/[a-z]/.test(t)&&(e+=10),/[A-Z]/.test(t)&&(e+=15),/[0-9]/.test(t)&&(e+=15),/[^a-zA-Z0-9]/.test(t)&&(e+=10);let n="",o="";return e<30?(n="\uC57D\uD568",o="#f44336"):e<60?(n="\uBCF4\uD1B5",o="#FF9800"):(n="\uAC15\uD568",o="#4CAF50"),{score:e,label:n,color:o}}togglePasswordVisibility(){this.showPassword=!this.showPassword}togglePasswordConfirmVisibility(){this.showPasswordConfirm=!this.showPasswordConfirm}validateForm(){return this.password?this.password.length<6?{isValid:!1,error:"\uBE44\uBC00\uBC88\uD638\uB294 \uCD5C\uC18C 6\uC790 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4."}:this.password!==this.passwordConfirm?{isValid:!1,error:"\uBE44\uBC00\uBC88\uD638\uAC00 \uC77C\uCE58\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4."}:{isValid:!0}:{isValid:!1,error:"\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694."}}onApplyEncryption(){return x(this,null,function*(){if(!this.document){this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let t=this.validateForm();if(!t.isValid){this.snackbar.showWarning(t.error);return}try{if(this.isLoading=!0,this.pdfEncryptionService.isNativeEncryptionAvailable()){let e=yield this.pdfEncryptionService.encryptPdf(this.document.pdfBase64,this.password,this.permissions),n=yield this.indexedDbService.getDocumentById(this.document.id);n&&(n.pdfBase64=e,n.isEncrypted=!0,n.updatedAt=Date.now().toString(),yield this.indexedDbService.saveDocument(n)),this.snackbar.showSuccess("PDF\uAC00 \uC554\uD638\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/myfiles"])}else{this.snackbar.showWarning("\uB124\uC774\uD2F0\uBE0C \uC554\uD638\uD654\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC554\uD638\uD654 \uC815\uBCF4\uB9CC \uC800\uC7A5\uB429\uB2C8\uB2E4.");let e=yield this.indexedDbService.getDocumentById(this.document.id);e&&(e.isEncrypted=!0,e.encryptionMetadata={password:this.password,permissions:this.permissions,encryptionLevel:this.encryptionLevel},e.updatedAt=Date.now().toString(),yield this.indexedDbService.saveDocument(e)),this.snackbar.showInfo("\uC554\uD638\uD654 \uC124\uC815\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/myfiles"])}}catch(e){console.error("\uC554\uD638\uD654 \uC2E4\uD328:",e),this.snackbar.showError(e.message||"\uC554\uD638\uD654\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}finally{this.isLoading=!1}})}onCancel(){this.router.navigate(["/ezm/myfiles"])}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-encrypt"]],standalone:!1,decls:99,vars:21,consts:[[1,"encrypt-container"],[1,"encrypt-header"],[1,"back-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M19 12H5M12 19l-7-7 7-7"],[1,"title"],[1,"spacer"],[1,"encrypt-content"],["class","document-info",4,"ngIf"],[1,"section"],[1,"section-title"],[1,"input-group"],[1,"password-input-wrapper"],["placeholder","\uCD5C\uC18C 6\uC790 \uC774\uC0C1",1,"input-field",3,"ngModelChange","type","ngModel"],["type","button",1,"toggle-visibility-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",4,"ngIf"],["class","password-strength",4,"ngIf"],["placeholder","\uBE44\uBC00\uBC88\uD638\uB97C \uB2E4\uC2DC \uC785\uB825\uD558\uC138\uC694",1,"input-field",3,"ngModelChange","type","ngModel"],[1,"permissions-list"],[1,"permission-item"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"permission-info"],[1,"permission-icon"],[1,"permission-label"],[1,"permission-desc"],[1,"encryption-levels"],[1,"encryption-level-item"],["type","radio","name","encryptionLevel","value","128-bit",3,"ngModelChange","ngModel"],[1,"level-info"],[1,"level-label"],[1,"level-desc"],["type","radio","name","encryptionLevel","value","256-bit",3,"ngModelChange","ngModel"],[1,"encrypt-footer"],[1,"btn-cancel",3,"click","disabled"],[1,"btn-apply",3,"click","disabled"],[4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"document-info"],[1,"doc-icon"],[1,"doc-details"],[1,"doc-name"],[1,"doc-size"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],["d","M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"],["x1","1","y1","1","x2","23","y2","23"],[1,"password-strength"],[1,"strength-bar"],[1,"strength-bar-fill"],[1,"strength-label"],[1,"loading-overlay"],[1,"spinner"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),u("click",function(){return n.onCancel()}),C(),i(3,"svg",3),m(4,"path",4),r()(),v(),i(5,"h1",5),l(6,"PDF \uC554\uD638\uD654"),r(),m(7,"div",6),r(),i(8,"div",7),P(9,as,8,2,"div",8),i(10,"div",9)(11,"h3",10),l(12,"\uBE44\uBC00\uBC88\uD638 \uC124\uC815"),r(),i(13,"div",11)(14,"label"),l(15,"\uBE44\uBC00\uBC88\uD638"),r(),i(16,"div",12)(17,"input",13),W("ngModelChange",function(s){return $(n.password,s)||(n.password=s),s}),u("ngModelChange",function(){return n.onPasswordChange()}),r(),i(18,"button",14),u("click",function(){return n.togglePasswordVisibility()}),P(19,ss,3,0,"svg",15)(20,ls,3,0,"svg",15),r()(),P(21,cs,5,7,"div",16),r(),i(22,"div",11)(23,"label"),l(24,"\uBE44\uBC00\uBC88\uD638 \uD655\uC778"),r(),i(25,"div",12)(26,"input",17),W("ngModelChange",function(s){return $(n.passwordConfirm,s)||(n.passwordConfirm=s),s}),r(),i(27,"button",14),u("click",function(){return n.togglePasswordConfirmVisibility()}),P(28,ds,3,0,"svg",15)(29,ps,3,0,"svg",15),r()()()(),i(30,"div",9)(31,"h3",10),l(32,"\uBB38\uC11C \uAD8C\uD55C \uC124\uC815"),r(),i(33,"div",18)(34,"label",19)(35,"input",20),W("ngModelChange",function(s){return $(n.permissions.allowPrinting,s)||(n.permissions.allowPrinting=s),s}),r(),i(36,"div",21)(37,"div",22),l(38,"\u{1F5A8}\uFE0F"),r(),i(39,"div")(40,"div",23),l(41,"\uC778\uC1C4 \uD5C8\uC6A9"),r(),i(42,"div",24),l(43,"\uBB38\uC11C\uB97C \uC778\uC1C4\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4"),r()()()(),i(44,"label",19)(45,"input",20),W("ngModelChange",function(s){return $(n.permissions.allowCopy,s)||(n.permissions.allowCopy=s),s}),r(),i(46,"div",21)(47,"div",22),l(48,"\u{1F4CB}"),r(),i(49,"div")(50,"div",23),l(51,"\uBCF5\uC0AC \uD5C8\uC6A9"),r(),i(52,"div",24),l(53,"\uD14D\uC2A4\uD2B8\uB97C \uBCF5\uC0AC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4"),r()()()(),i(54,"label",19)(55,"input",20),W("ngModelChange",function(s){return $(n.permissions.allowEdit,s)||(n.permissions.allowEdit=s),s}),r(),i(56,"div",21)(57,"div",22),l(58,"\u270F\uFE0F"),r(),i(59,"div")(60,"div",23),l(61,"\uD3B8\uC9D1 \uD5C8\uC6A9"),r(),i(62,"div",24),l(63,"\uBB38\uC11C\uB97C \uD3B8\uC9D1\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4"),r()()()(),i(64,"label",19)(65,"input",20),W("ngModelChange",function(s){return $(n.permissions.allowAnnotations,s)||(n.permissions.allowAnnotations=s),s}),r(),i(66,"div",21)(67,"div",22),l(68,"\u{1F4AC}"),r(),i(69,"div")(70,"div",23),l(71,"\uC8FC\uC11D \uD5C8\uC6A9"),r(),i(72,"div",24),l(73,"\uC8FC\uC11D\uC744 \uCD94\uAC00\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4"),r()()()()()(),i(74,"div",9)(75,"h3",10),l(76,"\uC554\uD638\uD654 \uC218\uC900"),r(),i(77,"div",25)(78,"label",26)(79,"input",27),W("ngModelChange",function(s){return $(n.encryptionLevel,s)||(n.encryptionLevel=s),s}),r(),i(80,"div",28)(81,"div",29),l(82,"128-bit AES"),r(),i(83,"div",30),l(84,"\uD45C\uC900 \uC554\uD638\uD654"),r()()(),i(85,"label",26)(86,"input",31),W("ngModelChange",function(s){return $(n.encryptionLevel,s)||(n.encryptionLevel=s),s}),r(),i(87,"div",28)(88,"div",29),l(89,"256-bit AES (\uAD8C\uC7A5)"),r(),i(90,"div",30),l(91,"\uACE0\uAE09 \uC554\uD638\uD654"),r()()()()()(),i(92,"div",32)(93,"button",33),u("click",function(){return n.onCancel()}),l(94," \uCDE8\uC18C "),r(),i(95,"button",34),u("click",function(){return n.onApplyEncryption()}),P(96,gs,2,0,"span",35)(97,ms,2,0,"span",35),r()(),P(98,us,4,0,"div",36),r()),e&2&&(c(9),g("ngIf",n.document),c(8),g("type",n.showPassword?"text":"password"),G("ngModel",n.password),c(2),g("ngIf",!n.showPassword),c(),g("ngIf",n.showPassword),c(),g("ngIf",n.password),c(5),g("type",n.showPasswordConfirm?"text":"password"),G("ngModel",n.passwordConfirm),c(2),g("ngIf",!n.showPasswordConfirm),c(),g("ngIf",n.showPasswordConfirm),c(6),G("ngModel",n.permissions.allowPrinting),c(10),G("ngModel",n.permissions.allowCopy),c(10),G("ngModel",n.permissions.allowEdit),c(10),G("ngModel",n.permissions.allowAnnotations),c(14),G("ngModel",n.encryptionLevel),c(7),G("ngModel",n.encryptionLevel),c(7),g("disabled",n.isLoading),c(2),g("disabled",n.isLoading),c(),g("ngIf",!n.isLoading),c(),g("ngIf",n.isLoading),c(),g("ngIf",n.isLoading))},dependencies:[j,ce,Nn,$n,re,ae],styles:[".encrypt-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;background:#f5f5f5}.encrypt-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;background:#fff;border-bottom:1px solid #e0e0e0;position:sticky;top:0;z-index:10}.encrypt-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#333}.encrypt-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-radius:4px}.encrypt-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:18px;font-weight:600;margin:0}.encrypt-header[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{width:40px}.encrypt-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px}.document-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#fff;border-radius:8px;margin-bottom:16px;box-shadow:0 1px 3px #0000001a}.document-info[_ngcontent-%COMP%]   .doc-icon[_ngcontent-%COMP%]{font-size:32px}.document-info[_ngcontent-%COMP%]   .doc-details[_ngcontent-%COMP%]{flex:1}.document-info[_ngcontent-%COMP%]   .doc-details[_ngcontent-%COMP%]   .doc-name[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#333;margin-bottom:4px}.document-info[_ngcontent-%COMP%]   .doc-details[_ngcontent-%COMP%]   .doc-size[_ngcontent-%COMP%]{font-size:14px;color:#666}.section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;margin-bottom:16px;box-shadow:0 1px 3px #0000001a}.section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0 0 16px;color:#333}.input-group[_ngcontent-%COMP%]{margin-bottom:16px}.input-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#333;margin-bottom:8px}.input-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]{position:relative}.input-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box}.input-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3}.input-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-visibility-btn[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:none;border:none;padding:4px;cursor:pointer;color:#666}.input-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-visibility-btn[_ngcontent-%COMP%]:hover{color:#333}.input-group[_ngcontent-%COMP%]   .password-strength[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:center;gap:8px}.input-group[_ngcontent-%COMP%]   .password-strength[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]{flex:1;height:4px;background:#e0e0e0;border-radius:2px;overflow:hidden}.input-group[_ngcontent-%COMP%]   .password-strength[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]   .strength-bar-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s,background-color .3s}.input-group[_ngcontent-%COMP%]   .password-strength[_ngcontent-%COMP%]   .strength-label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;white-space:nowrap}.permissions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.permissions-list[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:12px;border:1px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:background .2s}.permissions-list[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]:hover{background:#f9f9f9}.permissions-list[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:2px;width:18px;height:18px;cursor:pointer}.permissions-list[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .permission-info[_ngcontent-%COMP%]{flex:1;display:flex;gap:12px}.permissions-list[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .permission-info[_ngcontent-%COMP%]   .permission-icon[_ngcontent-%COMP%]{font-size:24px}.permissions-list[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .permission-info[_ngcontent-%COMP%]   .permission-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;margin-bottom:2px}.permissions-list[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .permission-info[_ngcontent-%COMP%]   .permission-desc[_ngcontent-%COMP%]{font-size:12px;color:#666}.encryption-levels[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.encryption-levels[_ngcontent-%COMP%]   .encryption-level-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:border-color .2s,background .2s}.encryption-levels[_ngcontent-%COMP%]   .encryption-level-item[_ngcontent-%COMP%]:hover{background:#f9f9f9}.encryption-levels[_ngcontent-%COMP%]   .encryption-level-item[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.encryption-levels[_ngcontent-%COMP%]   .encryption-level-item[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked ~ .level-info[_ngcontent-%COMP%]   .level-label[_ngcontent-%COMP%]{color:#2196f3}.encryption-levels[_ngcontent-%COMP%]   .encryption-level-item[_ngcontent-%COMP%]:has(input[type=radio]:checked){border-color:#2196f3;background:#e3f2fd}.encryption-levels[_ngcontent-%COMP%]   .encryption-level-item[_ngcontent-%COMP%]   .level-info[_ngcontent-%COMP%]{flex:1}.encryption-levels[_ngcontent-%COMP%]   .encryption-level-item[_ngcontent-%COMP%]   .level-info[_ngcontent-%COMP%]   .level-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;margin-bottom:2px}.encryption-levels[_ngcontent-%COMP%]   .encryption-level-item[_ngcontent-%COMP%]   .level-info[_ngcontent-%COMP%]   .level-desc[_ngcontent-%COMP%]{font-size:12px;color:#666}.encrypt-footer[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px;background:#fff;border-top:1px solid #e0e0e0}.encrypt-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%], .encrypt-footer[_ngcontent-%COMP%]   .btn-apply[_ngcontent-%COMP%]{flex:1;padding:14px;border:none;border-radius:8px;font-size:16px;font-weight:500;cursor:pointer;transition:background .2s}.encrypt-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:disabled, .encrypt-footer[_ngcontent-%COMP%]   .btn-apply[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.encrypt-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#f5f5f5;color:#333}.encrypt-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover:not(:disabled){background:#e0e0e0}.encrypt-footer[_ngcontent-%COMP%]   .btn-apply[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.encrypt-footer[_ngcontent-%COMP%]   .btn-apply[_ngcontent-%COMP%]:hover:not(:disabled){background:#1976d2}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}.loading-overlay[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;color:#fff;font-size:16px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};var fs=a=>({encrypted:a});function hs(a,t){if(a&1&&(i(0,"div",22)(1,"div",23)(2,"div",24),C(),i(3,"svg",25),m(4,"rect",26)(5,"path",27),r()()(),v(),i(6,"div",28)(7,"h2",29),l(8),r(),i(9,"div",30)(10,"span",31),C(),i(11,"svg",32),m(12,"path",33)(13,"polyline",34),r(),l(14," PDF \uBB38\uC11C "),r(),v(),i(15,"span",35),C(),i(16,"svg",32),m(17,"rect",26)(18,"path",27),r(),l(19),r()()()()),a&2){let e=p();c(8),E(e.document.title),c(7),g("ngClass",Fn(3,fs,!e.isNonEncrypted)),c(4),D(" ",e.isNonEncrypted?"\uBE44\uC554\uD638\uD654":"\uC554\uD638\uD654\uB428"," ")}}function Cs(a,t){a&1&&(i(0,"div",36)(1,"div",37)(2,"h3",38),l(3,"\u{1F510} \uC554\uD638\uD654\uB41C \uBB38\uC11C\uC785\uB2C8\uB2E4"),r(),i(4,"p",39),l(5," \uC774 \uBB38\uC11C\uB294 \uBE44\uBC00\uBC88\uD638\uB85C \uBCF4\uD638\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4."),m(6,"br"),l(7," \uBB38\uC11C\uB97C \uC5F4\uB824\uBA74 \uC62C\uBC14\uB978 \uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694. "),r()()())}function _s(a,t){a&1&&(i(0,"div",40)(1,"div",37)(2,"h3",38),l(3,"\u{1F4D6} \uC554\uD638\uD654\uB418\uC9C0 \uC54A\uC740 \uBB38\uC11C\uC785\uB2C8\uB2E4"),r(),i(4,"p",39),l(5," \uC774 \uBB38\uC11C\uB294 \uBE44\uBC00\uBC88\uD638 \uC124\uC815\uC774 \uB418\uC5B4\uC788\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4."),m(6,"br"),l(7," \uBC14\uB85C \uC5F4\uAE30\uB97C \uD074\uB9AD\uD558\uC5EC \uBB38\uC11C\uB97C \uD655\uC778\uD558\uC138\uC694. "),r()()())}function bs(a,t){a&1&&(C(),i(0,"svg",45),m(1,"path",54)(2,"circle",55),r())}function xs(a,t){a&1&&(C(),i(0,"svg",45),m(1,"path",56)(2,"line",57),r())}function vs(a,t){if(a&1&&(i(0,"p",64)(1,"strong"),l(2,"\uC8FC\uC758:"),r(),l(3),r()),a&2){let e=p(3);c(3),D(" ",e.maxAttempts-e.attemptCount,"\uD68C \uB0A8\uC558\uC2B5\uB2C8\uB2E4! ")}}function Ps(a,t){if(a&1&&(i(0,"div",58)(1,"div",59),C(),i(2,"svg",32),m(3,"circle",60)(4,"line",61)(5,"line",62),r(),v(),i(6,"span"),l(7),r()(),P(8,vs,4,1,"p",63),r()),a&2){let e=p(2);c(),R("danger",e.attemptCount>=e.maxAttempts-1),c(6),ze("",e.attemptCount," / ",e.maxAttempts,"\uD68C \uC2DC\uB3C4"),c(),g("ngIf",e.attemptCount>=e.maxAttempts-1)}}function Ms(a,t){if(a&1){let e=w();i(0,"div",41)(1,"h3",42),l(2,"\uBE44\uBC00\uBC88\uD638 \uC785\uB825"),r(),i(3,"div",43)(4,"div",44),C(),i(5,"svg",45),m(6,"path",46)(7,"path",47),r()(),v(),i(8,"input",48),W("ngModelChange",function(o){f(e);let s=p();return $(s.password,o)||(s.password=o),h(o)}),u("keyup.enter",function(){f(e);let o=p();return h(o.onDecrypt())}),r(),i(9,"button",49),u("click",function(){f(e);let o=p();return h(o.togglePasswordVisibility())}),P(10,bs,3,0,"svg",50)(11,xs,3,0,"svg",50),r()(),P(12,Ps,9,5,"div",51),i(13,"div",52)(14,"button",53),u("click",function(){f(e);let o=p();return h(o.onForgotPassword())}),l(15," \uBE44\uBC00\uBC88\uD638\uB97C \uC78A\uC73C\uC168\uB098\uC694? "),r()()()}if(a&2){let e=p();c(8),g("type",e.showPassword?"text":"password"),G("ngModel",e.password),g("disabled",e.attemptCount>=e.maxAttempts),c(),g("disabled",e.attemptCount>=e.maxAttempts),c(),g("ngIf",!e.showPassword),c(),g("ngIf",e.showPassword),c(),g("ngIf",e.attemptCount>0)}}function ws(a,t){if(a&1&&(i(0,"div",65)(1,"div",66),C(),i(2,"svg",45),m(3,"path",67)(4,"line",68)(5,"line",69),r(),v(),i(6,"strong"),l(7,"\uBCF4\uC548 \uC548\uB0B4"),r()(),i(8,"ul",70)(9,"li"),l(10),r(),i(11,"li"),l(12,"\uBE44\uBC00\uBC88\uD638\uB97C \uBD84\uC2E4\uD55C \uACBD\uC6B0 \uBB38\uC11C\uB97C \uBCF5\uAD6C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),r(),i(13,"li"),l(14,"\uC554\uD638 \uD574\uC81C \uD6C4 \uBB38\uC11C\uB294 \uB2E4\uC2DC \uC554\uD638\uD654\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),r(),i(15,"li"),l(16,"\uD574\uC81C\uB41C \uBB38\uC11C\uB294 \uC548\uC804\uD558\uAC8C \uC800\uC7A5\uB429\uB2C8\uB2E4."),r()()()),a&2){let e=p();c(10),D("\uBE44\uBC00\uBC88\uD638\uB294 \uCD5C\uB300 ",e.maxAttempts,"\uD68C\uAE4C\uC9C0 \uC785\uB825\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.")}}function ys(a,t){if(a&1&&(i(0,"span"),l(1),r()),a&2){let e=p();c(),E(e.isNonEncrypted?"\uBB38\uC11C \uC5F4\uAE30":"\uC554\uD638 \uD574\uC81C\uD558\uAE30")}}function Ss(a,t){if(a&1&&(i(0,"span"),l(1),r()),a&2){let e=p();c(),E(e.isNonEncrypted?"\uC5EC\uB294 \uC911...":"\uD574\uC81C \uC911...")}}function Os(a,t){a&1&&(i(0,"div",71)(1,"div",72),m(2,"div",73),i(3,"h3"),l(4,"\uC554\uD638 \uD574\uC81C \uC911..."),r(),i(5,"p"),l(6,"\uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824\uC8FC\uC138\uC694"),r()()())}var Jt=class a{document=null;password="";showPassword=!1;isLoading=!1;attemptCount=0;maxAttempts=5;isNonEncrypted=!1;router=O(V);indexedDbService=O(J);snackbar=O(U);pdfEncryptionService=O(st);ngOnInit(){let e=this.router.getCurrentNavigation()?.extras?.state||history.state;e&&e.document?(this.document=e.document,console.log("\u{1F513} \uBB38\uC11C \uC5F4\uAE30 \uC2DC\uB3C4:",this.document?.title),this.document&&!this.document.isEncrypted&&(console.log("\u26A0\uFE0F \uC554\uD638\uD654\uB418\uC9C0 \uC54A\uC740 \uBB38\uC11C - \uBC14\uB85C \uC5F4\uAE30 \uBAA8\uB4DC"),this.isNonEncrypted=!0),console.log("\u{1F512} \uBE44\uBC00\uBC88\uD638 \uC785\uB825 \uD544\uC694")):(this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/myfiles"]))}togglePasswordVisibility(){this.showPassword=!this.showPassword}onDecrypt(){return x(this,null,function*(){if(!this.document){this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(this.isNonEncrypted){this.isLoading=!0;try{this.snackbar.showSuccess("\uBB38\uC11C\uB97C \uC5FD\uB2C8\uB2E4."),this.router.navigate(["/ezm/viewer"],{state:{document:this.document}})}catch(t){console.error("\uBB38\uC11C \uC5F4\uAE30 \uC2E4\uD328:",t),this.snackbar.showError("\uBB38\uC11C\uB97C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}finally{this.isLoading=!1}return}if(!this.password){this.snackbar.showWarning("\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694.");return}if(this.attemptCount>=this.maxAttempts){this.snackbar.showError(`\uCD5C\uB300 \uC2DC\uB3C4 \uD69F\uC218(${this.maxAttempts}\uD68C)\uB97C \uCD08\uACFC\uD588\uC2B5\uB2C8\uB2E4.`);return}try{if(this.isLoading=!0,this.attemptCount++,this.pdfEncryptionService.isNativeEncryptionAvailable()){let t=yield this.pdfEncryptionService.decryptPdf(this.document.pdfBase64,this.password),e=yield this.indexedDbService.getDocumentById(this.document.id);e&&(e.pdfBase64=t,e.isEncrypted=!1,delete e.encryptionMetadata,e.updatedAt=Date.now().toString(),yield this.indexedDbService.saveDocument(e)),this.snackbar.showSuccess("PDF \uC554\uD638\uAC00 \uD574\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/viewer"],{state:{document:e}})}else{let t=this.document.encryptionMetadata;if(t&&t.password===this.password){let e=yield this.indexedDbService.getDocumentById(this.document.id);e&&(e.isEncrypted=!1,delete e.encryptionMetadata,e.updatedAt=Date.now().toString(),yield this.indexedDbService.saveDocument(e)),this.snackbar.showSuccess("\uC554\uD638 \uD574\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.router.navigate(["/ezm/viewer"],{state:{document:e}})}else{let e=this.maxAttempts-this.attemptCount;this.snackbar.showError(`\uC798\uBABB\uB41C \uBE44\uBC00\uBC88\uD638\uC785\uB2C8\uB2E4. (\uB0A8\uC740 \uC2DC\uB3C4: ${e}\uD68C)`),this.password=""}}}catch(t){if(console.error("\uC554\uD638 \uD574\uC81C \uC2E4\uD328:",t),t.message.includes("\uBE44\uBC00\uBC88\uD638")||t.message.includes("password")){let e=this.maxAttempts-this.attemptCount;e>0?(this.snackbar.showError(`\uC798\uBABB\uB41C \uBE44\uBC00\uBC88\uD638\uC785\uB2C8\uB2E4. (\uB0A8\uC740 \uC2DC\uB3C4: ${e}\uD68C)`),this.password=""):this.snackbar.showError("\uCD5C\uB300 \uC2DC\uB3C4 \uD69F\uC218\uB97C \uCD08\uACFC\uD588\uC2B5\uB2C8\uB2E4.")}else this.snackbar.showError(t.message||"\uC554\uD638 \uD574\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}finally{this.isLoading=!1}})}onCancel(){this.router.navigate(["/ezm/myfiles"])}onForgotPassword(){this.snackbar.showWarning("\uBE44\uBC00\uBC88\uD638\uB97C \uC78A\uC73C\uC168\uB2E4\uBA74 \uBB38\uC11C\uB97C \uBCF5\uAD6C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC554\uD638\uD654\uB41C \uC6D0\uBCF8\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.")}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-decrypt"]],standalone:!1,decls:26,vars:10,consts:[[1,"decrypt-container"],[1,"decrypt-header"],[1,"back-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M19 12H5M12 19l-7-7 7-7"],[1,"title"],[1,"spacer"],[1,"decrypt-content"],["class","document-info-card",4,"ngIf"],["class","info-card",4,"ngIf"],["class","info-card success-card",4,"ngIf"],["class","password-section",4,"ngIf"],["class","warning-card",4,"ngIf"],[1,"decrypt-footer"],[1,"btn-cancel",3,"click","disabled"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"btn-decrypt",3,"click","disabled"],["d","M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"],[4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"document-info-card"],[1,"card-header"],[1,"lock-icon-large"],["width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],[1,"card-body"],[1,"doc-title"],[1,"doc-meta"],[1,"meta-item"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14 2 14 8 20 8"],[1,"meta-item",3,"ngClass"],[1,"info-card"],[1,"info-content"],[1,"info-title"],[1,"info-description"],[1,"info-card","success-card"],[1,"password-section"],[1,"section-title"],[1,"password-input-wrapper"],[1,"input-icon"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M12 2L2 7l10 5 10-5-10-5z"],["d","M2 17l10 5 10-5M2 12l10 5 10-5"],["placeholder","\uBB38\uC11C \uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694","autocomplete","off",1,"input-field",3,"ngModelChange","keyup.enter","type","ngModel","disabled"],["type","button",1,"toggle-visibility-btn",3,"click","disabled"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",4,"ngIf"],["class","attempt-info",4,"ngIf"],[1,"help-section"],[1,"link-btn",3,"click"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],["d","M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"],["x1","1","y1","1","x2","23","y2","23"],[1,"attempt-info"],[1,"attempt-badge"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],["class","attempt-message",4,"ngIf"],[1,"attempt-message"],[1,"warning-card"],[1,"warning-header"],["d","M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],[1,"warning-list"],[1,"loading-overlay"],[1,"loading-content"],[1,"spinner"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),u("click",function(){return n.onCancel()}),C(),i(3,"svg",3),m(4,"path",4),r()(),v(),i(5,"h1",5),l(6,"PDF \uC554\uD638 \uD574\uC81C"),r(),m(7,"div",6),r(),i(8,"div",7),P(9,hs,20,5,"div",8)(10,Cs,8,0,"div",9)(11,_s,8,0,"div",10)(12,Ms,16,7,"div",11)(13,ws,17,1,"div",12),r(),i(14,"div",13)(15,"button",14),u("click",function(){return n.onCancel()}),C(),i(16,"svg",15),m(17,"line",16)(18,"line",17),r(),l(19," \uCDE8\uC18C "),r(),v(),i(20,"button",18),u("click",function(){return n.onDecrypt()}),C(),i(21,"svg",15),m(22,"path",19),r(),P(23,ys,2,1,"span",20)(24,Ss,2,1,"span",20),r()(),P(25,Os,7,0,"div",21),r()),e&2&&(c(9),g("ngIf",n.document),c(),g("ngIf",!n.isNonEncrypted),c(),g("ngIf",n.isNonEncrypted),c(),g("ngIf",!n.isNonEncrypted),c(),g("ngIf",!n.isNonEncrypted),c(2),g("disabled",n.isLoading),c(5),g("disabled",n.isLoading||!n.isNonEncrypted&&(!n.password||n.attemptCount>=n.maxAttempts)),c(3),g("ngIf",!n.isLoading),c(),g("ngIf",n.isLoading),c(),g("ngIf",n.isLoading))},dependencies:[Qe,j,ce,re,ae],styles:[".decrypt-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;background:linear-gradient(to bottom,#f8f9fa,#e9ecef)}.decrypt-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;background:#fff;border-bottom:1px solid #e0e0e0;position:sticky;top:0;z-index:10;box-shadow:0 2px 4px #0000000d}.decrypt-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#424242;display:flex;align-items:center;border-radius:8px;transition:all .2s}.decrypt-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.decrypt-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:18px;font-weight:600;margin:0;color:#212121}.decrypt-header[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{width:40px}.decrypt-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px;-webkit-overflow-scrolling:touch}.document-info-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:16px;padding:24px;margin-bottom:20px;color:#fff;box-shadow:0 4px 12px #667eea4d}.document-info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:16px}.document-info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .lock-icon-large[_ngcontent-%COMP%]{width:64px;height:64px;background:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.document-info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .lock-icon-large[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#fff}.document-info-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{text-align:center}.document-info-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .doc-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:12px;line-height:1.4;word-break:break-word}.document-info-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .doc-meta[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}.document-info-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .doc-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:13px;padding:4px 12px;background:#fff3;border-radius:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.document-info-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .doc-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#fff}.document-info-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .doc-meta[_ngcontent-%COMP%]   .meta-item.encrypted[_ngcontent-%COMP%]{background:#ff6b6b4d}.info-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e3f2fd,#bbdefb);border-radius:12px;padding:20px;margin-bottom:24px;border-left:4px solid #2196f3}.info-card.success-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border-left-color:#4caf50}.info-card.success-card[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-title[_ngcontent-%COMP%]{color:#2e7d32}.info-card.success-card[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-description[_ngcontent-%COMP%]{color:#1b5e20}.info-card[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1565c0;margin-bottom:8px}.info-card[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .info-description[_ngcontent-%COMP%]{font-size:14px;color:#0d47a1;line-height:1.6;margin:0}.password-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;margin-bottom:20px;box-shadow:0 2px 8px #00000014}.password-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0 0 16px;color:#212121}.password-section[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;margin-bottom:12px}.password-section[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:16px;display:flex;align-items:center;pointer-events:none}.password-section[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#9e9e9e}.password-section[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{flex:1;padding:14px 48px;font-size:16px;border:2px solid #e0e0e0;border-radius:12px;outline:none;transition:all .3s;background:#fff;box-sizing:border-box}.password-section[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.password-section[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#9e9e9e;cursor:not-allowed}.password-section[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]::placeholder{color:#bdbdbd}.password-section[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-visibility-btn[_ngcontent-%COMP%]{position:absolute;right:12px;background:none;border:none;padding:8px;cursor:pointer;color:#757575;display:flex;align-items:center;border-radius:4px;transition:all .2s}.password-section[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-visibility-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5f5f5;color:#424242}.password-section[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-visibility-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.password-section[_ngcontent-%COMP%]   .attempt-info[_ngcontent-%COMP%]{margin-top:12px}.password-section[_ngcontent-%COMP%]   .attempt-info[_ngcontent-%COMP%]   .attempt-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;background:#fff3e0;color:#f57c00;border-radius:20px;font-size:13px;font-weight:500}.password-section[_ngcontent-%COMP%]   .attempt-info[_ngcontent-%COMP%]   .attempt-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:currentColor}.password-section[_ngcontent-%COMP%]   .attempt-info[_ngcontent-%COMP%]   .attempt-badge.danger[_ngcontent-%COMP%]{background:#ffebee;color:#d32f2f}.password-section[_ngcontent-%COMP%]   .attempt-info[_ngcontent-%COMP%]   .attempt-message[_ngcontent-%COMP%]{margin-top:8px;font-size:13px;color:#d32f2f}.password-section[_ngcontent-%COMP%]   .attempt-info[_ngcontent-%COMP%]   .attempt-message[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.password-section[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]{margin-top:12px}.password-section[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   .link-btn[_ngcontent-%COMP%]{background:none;border:none;color:#667eea;font-size:14px;cursor:pointer;padding:0;text-decoration:underline;transition:color .2s}.password-section[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   .link-btn[_ngcontent-%COMP%]:hover{color:#5568d3}.warning-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3e0,#ffe0b2);border-radius:12px;padding:20px;border-left:4px solid #ff9800}.warning-card[_ngcontent-%COMP%]   .warning-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px;color:#e65100;font-weight:600;font-size:15px}.warning-card[_ngcontent-%COMP%]   .warning-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:currentColor}.warning-card[_ngcontent-%COMP%]   .warning-list[_ngcontent-%COMP%]{margin:0;padding-left:20px;color:#e65100}.warning-card[_ngcontent-%COMP%]   .warning-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:13px;line-height:1.6;margin-bottom:6px}.warning-card[_ngcontent-%COMP%]   .warning-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.decrypt-footer[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px;background:#fff;border-top:1px solid #e0e0e0;position:sticky;bottom:0;box-shadow:0 -2px 8px #0000000d}.decrypt-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:14px 24px;font-size:16px;font-weight:600;border:none;border-radius:12px;cursor:pointer;transition:all .3s;display:flex;align-items:center;justify-content:center;gap:8px}.decrypt-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.decrypt-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:currentColor}.decrypt-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#f5f5f5;color:#616161}.decrypt-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover:not(:disabled){background:#eee}.decrypt-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98)}.decrypt-footer[_ngcontent-%COMP%]   .btn-decrypt[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 12px #667eea4d}.decrypt-footer[_ngcontent-%COMP%]   .btn-decrypt[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 16px #667eea66;transform:translateY(-1px)}.decrypt-footer[_ngcontent-%COMP%]   .btn-decrypt[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000bf;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000}.loading-overlay[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{text-align:center;color:#fff}.loading-overlay[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;font-size:18px;font-weight:600}.loading-overlay[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;opacity:.8}.loading-overlay[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid rgba(255,255,255,.2);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};var ks=["modalContent"];function Es(a,t){if(a&1){let e=w();i(0,"div",1),u("click",function(){f(e);let o=p();return h(o.onCancel())}),i(1,"div",2),u("click",function(o){return f(e),h(o.stopPropagation())}),i(2,"div",3)(3,"div",4)(4,"button",5),u("click",function(){f(e);let o=p();return h(o.onSave())}),C(),i(5,"svg",6),m(6,"path",7),r(),l(7," \uC801\uC6A9 "),r(),v(),i(8,"button",8),u("click",function(){f(e);let o=p();return h(o.onCancel())}),l(9," \xD7 "),r()(),i(10,"input",9),W("ngModelChange",function(o){f(e);let s=p();return $(s.editedContent,o)||(s.editedContent=o),h(o)}),u("keydown.enter",function(){f(e);let o=p();return h(o.onSave())})("keydown.escape",function(){f(e);let o=p();return h(o.onCancel())}),r()(),i(11,"div",10)(12,"div",11)(13,"label",12),l(14,"\uB113\uC774"),r(),i(15,"span",13),l(16),r()(),i(17,"div",14)(18,"label",12),l(19,"\uD06C\uAE30"),r(),i(20,"div",15)(21,"button",16),u("click",function(){f(e);let o=p();return h(o.decreaseFontSize())}),i(22,"span",17),l(23,"A-"),r()(),i(24,"span",18),l(25),r(),i(26,"button",19),u("click",function(){f(e);let o=p();return h(o.increaseFontSize())}),i(27,"span",17),l(28,"A+"),r()()()(),i(29,"div",14)(30,"label",12),l(31,"\uD3F0\uD2B8"),r(),i(32,"select",20),W("ngModelChange",function(o){f(e);let s=p();return $(s.currentFontFamily,o)||(s.currentFontFamily=o),h(o)}),u("change",function(){f(e);let o=p();return h(o.onFontChange())}),i(33,"optgroup",21)(34,"option",22),l(35,"Noto Sans KR"),r(),i(36,"option",23),l(37,"\uB098\uB214\uACE0\uB515"),r(),i(38,"option",24),l(39,"\uB098\uB214\uBC14\uB978\uACE0\uB515"),r(),i(40,"option",25),l(41,"IBM Plex Sans KR"),r(),i(42,"option",26),l(43,"\uB098\uB214\uC2A4\uD018\uC5B4"),r(),i(44,"option",27),l(45,"Black Han Sans"),r()(),i(46,"optgroup",28)(47,"option",29),l(48,"Noto Serif KR"),r(),i(49,"option",30),l(50,"\uB098\uB214\uBA85\uC870"),r()(),i(51,"optgroup",31)(52,"option",32),l(53,"\uB098\uB214\uC190\uAE00\uC528\uD39C"),r(),i(54,"option",33),l(55,"\uB098\uB214\uC190\uAE00\uC528\uBD93"),r(),i(56,"option",34),l(57,"\uB3C4\uD604\uCCB4"),r(),i(58,"option",35),l(59,"\uC8FC\uC544\uCCB4"),r(),i(60,"option",36),l(61,"\uAC1C\uAD6C\uC7C1\uC774\uCCB4"),r(),i(62,"option",37),l(63,"\uAC10\uC790\uAF43\uCCB4"),r(),i(64,"option",38),l(65,"\uD574\uBC14\uB77C\uAE30\uCCB4"),r(),i(66,"option",39),l(67,"\uB3D9\uD574\uB3C5\uB3C4\uCCB4"),r(),i(68,"option",40),l(69,"\uD558\uC774\uBA5C\uB85C\uB514\uCCB4"),r()(),i(70,"optgroup",41)(71,"option",42),l(72,"Arial"),r(),i(73,"option",43),l(74,"Helvetica"),r(),i(75,"option",44),l(76,"Times New Roman"),r(),i(77,"option",45),l(78,"Courier New"),r(),i(79,"option",46),l(80,"Georgia"),r(),i(81,"option",47),l(82,"Verdana"),r(),i(83,"option",48),l(84,"Roboto"),r(),i(85,"option",49),l(86,"Open Sans"),r(),i(87,"option",50),l(88,"Lato"),r(),i(89,"option",51),l(90,"Montserrat"),r(),i(91,"option",52),l(92,"Poppins"),r(),i(93,"option",53),l(94,"Inter"),r(),i(95,"option",54),l(96,"Ubuntu"),r()()()(),i(97,"div",14)(98,"label",12),l(99,"\uC0C9\uC0C1"),r(),i(100,"input",55),W("ngModelChange",function(o){f(e);let s=p();return $(s.currentColor,o)||(s.currentColor=o),h(o)}),u("change",function(){f(e);let o=p();return h(o.onColorChange())}),r()(),i(101,"div",56)(102,"button",57),u("click",function(){f(e);let o=p();return h(o.onCancel())}),l(103," \uCDE8\uC18C "),r(),i(104,"button",58),u("click",function(){f(e);let o=p();return h(o.onSave())}),l(105," \uC800\uC7A5 "),r()()()()()}if(a&2){let e=p();L("background",e.complementaryColor)("height",e.keyboardHeight>0?"calc(100vh - "+e.keyboardHeight+"px)":"100vh"),c(),L("max-height",e.keyboardHeight>0?"calc(100vh - "+e.keyboardHeight+"px)":"100vh"),c(3),L("color",e.currentColor),c(4),L("color",e.currentColor),c(2),L("color",e.currentColor)("font-size",e.currentFontSize*2,"px")("font-family",e.currentFontFamily),G("ngModel",e.editedContent),c(),L("bottom",e.keyboardHeight,"px"),c(5),D("",e.previewWidth,"px"),c(9),D("",e.currentFontSize,"px"),c(7),G("ngModel",e.currentFontFamily),c(68),G("ngModel",e.currentColor)}}var en=class a{constructor(t,e,n){this.cdr=t;this.overlay=e;this.viewContainerRef=n}isVisible=!1;textData=null;save=new N;cancel=new N;delete=new N;modalContentTemplate;overlayRef=null;portal=null;editedContent="";currentFontSize=48;currentFontFamily="Arial";currentColor="#1e293b";availableFonts=[{value:"Noto Sans KR",label:"Noto Sans KR",group:"\uD55C\uAE00 \uACE0\uB515"},{value:"NanumGothic",label:"\uB098\uB214\uACE0\uB515",group:"\uD55C\uAE00 \uACE0\uB515"},{value:"NanumBarunGothic",label:"\uB098\uB214\uBC14\uB978\uACE0\uB515",group:"\uD55C\uAE00 \uACE0\uB515"},{value:"IBM Plex Sans KR",label:"IBM Plex Sans KR",group:"\uD55C\uAE00 \uACE0\uB515"},{value:"NanumSquare",label:"\uB098\uB214\uC2A4\uD018\uC5B4",group:"\uD55C\uAE00 \uACE0\uB515"},{value:"Black Han Sans",label:"Black Han Sans",group:"\uD55C\uAE00 \uACE0\uB515"},{value:"Noto Serif KR",label:"Noto Serif KR",group:"\uD55C\uAE00 \uBA85\uC870"},{value:"NanumMyeongjo",label:"\uB098\uB214\uBA85\uC870",group:"\uD55C\uAE00 \uBA85\uC870"},{value:"NanumPen",label:"\uB098\uB214\uC190\uAE00\uC528\uD39C",group:"\uC190\uAE00\uC528"},{value:"NanumBrush",label:"\uB098\uB214\uC190\uAE00\uC528\uBD93",group:"\uC190\uAE00\uC528"},{value:"DoHyeon",label:"\uB3C4\uD604\uCCB4",group:"\uC190\uAE00\uC528"},{value:"Jua",label:"\uC8FC\uC544\uCCB4",group:"\uC190\uAE00\uC528"},{value:"Gaegu",label:"\uAC1C\uAD6C\uC7C1\uC774\uCCB4",group:"\uC190\uAE00\uC528"},{value:"GamjaFlower",label:"\uAC10\uC790\uAF43\uCCB4",group:"\uC190\uAE00\uC528"},{value:"Sunflower",label:"\uD574\uBC14\uB77C\uAE30\uCCB4",group:"\uC190\uAE00\uC528"},{value:"EastSeaDokdo",label:"\uB3D9\uD574\uB3C5\uB3C4\uCCB4",group:"\uC190\uAE00\uC528"},{value:"HiMelody",label:"\uD558\uC774\uBA5C\uB85C\uB514\uCCB4",group:"\uC190\uAE00\uC528"},{value:"Arial",label:"Arial",group:"\uC601\uBB38"},{value:"Helvetica",label:"Helvetica",group:"\uC601\uBB38"},{value:"Times New Roman",label:"Times New Roman",group:"\uC601\uBB38"},{value:"Courier New",label:"Courier New",group:"\uC601\uBB38"},{value:"Georgia",label:"Georgia",group:"\uC601\uBB38"},{value:"Verdana",label:"Verdana",group:"\uC601\uBB38"},{value:"Roboto",label:"Roboto",group:"\uC601\uBB38"},{value:"Open Sans",label:"Open Sans",group:"\uC601\uBB38"},{value:"Lato",label:"Lato",group:"\uC601\uBB38"},{value:"Montserrat",label:"Montserrat",group:"\uC601\uBB38"},{value:"Poppins",label:"Poppins",group:"\uC601\uBB38"},{value:"Inter",label:"Inter",group:"\uC601\uBB38"},{value:"Ubuntu",label:"Ubuntu",group:"\uC601\uBB38"}];keyboardHeight=0;ngOnInit(){window.visualViewport&&(window.visualViewport.addEventListener("resize",this.handleViewportResize),window.visualViewport.addEventListener("scroll",this.handleViewportResize))}ngOnDestroy(){document.documentElement.classList.remove("modal-open"),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height="",document.body.style.top="",document.body.style.touchAction="",this.overlayRef&&(this.overlayRef.detach(),this.overlayRef.dispose(),this.overlayRef=null),window.visualViewport&&(window.visualViewport.removeEventListener("resize",this.handleViewportResize),window.visualViewport.removeEventListener("scroll",this.handleViewportResize))}handleViewportResize=()=>{if(window.visualViewport){let t=window.visualViewport.height,e=window.innerHeight,n=Math.max(0,e-t);Math.abs(this.keyboardHeight-n)>5&&(console.log("\u{1F3B9} \uD0A4\uBCF4\uB4DC \uB192\uC774 \uBCC0\uD654 \uAC10\uC9C0:",{timestamp:Date.now(),windowHeight:e,viewportHeight:t,oldKeyboardHeight:this.keyboardHeight,newKeyboardHeight:n,diff:n-this.keyboardHeight,toolbarWillBeAt:n+"px from bottom"}),this.keyboardHeight=n,this.cdr.detectChanges(),requestAnimationFrame(()=>{document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",this.overlayRef&&this.overlayRef.updatePosition(),this.cdr.detectChanges(),console.log("\u2705 \uB808\uC774\uC544\uC6C3 \uC5C5\uB370\uC774\uD2B8 \uC644\uB8CC - \uD234\uBC14 \uCD5C\uC885 \uC704\uCE58:",n+"px")}))}else console.warn("\u26A0\uFE0F visualViewport API \uC0AC\uC6A9 \uBD88\uAC00")};ngOnChanges(){if(this.isVisible&&!this.overlayRef){if(document.documentElement.classList.add("modal-open"),document.body.classList.add("modal-open"),document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100vh",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.touchAction="none",window.visualViewport){let t=window.visualViewport.height,e=window.innerHeight;this.keyboardHeight=Math.max(0,e-t),console.log("\u{1F50D} \uCD08\uAE30 \uD0A4\uBCF4\uB4DC \uB192\uC774 \uACC4\uC0B0:",{windowHeight:e,viewportHeight:t,initialKeyboardHeight:this.keyboardHeight})}else this.keyboardHeight=0;this.overlayRef=this.createOverlay(),this.portal=new Xn(this.modalContentTemplate,this.viewContainerRef),this.overlayRef.attach(this.portal),this.cdr.detectChanges(),setTimeout(()=>this.handleViewportResize(),50),setTimeout(()=>this.handleViewportResize(),150),setTimeout(()=>this.handleViewportResize(),300),setTimeout(()=>this.handleViewportResize(),600),setTimeout(()=>this.handleViewportResize(),1e3)}else!this.isVisible&&this.overlayRef&&(document.documentElement.classList.remove("modal-open"),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.touchAction="",this.keyboardHeight=0,this.overlayRef.detach(),this.overlayRef=null,this.portal=null);this.textData&&(this.editedContent=this.textData.content,this.currentFontSize=this.textData.fontSize||48,this.currentFontFamily=this.textData.fontFamily||"Arial",this.currentColor=this.textData.color||"#1e293b")}createOverlay(){return this.overlay.create({positionStrategy:this.overlay.position().global(),hasBackdrop:!1,scrollStrategy:this.overlay.scrollStrategies.block(),panelClass:"mobile-text-edit-overlay"})}forceLayoutAdjustment(){if(!window.visualViewport)return;let t=window.visualViewport.height,e=window.innerHeight,n=Math.max(0,e-t);console.log("\u{1F527} \uAC15\uC81C \uB808\uC774\uC544\uC6C3 \uC870\uC815:",{currentKeyboardHeight:this.keyboardHeight,calculatedKeyboardHeight:n,toolbarBottom:n,needsAdjustment:Math.abs(this.keyboardHeight-n)>5}),Math.abs(this.keyboardHeight-n)>5?(this.keyboardHeight=n,this.cdr.detectChanges(),requestAnimationFrame(()=>{document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",this.overlayRef&&this.overlayRef.updatePosition(),this.cdr.detectChanges(),console.log("\u2705 \uAC15\uC81C \uC870\uC815 \uC644\uB8CC - \uD234\uBC14 \uC704\uCE58:",n+"px")})):console.log("\u2705 \uB192\uC774 \uC815\uC0C1 - \uC870\uC815 \uBD88\uD544\uC694 (\uD234\uBC14 \uC704\uCE58:",this.keyboardHeight+"px)")}get previewWidth(){return this.editedContent?this.calculateTextWidth(this.editedContent,this.currentFontSize,this.currentFontFamily):0}calculateTextWidth(t,e,n){let s=document.createElement("canvas").getContext("2d");if(!s)return t.length*e*.6;s.font=`500 ${e}px ${n}`;let _=s.measureText(t).width;return Math.ceil(_+20)}increaseFontSize(){this.currentFontSize<72&&(this.currentFontSize+=2)}decreaseFontSize(){this.currentFontSize>12&&(this.currentFontSize-=2)}onFontChange(){console.log("\u{1F4DD} \uD3F0\uD2B8 \uBCC0\uACBD:",this.currentFontFamily)}onColorChange(){console.log("\u{1F3A8} \uC0C9\uC0C1 \uBCC0\uACBD:",this.currentColor)}get complementaryColor(){let t=this.currentColor.replace("#",""),e=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16),s=255-e,d=255-n,_=255-o;return`rgba(${s}, ${d}, ${_}, 0.95)`}onSave(){this.textData&&this.save.emit(se(oe({},this.textData),{content:this.editedContent,fontSize:this.currentFontSize,fontFamily:this.currentFontFamily,color:this.currentColor}))}onCancel(){this.cancel.emit()}onDelete(){this.textData&&this.delete.emit(this.textData.textId)}static \u0275fac=function(e){return new(e||a)(z(fe),z(Jn),z(En))};static \u0275cmp=F({type:a,selectors:[["app-mobile-text-edit-modal"]],viewQuery:function(e,n){if(e&1&&je(ks,5),e&2){let o;He(o=Ge())&&(n.modalContentTemplate=o.first)}},inputs:{isVisible:"isVisible",textData:"textData"},outputs:{save:"save",cancel:"cancel",delete:"delete"},features:[Ye],decls:2,vars:0,consts:[["modalContent",""],[1,"modal-backdrop",3,"click"],[1,"modal-container",3,"click"],[1,"text-input-area"],[1,"input-header-buttons"],["type","button","aria-label","\uC801\uC6A9",1,"modal-apply-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M20 6L9 17l-5-5","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["type","button","aria-label","\uB2EB\uAE30",1,"modal-close-btn",3,"click"],["type","text","placeholder","\uD14D\uC2A4\uD2B8\uB97C \uC785\uB825\uD558\uC138\uC694","autofocus","",1,"large-text-input",3,"ngModelChange","keydown.enter","keydown.escape","ngModel"],[1,"keyboard-toolbar"],[1,"toolbar-group","width-preview"],[1,"toolbar-label"],[1,"width-display"],[1,"toolbar-group"],[1,"size-controls"],["type","button","title","\uC791\uAC8C",1,"control-btn",3,"click"],[1,"icon"],[1,"size-display"],["type","button","title","\uD06C\uAC8C",1,"control-btn",3,"click"],[1,"font-select",3,"ngModelChange","change","ngModel"],["label","\uD55C\uAE00 \uACE0\uB515\uCCB4"],["value","Noto Sans KR"],["value","NanumGothic"],["value","NanumBarunGothic"],["value","IBM Plex Sans KR"],["value","NanumSquare"],["value","Black Han Sans"],["label","\uD55C\uAE00 \uBA85\uC870\uCCB4"],["value","Noto Serif KR"],["value","NanumMyeongjo"],["label","\uC190\uAE00\uC528/\uCE90\uC8FC\uC5BC"],["value","NanumPen"],["value","NanumBrush"],["value","DoHyeon"],["value","Jua"],["value","Gaegu"],["value","GamjaFlower"],["value","Sunflower"],["value","EastSeaDokdo"],["value","HiMelody"],["label","\uC601\uBB38 \uD3F0\uD2B8"],["value","Arial"],["value","Helvetica"],["value","Times New Roman"],["value","Courier New"],["value","Georgia"],["value","Verdana"],["value","Roboto"],["value","Open Sans"],["value","Lato"],["value","Montserrat"],["value","Poppins"],["value","Inter"],["value","Ubuntu"],["type","color",1,"color-picker",3,"ngModelChange","change","ngModel"],[1,"toolbar-actions"],["type","button",1,"action-btn","cancel-btn",3,"click"],["type","button",1,"action-btn","save-btn",3,"click"]],template:function(e,n){e&1&&P(0,Es,106,23,"ng-template",null,0,Xe)},dependencies:[_e,Fe,Ee,De,ce,nt,re,ae,Qn,ei],styles:['@charset "UTF-8";@font-face{font-family:Noto Sans KR;src:url(/ezReader_Mobile_Page/fonts/NotoSansKR-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:NanumGothic;src:url(/ezReader_Mobile_Page/fonts/NanumGothic-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:NanumBarunGothic;src:url(/ezReader_Mobile_Page/fonts/NanumBarunGothic-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:IBM Plex Sans KR;src:url(/ezReader_Mobile_Page/fonts/IBMPlexSansKR-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:NanumSquare;src:url(/ezReader_Mobile_Page/fonts/NanumSquare-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Black Han Sans;src:url(/ezReader_Mobile_Page/fonts/BlackHanSans-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:"Noto Serif KR";src:url(/ezReader_Mobile_Page/fonts/NotoSerifKR-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:NanumMyeongjo;src:url(/ezReader_Mobile_Page/fonts/NanumMyeongjo-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:NanumPen;src:url(/ezReader_Mobile_Page/fonts/NanumPen-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:NanumBrush;src:url(/ezReader_Mobile_Page/fonts/NanumBrush-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:DoHyeon;src:url(/ezReader_Mobile_Page/fonts/DoHyeon-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Jua;src:url(/ezReader_Mobile_Page/fonts/Jua-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Gaegu;src:url(/ezReader_Mobile_Page/fonts/Gaegu-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:GamjaFlower;src:url(/ezReader_Mobile_Page/fonts/GamjaFlower-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Sunflower;src:url(/ezReader_Mobile_Page/fonts/Sunflower-Medium.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:EastSeaDokdo;src:url(/ezReader_Mobile_Page/fonts/EastSeaDokdo-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:HiMelody;src:url(/ezReader_Mobile_Page/fonts/HiMelody-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Roboto;src:url(/ezReader_Mobile_Page/fonts/Roboto-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Open Sans;src:url(/ezReader_Mobile_Page/fonts/OpenSans-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Lato;src:url(/ezReader_Mobile_Page/fonts/Lato-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Montserrat;src:url(/ezReader_Mobile_Page/fonts/Montserrat-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Poppins;src:url(/ezReader_Mobile_Page/fonts/Poppins-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Inter;src:url(/ezReader_Mobile_Page/fonts/Inter-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Ubuntu;src:url(/ezReader_Mobile_Page/fonts/Ubuntu-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}  .cdk-overlay-container{position:fixed;width:100vw;height:100vh;top:0;left:0;overflow:hidden!important;pointer-events:none;z-index:9999}  .cdk-overlay-container .mobile-text-edit-overlay{pointer-events:auto;overflow:hidden!important}  body.modal-open{overflow:hidden!important;position:fixed!important;width:100%!important;height:100vh!important;touch-action:none!important}  html.modal-open{overflow:hidden!important}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;background:#000000d9;display:flex;align-items:center;justify-content:center;z-index:10000;padding:16px;overflow:hidden!important;touch-action:none!important}.input-header-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;margin-bottom:12px;padding:0 8px}.modal-apply-btn[_ngcontent-%COMP%]{padding:10px 16px;border:none;background:transparent;color:#fff;font-size:14px;font-weight:600;cursor:pointer;border-radius:22px;display:flex;align-items:center;gap:6px;transition:all .2s ease}.modal-apply-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.modal-apply-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translateY(-1px)}.modal-apply-btn[_ngcontent-%COMP%]:active{transform:scale(.95);background:#fff3}.modal-close-btn[_ngcontent-%COMP%]{width:44px;height:44px;border:none;background:transparent;color:#fff;font-size:36px;line-height:1;cursor:pointer;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.modal-close-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:scale(1.1)}.modal-close-btn[_ngcontent-%COMP%]:active{transform:scale(.95);background:#fff3}.modal-container[_ngcontent-%COMP%]{width:100%;max-width:600px;max-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 24px;position:relative;transition:max-height .3s ease}.text-input-area[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;background:none!important;background-color:transparent!important;border:none!important;padding:0!important;margin:0!important;box-shadow:none!important}.text-input-area[_ngcontent-%COMP%]   .large-text-input[_ngcontent-%COMP%]{width:100%;padding:0;margin:0;border:none!important;border-radius:0!important;font-size:48px;font-weight:500;font-family:inherit;text-align:center;background:none!important;background-color:transparent!important;backdrop-filter:none!important;-webkit-backdrop-filter:none!important;transition:none;box-shadow:none!important;-webkit-appearance:none;appearance:none;white-space:nowrap;overflow-x:auto;overflow-y:hidden}.text-input-area[_ngcontent-%COMP%]   .large-text-input[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.text-input-area[_ngcontent-%COMP%]   .large-text-input[_ngcontent-%COMP%]:focus{outline:none!important;border:none!important;background:transparent!important;background-color:transparent!important;box-shadow:none!important}.text-input-area[_ngcontent-%COMP%]   .large-text-input[_ngcontent-%COMP%]::placeholder{color:#ffffff80;font-size:40px}@media (max-width: 768px){.modal-backdrop[_ngcontent-%COMP%]{padding:0 0 260px;align-items:center}.modal-container[_ngcontent-%COMP%]{max-width:100%;border-radius:0;padding:24px 20px;justify-content:center}.text-input-area[_ngcontent-%COMP%]{border-radius:16px 16px 0 0;padding:20px;background:#ffffffe6}.text-input-area[_ngcontent-%COMP%]   .large-text-input[_ngcontent-%COMP%]{font-size:24px;padding:16px 20px;white-space:nowrap;overflow-x:auto;overflow-y:hidden}.text-input-area[_ngcontent-%COMP%]   .large-text-input[_ngcontent-%COMP%]::placeholder{font-size:20px}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideUpMobile{0%{transform:translateY(100%)}to{transform:translateY(0)}}.keyboard-toolbar[_ngcontent-%COMP%]{position:fixed;left:0;right:0;background:#fffffffa;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-top:1px solid rgba(0,0,0,.1);padding:12px 16px;padding-bottom:calc(12px + env(safe-area-inset-bottom,0));display:flex;gap:12px;align-items:center;box-shadow:0 -4px 12px #00000014;z-index:10002;overflow-x:auto;overflow-y:hidden;touch-action:pan-x;-webkit-overflow-scrolling:touch;scrollbar-width:none;-ms-overflow-style:none}.keyboard-toolbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.keyboard-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;flex-shrink:0}.keyboard-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   .toolbar-label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#64748b;white-space:nowrap}.keyboard-toolbar[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;background:#f1f5f9cc;border-radius:8px;padding:4px}.keyboard-toolbar[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:6px;padding:6px 10px;font-size:14px;font-weight:600;color:#3b82f6;cursor:pointer;transition:all .2s ease}.keyboard-toolbar[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]:active{background:#f1f5f9;transform:scale(.95)}.keyboard-toolbar[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:block;line-height:1}.keyboard-toolbar[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .size-display[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#1e293b;min-width:44px;text-align:center}.keyboard-toolbar[_ngcontent-%COMP%]   .width-preview[_ngcontent-%COMP%]   .width-display[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#10b981;min-width:60px;text-align:center;background:#10b9811a;padding:6px 12px;border-radius:8px;border:1px solid rgba(16,185,129,.2)}.keyboard-toolbar[_ngcontent-%COMP%]   .font-select[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:8px 12px;font-size:13px;font-weight:500;color:#1e293b;cursor:pointer;min-width:120px}.keyboard-toolbar[_ngcontent-%COMP%]   .font-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.keyboard-toolbar[_ngcontent-%COMP%]   .color-picker[_ngcontent-%COMP%]{width:40px;height:40px;border:2px solid #e2e8f0;border-radius:8px;cursor:pointer;background:#fff}.keyboard-toolbar[_ngcontent-%COMP%]   .color-picker[_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:4px}.keyboard-toolbar[_ngcontent-%COMP%]   .color-picker[_ngcontent-%COMP%]::-webkit-color-swatch{border:none;border-radius:4px}.keyboard-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-left:auto;flex-shrink:0}.keyboard-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;border:none}.keyboard-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]   .action-btn.cancel-btn[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.keyboard-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]   .action-btn.cancel-btn[_ngcontent-%COMP%]:active{background:#e2e8f0}.keyboard-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]   .action-btn.save-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.keyboard-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]   .action-btn.save-btn[_ngcontent-%COMP%]:active{background:#2563eb}@media (min-width: 769px){.keyboard-toolbar[_ngcontent-%COMP%]{position:relative;bottom:auto;border-top:none;border-radius:12px;margin-top:16px;overflow-x:visible}}@media (max-width: 768px){.modal-backdrop[_ngcontent-%COMP%]{padding-bottom:80px}.keyboard-toolbar[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;padding:10px 12px;gap:8px}.keyboard-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   .toolbar-label[_ngcontent-%COMP%]{font-size:11px}.keyboard-toolbar[_ngcontent-%COMP%]   .font-select[_ngcontent-%COMP%]{min-width:100px;font-size:12px;padding:6px 10px}.keyboard-toolbar[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]{padding:5px 8px;font-size:12px}.keyboard-toolbar[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .size-display[_ngcontent-%COMP%]{font-size:12px;min-width:40px}.keyboard-toolbar[_ngcontent-%COMP%]   .color-picker[_ngcontent-%COMP%]{width:36px;height:36px}.keyboard-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px}}.virtual-keyboard[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:#d1d5db;border-top:1px solid #9ca3af;z-index:10001;box-shadow:0 -4px 20px #0003}.virtual-keyboard[_ngcontent-%COMP%]   .keyboard-header[_ngcontent-%COMP%]{background:#e5e7eb;padding:8px 16px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #9ca3af}.virtual-keyboard[_ngcontent-%COMP%]   .keyboard-header[_ngcontent-%COMP%]   .keyboard-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#374151}.virtual-keyboard[_ngcontent-%COMP%]   .keyboard-header[_ngcontent-%COMP%]   .keyboard-close[_ngcontent-%COMP%]{background:#f3f4f6;border:1px solid #9ca3af;border-radius:4px;width:28px;height:28px;font-size:20px;font-weight:700;color:#6b7280;cursor:pointer;display:flex;align-items:center;justify-content:center}.virtual-keyboard[_ngcontent-%COMP%]   .keyboard-header[_ngcontent-%COMP%]   .keyboard-close[_ngcontent-%COMP%]:active{background:#e5e7eb}.virtual-keyboard[_ngcontent-%COMP%]   .keyboard-body[_ngcontent-%COMP%]{padding:8px}.virtual-keyboard[_ngcontent-%COMP%]   .keyboard-body[_ngcontent-%COMP%]   .keyboard-row[_ngcontent-%COMP%]{display:flex;gap:4px;margin-bottom:6px;justify-content:center}.virtual-keyboard[_ngcontent-%COMP%]   .keyboard-body[_ngcontent-%COMP%]   .keyboard-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.virtual-keyboard[_ngcontent-%COMP%]   .keyboard-body[_ngcontent-%COMP%]   .keyboard-row[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{flex:1;min-width:30px;max-width:50px;height:44px;background:#fff;border:1px solid #9ca3af;border-radius:6px;font-size:16px;font-weight:500;color:#1f2937;cursor:pointer;box-shadow:0 2px 4px #0000001a;transition:all .1s ease}.virtual-keyboard[_ngcontent-%COMP%]   .keyboard-body[_ngcontent-%COMP%]   .keyboard-row[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]:active{background:#f3f4f6;transform:scale(.95);box-shadow:0 1px 2px #0000001a}.virtual-keyboard[_ngcontent-%COMP%]   .keyboard-body[_ngcontent-%COMP%]   .keyboard-row[_ngcontent-%COMP%]   .key.wide-key[_ngcontent-%COMP%]{flex:3;max-width:200px}@media (max-width: 768px){.virtual-keyboard[_ngcontent-%COMP%] ~ .keyboard-toolbar[_ngcontent-%COMP%], .keyboard-toolbar[_ngcontent-%COMP%]{transform:translateY(0);transition:transform .3s ease}.modal-container[_ngcontent-%COMP%]:has(~.virtual-keyboard){padding-bottom:280px}}'],changeDetection:0})};var Ds=(a,t)=>t.id||a;function Ts(a,t){if(a&1&&(i(0,"div",2)(1,"div",5),m(2,"div",6),i(3,"div",7)(4,"h3"),l(5),r(),i(6,"div",8),m(7,"div",9),r(),i(8,"p",10),l(9),r()()()()),a&2){let e=p();c(5),E(e.creationStep),c(2),L("width",e.creationProgress,"%"),c(2),D("",e.creationProgress,"%")}}function As(a,t){if(a&1){let e=w();i(0,"div",17),u("touchstart",function(o){f(e);let s=p().$implicit,d=p(3);return h(d.startElementDrag(o,s))})("click",function(o){f(e);let s=p().$implicit,d=p(3);return o.stopPropagation(),h(d.onElementClick(s))}),i(1,"span",18),l(2),r()()}if(a&2){let e=p().$implicit,n=p(3);L("left",e.x,"px")("top",e.y,"px")("width",e.width,"px")("height",e.height,"px")("transform","rotate("+(e.rotation||0)+"deg)")("opacity",e.opacity||1),R("selected",(n.selectedElement==null?null:n.selectedElement.id)===e.id),c(),L("color",e.color)("font-size",e.fontSize,"px"),c(),D(" ",e.text||"WATERMARK"," ")}}function zs(a,t){if(a&1){let e=w();i(0,"div",19),u("touchstart",function(o){f(e);let s=p().$implicit,d=p(3);return h(d.startElementDrag(o,s))})("click",function(o){f(e);let s=p().$implicit,d=p(3);return o.stopPropagation(),h(d.onElementClick(s))}),C(),i(1,"svg",20),m(2,"path",21),r()()}if(a&2){let e=p().$implicit,n=p(3);L("left",e.x,"px")("top",e.y,"px")("width",e.width,"px")("height",e.height,"px"),R("selected",(n.selectedElement==null?null:n.selectedElement.id)===e.id),c(),le("width",e.width)("height",e.height)("viewBox",(e.properties==null?null:e.properties.viewBox)||"0 0 "+e.width+" "+e.height),c(),le("d",e.pathData)("stroke",e.strokeColor||"#2c3e50")("stroke-width",e.strokeWidth||2)("fill",e.fill||"none")("fill-opacity",e.fillOpacity||1)("stroke-opacity",e.strokeOpacity||1)}}function Bs(a,t){if(a&1){let e=w();i(0,"div",32),u("click",function(o){f(e);let s=p(2).$implicit,d=p(3);return o.stopPropagation(),h(d.onElementClick(s))}),l(1),r()}if(a&2){let e=p(2).$implicit;L("font-size",e.fontSize||16,"px")("font-family",e.fontFamily||"Arial")("font-weight",e.fontWeight||"normal")("font-style",e.fontStyle||"normal")("color",e.color||"#000"),c(),D(" ",e.text," ")}}function Fs(a,t){if(a&1){let e=w();i(0,"img",33),u("touchstart",function(o){f(e);let s=p(2).$implicit,d=p(3);return h(d.startElementDrag(o,s))})("click",function(o){f(e);let s=p(2).$implicit,d=p(3);return o.stopPropagation(),h(d.onElementClick(s))}),r()}if(a&2){let e=p(2).$implicit;L("width",e.width,"px")("height",e.height,"px"),g("src",e.src,Oe)}}function Is(a,t){if(a&1){let e=w();i(0,"div",34),u("touchstart",function(o){f(e);let s=p(2).$implicit,d=p(3);return h(d.startElementDrag(o,s))})("click",function(o){f(e);let s=p(2).$implicit,d=p(3);return o.stopPropagation(),h(d.onElementClick(s))}),r()}if(a&2){let e=p(2).$implicit;L("width",e.width,"px")("height",e.height,"px")("background-color",e.fillColor)("border",e.strokeWidth+"px solid "+e.strokeColor)("border-radius",e.shapeType==="circle"?"50%":"0"),R("shape-circle",e.shapeType==="circle")("shape-rectangle",e.shapeType==="rectangle")("shape-line",e.shapeType==="line")}}function Rs(a,t){if(a&1){let e=w();i(0,"div",35),u("touchstart",function(o){f(e);let s=p(2).$implicit,d=p(3);return h(d.startElementDrag(o,s))})("click",function(o){f(e);let s=p(2).$implicit,d=p(3);return o.stopPropagation(),h(d.onElementClick(s))}),i(1,"div",36)(2,"span"),l(3,"\u2714"),r()(),i(4,"div",37),l(5),r()()}if(a&2){let e=p(2).$implicit;c(),L("width",(e.properties==null?null:e.properties.boxSize)||18,"px")("height",(e.properties==null?null:e.properties.boxSize)||18,"px"),R("checked",e.properties==null?null:e.properties.checked),c(4),D(" ",(e.properties==null?null:e.properties.label)||"\uCCB4\uD06C\uBC15\uC2A4"," ")}}function Vs(a,t){a&1&&m(0,"div",42)}function Ns(a,t){if(a&1){let e=w();i(0,"div",38),u("touchstart",function(o){f(e);let s=p(2).$implicit,d=p(3);return h(d.startElementDrag(o,s))})("click",function(o){f(e);let s=p(2).$implicit,d=p(3);return o.stopPropagation(),h(d.onElementClick(s))}),i(1,"div",39),P(2,Vs,1,0,"div",40),r(),i(3,"div",41),l(4),r()()}if(a&2){let e=p(2).$implicit;c(),L("width",(e.properties==null?null:e.properties.circleSize)||18,"px")("height",(e.properties==null?null:e.properties.circleSize)||18,"px"),R("selected",e.properties==null?null:e.properties.selected),c(),g("ngIf",e.properties==null?null:e.properties.selected),c(2),D(" ",(e.properties==null?null:e.properties.label)||"\uB77C\uB514\uC624 \uC635\uC158"," ")}}function Ls(a,t){if(a&1){let e=w();i(0,"div",43),u("touchstart",function(o){f(e);let s=p(2).$implicit,d=p(3);return h(d.startElementDrag(o,s))})("click",function(o){f(e);let s=p(2).$implicit,d=p(3);return o.stopPropagation(),h(d.onElementClick(s))}),i(1,"label",44),l(2),r(),i(3,"div",45)(4,"span",46),l(5),r(),i(6,"span",47),l(7,"v"),r()()()}if(a&2){let e=p(2).$implicit;c(2),E((e.properties==null?null:e.properties.label)||"\uB4DC\uB86D\uB2E4\uC6B4"),c(3),E((e.properties==null?null:e.properties.selectedOption)||(e.properties==null||e.properties.options==null?null:e.properties.options[0])||"\uC635\uC158 \uC120\uD0DD")}}function js(a,t){if(a&1){let e=w();i(0,"div",48),u("touchstart",function(o){f(e);let s=p(2).$implicit,d=p(3);return h(d.startElementDrag(o,s))})("click",function(o){f(e);let s=p(2).$implicit,d=p(3);return o.stopPropagation(),h(d.onElementClick(s))}),i(1,"label",49),l(2),r(),i(3,"div",50)(4,"span",51),l(5),r()(),i(6,"div",52),l(7),r()()}if(a&2){let e=p(2).$implicit;c(2),E((e.properties==null?null:e.properties.label)||"\uB0A0\uC9DC \uD544\uB4DC"),c(3),E((e.properties==null?null:e.properties.defaultValue)||(e.properties==null?null:e.properties.placeholder)||"YYYY-MM-DD"),c(2),D("\uD615\uC2DD: ",(e.properties==null?null:e.properties.dateFormat)||"YYYY-MM-DD")}}function Hs(a,t){if(a&1){let e=w();i(0,"img",53),u("touchstart",function(o){f(e);let s=p(2).$implicit,d=p(3);return h(d.startElementDrag(o,s))})("click",function(o){f(e);let s=p(2).$implicit,d=p(3);return o.stopPropagation(),h(d.onElementClick(s))}),r()}if(a&2){let e=p(2).$implicit;L("width",e.width,"px")("height",e.height,"px"),g("src",e.src,Oe)}}function Gs(a,t){if(a&1){let e=w();i(0,"div",54),xe(1,"sanitizeHtml"),u("touchstart",function(o){f(e);let s=p(2).$implicit,d=p(3);return h(d.startElementDrag(o,s))})("click",function(o){f(e);let s=p(2).$implicit,d=p(3);return o.stopPropagation(),h(d.onElementClick(s))}),r()}if(a&2){let e=p(2).$implicit;L("width",e.width,"px")("height",e.height,"px"),g("innerHTML",Ze(1,5,e.svgContent),Sn)}}function $s(a,t){if(a&1){let e=w();i(0,"div",22),u("click",function(){f(e);let o=p().$implicit,s=p(3);return h(s.onElementClick(o))})("touchstart",function(o){f(e);let s=p().$implicit,d=p(3);return h(d.startElementDrag(o,s))}),pe(1,Bs,2,11,"div",23),pe(2,Fs,1,5,"img",24),pe(3,Is,1,16,"div",25),pe(4,Rs,6,7,"div",26),pe(5,Ns,5,8,"div",27),pe(6,Ls,8,2,"div",28),pe(7,js,8,3,"div",29),pe(8,Hs,1,5,"img",30),pe(9,Gs,2,7,"div",31),r()}if(a&2){let e=p().$implicit,n=p(3);L("left",e.x,"px")("top",e.y,"px")("width",e.width,"px")("height",e.height,"px"),R("selected",(n.selectedElement==null?null:n.selectedElement.id)===e.id),g("ngClass","element-"+e.type),c(),ge(e.type==="text"?1:-1),c(),ge(e.type==="image"?2:-1),c(),ge(e.type==="shape"?3:-1),c(),ge(e.type==="form-checkbox"?4:-1),c(),ge(e.type==="form-radio"?5:-1),c(),ge(e.type==="form-dropdown"?6:-1),c(),ge(e.type==="form-date"?7:-1),c(),ge(e.type==="signature"?8:-1),c(),ge(e.type==="svg"?9:-1)}}function Ws(a,t){if(a&1&&(pe(0,As,3,19,"div",14),pe(1,zs,3,19,"div",15),pe(2,$s,10,20,"div",16)),a&2){let e=t.$implicit;ge(e.type==="watermark"?0:-1),c(),ge(e.type==="vector-path"?1:-1),c(),ge(e.type!=="watermark"&&e.type!=="vector-path"?2:-1)}}function Us(a,t){if(a&1&&(i(0,"div",13),Tn(1,Ws,3,3,null,null,Ds),r()),a&2){let e=p(2);L("width",e.currentPageData.width,"px")("height",e.currentPageData.height,"px")("transform","scale("+e.zoomLevel/100+")")("transform-origin","top center"),c(),An(e.currentPageData.elements)}}function Ks(a,t){if(a&1){let e=w();i(0,"div",3)(1,"div",11),u("touchstart",function(o){f(e);let s=p();return h(s.onCanvasContainerTouchStart(o))}),pe(2,Us,3,8,"div",12),r()()}if(a&2){let e=p();c(),R("pan-mode",e.isPanMode)("panning",e.isPanning),c(),ge(e.currentPageData?2:-1)}}function Ys(a,t){a&1&&(i(0,"div",4)(1,"div",55),l(2,"\u{1F4C4}"),r(),i(3,"h3"),l(4,"\uBB38\uC11C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"),r(),i(5,"p"),l(6,"\uBB38\uC11C \uB370\uC774\uD130\uB97C \uC81C\uACF5\uD558\uAC70\uB098 \uC0C8 \uBB38\uC11C\uB97C \uC0DD\uC131\uD558\uC138\uC694."),r()())}var lt=class a{constructor(t){this.cdr=t}config={mode:"create",showToolbar:!0,allowExport:!0};documentData;pdfPages=[];zoomLevel=100;isPanMode=!1;documentCreated=new N;exportPdf=new N;close=new N;pdfPagesChange=new N;elementSelected=new N;elementUpdated=new N;textEditModalStateChange=new N;selectedElement=null;editingElement=null;currentPage=1;totalPages=0;isCreating=!1;creationProgress=0;creationStep="";isDraggingElement=!1;isResizingElement=!1;currentDragElement=null;resizeDirection="";dragStartPosition={x:0,y:0};elementStartPosition={x:0,y:0,width:0,height:0};showMobileTextEditModal=!1;mobileTextEditData=null;isPanning=!1;panStartPos={x:0,y:0};scrollStartPos={x:0,y:0};canvasContainerElement=null;ngOnInit(){console.log("\u{1F4F1} [SharedPdfEditorMobile] \uCD08\uAE30\uD654",{mode:this.config.mode,hasData:!!this.documentData,hasPdfPages:this.pdfPages.length>0}),this.pdfPages.length===0?this.config.mode==="create"&&this.documentData&&this.createDocument():(this.totalPages=this.pdfPages.length,this.currentPage=1,this.adjustPagesToDeviceWidth()),this.setupGlobalEventListeners(),setTimeout(()=>{this.canvasContainerElement=document.querySelector(".canvas-container")},100)}ngDoCheck(){this.cdr.markForCheck()}ngOnDestroy(){this.removeGlobalEventListeners()}setupGlobalEventListeners(){document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("touchend",this.handleTouchEnd)}removeGlobalEventListeners(){document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchend",this.handleTouchEnd)}handleTouchMove=t=>{if(this.isPanning&&this.isPanMode){t.preventDefault();let e=t.touches[0];this.updatePanPosition(e.clientX,e.clientY)}else if(this.isDraggingElement&&this.currentDragElement){let e=t.touches[0];this.updateElementPosition(e.clientX,e.clientY)}};handleTouchEnd=t=>{this.isPanning?this.stopPan():this.isDraggingElement&&this.stopElementDrag()};get currentPageData(){return this.pdfPages[this.currentPage-1]}createDocument(){console.log("\u{1F4C4} [SharedPdfEditorMobile] \uBB38\uC11C \uC0DD\uC131 \uC2DC\uC791")}adjustPagesToDeviceWidth(){let t=window.innerWidth,n=t-32;console.log("\u{1F4F1} [SharedPdfEditorMobile] \uD398\uC774\uC9C0 \uD06C\uAE30 \uC870\uC815:",{deviceWidth:t,targetWidth:n,originalPages:this.pdfPages.length}),this.pdfPages.forEach((o,s)=>{let d=o.width||595,_=o.height||842,b=n/d,S=n,M=_*b;console.log(`\u{1F4D0} \uD398\uC774\uC9C0 ${s+1} \uD06C\uAE30 \uC870\uC815:`,{original:{width:d,height:_},scale:b.toFixed(3),new:{width:S,height:M}}),o.width=S,o.height=M,o.elements.forEach(y=>{y.x=y.x*b,y.y=y.y*b,y.width=y.width*b,y.height=y.height*b,y.type==="text"&&y.fontSize&&(y.fontSize=y.fontSize*b)})}),this.cdr.detectChanges()}onElementClick(t){console.log("\u{1F3AF} [SharedPdfEditorMobile] \uC694\uC18C \uD074\uB9AD:",t.type,t.id),this.selectedElement=t,this.elementSelected.emit(t),t.type==="text"&&this.openMobileTextEdit(t),this.cdr.detectChanges()}openMobileTextEdit(t){t.type==="text"&&(this.mobileTextEditData={textId:t.id,content:t.text||"",pageNumber:this.currentPage,x:t.x,y:t.y,fontSize:t.fontSize||16,fontFamily:t.fontFamily||"Arial",color:t.color||"#000000"},this.showMobileTextEditModal=!0,this.textEditModalStateChange.emit(!0),this.cdr.detectChanges(),console.log("\u{1F4F1} [SharedPdfEditorMobile] \uD14D\uC2A4\uD2B8 \uD3B8\uC9D1 \uBAA8\uB2EC \uC5F4\uB9BC:",this.mobileTextEditData))}onMobileTextSave(t){console.log("\u{1F4BE} [SharedPdfEditorMobile] \uD14D\uC2A4\uD2B8 \uC218\uC815 \uC800\uC7A5:",t);let e=this.pdfPages[this.currentPage-1];if(!e){console.error("\u274C \uD604\uC7AC \uD398\uC774\uC9C0\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let n=e.elements.find(s=>s.id===t.textId);if(!n){console.error("\u274C \uD14D\uC2A4\uD2B8 \uC694\uC18C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}n.text=t.content||"",n.fontSize=t.fontSize,n.fontFamily=t.fontFamily,n.color=t.color;let o=this.calculateTextWidth(t.content||"",t.fontSize,t.fontFamily,n.fontWeight||"normal");n.width=o,console.log(`\u{1F4D0} [SharedPdfEditorMobile] \uD14D\uC2A4\uD2B8 \uB108\uBE44 \uC7AC\uACC4\uC0B0: ${o}px`),this.showMobileTextEditModal=!1,this.textEditModalStateChange.emit(!1),this.mobileTextEditData=null,this.pdfPagesChange.emit(this.pdfPages),this.elementUpdated.emit(n),this.cdr.detectChanges(),console.log("\u2705 [SharedPdfEditorMobile] \uD14D\uC2A4\uD2B8 \uC218\uC815 \uC644\uB8CC:",n)}onMobileTextCancel(){console.log("\u274C [SharedPdfEditorMobile] \uD14D\uC2A4\uD2B8 \uC218\uC815 \uCDE8\uC18C"),this.showMobileTextEditModal=!1,this.textEditModalStateChange.emit(!1),this.mobileTextEditData=null,this.cdr.detectChanges()}onMobileTextDelete(t){console.log("\u{1F5D1}\uFE0F [SharedPdfEditorMobile] \uD14D\uC2A4\uD2B8 \uC0AD\uC81C:",t);let e=this.pdfPages[this.currentPage-1];if(!e)return;let n=e.elements.findIndex(o=>o.id===t);n!==-1&&(e.elements.splice(n,1),this.showMobileTextEditModal=!1,this.mobileTextEditData=null,this.pdfPagesChange.emit(this.pdfPages),this.cdr.detectChanges(),console.log("\u2705 [SharedPdfEditorMobile] \uD14D\uC2A4\uD2B8 \uC0AD\uC81C \uC644\uB8CC"))}calculateTextWidth(t,e,n,o="normal"){let d=document.createElement("canvas").getContext("2d");if(!d)return t.length*e*.6;d.font=`${o} ${e}px ${n}`;let _=d.measureText(t);return Math.ceil(_.width)+20}startElementDrag(t,e){if(this.isPanMode)return;if(!["text","vector-path","image","shape","signature"].includes(e.type)){console.log("\u26A0\uFE0F [SharedPdfEditorMobile] \uB4DC\uB798\uADF8 \uBD88\uAC00 \uD0C0\uC785:",e.type);return}t.stopPropagation();let o="touches"in t?t.touches[0].clientX:t.clientX,s="touches"in t?t.touches[0].clientY:t.clientY;this.isDraggingElement=!0,this.currentDragElement=e,this.dragStartPosition={x:o,y:s},this.elementStartPosition={x:e.x,y:e.y,width:e.width,height:e.height},console.log("\u{1F5B1}\uFE0F [SharedPdfEditorMobile] \uB4DC\uB798\uADF8 \uC2DC\uC791:",e.type)}onCanvasContainerTouchStart(t){if(!this.isPanMode||!this.canvasContainerElement)return;let e=t.touches[0];this.isPanning=!0,this.panStartPos={x:e.clientX,y:e.clientY},this.scrollStartPos={x:this.canvasContainerElement.scrollLeft,y:this.canvasContainerElement.scrollTop},console.log("\u270B [SharedPdfEditorMobile] \uD398\uC774\uC9C0 \uB4DC\uB798\uADF8 \uC2DC\uC791")}updatePanPosition(t,e){if(!this.canvasContainerElement)return;let n=this.panStartPos.x-t,o=this.panStartPos.y-e;this.canvasContainerElement.scrollLeft=this.scrollStartPos.x+n,this.canvasContainerElement.scrollTop=this.scrollStartPos.y+o}stopPan(){this.isPanning=!1,console.log("\u270B [SharedPdfEditorMobile] \uD398\uC774\uC9C0 \uB4DC\uB798\uADF8 \uC885\uB8CC")}updateElementPosition(t,e){if(!this.currentDragElement)return;let n=t-this.dragStartPosition.x,o=e-this.dragStartPosition.y;this.currentDragElement.x=this.elementStartPosition.x+n,this.currentDragElement.y=this.elementStartPosition.y+o,this.cdr.detectChanges()}stopElementDrag(){this.currentDragElement&&(console.log("\u2705 [SharedPdfEditorMobile] \uB4DC\uB798\uADF8 \uC644\uB8CC:",this.currentDragElement.type),this.pdfPagesChange.emit(this.pdfPages),this.elementUpdated.emit(this.currentDragElement)),this.isDraggingElement=!1,this.currentDragElement=null,this.cdr.detectChanges()}previousPage(){this.currentPage>1&&(this.currentPage--,this.cdr.detectChanges())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.cdr.detectChanges())}goToPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.cdr.detectChanges())}static \u0275fac=function(e){return new(e||a)(z(fe))};static \u0275cmp=F({type:a,selectors:[["shared-pdf-editor-mobile"]],inputs:{config:"config",documentData:"documentData",pdfPages:"pdfPages",zoomLevel:"zoomLevel",isPanMode:"isPanMode"},outputs:{documentCreated:"documentCreated",exportPdf:"exportPdf",close:"close",pdfPagesChange:"pdfPagesChange",elementSelected:"elementSelected",elementUpdated:"elementUpdated",textEditModalStateChange:"textEditModalStateChange"},decls:5,vars:5,consts:[[1,"pdf-editor-mobile-container"],[3,"save","cancel","isVisible","textData"],[1,"creation-progress"],[1,"editor-content"],[1,"empty-state"],[1,"progress-content"],[1,"spinner"],[1,"progress-info"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"canvas-container",3,"touchstart"],[1,"page-canvas",3,"width","height","transform","transform-origin"],[1,"page-canvas"],["title","\uC6CC\uD130\uB9C8\uD06C",1,"watermark-element",3,"selected","left","top","width","height","transform","opacity"],["title","\uBCA1\uD130 \uADF8\uB798\uD53D",1,"vector-path-element",3,"selected","left","top","width","height"],[1,"pdf-element",3,"ngClass","selected","left","top","width","height"],["title","\uC6CC\uD130\uB9C8\uD06C",1,"watermark-element",3,"touchstart","click"],[2,"width","100%","height","100%","display","flex","align-items","center","justify-content","center","font-weight","bold","white-space","nowrap","pointer-events","none"],["title","\uBCA1\uD130 \uADF8\uB798\uD53D",1,"vector-path-element",3,"touchstart","click"],["preserveAspectRatio","xMidYMid meet",2,"overflow","visible","display","block"],["stroke-linecap","round","stroke-linejoin","round","vector-effect","non-scaling-stroke"],[1,"pdf-element",3,"click","touchstart","ngClass"],[1,"text-element",3,"font-size","font-family","font-weight","font-style","color"],[1,"image-element",3,"src","width","height"],[1,"shape-element",3,"shape-circle","shape-rectangle","shape-line","width","height","backgroundColor","border","borderRadius"],[1,"form-checkbox-element"],[1,"form-radio-element"],[1,"form-dropdown-element"],[1,"form-date-element"],[1,"signature-element",3,"src","width","height"],[1,"svg-element",3,"width","height","innerHTML"],[1,"text-element",3,"click"],[1,"image-element",3,"touchstart","click","src"],[1,"shape-element",3,"touchstart","click"],[1,"form-checkbox-element",3,"touchstart","click"],[1,"checkbox-box"],[1,"checkbox-label"],[1,"form-radio-element",3,"touchstart","click"],[1,"radio-circle"],["class","radio-dot",4,"ngIf"],[1,"radio-label"],[1,"radio-dot"],[1,"form-dropdown-element",3,"touchstart","click"],[1,"dropdown-label"],[1,"dropdown-field"],[1,"dropdown-value"],[1,"dropdown-icon"],[1,"form-date-element",3,"touchstart","click"],[1,"date-label"],[1,"date-field"],[1,"date-placeholder"],[1,"date-format"],[1,"signature-element",3,"touchstart","click","src"],[1,"svg-element",3,"touchstart","click","innerHTML"],[1,"empty-icon"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"app-mobile-text-edit-modal",1),u("save",function(s){return n.onMobileTextSave(s)})("cancel",function(){return n.onMobileTextCancel()}),r(),pe(2,Ts,10,4,"div",2),pe(3,Ks,3,5,"div",3),pe(4,Ys,7,0,"div",4),r()),e&2&&(c(),g("isVisible",n.showMobileTextEditModal)("textData",n.mobileTextEditData),c(),ge(n.isCreating?2:-1),c(),ge(!n.isCreating&&n.totalPages>0?3:-1),c(),ge(!n.isCreating&&n.totalPages===0?4:-1))},dependencies:[_e,Qe,j,en,ci],styles:[".pdf-editor-mobile-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;background:#f5f5f5;position:relative;overflow:hidden;touch-action:none}.creation-progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#fffffffa;display:flex;align-items:center;justify-content:center;z-index:1000}.creation-progress[_ngcontent-%COMP%]   .progress-content[_ngcontent-%COMP%]{text-align:center;padding:20px}.creation-progress[_ngcontent-%COMP%]   .progress-content[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:60px;height:60px;border:4px solid #e0e0e0;border-top-color:#2196f3;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}.creation-progress[_ngcontent-%COMP%]   .progress-content[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;color:#333;margin-bottom:12px}.creation-progress[_ngcontent-%COMP%]   .progress-content[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:240px;height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden;margin:0 auto 10px}.creation-progress[_ngcontent-%COMP%]   .progress-content[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#2196f3,#1976d2);transition:width .3s ease}.creation-progress[_ngcontent-%COMP%]   .progress-content[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:14px;color:#666}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.editor-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}.mobile-page-nav[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:12px;background:#fff;border-bottom:1px solid #e0e0e0;flex-shrink:0}.mobile-page-nav[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]{min-width:44px;min-height:44px;padding:0;border:1px solid #ddd;background:#fff;border-radius:8px;font-size:18px;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center}.mobile-page-nav[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]:active:not(:disabled){background:#f0f0f0;transform:scale(.95)}.mobile-page-nav[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.mobile-page-nav[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#333;min-width:80px;text-align:center}.canvas-container[_ngcontent-%COMP%]{flex:1;overflow:auto;-webkit-overflow-scrolling:touch;padding:16px;display:flex;justify-content:center;align-items:flex-start}.canvas-container.pan-mode[_ngcontent-%COMP%]{cursor:grab}.canvas-container.pan-mode.panning[_ngcontent-%COMP%]{cursor:grabbing}.canvas-container.pan-mode[_ngcontent-%COMP%]   .pdf-element[_ngcontent-%COMP%], .canvas-container.pan-mode[_ngcontent-%COMP%]   .vector-path-element[_ngcontent-%COMP%], .canvas-container.pan-mode[_ngcontent-%COMP%]   .watermark-element[_ngcontent-%COMP%]{pointer-events:none}.canvas-container[_ngcontent-%COMP%]   .page-canvas[_ngcontent-%COMP%]{background:#fff;box-shadow:0 2px 8px #00000026;position:relative;margin:0 auto;border-radius:4px;transition:transform .2s ease;user-select:none;-webkit-user-select:none}.pdf-element[_ngcontent-%COMP%]{position:absolute;cursor:pointer;border:2px solid transparent;transition:border-color .2s;touch-action:none}.pdf-element.selected[_ngcontent-%COMP%]{border-color:#2196f3;z-index:10}.pdf-element[_ngcontent-%COMP%]   .resize-handles[_ngcontent-%COMP%]{display:none}.text-element[_ngcontent-%COMP%]{width:100%;height:100%;white-space:pre-wrap;word-wrap:break-word;pointer-events:none;padding:.1em .1em .5em;line-height:1.7}.pdf-element.element-text[_ngcontent-%COMP%]:active   .text-element[_ngcontent-%COMP%]{background:#2196f30d}.image-element[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;pointer-events:none}.shape-element[_ngcontent-%COMP%]{pointer-events:none}.shape-element.shape-circle[_ngcontent-%COMP%]{border-radius:50%}.shape-element.shape-line[_ngcontent-%COMP%]{height:2px!important}.form-checkbox-element[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;height:100%;font-family:Noto Sans KR,Arial,sans-serif;font-size:14px;color:#1f2937;pointer-events:none}.form-checkbox-element[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]{border:2px solid #4b5563;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#2563eb;background:#fff;transition:all .15s ease;min-width:18px;min-height:18px;pointer-events:none}.form-checkbox-element[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;line-height:1}.form-checkbox-element[_ngcontent-%COMP%]   .checkbox-box.checked[_ngcontent-%COMP%]{background:#2563eb;border-color:#2563eb;color:#fff;box-shadow:0 2px 6px #2563eb59}.form-checkbox-element[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{flex:1;line-height:1.3;pointer-events:none}.form-radio-element[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;height:100%;font-family:Noto Sans KR,Arial,sans-serif;font-size:14px;color:#1f2937;pointer-events:none}.form-radio-element[_ngcontent-%COMP%]   .radio-circle[_ngcontent-%COMP%]{border:2px solid #4b5563;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#fff;transition:all .15s ease;min-width:18px;min-height:18px}.form-radio-element[_ngcontent-%COMP%]   .radio-circle.selected[_ngcontent-%COMP%]{border-color:#2563eb;box-shadow:0 2px 6px #2563eb59}.form-radio-element[_ngcontent-%COMP%]   .radio-circle[_ngcontent-%COMP%]   .radio-dot[_ngcontent-%COMP%]{width:60%;height:60%;border-radius:50%;background:#2563eb}.form-radio-element[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{flex:1;line-height:1.3;pointer-events:none}.form-dropdown-element[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;width:100%;height:100%;font-family:Noto Sans KR,Arial,sans-serif;color:#1f2937;pointer-events:none}.form-dropdown-element[_ngcontent-%COMP%]   .dropdown-label[_ngcontent-%COMP%]{font-size:13px;color:#4b5563}.form-dropdown-element[_ngcontent-%COMP%]   .dropdown-field[_ngcontent-%COMP%]{flex:1;border:1.5px solid #d1d5db;border-radius:8px;padding:8px 12px;display:flex;align-items:center;justify-content:space-between;background:#fff}.form-dropdown-element[_ngcontent-%COMP%]   .dropdown-value[_ngcontent-%COMP%]{font-size:14px;color:#111827}.form-dropdown-element[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{font-size:14px;color:#6b7280}.form-date-element[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;width:100%;height:100%;font-family:Noto Sans KR,Arial,sans-serif;color:#1f2937;pointer-events:none}.form-date-element[_ngcontent-%COMP%]   .date-label[_ngcontent-%COMP%]{font-size:13px;color:#4b5563}.form-date-element[_ngcontent-%COMP%]   .date-field[_ngcontent-%COMP%]{flex:1;border:1.5px solid #d1d5db;border-radius:8px;padding:8px 12px;display:flex;align-items:center;justify-content:space-between;background:#fff}.form-date-element[_ngcontent-%COMP%]   .date-placeholder[_ngcontent-%COMP%]{font-size:14px;color:#6b7280}.form-date-element[_ngcontent-%COMP%]   .date-format[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af}.signature-element[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;pointer-events:none}.svg-element[_ngcontent-%COMP%]{width:100%;height:100%;pointer-events:none}.svg-element[_ngcontent-%COMP%]     svg{width:100%;height:100%}.watermark-element[_ngcontent-%COMP%]{position:absolute;pointer-events:auto;border:2px solid transparent;transition:border-color .2s}.watermark-element.selected[_ngcontent-%COMP%]{border-color:#2196f3}.vector-path-element[_ngcontent-%COMP%]{position:absolute;pointer-events:auto;border:2px solid transparent;transition:border-color .2s}.vector-path-element.selected[_ngcontent-%COMP%]{border-color:#2196f3}.empty-state[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;color:#333;margin-bottom:8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#666;max-width:300px}@media (max-width: 480px){.canvas-container[_ngcontent-%COMP%]{padding:8px}.mobile-page-nav[_ngcontent-%COMP%]{padding:8px;gap:12px}.mobile-page-nav[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]{min-width:40px;min-height:40px;font-size:16px}.mobile-page-nav[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:14px;min-width:70px}}@media (orientation: landscape){.canvas-container[_ngcontent-%COMP%]   .page-canvas[_ngcontent-%COMP%]{max-width:90%;max-height:90%}}"],changeDetection:0})};function Zs(a,t){if(a&1){let e=w();i(0,"div",18)(1,"button",19),u("click",function(){f(e);let o=p();return h(o.onZoomIn())}),C(),i(2,"svg",20),m(3,"circle",21)(4,"path",22)(5,"line",23)(6,"line",24),r()(),v(),i(7,"button",25),u("click",function(){f(e);let o=p();return h(o.onZoomOut())}),C(),i(8,"svg",20),m(9,"circle",21)(10,"path",22)(11,"line",24),r()(),v(),i(12,"button",26),u("click",function(){f(e);let o=p();return h(o.togglePanMode())}),C(),i(13,"svg",20),m(14,"path",27)(15,"path",28),r()(),v(),i(16,"div",29),l(17),r()()}if(a&2){let e=p();c(12),R("active",e.isPanMode),c(5),D("",e.zoomLevel,"%")}}function Xs(a,t){if(a&1){let e=w();i(0,"app-text-editor-modal",30),u("save",function(o){f(e);let s=p();return h(s.onTextEditorSave(o))})("cancel",function(){f(e);let o=p();return h(o.onTextEditorCancel())}),r()}if(a&2){let e=p();g("data",e.textEditorData)("pageWidth",595)("pageHeight",842)}}function Qs(a,t){if(a&1){let e=w();i(0,"app-shared-shape-selection-modal",31),u("shapeSelected",function(o){f(e);let s=p();return h(s.onShapeSelect(o))})("cancel",function(){f(e);let o=p();return h(o.onCancelShapeModal())}),r()}}function Js(a,t){if(a&1){let e=w();i(0,"app-shared-signature-pad-modal",32),u("signatureCreated",function(o){f(e);let s=p();return h(s.onSignatureCreated(o))})("cancel",function(){f(e);let o=p();return h(o.onCancelSignatureModal())}),r()}}function el(a,t){if(a&1){let e=w();i(0,"app-vector-path-drawer",33),u("pathsChanged",function(o){f(e);let s=p();return h(s.onVectorPathsChanged(o))})("close",function(){f(e);let o=p();return h(o.onCancelVectorPathDrawer())}),r()}a&2&&g("width",595)("height",842)}var tn=class a{constructor(t,e,n){this.router=t;this.route=e;this.dialog=n}pdfPages=[];fileName="";pdfSrc=null;pdfBlob=null;currentActiveTab="editor";currentPage=1;totalPages=0;selectedElement=null;zoomLevel=100;isTextEditModalOpen=!1;isPanMode=!1;isPanning=!1;panStartPos={x:0,y:0};scrollStartPos={x:0,y:0};showTextEditorModal=!1;showShapeModal=!1;showSignaturePadModal=!1;showVectorPathDrawer=!1;textEditorData={text:"\uC0C8 \uD14D\uC2A4\uD2B8",fontSize:16,fontFamily:"Noto Sans KR",color:"#000000",x:100,y:100,width:200,height:30};pdfAnalysisData=null;vectorData=null;imageData=null;toolsPanel;snackbar=O(U);documentService=O(Ne);editorStateService=O(Le);pdfElementManager=O(ni);imageUploadService=O(ii);shapeCreatorService=O(oi);signatureService=O(ri);vectorPathService=O(ai);cdr=O(fe);ngOnInit(){console.log("\u{1F3A8} [Editor] \uD3B8\uC9D1\uAE30 \uCD08\uAE30\uD654");let t=this.editorStateService.getEditingDocument();t?this.loadStateFromService(t):(console.warn("\u26A0\uFE0F [Editor] \uD3B8\uC9D1\uD560 \uBB38\uC11C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),this.snackbar.showWarning("\uD3B8\uC9D1\uD560 \uBB38\uC11C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),this.goBackToViewer())}loadStateFromService(t){console.log("\u{1F4C2} [Editor] \uC0C1\uD0DC \uB85C\uB4DC:",t.fileName),this.pdfPages=t.pdfPages,this.fileName=t.fileName,this.pdfSrc=t.pdfSrc,this.pdfBlob=t.pdfBlob,this.currentPage=t.currentPage||1,this.totalPages=t.totalPages,this.pdfAnalysisData=t.pdfAnalysisData,this.vectorData=t.vectorData,this.imageData=t.imageData,console.log("\u2705 [Editor] \uC0C1\uD0DC \uB85C\uB4DC \uC644\uB8CC:",{pages:this.totalPages,elements:this.pdfPages.reduce((e,n)=>e+(n.elements?.length||0),0)})}toggleToolsPanel(){this.toolsPanel&&this.toolsPanel.toggleSheet()}onElementSelected(t){console.log("\u{1F4DD} [Editor] \uC694\uC18C \uC120\uD0DD:",t.id),this.selectedElement=t}onElementUpdated(t){console.log("\u2705 [Editor] \uC694\uC18C \uC5C5\uB370\uC774\uD2B8:",t.id)}onTextEditModalStateChange(t){this.isTextEditModalOpen=t}onElementPropertyChange(t){if(console.log("\u2699\uFE0F [Editor] \uC18D\uC131 \uBCC0\uACBD:",t),!this.selectedElement||this.selectedElement.id!==t.elementId)return;this.applyPropertyChange(this.selectedElement,t.property,t.value);let e=this.pdfPages[this.currentPage-1];if(e){let n=e.elements.findIndex(o=>o.id===t.elementId);n!==-1&&this.applyPropertyChange(e.elements[n],t.property,t.value)}this.snackbar.showSuccess("\uC18D\uC131\uC774 \uBCC0\uACBD\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}onDeleteElement(){if(!this.selectedElement)return;console.log("\u{1F5D1}\uFE0F [Editor] \uC694\uC18C \uC0AD\uC81C:",this.selectedElement.id);let t=this.pdfPages[this.currentPage-1];t&&(t.elements=t.elements.filter(e=>e.id!==this.selectedElement.id)),this.selectedElement=null,this.snackbar.showSuccess("\uC694\uC18C\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}onDeselectElement(){console.log("\u274C [Editor] \uC694\uC18C \uC120\uD0DD \uD574\uC81C"),this.selectedElement=null}onAddText(){console.log("\u{1F4DD} [Editor] \uD14D\uC2A4\uD2B8 \uCD94\uAC00 \uC2DC\uC791"),this.textEditorData={text:"\uC0C8 \uD14D\uC2A4\uD2B8",fontSize:16,fontFamily:"Noto Sans KR",color:"#000000",x:100,y:100,width:200,height:30},this.showTextEditorModal=!0}onTextEditorSave(t){console.log("\u{1F4BE} [Editor] \uD14D\uC2A4\uD2B8 \uC800\uC7A5:",t);try{let e=this.pdfElementManager.createTextElement(t),n=this.currentPage-1;n>=0&&n<this.pdfPages.length&&(this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,n,e),this.selectedElement=e,this.snackbar.showSuccess("\uD14D\uC2A4\uD2B8\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4."))}catch(e){console.error("\u274C [Editor] \uD14D\uC2A4\uD2B8 \uCD94\uAC00 \uC2E4\uD328:",e),this.snackbar.showError("\uD14D\uC2A4\uD2B8 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{this.showTextEditorModal=!1}}onTextEditorCancel(){this.showTextEditorModal=!1}onAddImage(){return x(this,null,function*(){try{console.log("\u{1F5BC}\uFE0F [Editor] \uC774\uBBF8\uC9C0 \uCD94\uAC00 \uC2DC\uC791");let t=yield this.imageUploadService.uploadAndCreateImageElement({maxWidth:300,maxHeight:300,centerOnPage:!0,pageWidth:595,pageHeight:842});if(!t)return;let e=this.currentPage-1;e>=0&&e<this.pdfPages.length&&(this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,e,t),this.selectedElement=t,this.snackbar.showSuccess("\uC774\uBBF8\uC9C0\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4."))}catch(t){console.error("\u274C [Editor] \uC774\uBBF8\uC9C0 \uCD94\uAC00 \uC2E4\uD328:",t),this.snackbar.showError("\uC774\uBBF8\uC9C0 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}onAddShape(){console.log("\u{1F537} [Editor] \uB3C4\uD615 \uC120\uD0DD \uBAA8\uB2EC \uC5F4\uAE30"),this.showShapeModal=!0}onShapeSelect(t){console.log("\u{1F537} [Editor] \uB3C4\uD615 \uC0DD\uC131:",t);try{let e=this.shapeCreatorService.createShape(t,{centerOnPage:!0,pageWidth:595,pageHeight:842}),n=this.currentPage-1;if(n>=0&&n<this.pdfPages.length){this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,n,e),this.selectedElement=e;let o=this.shapeCreatorService.getShapeTypeName(t);this.snackbar.showSuccess(`${o}\uC774(\uAC00) \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}}catch(e){console.error("\u274C [Editor] \uB3C4\uD615 \uC0DD\uC131 \uC2E4\uD328:",e),this.snackbar.showError("\uB3C4\uD615 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{this.showShapeModal=!1}}onCancelShapeModal(){this.showShapeModal=!1}onAddSignature(){console.log("\u270D\uFE0F [Editor] \uC11C\uBA85 \uCD94\uAC00 \uC2DC\uC791"),this.showSignaturePadModal=!0}onSignatureCreated(t){console.log("\u270D\uFE0F [Editor] \uC11C\uBA85 \uC0DD\uC131");try{let e=this.signatureService.createSignatureElement(t,{centerOnPage:!0,pageWidth:595,pageHeight:842}),n=this.currentPage-1;n>=0&&n<this.pdfPages.length&&(this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,n,e),this.selectedElement=e,this.snackbar.showSuccess("\uC11C\uBA85\uC774 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4."))}catch(e){console.error("\u274C [Editor] \uC11C\uBA85 \uC0DD\uC131 \uC2E4\uD328:",e),this.snackbar.showError("\uC11C\uBA85 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{this.showSignaturePadModal=!1}}onCancelSignatureModal(){this.showSignaturePadModal=!1}onAddVectorPath(){console.log("\u{1F3A8} [Editor] \uBCA1\uD130 \uD328\uC2A4 \uADF8\uB9AC\uAE30 \uC2DC\uC791"),this.showVectorPathDrawer=!0}onAddFormCheckbox(){if(!this.pdfPages||this.pdfPages.length===0){this.snackbar.showWarning("\uBA3C\uC800 \uD3B8\uC9D1\uD560 \uD398\uC774\uC9C0\uB97C \uBD88\uB7EC\uC640 \uC8FC\uC138\uC694.");return}let t=Math.max(0,Math.min(this.currentPage-1,this.pdfPages.length-1)),e=this.pdfPages[t];if(!e){this.snackbar.showWarning("\uD398\uC774\uC9C0\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let n=160,o=32,s=e.width||595,d=e.height||842,_=Math.max(32,(s-n)/2),b=Math.max(48,d*.3-o/2),M=`\uCCB4\uD06C\uBC15\uC2A4 ${e.elements.filter(k=>k.type==="form-checkbox").length+1}`,y=this.pdfElementManager.createFormCheckboxElement({x:_,y:b,width:n,height:o,size:20,label:M,checked:!1});this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,t,y),this.selectedElement=y,this.snackbar.showSuccess(`${M}\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}onAddFormRadio(){if(!this.pdfPages||this.pdfPages.length===0){this.snackbar.showWarning("\uBA3C\uC800 \uD3B8\uC9D1\uD560 \uD398\uC774\uC9C0\uB97C \uBD88\uB7EC\uC640 \uC8FC\uC138\uC694.");return}let t=Math.max(0,Math.min(this.currentPage-1,this.pdfPages.length-1)),e=this.pdfPages[t];if(!e){this.snackbar.showWarning("\uD398\uC774\uC9C0\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let n=160,o=32,s=e.width||595,d=e.height||842,_=Math.max(32,(s-n)/2),b=Math.max(48,d*.3-o/2),S=e.elements.filter(T=>T.type==="form-radio").length+1,M=`\uB77C\uB514\uC624 \uC635\uC158 ${S}`,y=`radio-group-${t+1}`,k=this.pdfElementManager.createFormRadioElement({x:_,y:b,width:n,height:o,size:18,label:M,value:`option-${S}`,groupName:y,selected:!1});this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,t,k),this.selectedElement=k,this.snackbar.showSuccess(`${M}\uC774 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}onAddFormDropdown(){if(!this.pdfPages||this.pdfPages.length===0){this.snackbar.showWarning("\uBA3C\uC800 \uD3B8\uC9D1\uD560 \uD398\uC774\uC9C0\uB97C \uBD88\uB7EC\uC640 \uC8FC\uC138\uC694.");return}let t=Math.max(0,Math.min(this.currentPage-1,this.pdfPages.length-1)),e=this.pdfPages[t];if(!e){this.snackbar.showWarning("\uD398\uC774\uC9C0\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let n=260,o=44,s=e.width||595,d=e.height||842,_=Math.max(32,(s-n)/2),b=Math.max(56,d*.4-o/2),M=`\uB4DC\uB86D\uB2E4\uC6B4 ${e.elements.filter(k=>k.type==="form-dropdown").length+1}`,y=this.pdfElementManager.createFormDropdownElement({x:_,y:b,width:n,height:o,label:M,options:["\uC635\uC158 1","\uC635\uC158 2","\uC635\uC158 3"],selectedOption:"\uC635\uC158 1"});this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,t,y),this.selectedElement=y,this.snackbar.showSuccess(`${M}\uC774 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}onAddFormDateField(){if(!this.pdfPages||this.pdfPages.length===0){this.snackbar.showWarning("\uBA3C\uC800 \uD3B8\uC9D1\uD560 \uD398\uC774\uC9C0\uB97C \uBD88\uB7EC\uC640 \uC8FC\uC138\uC694.");return}let t=Math.max(0,Math.min(this.currentPage-1,this.pdfPages.length-1)),e=this.pdfPages[t];if(!e){this.snackbar.showWarning("\uD398\uC774\uC9C0\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let n=260,o=56,s=e.width||595,d=e.height||842,_=Math.max(32,(s-n)/2),b=Math.max(64,d*.45-o/2),M=`\uB0A0\uC9DC \uD544\uB4DC ${e.elements.filter(k=>k.type==="form-date").length+1}`,y=this.pdfElementManager.createFormDateElement({x:_,y:b,width:n,height:o,label:M,placeholder:"YYYY-MM-DD",dateFormat:"YYYY-MM-DD",defaultValue:""});this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,t,y),this.selectedElement=y,this.snackbar.showSuccess(`${M}\uC774 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}onVectorPathsChanged(t){console.log("\u{1F3A8} [Editor] \uBCA1\uD130 \uD328\uC2A4 \uC801\uC6A9:",t.length),!(!t||t.length===0)&&(t.forEach((e,n)=>{try{let o=this.vectorPathService.createVectorPathElement({pathData:e.d,strokeColor:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,fillOpacity:e.fillOpacity,strokeOpacity:e.strokeOpacity},{pageWidth:595,pageHeight:842}),s=this.currentPage-1;s>=0&&s<this.pdfPages.length&&(this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,s,o),n===t.length-1&&(this.selectedElement=o))}catch(o){console.error(`\u274C [Editor] \uBCA1\uD130 \uD328\uC2A4 ${n+1} \uC0DD\uC131 \uC2E4\uD328:`,o)}}),this.snackbar.showSuccess(`${t.length}\uAC1C\uC758 \uBCA1\uD130 \uD328\uC2A4\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),this.showVectorPathDrawer=!1)}onCancelVectorPathDrawer(){this.showVectorPathDrawer=!1}onAddPage(){console.log("\u2795 [Editor] \uD398\uC774\uC9C0 \uCD94\uAC00");let t=this.pdfPages.length+1;this.pdfPages.push({pageNumber:t,elements:[],width:595,height:842}),this.totalPages=this.pdfPages.length,this.snackbar.showSuccess("\uC0C8 \uD398\uC774\uC9C0\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}onDeletePage(){if(this.pdfPages.length<=1){this.snackbar.showWarning("\uB9C8\uC9C0\uB9C9 \uD398\uC774\uC9C0\uB294 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}console.log("\u{1F5D1}\uFE0F [Editor] \uD398\uC774\uC9C0 \uC0AD\uC81C"),this.pdfPages.splice(this.currentPage-1,1),this.pdfPages.forEach((t,e)=>{t.pageNumber=e+1}),this.totalPages=this.pdfPages.length,this.currentPage>this.totalPages&&(this.currentPage=this.totalPages),this.snackbar.showSuccess("\uD398\uC774\uC9C0\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}onRotatePage(){console.log("\u{1F504} [Editor] \uD398\uC774\uC9C0 \uD68C\uC804"),this.snackbar.showInfo("\uD398\uC774\uC9C0 \uD68C\uC804 \uAE30\uB2A5 \uC900\uBE44 \uC911")}onPageSelect(t){let e=parseInt(t.toString(),10);e>=1&&e<=this.totalPages&&(this.currentPage=e,console.log("\u{1F4C4} [Editor] \uD398\uC774\uC9C0 \uC774\uB3D9:",e))}onZoomIn(){this.zoomLevel=Math.min(this.zoomLevel+25,300),console.log("\u{1F50D} [Editor] \uD655\uB300:",this.zoomLevel+"%")}onZoomOut(){this.zoomLevel=Math.max(this.zoomLevel-25,50),console.log("\u{1F50E} [Editor] \uCD95\uC18C:",this.zoomLevel+"%")}togglePanMode(){this.isPanMode=!this.isPanMode,console.log("\u270B [Editor] \uC190 \uB3C4\uAD6C:",this.isPanMode?"\uD65C\uC131\uD654":"\uBE44\uD65C\uC131\uD654"),this.isPanMode&&this.snackbar.showInfo("\uD398\uC774\uC9C0\uB97C \uB4DC\uB798\uADF8\uD558\uC5EC \uC774\uB3D9\uD558\uC138\uC694")}onAddAnalyze(){this.snackbar.showInfo("\uD3B8\uC9D1\uAE30\uC5D0\uC11C\uB294 PDF \uBD84\uC11D\uC744 \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}onSaveDocument(){return x(this,null,function*(){try{console.log("\u{1F4BE} [Editor] \uBB38\uC11C \uC800\uC7A5 \uC2DC\uC791");let t=prompt("\uBB38\uC11C \uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694:",this.fileName||"\uC0C8\uBB38\uC11C.pdf");if(!t||t.trim()==="")return;this.snackbar.showInfo("\uBB38\uC11C\uB97C \uC800\uC7A5\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4..."),yield this.documentService.saveDocumentSimple(t.trim(),this.pdfPages,"editor",this.pdfBlob||void 0,this.pdfSrc||void 0),this.fileName=t.trim()}catch(t){console.error("\u274C [Editor] \uBB38\uC11C \uC800\uC7A5 \uC2E4\uD328:",t),this.snackbar.showError("\uBB38\uC11C \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}goBackToViewer(){console.log("\u25C0\uFE0F [Editor] \uD648\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30"),this.editorStateService.clearEditingDocument(),this.pdfSrc&&this.documentService.revokeBlobUrl(this.pdfSrc),this.router.navigate(["/ezm/home"])}ngOnDestroy(){console.log("\u{1F5D1}\uFE0F [Editor] \uD3B8\uC9D1\uAE30 \uD30C\uAD34"),this.pdfSrc&&this.documentService.revokeBlobUrl(this.pdfSrc)}applyPropertyChange(t,e,n){if(!t||!e)return;let o=e.split(".");if(o.length===1){t[o[0]]=n;return}let s=t;for(let d=0;d<o.length-1;d++){let _=o[d];(s[_]===void 0||s[_]===null)&&(s[_]={}),s=s[_]}s[o[o.length-1]]=n}static \u0275fac=function(e){return new(e||a)(z(V),z(Pe),z(it))};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-editor"]],viewQuery:function(e,n){if(e&1&&je(we,5),e&2){let o;He(o=Ge())&&(n.toolsPanel=o.first)}},standalone:!1,decls:19,vars:18,consts:[[1,"mobile-editor-container"],[1,"mobile-header"],[1,"header-back-btn",3,"click"],["src","images/ico-before@3x.png","alt","\uB4A4\uB85C\uAC00\uAE30","width","20","height","20",1,"back-icon"],[1,"header-title"],["aria-label","\uB3C4\uAD6C \uBA54\uB274",1,"header-menu-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["cx","12","cy","5","r","2","fill","currentColor"],["cx","12","cy","12","r","2","fill","currentColor"],["cx","12","cy","19","r","2","fill","currentColor"],[3,"pdfPagesChange","elementSelected","elementUpdated","textEditModalStateChange","pdfPages","pdfPages","zoomLevel","isPanMode"],["class","floating-zoom-controls",4,"ngIf"],[3,"addText","addImage","addShape","addSignature","addVectorPath","addFormCheckbox","addFormRadio","addFormDropdown","addFormDateField","analyze","saveDocument","addPage","deletePage","rotatePage","pageSelect","zoomIn","zoomOut","elementPropertyChange","deleteElement","deselectElement","selectedElement","currentPage","totalPages","zoomLevel","pdfPages","isPdfViewer","isTextEditModalOpen"],[3,"activeTab"],[3,"data","pageWidth","pageHeight","save","cancel",4,"ngIf"],[3,"shapeSelected","cancel",4,"ngIf"],[3,"signatureCreated","cancel",4,"ngIf"],[3,"width","height","pathsChanged","close",4,"ngIf"],[1,"floating-zoom-controls"],["aria-label","\uD655\uB300",1,"zoom-btn","zoom-in-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","11","cy","11","r","8"],["d","M21 21l-4.35-4.35"],["x1","11","y1","8","x2","11","y2","14"],["x1","8","y1","11","x2","14","y2","11"],["aria-label","\uCD95\uC18C",1,"zoom-btn","zoom-out-btn",3,"click"],["aria-label","\uC190 \uB3C4\uAD6C",1,"zoom-btn","hand-tool-btn",3,"click"],["d","M9 11V6a2 2 0 0 1 4 0v5M9 11a2 2 0 1 0-4 0v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2h-1"],["d","M13 6a2 2 0 0 1 4 0v5M17 11a2 2 0 0 1 2 0"],[1,"zoom-level-display"],[3,"save","cancel","data","pageWidth","pageHeight"],[3,"shapeSelected","cancel"],[3,"signatureCreated","cancel"],[3,"pathsChanged","close","width","height"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"header",1)(2,"button",2),u("click",function(){return n.goBackToViewer()}),m(3,"img",3),r(),i(4,"h1",4),l(5),r(),i(6,"button",5),u("click",function(){return n.toggleToolsPanel()}),C(),i(7,"svg",6),m(8,"circle",7)(9,"circle",8)(10,"circle",9),r()()(),v(),i(11,"shared-pdf-editor-mobile",10),W("pdfPagesChange",function(s){return $(n.pdfPages,s)||(n.pdfPages=s),s}),u("elementSelected",function(s){return n.onElementSelected(s)})("elementUpdated",function(s){return n.onElementUpdated(s)})("textEditModalStateChange",function(s){return n.onTextEditModalStateChange(s)}),r(),P(12,Zs,18,3,"div",11),i(13,"shared-pdf-tools-panel-mobile",12),u("addText",function(){return n.onAddText()})("addImage",function(){return n.onAddImage()})("addShape",function(){return n.onAddShape()})("addSignature",function(){return n.onAddSignature()})("addVectorPath",function(){return n.onAddVectorPath()})("addFormCheckbox",function(){return n.onAddFormCheckbox()})("addFormRadio",function(){return n.onAddFormRadio()})("addFormDropdown",function(){return n.onAddFormDropdown()})("addFormDateField",function(){return n.onAddFormDateField()})("analyze",function(){return n.onAddAnalyze()})("saveDocument",function(){return n.onSaveDocument()})("addPage",function(){return n.onAddPage()})("deletePage",function(){return n.onDeletePage()})("rotatePage",function(){return n.onRotatePage()})("pageSelect",function(s){return n.onPageSelect(s)})("zoomIn",function(){return n.onZoomIn()})("zoomOut",function(){return n.onZoomOut()})("elementPropertyChange",function(s){return n.onElementPropertyChange(s)})("deleteElement",function(){return n.onDeleteElement()})("deselectElement",function(){return n.onDeselectElement()}),r()(),m(14,"ez-reader-mobile-bottom-nav",13),P(15,Xs,1,3,"app-text-editor-modal",14)(16,Qs,1,0,"app-shared-shape-selection-modal",15)(17,Js,1,0,"app-shared-signature-pad-modal",16)(18,el,1,2,"app-vector-path-drawer",17)),e&2&&(c(5),E(n.fileName||"PDF \uD3B8\uC9D1\uAE30"),c(6),g("pdfPages",n.pdfPages),G("pdfPages",n.pdfPages),g("zoomLevel",n.zoomLevel)("isPanMode",n.isPanMode),c(),g("ngIf",n.pdfPages.length>0),c(),g("selectedElement",n.selectedElement)("currentPage",n.currentPage)("totalPages",n.totalPages)("zoomLevel",n.zoomLevel)("pdfPages",n.pdfPages)("isPdfViewer",!1)("isTextEditModalOpen",n.isTextEditModalOpen),c(),g("activeTab",n.currentActiveTab),c(),g("ngIf",n.showTextEditorModal),c(),g("ngIf",n.showShapeModal),c(),g("ngIf",n.showSignaturePadModal),c(),g("ngIf",n.showVectorPathDrawer))},dependencies:[j,lt,we,Ot,kt,Et,Dt,de],styles:[".mobile-editor-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow:hidden;background-color:#f5f5f5}.mobile-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background-color:#fff;border-bottom:1px solid #e0e0e0;box-shadow:0 2px 4px #0000001a;z-index:10}.header-back-btn[_ngcontent-%COMP%], .header-menu-btn[_ngcontent-%COMP%]{padding:8px;background:none;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#333}.header-back-btn[_ngcontent-%COMP%]:active, .header-menu-btn[_ngcontent-%COMP%]:active{opacity:.6}.back-icon[_ngcontent-%COMP%]{display:block}.header-title[_ngcontent-%COMP%]{flex:1;margin:0 16px;font-size:18px;font-weight:600;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}.floating-zoom-controls[_ngcontent-%COMP%]{position:fixed;right:16px;bottom:60px;display:flex;flex-direction:column;gap:8px;z-index:900}.zoom-btn[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:#fff;border:none;box-shadow:0 2px 8px #00000026;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#333;transition:all .2s ease}.zoom-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0003;transform:scale(1.05)}.zoom-btn[_ngcontent-%COMP%]:active{transform:scale(.95);background:#f0f0f0}.zoom-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.zoom-level-display[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:6px 12px;font-size:12px;font-weight:600;color:#333;text-align:center;box-shadow:0 2px 8px #00000026;min-width:48px}.hand-tool-btn.active[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.hand-tool-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#fff}"]})};var nn=class a{indexedDbService=O(J);snackbar=O(U);router=O(V);openPdf(t){return x(this,null,function*(){try{let e=yield this.indexedDbService.getDocumentById(t.id);if(!e){this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.router.navigate(["/ezm/viewer"],{state:{document:e}})}catch(e){console.error("\uBB38\uC11C \uC5F4\uAE30 \uC2E4\uD328:",e),this.snackbar.showError("\uBB38\uC11C\uB97C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}sharePdf(t){return x(this,null,function*(){try{let e=yield this.indexedDbService.getDocumentById(t.id);if(!e){this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let n=e.pdfBase64||e.originalPdfBase64;if(!n){this.snackbar.showError("\uACF5\uC720\uD560 PDF \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let o=this.ensurePdfExtension(e.fileName||e.title||t.name||"document.pdf");if(this.tryNativeShare(o,n)){console.log("\u2705 Native \uACF5\uC720 \uD638\uCD9C \uC644\uB8CC"),this.snackbar.showSuccess("\uBB38\uC11C\uB97C \uACF5\uC720\uD588\uC2B5\uB2C8\uB2E4.");return}if(typeof navigator<"u"&&navigator.share){let s=this.base64ToBlob(n,"application/pdf"),d=[];try{d.push(new File([s],o,{type:"application/pdf"}))}catch(b){console.warn("File \uAC1D\uCCB4 \uC0DD\uC131 \uC2E4\uD328",b)}let _={title:o,text:`${o} \uBB38\uC11C\uB97C \uACF5\uC720\uD569\uB2C8\uB2E4.`};d.length&&(typeof navigator.canShare!="function"||navigator.canShare({files:d}))&&(_.files=d),yield navigator.share(_),this.snackbar.showSuccess("\uBB38\uC11C\uB97C \uACF5\uC720\uD588\uC2B5\uB2C8\uB2E4.");return}console.log("\u{1F4E5} Web Share API \uBBF8\uC9C0\uC6D0 - \uB2E4\uC6B4\uB85C\uB4DC \uC0AC\uC6A9"),this.downloadFile(o,n),this.snackbar.showSuccess("\uD30C\uC77C\uC774 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(e){if(e?.name==="AbortError"){console.log("\uACF5\uC720 \uCDE8\uC18C\uB428");return}console.error("\uBB38\uC11C \uACF5\uC720 \uC2E4\uD328:",e),this.snackbar.showError("\uBB38\uC11C \uACF5\uC720\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}duplicatePdf(t){return x(this,null,function*(){try{let e=yield this.indexedDbService.getDocumentById(t.id);if(!e)return this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),!1;let n=new Date().toISOString(),o=(e.title||e.fileName||t.name||"\uBB38\uC11C").replace(/\.pdf$/i,""),s=se(oe({},e),{id:this.generateDocumentId(),title:`${o} \uC0AC\uBCF8`,fileName:`${o}_\uC0AC\uBCF8.pdf`,createdAt:n,updatedAt:n});return yield this.indexedDbService.saveDocument(s),this.snackbar.showSuccess("\uC0AC\uBCF8\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),!0}catch(e){return console.error("\uD30C\uC77C \uBCF5\uC81C \uC2E4\uD328:",e),this.snackbar.showError("\uD30C\uC77C\uC744 \uBCF5\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),!1}})}renamePdf(t,e){return x(this,null,function*(){try{let n=yield this.indexedDbService.getDocumentById(t.id);if(!n)return this.snackbar.showError("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),!1;let o=e.replace(/\.pdf$/i,""),s=this.ensurePdfExtension(e);return n.title=o,n.fileName=s,yield this.indexedDbService.updateDocument(n),this.snackbar.showSuccess("\uD30C\uC77C \uC774\uB984\uC774 \uBCC0\uACBD\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),!0}catch(n){return console.error("\uC774\uB984 \uBCC0\uACBD \uC2E4\uD328:",n),this.snackbar.showError("\uC774\uB984\uC744 \uBCC0\uACBD\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),!1}})}deletePdf(t){return x(this,null,function*(){try{return(yield ve(`"${t.name}" \uD30C\uC77C\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`))?(yield this.indexedDbService.deleteDocument(t.id),this.snackbar.showSuccess("\uD30C\uC77C\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),!0):!1}catch(e){return console.error("\uD30C\uC77C \uC0AD\uC81C \uC2E4\uD328:",e),this.snackbar.showError("\uD30C\uC77C \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),!1}})}tryNativeShare(t,e){if(typeof window<"u"&&window.parent!==window)try{return console.log("\u{1F4E8} postMessage\uB97C \uD1B5\uD55C \uB124\uC774\uD2F0\uBE0C \uD1B5\uC2E0 \uC2DC\uB3C4"),window.parent.postMessage({type:"share",fileName:t,data:e},"*"),!0}catch(n){console.warn("postMessage \uC2E4\uD328:",n)}return window.ReactNativeWebView?(console.log("\u{1F4F1} React Native WebView \uAC10\uC9C0"),window.ReactNativeWebView.postMessage(JSON.stringify({type:"share",fileName:t,data:e})),!0):window.webkit?.messageHandlers?.shareFile?(console.log("\u{1F34E} iOS WKWebView \uAC10\uC9C0"),window.webkit.messageHandlers.shareFile.postMessage({fileName:t,data:e}),!0):window.Android?.shareFile?(console.log("\u{1F916} Android WebView \uAC10\uC9C0"),window.Android.shareFile(t,e),!0):(console.log("\u{1F310} Native Bridge \uBBF8\uAC10\uC9C0 - Web Share API \uC2DC\uB3C4"),!1)}downloadFile(t,e){let n=this.base64ToBlob(e,"application/pdf"),o=URL.createObjectURL(n),s=document.createElement("a");s.href=o,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)}ensurePdfExtension(t){let e=t.trim();return/\.pdf$/i.test(e)?e:`${e}.pdf`}base64ToBlob(t,e="application/pdf"){let n=t.includes(",")?t.split(",")[1]:t,o=atob(n),s=new Array(o.length);for(let _=0;_<o.length;_++)s[_]=o.charCodeAt(_);let d=new Uint8Array(s);return new Blob([d],{type:e})}generateDocumentId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(e){return new(e||a)};static \u0275prov=Q({token:a,factory:a.\u0275fac,providedIn:"root"})};function tl(a,t){if(a&1){let e=w();me(0),i(1,"div",4)(2,"button",5),u("click",function(){f(e);let o=p(2);return h(o.cancelRename())}),C(),i(3,"svg",6),m(4,"path",7),r()(),v(),i(5,"h3",8),l(6,"\uC774\uB984 \uBCC0\uACBD"),r()(),i(7,"div",9)(8,"label",10),l(9,"\uC0C8 \uC774\uB984"),r(),i(10,"input",11),W("ngModelChange",function(o){f(e);let s=p(2);return $(s.renameValue,o)||(s.renameValue=o),h(o)}),r(),i(11,"p",12),l(12,".pdf \uD655\uC7A5\uC790\uB294 \uC790\uB3D9\uC73C\uB85C \uCD94\uAC00\uB429\uB2C8\uB2E4."),r(),i(13,"div",13)(14,"button",14),u("click",function(){f(e);let o=p(2);return h(o.cancelRename())}),l(15,"\uCDE8\uC18C"),r(),i(16,"button",15),u("click",function(){f(e);let o=p(2);return h(o.confirmRename())}),l(17,"\uC644\uB8CC"),r()()(),ue()}if(a&2){let e=p(2);c(10),G("ngModel",e.renameValue)}}function nl(a,t){if(a&1){let e=w();me(0),i(1,"div",16)(2,"h3",8),l(3),r()(),i(4,"div",17)(5,"button",18),u("click",function(){f(e);let o=p(2);return h(o.onAction("open"))}),C(),i(6,"svg",19),m(7,"path",20)(8,"polyline",21),r(),v(),i(9,"span"),l(10,"PDF \uC5F4\uAE30"),r()(),i(11,"button",18),u("click",function(){f(e);let o=p(2);return h(o.onAction("share"))}),C(),i(12,"svg",19),m(13,"path",22)(14,"polyline",23)(15,"line",24),r(),v(),i(16,"span"),l(17,"\uACF5\uC720"),r()(),i(18,"button",18),u("click",function(){f(e);let o=p(2);return h(o.onAction("rename"))}),C(),i(19,"svg",19),m(20,"path",25)(21,"path",26),r(),v(),i(22,"span"),l(23,"\uC774\uB984\uBCC0\uACBD"),r()(),i(24,"button",18),u("click",function(){f(e);let o=p(2);return h(o.onAction("duplicate"))}),C(),i(25,"svg",19),m(26,"rect",27)(27,"path",28),r(),v(),i(28,"span"),l(29,"\uBCF5\uC81C"),r()(),i(30,"button",29),u("click",function(){f(e);let o=p(2);return h(o.onAction("delete"))}),C(),i(31,"svg",19),m(32,"path",30)(33,"line",31)(34,"line",32),r(),v(),i(35,"span"),l(36,"\uC0AD\uC81C"),r()()(),ue()}if(a&2){let e=p(2);c(3),E(e.item.name)}}function il(a,t){if(a&1&&(i(0,"div",2),P(1,tl,18,1,"ng-container",3)(2,nl,37,1,"ng-container",3),r()),a&2){let e=p();c(),g("ngIf",e.isRenameMode),c(),g("ngIf",!e.isRenameMode)}}var on=class a{item=null;sheetState="collapsed";sheetStateChange=new N;actionComplete=new N;renameRequest=new N;isRenameMode=!1;renameValue="";pdfActions=O(nn);onSheetStateChange(t){this.sheetState=t,this.sheetStateChange.emit(t),t==="collapsed"&&this.closeSheet()}onAction(t){return x(this,null,function*(){if(!this.item)return;if(t==="rename"){this.openRenameMode();return}this.closeSheet();let e=!1;switch(t){case"open":yield this.pdfActions.openPdf(this.item),e=!0;break;case"share":yield this.pdfActions.sharePdf(this.item),e=!0;break;case"duplicate":e=yield this.pdfActions.duplicatePdf(this.item);break;case"delete":e=yield this.pdfActions.deletePdf(this.item);break}e&&this.actionComplete.emit(t)})}openRenameMode(){this.item&&(this.isRenameMode=!0,this.renameValue=this.item.name.replace(/\.pdf$/i,""),this.sheetState="full",this.sheetStateChange.emit("full"))}cancelRename(){this.isRenameMode=!1,this.renameValue="",this.sheetState="half",this.sheetStateChange.emit("half")}confirmRename(){return x(this,null,function*(){if(!this.item||!this.renameValue.trim())return;(yield this.pdfActions.renamePdf(this.item,this.renameValue.trim()))&&(this.renameRequest.emit(this.renameValue.trim()),this.closeSheet(),this.actionComplete.emit("rename"))})}closeSheet(){this.isRenameMode=!1,this.renameValue="",this.sheetState="collapsed",this.sheetStateChange.emit("collapsed")}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=F({type:a,selectors:[["app-pdf-action-sheet"]],inputs:{item:"item",sheetState:"sheetState"},outputs:{sheetStateChange:"sheetStateChange",actionComplete:"actionComplete",renameRequest:"renameRequest"},standalone:!1,decls:2,vars:2,consts:[[3,"sheetStateChange","sheetState"],["class","pdf-action-sheet",4,"ngIf"],[1,"pdf-action-sheet"],[4,"ngIf"],[1,"sheet-header","rename-mode"],["aria-label","\uC774\uB984 \uBCC0\uACBD \uCDE8\uC18C",1,"sheet-back-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["d","M15 18l-6-6 6-6","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"sheet-title"],[1,"rename-form"],["for","renameInput",1,"rename-label"],["id","renameInput","type","text","maxlength","80","placeholder","\uC0C8 \uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694",1,"rename-input",3,"ngModelChange","ngModel"],[1,"rename-helper"],[1,"rename-actions"],["type","button",1,"rename-cancel",3,"click"],["type","button",1,"rename-confirm",3,"click"],[1,"sheet-header"],[1,"sheet-options"],[1,"sheet-option",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","14 2 14 8 20 8","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","16 6 12 2 8 6","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","12","y1","2","x2","12","y2","15","stroke","#333","stroke-width","2","stroke-linecap","round"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x","9","y","9","width","13","height","13","rx","2","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"sheet-option","danger",3,"click"],["d","M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","10","y1","11","x2","10","y2","17","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["x1","14","y1","11","x2","14","y2","17","stroke","currentColor","stroke-width","2","stroke-linecap","round"]],template:function(e,n){e&1&&(i(0,"app-bottom-sheet",0),W("sheetStateChange",function(s){return $(n.sheetState,s)||(n.sheetState=s),s}),u("sheetStateChange",function(s){return n.onSheetStateChange(s)}),P(1,il,3,2,"div",1),r()),e&2&&(G("sheetState",n.sheetState),c(),g("ngIf",n.item))},dependencies:[j,ce,re,vt,ae,he],styles:[".pdf-action-sheet[_ngcontent-%COMP%]{display:flex;flex-direction:column}.sheet-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:20px 20px 16px;border-bottom:1px solid #f0f0f0}.sheet-header.rename-mode[_ngcontent-%COMP%]{padding:16px 20px}.sheet-back-btn[_ngcontent-%COMP%]{flex-shrink:0;width:32px;height:32px;padding:0;background:none;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background .2s}.sheet-back-btn[_ngcontent-%COMP%]:active{background:#0000000d}.sheet-title[_ngcontent-%COMP%]{flex:1;margin:0;font-size:18px;font-weight:600;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sheet-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 0}.sheet-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px 20px;background:none;border:none;width:100%;text-align:left;cursor:pointer;transition:background .2s;color:#333}.sheet-option[_ngcontent-%COMP%]:active{background:#f5f5f5}.sheet-option.danger[_ngcontent-%COMP%]{color:#f44336}.sheet-option[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;width:24px;height:24px}.sheet-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-size:16px;font-weight:400}.rename-form[_ngcontent-%COMP%]{padding:24px 20px}.rename-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#666;margin-bottom:8px}.rename-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #ddd;border-radius:8px;font-size:16px;color:#333;transition:all .2s}.rename-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;box-shadow:0 0 0 3px #2196f31a}.rename-input[_ngcontent-%COMP%]::placeholder{color:#999}.rename-helper[_ngcontent-%COMP%]{margin:8px 0 0;font-size:13px;color:#999}.rename-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:24px}.rename-cancel[_ngcontent-%COMP%], .rename-confirm[_ngcontent-%COMP%]{flex:1;padding:12px;border:none;border-radius:8px;font-size:16px;font-weight:500;cursor:pointer;transition:all .2s}.rename-cancel[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}.rename-cancel[_ngcontent-%COMP%]:active{background:#e0e0e0}.rename-confirm[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.rename-confirm[_ngcontent-%COMP%]:active{background:#1976d2}"]})};function rl(a,t){if(a&1){let e=w();i(0,"button",16),u("click",function(){f(e);let o=p();return h(o.clearSearch())}),C(),i(1,"svg",17),m(2,"line",18)(3,"line",19),r()()}}function al(a,t){if(a&1&&(i(0,"div",20),C(),i(1,"svg",21),m(2,"circle",5)(3,"path",6),r(),v(),i(4,"h3"),l(5,"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"),r(),i(6,"p"),l(7),r()()),a&2){let e=p();c(7),D('"',e.searchQuery,'"\uC5D0 \uB300\uD55C \uACB0\uACFC\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.')}}function sl(a,t){a&1&&(i(0,"div",22),m(1,"div",23),i(2,"p"),l(3,"\uAC80\uC0C9 \uC911..."),r()())}function ll(a,t){if(a&1&&(i(0,"span",40),l(1),r()),a&2){let e=p().$implicit;c(),D(" \xB7 ",e.size)}}function cl(a,t){if(a&1){let e=w();i(0,"div",27),u("click",function(){let o=f(e).$implicit,s=p(2);return h(s.onResultClick(o))}),i(1,"div",28),m(2,"img",29),r(),i(3,"div",30)(4,"div",31),l(5),r(),i(6,"div",32)(7,"span",33),l(8),r(),P(9,ll,2,1,"span",34),r()(),i(10,"button",35),u("click",function(o){let s=f(e).$implicit,d=p(2);return h(d.onMoreClick(s,o))}),C(),i(11,"svg",36),m(12,"circle",37)(13,"circle",38)(14,"circle",39),r()()()}if(a&2){let e=t.$implicit;c(5),E(e.name),c(3),ze("",e.date," ",e.time),c(),g("ngIf",e.size),c(),le("aria-label","\uB354\uBCF4\uAE30: "+e.name)}}function dl(a,t){if(a&1&&(i(0,"div",24)(1,"div",25),P(2,cl,15,5,"div",26),r()()),a&2){let e=p();c(2),g("ngForOf",e.searchResults)}}function pl(a,t){a&1&&(i(0,"div",41),C(),i(1,"svg",21),m(2,"circle",5)(3,"path",6),r(),v(),i(4,"h3"),l(5,"\uD30C\uC77C \uAC80\uC0C9"),r(),i(6,"p"),l(7,"\uD30C\uC77C\uBA85\uC744 \uC785\uB825\uD558\uC5EC \uBB38\uC11C\uB97C \uCC3E\uC544\uBCF4\uC138\uC694"),r()())}var rn=class a{constructor(t){this.router=t}currentActiveTab="files";searchQuery="";searchResults=[];isSearching=!1;allDocuments=[];selectedFile=null;sheetState="collapsed";indexedDbService=O(J);snackbar=O(U);ngOnInit(){return x(this,null,function*(){yield this.loadAllDocuments()})}onBack(){this.router.navigate(["/ezm/home"])}loadAllDocuments(){return x(this,null,function*(){try{this.allDocuments=yield this.indexedDbService.getAllDocuments(),console.log("\u{1F4C4} \uAC80\uC0C9\uC6A9 \uBB38\uC11C \uB85C\uB4DC \uC644\uB8CC:",this.allDocuments.length,"\uAC1C"),console.log("\u{1F4C4} \uC804\uCCB4 \uBB38\uC11C \uBAA9\uB85D:"),this.allDocuments.forEach((t,e)=>{console.log(`  [${e}] fileName: "${t.fileName}", title: "${t.title}"`)})}catch(t){console.error("\uBB38\uC11C \uB85C\uB4DC \uC2E4\uD328:",t)}})}loadRecentSearches(){}saveRecentSearch(t){}onSearchInput(){if(console.log("\u2328\uFE0F \uAC80\uC0C9\uC5B4 \uC785\uB825:",`"${this.searchQuery}"`),this.searchQuery.trim().length===0){this.searchResults=[];return}this.performSearch()}performSearch(){let t=this.searchQuery.trim();if(!t){this.searchResults=[];return}console.log("\u{1F50D} \uAC80\uC0C9 \uC2DC\uC791:",`"${t}"`),console.log("\u{1F4DA} \uC804\uCCB4 \uBB38\uC11C \uC218:",this.allDocuments.length);let e=t.normalize("NFC").toLowerCase();console.log("\u{1F527} \uC815\uADDC\uD654\uB41C \uAC80\uC0C9\uC5B4:",`"${e}"`),this.isSearching=!0,this.searchResults=this.allDocuments.filter(n=>{let o=(n.fileName||"").normalize("NFC").toLowerCase(),s=(n.title||"").normalize("NFC").toLowerCase();console.log(`  \u{1F50E} \uC6D0\uBCF8: fileName="${n.fileName}"`),console.log(`     \uC815\uADDC\uD654: fileName="${o}"`),console.log(`     \uAC80\uC0C9\uC5B4: "${e}"`);let d=o.includes(e),_=s.includes(e),b=d||_;return console.log(`     \u2192 \uACB0\uACFC: ${b?"\u2705":"\u274C"}`),b}).map(n=>({id:n.id,name:n.fileName||n.title,date:this.formatDate(new Date(n.updatedAt).getTime()),time:this.formatTime(new Date(n.updatedAt).getTime()),size:this.calculateSize(n),thumbnail:n.thumbnail,documentType:n.documentType,pdfBase64:n.pdfBase64})).slice(0,50),console.log("\u{1F50D} \uAC80\uC0C9 \uC644\uB8CC:",this.searchResults.length,"\uAC1C \uACB0\uACFC"),this.isSearching=!1}formatDate(t){let e=new Date(t),n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${n}.${o}.${s}`}formatTime(t){let e=new Date(t),n=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0"),s=String(e.getSeconds()).padStart(2,"0");return`${n}:${o}:${s}`}calculateSize(t){if(t.pdfBase64){let n=t.pdfBase64.length*3/4;return this.formatFileSize(n)}return""}formatFileSize(t){if(t===0)return"0mb";let e=t/(1024*1024);return Math.round(e)+"mb"}onRecentSearchClick(t){}clearRecentSearches(){}onResultClick(t){return x(this,null,function*(){console.log("\uAC80\uC0C9 \uACB0\uACFC \uD074\uB9AD:",t);try{let e=yield this.indexedDbService.getDocumentById(t.id);if(!e){this.snackbar.showWarning("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.router.navigate(["/ezm/viewer"],{state:{document:e}})}catch(e){console.error("\uBB38\uC11C \uC5F4\uAE30 \uC2E4\uD328:",e),this.snackbar.showError("\uBB38\uC11C\uB97C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}clearSearch(){this.searchQuery="",this.searchResults=[]}onMoreClick(t,e){e.stopPropagation(),this.selectedFile={id:t.id,name:t.name,fileName:t.name,title:t.name},this.sheetState="half"}onActionComplete(t){(t==="delete"||t==="rename")&&this.performSearch()}onSheetClose(){this.selectedFile=null,this.sheetState="collapsed"}static \u0275fac=function(e){return new(e||a)(z(V))};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-search"]],standalone:!1,decls:16,vars:9,consts:[[1,"header"],[1,"back-btn",3,"click"],["src","images/ico-before@3x.png","alt","\uB4A4\uB85C","width","24","height","24"],[1,"search-input-wrapper"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"search-icon"],["cx","11","cy","11","r","8"],["d","M21 21l-4.35-4.35"],["type","text","placeholder","\uD30C\uC77C\uBA85 \uAC80\uC0C9...","autofocus","",1,"search-input",3,"ngModelChange","input","ngModel"],["class","clear-btn",3,"click",4,"ngIf"],[1,"main-content"],["class","empty-state",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","search-results",4,"ngIf"],["class","info-state",4,"ngIf"],[3,"activeTab"],[3,"sheetStateChange","actionComplete","item","sheetState"],[1,"clear-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"empty-state"],["width","64","height","64","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],[1,"loading-state"],[1,"spinner"],[1,"search-results"],[1,"files-list"],["class","file-item",3,"click",4,"ngFor","ngForOf"],[1,"file-item",3,"click"],[1,"file-icon"],["src","./images/ico-pdf@3x.png","width","30","height","30","alt","PDF"],[1,"file-info"],[1,"file-name"],[1,"file-meta"],[1,"file-date"],["class","file-size",4,"ngIf"],[1,"more-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["cx","12","cy","5","r","2","fill","currentColor"],["cx","12","cy","12","r","2","fill","currentColor"],["cx","12","cy","19","r","2","fill","currentColor"],[1,"file-size"],[1,"info-state"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"button",1),u("click",function(){return n.onBack()}),m(2,"img",2),r(),i(3,"div",3),C(),i(4,"svg",4),m(5,"circle",5)(6,"path",6),r(),v(),i(7,"input",7),W("ngModelChange",function(s){return $(n.searchQuery,s)||(n.searchQuery=s),s}),u("input",function(){return n.onSearchInput()}),r(),P(8,rl,4,0,"button",8),r()(),i(9,"div",9),P(10,al,8,1,"div",10)(11,sl,4,0,"div",11)(12,dl,3,1,"div",12)(13,pl,8,0,"div",13),r(),m(14,"ez-reader-mobile-bottom-nav",14),i(15,"app-pdf-action-sheet",15),u("sheetStateChange",function(s){return n.sheetState=s})("actionComplete",function(s){return n.onActionComplete(s)}),r()),e&2&&(c(7),G("ngModel",n.searchQuery),c(),g("ngIf",n.searchQuery),c(2),g("ngIf",n.searchQuery&&n.searchResults.length===0&&!n.isSearching),c(),g("ngIf",n.isSearching),c(),g("ngIf",n.searchResults.length>0),c(),g("ngIf",!n.searchQuery),c(),g("activeTab",n.currentActiveTab),c(),g("item",n.selectedFile)("sheetState",n.sheetState))},dependencies:[ne,j,ce,re,ae,de,on],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}[_nghost-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background-color:#f5f5f5;min-height:100vh;display:flex;flex-direction:column}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#fff;border-bottom:1px solid #f0f0f0;position:sticky;top:0;z-index:100}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0}.header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active{opacity:.7}.header[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{flex:1;position:relative;display:flex;align-items:center}.header[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#999;pointer-events:none}.header[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:10px 40px;border:1px solid #e0e0e0;border-radius:8px;font-size:15px;background:#f8f9fa;transition:all .2s}.header[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;background:#fff}.header[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#999}.header[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{position:absolute;right:8px;background:none;border:none;padding:6px;cursor:pointer;color:#999;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s}.header[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]:active{background:#f0f0f0}.main-content[_ngcontent-%COMP%]{flex:1;background:#f5f5f5;padding:0 0 60px;max-height:calc(100vh - 116px);overflow-y:auto}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;background:#fff}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin:0}.section-header[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]{background:none;border:none;color:#f44336;font-size:14px;font-weight:500;cursor:pointer;padding:4px 8px}.section-header[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]:active{opacity:.7}.recent-searches[_ngcontent-%COMP%]{background:#fff;margin-bottom:12px}.recent-searches[_ngcontent-%COMP%]   .recent-search-list[_ngcontent-%COMP%]{padding:0 20px 12px}.recent-searches[_ngcontent-%COMP%]   .recent-search-list[_ngcontent-%COMP%]   .recent-search-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:12px;padding:12px 0;background:none;border:none;border-bottom:1px solid #f0f0f0;cursor:pointer;text-align:left}.recent-searches[_ngcontent-%COMP%]   .recent-search-list[_ngcontent-%COMP%]   .recent-search-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.recent-searches[_ngcontent-%COMP%]   .recent-search-list[_ngcontent-%COMP%]   .recent-search-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;color:#999}.recent-searches[_ngcontent-%COMP%]   .recent-search-list[_ngcontent-%COMP%]   .recent-search-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-size:15px;color:#333}.recent-searches[_ngcontent-%COMP%]   .recent-search-list[_ngcontent-%COMP%]   .recent-search-item[_ngcontent-%COMP%]:active{background:#f8f9fa}.search-results[_ngcontent-%COMP%]{background:#fff}.files-list[_ngcontent-%COMP%]{padding:8px 0}.file-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#fff;border-bottom:1px solid #f0f0f0;cursor:pointer;transition:background .2s;position:relative}.file-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.file-item[_ngcontent-%COMP%]:active{background:#f5f5f5}.file-item[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;justify-content:center}.file-item[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{flex:1;min-width:0}.file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:15px;font-weight:400;color:#333;margin:0 0 4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-meta[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:13px;color:#999}.file-item[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{flex-shrink:0;width:36px;height:36px;padding:0;background:#0000000d;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#666;transition:all .2s;position:relative;z-index:3}.file-item[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]:hover{background:#0000001a}.file-item[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]:active{transform:scale(.95);background:#00000026}.file-item[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.empty-state[_ngcontent-%COMP%], .info-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .info-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ccc;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .info-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#333;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .info-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#999;margin:0;line-height:1.5}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f0f0f0;border-top-color:#2196f3;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:16px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#999}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 375px){.header[_ngcontent-%COMP%]{padding:10px 12px}.main-content[_ngcontent-%COMP%]{padding:0 0 60px}}"]})};var an=class a{constructor(t){this.router=t}ngOnInit(){setTimeout(()=>{this.router.navigate(["/ezm/home"])},2e3)}static \u0275fac=function(e){return new(e||a)(z(V))};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-splash"]],standalone:!1,decls:3,vars:0,consts:[[1,"splash-container"],[1,"splash-content"],["src","images/splash/splash.png","alt","EZ Reader Mobile",1,"splash-image"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1),m(2,"img",2),r()())},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100vh;overflow:hidden}.splash-container[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;align-items:center;justify-content:center;background:#fff;overflow:hidden}.splash-content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.splash-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}"]})};var sn=class a{constructor(t,e,n){this.route=t;this.router=e;this.authService=n;console.log("\u{1F680} GoogleLoginCallbackComponent \uC0DD\uC131\uB428"),console.log("\uD604\uC7AC URL:",window.location.href)}message="\uB85C\uADF8\uC778 \uCC98\uB9AC \uC911...";ngOnInit(){return x(this,null,function*(){console.log("\u{1F50D} GoogleLoginCallbackComponent ngOnInit \uC2DC\uC791"),console.log("\uC804\uCCB4 URL:",window.location.href),console.log("Search:",window.location.search),console.log("Hash:",window.location.hash);try{let t=new URLSearchParams(window.location.hash.substring(1)),e=t.get("access_token"),n=t.get("id_token"),o=t.get("error"),d=new URLSearchParams(window.location.search).get("code")||this.route.snapshot.queryParamMap.get("code");if(d==="test"){console.log("\u{1F9EA} \uD14C\uC2A4\uD2B8 \uBAA8\uB4DC \uD65C\uC131\uD654"),this.message="\uD14C\uC2A4\uD2B8 \uBAA8\uB4DC: \uB85C\uADF8\uC778 \uCC98\uB9AC \uC911...",setTimeout(()=>{this.message="\uD14C\uC2A4\uD2B8 \uB85C\uADF8\uC778 \uC131\uACF5! (\uC2E4\uC81C Google \uC778\uC99D \uC544\uB2D8)",setTimeout(()=>this.router.navigate(["/ezm"]),1500)},1e3);return}if(o){console.error("\u274C Google OAuth \uC624\uB958:",o),this.message="\uB85C\uADF8\uC778\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",setTimeout(()=>this.router.navigate(["/ezm/login"]),2e3);return}if(e&&n){console.log("\u2705 Access Token \uC218\uC2E0 (Implicit Flow)");let _=this.parseJwt(n);console.log("\uC0AC\uC6A9\uC790 \uC815\uBCF4:",_),(yield this.authService.loginWithGoogleToken(e,_))?(this.message="\uB85C\uADF8\uC778 \uC131\uACF5! \uBA54\uC778 \uD654\uBA74\uC73C\uB85C \uC774\uB3D9\uD569\uB2C8\uB2E4...",setTimeout(()=>this.router.navigate(["/ezm"]),1e3)):(this.message="\uB85C\uADF8\uC778\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.",setTimeout(()=>this.router.navigate(["/ezm/login"]),2e3));return}if(d){console.log("\u2705 \uC778\uC99D \uCF54\uB4DC \uC218\uC2E0:",d.substring(0,20)+"..."),(yield this.authService.loginWithGoogle(d))?(this.message="\uB85C\uADF8\uC778 \uC131\uACF5! \uBA54\uC778 \uD654\uBA74\uC73C\uB85C \uC774\uB3D9\uD569\uB2C8\uB2E4...",setTimeout(()=>this.router.navigate(["/ezm"]),1e3)):(this.message="\uB85C\uADF8\uC778\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.",setTimeout(()=>this.router.navigate(["/ezm/login"]),2e3));return}console.error("\u274C \uC778\uC99D \uC815\uBCF4 \uC5C6\uC74C"),console.log("\uD604\uC7AC URL:",window.location.href),this.message="\uC778\uC99D \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",setTimeout(()=>this.router.navigate(["/ezm/login"]),2e3)}catch(t){console.error("\u274C OAuth \uCF5C\uBC31 \uCC98\uB9AC \uC624\uB958:",t),this.message="\uB85C\uADF8\uC778 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",setTimeout(()=>this.router.navigate(["/ezm/login"]),2e3)}})}parseJwt(t){try{let n=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(atob(n).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(o)}catch(e){return console.error("JWT \uD30C\uC2F1 \uC2E4\uD328:",e),null}}static \u0275fac=function(e){return new(e||a)(z(Pe),z(V),z(Me))};static \u0275cmp=F({type:a,selectors:[["ezm-google-login-callback"]],standalone:!1,decls:5,vars:1,consts:[[1,"callback-container"],[1,"loading-content"],[1,"loading-spinner"],[1,"message"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1),m(2,"div",2),i(3,"p",3),l(4),r()()()),e&2&&(c(4),E(n.message))},styles:[".callback-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh;background:linear-gradient(135deg,#667eea,#764ba2)}.loading-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:24px;padding:40px;background:#fff;border-radius:16px;box-shadow:0 10px 40px #0000001a}.loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #f3f3f3;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.message[_ngcontent-%COMP%]{color:#333;font-size:16px;font-weight:500;text-align:center;margin:0}"]})};var ln=class a{constructor(t,e,n){this.router=t;this.route=e;this.location=n}fileCount=1;fileName="";fileId="";fileIds=[];folderId=null;title="\uC791\uC5C5\uC911..";subtitle="\uD30C\uC77C\uC744 \uCC98\uB9AC\uD558\uACE0 \uC788\uC5B4\uC694.";ngOnInit(){let e=this.router.getCurrentNavigation()?.extras?.state||history.state;console.log("\u{1F50D} [FileSaved] ngOnInit - state:",e),e?.fileId||e?.fileIds?(this.fileId=e.fileId||e.fileIds&&e.fileIds[0]||"",this.fileIds=e.fileIds||(e.fileId?[e.fileId]:[]),this.fileName=e.fileName||"\uD30C\uC77C",this.fileCount=e.fileCount||this.fileIds.length||1,this.title=e.title||"\uC791\uC5C5 \uC644\uB8CC!",this.subtitle=e.subtitle||"\uD30C\uC77C\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",this.folderId=e.folderId!==void 0?e.folderId:null,console.log("\u2705 [FileSaved] \uB370\uC774\uD130 \uB85C\uB4DC \uC644\uB8CC:",{fileId:this.fileId,fileIds:this.fileIds,fileName:this.fileName,fileCount:this.fileCount,folderId:this.folderId})):(console.warn("\u26A0\uFE0F [FileSaved] \uD30C\uC77C \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uD648\uC73C\uB85C \uC774\uB3D9\uD569\uB2C8\uB2E4."),this.router.navigate(["/ezm/home"]))}onNavigateToFiles(){console.log("\u{1F5C2}\uFE0F [FileSaved] \uD30C\uC77C\uB85C \uC774\uB3D9:",this.fileId,"folderId:",this.folderId),this.folderId?this.router.navigate(["/ezm/myfiles",this.folderId]):this.router.navigate(["/ezm/myfiles","my-files"])}onClose(){this.location.back()}static \u0275fac=function(e){return new(e||a)(z(V),z(Pe),z(Rn))};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-file-saved"]],standalone:!1,decls:25,vars:3,consts:[[1,"file-saved-page"],[1,"count-badge"],[1,"file-icon"],["width","80","height","100","viewBox","0 0 80 100","fill","none"],["d","M10 0h40l20 20v70a10 10 0 0 1-10 10H10a10 10 0 0 1-10-10V10A10 10 0 0 1 10 0z","fill","#E0E0E0"],["d","M50 0v15a5 5 0 0 0 5 5h15L50 0z","fill","#BDBDBD"],[1,"message-container"],[1,"title"],[1,"subtitle"],[1,"arrow-container"],[1,"arrow-line"],[1,"action-button",3,"click"],[1,"completion-container"],[1,"check-icon"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M5 12l5 5L20 7","stroke","#4CAF50","stroke-width","3","stroke-linecap","round","stroke-linejoin","round"],[1,"completion-text"],[1,"completion-title"],[1,"completion-subtitle"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1),l(2),r(),i(3,"div",2),C(),i(4,"svg",3),m(5,"path",4)(6,"path",5),r()(),v(),i(7,"div",6)(8,"h1",7),l(9),r(),i(10,"p",8),l(11),r()(),i(12,"div",9),m(13,"div",10),r(),i(14,"button",11),u("click",function(){return n.onNavigateToFiles()}),l(15," \uD30C\uC77C\uB85C \uC774\uB3D9 "),r(),i(16,"div",12)(17,"div",13),C(),i(18,"svg",14),m(19,"path",15),r()(),v(),i(20,"div",16)(21,"div",17),l(22,"\uC644\uC131!"),r(),i(23,"div",18),l(24,"\uC791\uC5C5\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),r()()()()),e&2&&(c(2),E(n.fileCount),c(7),E(n.title),c(2),E(n.subtitle))},styles:['.file-saved-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;background-color:#fff;padding:40px 20px;position:relative;overflow:hidden}.count-badge[_ngcontent-%COMP%]{position:absolute;top:80px;right:calc(50% - 80px);width:40px;height:40px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:700;box-shadow:0 4px 12px #667eea66;animation:_ngcontent-%COMP%_badge-appear .6s cubic-bezier(.175,.885,.32,1.275) .2s both}@keyframes _ngcontent-%COMP%_badge-appear{0%{transform:scale(0) rotate(-180deg);opacity:0}to{transform:scale(1) rotate(0);opacity:1}}.file-icon[_ngcontent-%COMP%]{margin-top:60px;margin-bottom:30px;animation:_ngcontent-%COMP%_icon-float .8s cubic-bezier(.175,.885,.32,1.275) both}.file-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 8px 16px rgba(0,0,0,.1))}@keyframes _ngcontent-%COMP%_icon-float{0%{transform:translateY(-50px);opacity:0}to{transform:translateY(0);opacity:1}}.message-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;animation:_ngcontent-%COMP%_message-fade .6s ease-out .3s both}.title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#212121;margin:0 0 12px;line-height:1.3}.subtitle[_ngcontent-%COMP%]{font-size:15px;font-weight:400;color:#757575;margin:0;line-height:1.5}@keyframes _ngcontent-%COMP%_message-fade{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.arrow-container[_ngcontent-%COMP%]{width:2px;height:80px;position:relative;margin-bottom:30px;overflow:hidden}.arrow-line[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,#667eea,#764ba2);animation:_ngcontent-%COMP%_arrow-draw .8s ease-out .5s both}.arrow-line[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-8px;left:50%;transform:translate(-50%);width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:12px solid #764ba2;animation:_ngcontent-%COMP%_arrow-tip-appear .3s ease-out 1.2s both}@keyframes _ngcontent-%COMP%_arrow-draw{0%{height:0}to{height:100%}}@keyframes _ngcontent-%COMP%_arrow-tip-appear{0%{opacity:0;transform:translate(-50%) scale(0)}to{opacity:1;transform:translate(-50%) scale(1)}}.action-button[_ngcontent-%COMP%]{width:90%;max-width:320px;height:56px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;font-size:17px;font-weight:600;border:none;border-radius:28px;cursor:pointer;box-shadow:0 8px 24px #667eea59;transition:all .3s cubic-bezier(.4,0,.2,1);animation:_ngcontent-%COMP%_button-appear .6s cubic-bezier(.175,.885,.32,1.275) .8s both;position:relative;overflow:hidden}.action-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#fff3;transform:translate(-50%,-50%);transition:width .6s,height .6s}.action-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 12px 28px #667eea73}.action-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 6px 20px #667eea4d}.action-button[_ngcontent-%COMP%]:active:before{width:300px;height:300px}@keyframes _ngcontent-%COMP%_button-appear{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.completion-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-top:50px;padding:20px 30px;background:#f5f5f5;border-radius:16px;animation:_ngcontent-%COMP%_completion-fade .6s ease-out 1s both}.check-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#e8f5e9;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.check-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_check-draw .6s ease-out 1.3s both}@keyframes _ngcontent-%COMP%_check-draw{0%{stroke-dasharray:0 50;opacity:0}to{stroke-dasharray:50 50;opacity:1}}.completion-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.completion-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#4caf50;line-height:1.2}.completion-subtitle[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:#757575;line-height:1.4}@keyframes _ngcontent-%COMP%_completion-fade{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 375px){.file-saved-page[_ngcontent-%COMP%]{padding:30px 16px}.count-badge[_ngcontent-%COMP%]{top:60px;right:calc(50% - 70px);width:36px;height:36px;font-size:16px}.title[_ngcontent-%COMP%]{font-size:22px}.subtitle[_ngcontent-%COMP%]{font-size:14px}.action-button[_ngcontent-%COMP%]{width:95%;height:52px;font-size:16px}.completion-container[_ngcontent-%COMP%]{padding:16px 24px;gap:10px}.check-icon[_ngcontent-%COMP%]{width:36px;height:36px}.completion-title[_ngcontent-%COMP%]{font-size:15px}.completion-subtitle[_ngcontent-%COMP%]{font-size:12px}}']})};var cn=class a{featureName="";router=O(V);snackbar=O(U);navigationHistory=O(Se);ngOnInit(){let e=this.router.getCurrentNavigation()?.extras?.state||history.state;this.featureName=e?.featureName||"AI \uAE30\uB2A5"}onGoToSettings(){this.router.navigate(["/ezm/settings"])}onGoBack(){this.navigationHistory.goBack("/ezm/tools")}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-google-login-required"]],standalone:!1,decls:46,vars:2,consts:[[1,"google-login-required-container"],[1,"header"],[1,"back-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","15 18 9 12 15 6"],[1,"header-title"],[1,"content"],[1,"icon-container"],["width","80","height","80","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"title"],[1,"description"],[1,"feature-info"],[1,"info-item"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","20 6 9 17 4 12"],[1,"actions"],[1,"primary-btn",3,"click"],["cx","12","cy","12","r","3"],["d","M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"],[1,"secondary-btn",3,"click"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),u("click",function(){return n.onGoBack()}),C(),i(3,"svg",3),m(4,"polyline",4),r()(),v(),i(5,"div",5),l(6,"Google \uB85C\uADF8\uC778 \uD544\uC694"),r()(),i(7,"div",6)(8,"div",7),C(),i(9,"svg",8),m(10,"circle",9)(11,"line",10)(12,"line",11),r()(),v(),i(13,"h2",12),l(14),m(15,"br"),l(16,"Google \uB85C\uADF8\uC778\uC774 \uD544\uC694\uD569\uB2C8\uB2E4"),r(),i(17,"div",13)(18,"p"),l(19),r(),i(20,"p"),l(21,"Google \uACC4\uC815\uC73C\uB85C \uB85C\uADF8\uC778\uD558\uC2DC\uBA74 API \uD0A4\uAC00 \uC790\uB3D9\uC73C\uB85C \uC124\uC815\uB418\uC5B4 AI \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD558\uC2E4 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),r()(),i(22,"div",14)(23,"div",15),C(),i(24,"svg",16),m(25,"polyline",17),r(),v(),i(26,"span"),l(27,"\uBB34\uB8CC\uB85C \uC0AC\uC6A9 \uAC00\uB2A5"),r()(),i(28,"div",15),C(),i(29,"svg",16),m(30,"polyline",17),r(),v(),i(31,"span"),l(32,"\uBE60\uB974\uACE0 \uC815\uD655\uD55C AI \uBD84\uC11D"),r()(),i(33,"div",15),C(),i(34,"svg",16),m(35,"polyline",17),r(),v(),i(36,"span"),l(37,"\uC548\uC804\uD55C \uB370\uC774\uD130 \uCC98\uB9AC"),r()()(),i(38,"div",18)(39,"button",19),u("click",function(){return n.onGoToSettings()}),C(),i(40,"svg",16),m(41,"circle",20)(42,"path",21),r(),l(43," \uB0B4\uC815\uBCF4\uC5D0\uC11C API \uD0A4 \uAC00\uC838\uC624\uAE30 "),r(),v(),i(44,"button",22),u("click",function(){return n.onGoBack()}),l(45," \uB3CC\uC544\uAC00\uAE30 "),r()()()()),e&2&&(c(14),D("",n.featureName,"\uC744(\uB97C) \uC0AC\uC6A9\uD558\uB824\uBA74"),c(5),D("",n.featureName,"\uC740(\uB294) Google\uC758 Gemini AI\uB97C \uC0AC\uC6A9\uD569\uB2C8\uB2E4."))},styles:[".google-login-required-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);position:sticky;top:0;z-index:10}.back-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;padding:8px;display:flex;align-items:center;justify-content:center;transition:transform .2s}.back-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.back-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.header-title[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:18px;font-weight:600;margin-right:40px}.content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 24px;text-align:center}.icon-container[_ngcontent-%COMP%]{margin-bottom:24px;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.icon-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ffffffe6;filter:drop-shadow(0 4px 12px rgba(0,0,0,.2))}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.05);opacity:.8}}.title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;line-height:1.4;margin-bottom:24px;text-shadow:0 2px 8px rgba(0,0,0,.2)}.description[_ngcontent-%COMP%]{font-size:15px;line-height:1.6;margin-bottom:32px;color:#ffffffe6;max-width:400px}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.feature-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:40px;width:100%;max-width:320px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#ffffff26;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;font-size:14px;font-weight:500}.info-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;width:100%;max-width:320px}.primary-btn[_ngcontent-%COMP%], .secondary-btn[_ngcontent-%COMP%]{padding:16px 24px;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s;border:none;display:flex;align-items:center;justify-content:center;gap:8px}.primary-btn[_ngcontent-%COMP%]:active, .secondary-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.primary-btn[_ngcontent-%COMP%]{background:#fff;color:#667eea;box-shadow:0 4px 12px #00000026}.primary-btn[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #0003;transform:translateY(-2px)}.primary-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.secondary-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.secondary-btn[_ngcontent-%COMP%]:hover{background:#ffffff40}@media (max-width: 375px){.title[_ngcontent-%COMP%]{font-size:20px}.description[_ngcontent-%COMP%]{font-size:14px}.content[_ngcontent-%COMP%]{padding:24px 20px}}"]})};function gl(a,t){a&1&&(C(),i(0,"svg",33),m(1,"path",34),r())}function ml(a,t){if(a&1){let e=w();i(0,"button",31),u("click",function(){let o=f(e).$implicit,s=p();return h(s.selectColor(o))}),P(1,gl,2,0,"svg",32),r()}if(a&2){let e=t.$implicit,n=p();L("background-color",e),R("selected",n.pageColor===e),c(),g("ngIf",n.pageColor===e)}}var dn=class a{constructor(t,e,n){this.router=t;this.indexedDbService=e;this.snackbar=n}pageOrientation="portrait";pageColor="#FFFFFF";pageCount=1;colorPalette=["#FFFFFF","#FF6B6B","#FF8E8E","#FFB4B4","#FFA07A","#FFB347","#FFC107","#FFD700","#FFEB3B","#FFFF00","#90EE90","#7CFC00","#00FF00","#00CED1","#00BFFF","#4169E1","#9370DB","#BA55D3","#FF69B4","#D3D3D3","#A9A9A9","#696969"];ngOnInit(){console.log("\u{1F4DD} [PDF Create] \uCD08\uAE30\uD654")}goBack(){this.router.navigate(["/ezm/tools"])}selectOrientation(t){this.pageOrientation=t,console.log("\u{1F4D0} \uD398\uC774\uC9C0 \uBC29\uD5A5:",t)}selectColor(t){this.pageColor=t,console.log("\u{1F3A8} \uD398\uC774\uC9C0 \uC0C9\uC0C1:",t)}incrementPageCount(){this.pageCount<100&&this.pageCount++}decrementPageCount(){this.pageCount>1&&this.pageCount--}onApply(){return x(this,null,function*(){try{this.snackbar.showInfo("\uBB38\uC11C\uB97C \uC0DD\uC131\uD558\uB294 \uC911...");let t=window.PDFLib;if(!t)throw new Error("PDFLib\uC774 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");let e=yield t.PDFDocument.create(),n=this.pageOrientation==="portrait"?595:842,o=this.pageOrientation==="portrait"?842:595,s=this.hexToRgb(this.pageColor);console.log("\u{1F3A8} [PDF Create] \uC0C9\uC0C1 \uBCC0\uD658:",{hex:this.pageColor,rgb:s});for(let B=0;B<this.pageCount;B++){let K=e.addPage([n,o]);this.pageColor!=="#FFFFFF"&&(console.log(`\u{1F4C4} [PDF Create] \uD398\uC774\uC9C0 ${B+1} \uBC30\uACBD\uC0C9 \uC801\uC6A9:`,this.pageColor),K.drawRectangle({x:0,y:0,width:n,height:o,color:t.rgb(s.r/255,s.g/255,s.b/255)})),K.drawText(" ",{x:10,y:o-20,size:1,color:t.rgb(1,1,1)})}let d=yield e.save(),_=e.getPageCount();console.log("\u{1F4BE} [PDF Create] PDF \uC0DD\uC131 \uC644\uB8CC:",{bytes:d.length,requestedPages:this.pageCount,actualPages:_,orientation:this.pageOrientation,color:this.pageColor}),_!==this.pageCount&&console.error("\u274C [PDF Create] \uD398\uC774\uC9C0 \uC218 \uBD88\uC77C\uCE58!",{requested:this.pageCount,actual:_});let b=this.uint8ArrayToBase64(d);console.log("\u{1F524} [PDF Create] Base64 \uBCC0\uD658 \uC644\uB8CC:",{length:b.length,preview:b.substring(0,100)+"..."});let S=new Date,y=`\uC0C8\uBB38\uC11C_${S.getHours().toString().padStart(2,"0")+S.getMinutes().toString().padStart(2,"0")+S.getSeconds().toString().padStart(2,"0")}.pdf`,k=`doc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,T=[];for(let B=0;B<this.pageCount;B++)T.push({pageNumber:B+1,elements:[],width:n,height:o});let I={id:k,title:y,fileName:y,pdfBase64:b,thumbnail:"",pages:T,elementCount:0,version:"1.0",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),documentType:"viewer",folderId:"results"};console.log("\u{1F4BE} [PDF Create] \uC800\uC7A5\uD560 \uBB38\uC11C \uB370\uC774\uD130:",{id:I.id,folderId:I.folderId,title:I.title,pagesCount:I.pages.length}),yield this.indexedDbService.saveDocument(I),console.log("\u2705 [PDF Create] \uBB38\uC11C \uC800\uC7A5 \uC644\uB8CC:",{docId:k,fileName:y,pagesCount:T.length,pdfBase64Length:b.length});let A=yield this.indexedDbService.getDocumentById(k);A?console.log("\u{1F50D} [PDF Create] \uC800\uC7A5 \uAC80\uC99D \uC644\uB8CC:",{id:A.id,title:A.title,hasPdfBase64:!!A.pdfBase64,pdfBase64Length:A.pdfBase64?.length||0,pagesCount:A.pages?.length||0,folderId:A.folderId}):console.error("\u274C [PDF Create] \uC800\uC7A5 \uAC80\uC99D \uC2E4\uD328: \uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C"),this.router.navigate(["/ezm/file-saved"],{state:{fileId:k,fileName:y,fileCount:1,title:"PDF \uB9CC\uB4E4\uAE30 \uC644\uB8CC!",subtitle:`${y} \uD30C\uC77C\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`,folderId:"results"}})}catch(t){console.error("\u274C [PDF Create] \uBB38\uC11C \uC0DD\uC131 \uC2E4\uD328:",t),this.snackbar.showError("\uBB38\uC11C \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}hexToRgb(t){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:{r:255,g:255,b:255}}uint8ArrayToBase64(t){let n="";for(let o=0;o<t.length;o+=32768){let s=t.subarray(o,Math.min(o+32768,t.length));n+=String.fromCharCode(...Array.from(s))}return btoa(n)}static \u0275fac=function(e){return new(e||a)(z(V),z(J),z(U))};static \u0275cmp=F({type:a,selectors:[["ez-reader-mobile-pdf-create"]],standalone:!1,decls:75,vars:14,consts:[["colorButton",""],[1,"pdf-create-container"],[1,"header"],[1,"back-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M15 18l-6-6 6-6","stroke","#333","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"header-title"],[1,"main-content"],[1,"preview-section"],[1,"preview-container"],[1,"preview-label"],[1,"settings-section"],[1,"setting-btn",3,"click"],[1,"setting-icon"],["x","6","y","3","width","12","height","18","rx","1","stroke","currentColor","stroke-width","2"],[1,"setting-label"],["x","3","y","6","width","18","height","12","rx","1","stroke","currentColor","stroke-width","2"],[1,"setting-btn","color-btn"],[1,"color-panel"],[1,"color-grid"],["class","color-item",3,"selected","background-color","click",4,"ngFor","ngForOf"],[1,"page-count-section"],[1,"page-count-label"],[1,"page-count-control"],[1,"count-btn",3,"click","disabled"],[1,"count-display"],[1,"action-section"],[1,"apply-btn",3,"click"],[1,"number-pad"],[1,"number-row"],[1,"number-btn"],[1,"color-item",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none",4,"ngIf"],["width","16","height","16","viewBox","0 0 24 24","fill","none"],["d","M5 12l5 5L20 7","stroke","white","stroke-width","3","stroke-linecap","round","stroke-linejoin","round"]],template:function(e,n){if(e&1){let o=w();i(0,"div",1)(1,"div",2)(2,"button",3),u("click",function(){return f(o),h(n.goBack())}),C(),i(3,"svg",4),m(4,"path",5),r()(),v(),i(5,"div",6),l(6,"PDF \uB9CC\uB4E4\uAE30"),r()(),i(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10),l(11,"\uBBF8\uB9AC\uBCF4\uAE30"),r()()(),i(12,"div",11)(13,"button",12),u("click",function(){return f(o),h(n.selectOrientation("portrait"))}),i(14,"div",13),C(),i(15,"svg",4),m(16,"rect",14),r()(),v(),i(17,"div",15),l(18,"\uC138\uB85C"),r()(),i(19,"button",12),u("click",function(){return f(o),h(n.selectOrientation("landscape"))}),i(20,"div",13),C(),i(21,"svg",4),m(22,"rect",16),r()(),v(),i(23,"div",15),l(24,"\uAC00\uB85C"),r()(),i(25,"button",17,0),m(27,"div",13),i(28,"div",15),l(29,"\uD398\uC774\uC9C0 \uC0C9"),r()()(),i(30,"div",18)(31,"div",19),P(32,ml,2,5,"button",20),r()(),i(33,"div",21)(34,"div",22),l(35,"\uD398\uC774\uC9C0 (\uCD5C\uC18C 1, \uCD5C\uB300 100)"),r(),i(36,"div",23)(37,"button",24),u("click",function(){return f(o),h(n.decrementPageCount())}),l(38," - "),r(),i(39,"div",25),l(40),r(),i(41,"button",24),u("click",function(){return f(o),h(n.incrementPageCount())}),l(42," + "),r()()(),i(43,"div",26)(44,"button",27),u("click",function(){return f(o),h(n.onApply())}),l(45," \uC801\uC6A9 "),r()(),i(46,"div",28)(47,"div",29)(48,"button",30),l(49,"1"),r(),i(50,"button",30),l(51,"2"),r(),i(52,"button",30),l(53,"3"),r()(),i(54,"div",29)(55,"button",30),l(56,"4"),r(),i(57,"button",30),l(58,"5"),r(),i(59,"button",30),l(60,"6"),r()(),i(61,"div",29)(62,"button",30),l(63,"7"),r(),i(64,"button",30),l(65,"8"),r(),i(66,"button",30),l(67,"9"),r()(),i(68,"div",29)(69,"button",30),l(70,"."),r(),i(71,"button",30),l(72,"0"),r(),i(73,"button",30),l(74,"\u232B"),r()()()()()}e&2&&(c(9),L("background-color",n.pageColor),R("landscape",n.pageOrientation==="landscape"),c(4),R("active",n.pageOrientation==="portrait"),c(6),R("active",n.pageOrientation==="landscape"),c(8),L("background-color",n.pageColor),c(5),g("ngForOf",n.colorPalette),c(5),g("disabled",n.pageCount<=1),c(3),E(n.pageCount),c(),g("disabled",n.pageCount>=100))},dependencies:[ne,j],styles:[".pdf-create-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;background:#f5f5f5}.header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;height:56px;background:#fff;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;padding:0 16px;z-index:100;gap:12px}.back-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:50%}.back-btn[_ngcontent-%COMP%]:active{background:#f5f5f5}.header-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#333}.main-content[_ngcontent-%COMP%]{flex:1;padding-top:56px;overflow-y:auto;padding-bottom:20px}.preview-section[_ngcontent-%COMP%]{padding:20px;display:flex;justify-content:center;align-items:center;min-height:250px}.preview-container[_ngcontent-%COMP%]{width:180px;height:240px;background:#fff;border-radius:8px;box-shadow:0 4px 12px #0000001a;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.preview-container.landscape[_ngcontent-%COMP%]{width:240px;height:180px}.preview-label[_ngcontent-%COMP%]{font-size:14px;color:#999}.settings-section[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;padding:0 20px 20px}.setting-btn[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;gap:8px;padding:16px;background:#fff;border:2px solid #e0e0e0;border-radius:12px;cursor:pointer;transition:all .2s}.setting-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.setting-btn.active[_ngcontent-%COMP%]{border-color:#2196f3;background:#e3f2fd}.setting-btn.active[_ngcontent-%COMP%]   .setting-icon[_ngcontent-%COMP%]{color:#2196f3}.setting-btn.active[_ngcontent-%COMP%]   .setting-label[_ngcontent-%COMP%]{color:#2196f3;font-weight:600}.setting-icon[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;color:#666}.setting-icon[_ngcontent-%COMP%]:has(svg){border-radius:6px}.color-btn[_ngcontent-%COMP%]   .setting-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;border:2px solid #ddd}.setting-label[_ngcontent-%COMP%]{font-size:13px;color:#666}.color-panel[_ngcontent-%COMP%]{padding:0 20px 20px}.color-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(6,1fr);gap:12px;background:#fff;padding:16px;border-radius:12px}.color-item[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;border:2px solid #ddd;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.color-item[_ngcontent-%COMP%]:active{transform:scale(.9)}.color-item.selected[_ngcontent-%COMP%]{border-color:#2196f3;border-width:3px}.page-count-section[_ngcontent-%COMP%]{padding:0 20px 20px}.page-count-label[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:12px;text-align:center}.page-count-control[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:20px;background:#fff;padding:16px;border-radius:12px}.count-btn[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:2px solid #e0e0e0;background:#fff;font-size:24px;font-weight:600;color:#333;cursor:pointer;display:flex;align-items:center;justify-content:center}.count-btn[_ngcontent-%COMP%]:active:not(:disabled){background:#f5f5f5;transform:scale(.95)}.count-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.count-display[_ngcontent-%COMP%]{min-width:60px;text-align:center;font-size:32px;font-weight:600;color:#333}.action-section[_ngcontent-%COMP%]{padding:0 20px 20px}.apply-btn[_ngcontent-%COMP%]{width:100%;height:52px;background:#f44336;border:none;border-radius:12px;color:#fff;font-size:16px;font-weight:600;cursor:pointer;box-shadow:0 4px 12px #f443364d}.apply-btn[_ngcontent-%COMP%]:active{background:#d32f2f;transform:scale(.98)}.number-pad[_ngcontent-%COMP%]{padding:0 20px 20px;display:none}.number-row[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px}.number-btn[_ngcontent-%COMP%]{flex:1;height:56px;background:#fff;border:1px solid #e0e0e0;border-radius:8px;font-size:20px;color:#333;cursor:pointer}.number-btn[_ngcontent-%COMP%]:active{background:#f5f5f5}"]})};var ul=[{path:"",redirectTo:"splash",pathMatch:"full"},{path:"splash",component:an},{path:"home",component:Lt},{path:"login",component:Gt},{path:"auth/google/callback",component:sn},{path:"viewer",component:jt},{path:"editor",component:tn},{path:"tools",component:Ht},{path:"myfiles",component:pt},{path:"myfiles/:folderId",component:pt},{path:"settings",component:gt},{path:"google-login-required",component:cn},{path:"profile",component:gt},{path:"organize",component:$t},{path:"ai-summary",component:Wt},{path:"ai-translate",component:Ut},{path:"pdf-convert",component:Kt},{path:"rotate",component:qt},{path:"split",component:Zt},{path:"page-number",component:Xt},{path:"encrypt",component:Qt},{path:"decrypt",component:Jt},{path:"pdf-create",component:dn},{path:"search",component:rn},{path:"file-saved",component:ln}],pn=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=ft({type:a});static \u0275inj=ut({imports:[fn.forChild(ul),fn]})};function fl(a,t){if(a&1&&(i(0,"div",10),m(1,"img",11),i(2,"h3"),l(3),r(),i(4,"div",12),m(5,"div",13),r(),i(6,"p",14),l(7),r()()),a&2){let e=p(2);c(3),E(e.currentStep),c(2),L("width",e.analysisProgress,"%"),c(2),D("",e.analysisProgress,"%")}}function hl(a,t){if(a&1&&(i(0,"div",27)(1,"div",28),m(2,"img",29),i(3,"span",30),l(4,"\uC774\uBBF8\uC9C0"),r()(),i(5,"div",31),l(6),r()()),a&2){let e=p(3);c(6),D(" \uCD1D ",e.analysisResult.summary.imageInfo.totalImages,"\uAC1C \uC774\uBBF8\uC9C0 ")}}function Cl(a,t){if(a&1&&(i(0,"div",27)(1,"div",28),m(2,"img",32),i(3,"span",30),l(4,"\uBCA1\uD130 \uADF8\uB798\uD53D"),r()(),i(5,"div",31),l(6),r()()),a&2){let e=p(3);c(6),D(" \uCD1D ",e.analysisResult.vectorData.totalOperations,"\uAC1C \uBCA1\uD130 \uC791\uC5C5 ")}}function _l(a,t){if(a&1){let e=w();i(0,"div",15)(1,"div",16)(2,"h3"),l(3,"\u{1F4CA} \uBD84\uC11D \uC694\uC57D"),r(),i(4,"div",17)(5,"div",18)(6,"div",19),l(7,"\uD398\uC774\uC9C0"),r(),i(8,"div",20),l(9),r()(),i(10,"div",18)(11,"div",19),l(12,"\uD14D\uC2A4\uD2B8 \uD56D\uBAA9"),r(),i(13,"div",20),l(14),r()(),i(15,"div",18)(16,"div",19),l(17,"\uB2E8\uC5B4"),r(),i(18,"div",20),l(19),r()(),i(20,"div",18)(21,"div",19),l(22,"\uBB38\uC790"),r(),i(23,"div",20),l(24),r()()(),P(25,hl,7,1,"div",21)(26,Cl,7,1,"div",21),r(),i(27,"div",22)(28,"button",23),u("click",function(){f(e);let o=p(2);return h(o.onCreateNewDocument())}),C(),i(29,"svg",24),m(30,"rect",25)(31,"path",26),r(),v(),i(32,"span"),l(33,"\uD3B8\uC9D1 \uBB38\uC11C \uB9CC\uB4E4\uAE30"),r()()()()}if(a&2){let e=p(2);c(9),E(e.analysisResult.summary.pageCount),c(5),E(e.analysisResult.summary.totalTextItems),c(5),E(e.analysisResult.summary.totalWords),c(5),E(e.analysisResult.summary.totalCharacters),c(),g("ngIf",e.analysisResult.summary.imageInfo&&e.analysisResult.summary.imageInfo.totalImages>0),c(),g("ngIf",(e.analysisResult.vectorData==null?null:e.analysisResult.vectorData.totalOperations)>0)}}function bl(a,t){if(a&1){let e=w();i(0,"div",1),u("click",function(){f(e);let o=p();return h(o.onClose())}),i(1,"div",2),u("click",function(o){return f(e),h(o.stopPropagation())}),i(2,"div",3)(3,"button",4),u("click",function(){f(e);let o=p();return h(o.onClose())}),C(),i(4,"svg",5),m(5,"path",6),r()(),v(),i(6,"h2"),l(7,"PDF \uBD84\uC11D \uACB0\uACFC"),r(),i(8,"button",7),u("click",function(){f(e);let o=p();return h(o.onClose())}),l(9,"\xD7"),r()(),P(10,fl,8,4,"div",8)(11,_l,34,6,"div",9),r()()}if(a&2){let e=p();g("@fadeInOut",void 0),c(),g("@slideUp",void 0),c(9),g("ngIf",e.isAnalyzing),c(),g("ngIf",!e.isAnalyzing&&e.analysisResult)}}var gn=class a{pdfSrc=null;fileName="";close=new N;analysisComplete=new N;createNewDocument=new N;isOpen=!1;isAnalyzing=!1;analysisProgress=0;currentStep="";analysisResult=null;pdfAnalysisManager=O(Mt);snackbar=O(U);pageBuilder=O(wt);steps=["\u{1F4C4} PDF \uD30C\uC77C \uB85C\uB529...","\u{1F50D} \uBB38\uC11C \uAD6C\uC870 \uBD84\uC11D...","\u{1F4DD} \uD14D\uC2A4\uD2B8 \uCD94\uCD9C \uC911...","\u{1F5BC}\uFE0F \uC774\uBBF8\uC9C0 \uAC10\uC9C0 \uC911...","\u{1F3A8} \uBCA1\uD130 \uBD84\uC11D \uC911...","\u2705 \uBD84\uC11D \uC644\uB8CC!"];ngOnInit(){console.log("\u{1F50D} [EzReaderMobilePdfAnalysis] \uCEF4\uD3EC\uB10C\uD2B8 \uCD08\uAE30\uD654"),this.open()}open(){console.log("\u{1F50D} [EzReaderMobilePdfAnalysis] \uD328\uB110 \uC5F4\uAE30, pdfSrc:",this.pdfSrc,"fileName:",this.fileName),this.isOpen=!0,this.startAnalysis()}startAnalysis(){return x(this,null,function*(){if(console.log("\u{1F3AF} [EzReaderMobilePdfAnalysis] \uBD84\uC11D \uC2DC\uC791"),!this.pdfSrc){console.warn("\u26A0\uFE0F [EzReaderMobilePdfAnalysis] PDF \uC18C\uC2A4 \uC5C6\uC74C"),this.snackbar.showError("PDF \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.isAnalyzing=!0,this.analysisProgress=0,this.analysisResult=null;let t=0;this.currentStep=this.steps[t];let e=setInterval(()=>{t<this.steps.length-1&&(t++,this.currentStep=this.steps[t])},2e3);try{let n=yield this.pdfAnalysisManager.analyzePdf(this.pdfSrc,this.fileName,(o,s)=>{this.analysisProgress=o,s&&(this.currentStep=s)});clearInterval(e),this.analysisResult=n,this.analysisProgress=100,this.currentStep=this.steps[this.steps.length-1],console.log("\u2705 [EzReaderMobilePdfAnalysis] \uBD84\uC11D \uC644\uB8CC:",{pageCount:n.summary.pageCount,totalTextItems:n.summary.totalTextItems,totalImages:n.summary.imageInfo?.totalImages,hasVectorGraphics:n.summary.hasVectorGraphics}),this.analysisComplete.emit(n),this.snackbar.showSuccess("PDF \uBD84\uC11D\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!")}catch(n){clearInterval(e),console.error("\u274C [EzReaderMobilePdfAnalysis] \uBD84\uC11D \uC2E4\uD328:",n),this.snackbar.showError("PDF \uBD84\uC11D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),this.isAnalyzing=!1}finally{this.isAnalyzing=!1}})}onClose(){console.log("\u{1F53D} [EzReaderMobilePdfAnalysis] \uD328\uB110 \uB2EB\uAE30"),this.isOpen=!1,this.isAnalyzing=!1,this.analysisProgress=0,this.analysisResult=null,this.close.emit()}onCreateNewDocument(){return x(this,null,function*(){if(console.log("\u{1F4DD} [EzReaderMobilePdfAnalysis] \uC0C8 \uBB38\uC11C \uB9CC\uB4E4\uAE30 \uC2DC\uC791"),!this.analysisResult){this.snackbar.showError("\uBD84\uC11D \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{let t=this.pageBuilder.createPagesFromTextStream(this.analysisResult.textStreamData,[],e=>console.log("\u{1F4C4}",e));console.log("\u2705 [EzReaderMobilePdfAnalysis] PdfPage[] \uC0DD\uC131 \uC644\uB8CC:",t.length,"\uD398\uC774\uC9C0"),this.createNewDocument.emit(t),this.onClose()}catch(t){console.error("\u274C [EzReaderMobilePdfAnalysis] \uBB38\uC11C \uC0DD\uC131 \uC2E4\uD328:",t),this.snackbar.showError("\uBB38\uC11C \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}onCreateNewFromDashboard(t){console.log("\u{1F4DD} [EzReaderMobilePdfAnalysis] \uB300\uC2DC\uBCF4\uB4DC\uC5D0\uC11C \uC0C8 \uBB38\uC11C \uC0DD\uC131:",t.length,"\uD398\uC774\uC9C0"),this.createNewDocument.emit(t),this.onClose()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=F({type:a,selectors:[["app-ez-reader-mobile-pdf-analysis"]],inputs:{pdfSrc:"pdfSrc",fileName:"fileName"},outputs:{close:"close",analysisComplete:"analysisComplete",createNewDocument:"createNewDocument"},decls:1,vars:1,consts:[["class","analysis-overlay",3,"click",4,"ngIf"],[1,"analysis-overlay",3,"click"],[1,"analysis-panel",3,"click"],[1,"analysis-header"],[1,"back-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M19 12H5M12 19l-7-7 7-7","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"close-btn",3,"click"],["class","analysis-progress",4,"ngIf"],["class","analysis-results",4,"ngIf"],[1,"analysis-progress"],["src","images/ico-search@3x.png","alt","\uBD84\uC11D \uC911","width","48","height","48",1,"progress-icon"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"analysis-results"],[1,"summary-card"],[1,"summary-grid"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],["class","info-section",4,"ngIf"],[1,"analysis-actions"],[1,"btn-primary",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["x","3","y","3","width","18","height","18","rx","3","stroke","currentColor","stroke-width","2"],["d","M8 12h8M12 8v8","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"info-section"],[1,"info-header"],["src","images/ico-img@3x.png","alt","\uC774\uBBF8\uC9C0","width","20","height","20",1,"info-icon"],[1,"info-title"],[1,"info-content"],["src","images/btn-gnb-shapes@3x.png","alt","\uBCA1\uD130","width","20","height","20",1,"info-icon"]],template:function(e,n){e&1&&P(0,bl,12,4,"div",0),e&2&&g("ngIf",n.isOpen)},dependencies:[_e,j],styles:['@charset "UTF-8";.analysis-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:9999;display:flex;align-items:flex-end;touch-action:none}.analysis-panel[_ngcontent-%COMP%]{background:#fff;width:100%;max-height:90vh;border-radius:20px 20px 0 0;box-shadow:0 -4px 20px #00000026;overflow-y:auto;-webkit-overflow-scrolling:touch}.analysis-panel[_ngcontent-%COMP%]   .analysis-header[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;padding:16px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #e0e0e0;z-index:10}.analysis-panel[_ngcontent-%COMP%]   .analysis-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:18px;font-weight:600;margin:0;color:#333}.analysis-panel[_ngcontent-%COMP%]   .analysis-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:8px;color:#666;display:flex;align-items:center;justify-content:center;transition:color .2s}.analysis-panel[_ngcontent-%COMP%]   .analysis-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{color:#007acc}.analysis-panel[_ngcontent-%COMP%]   .analysis-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{font-size:20px}.analysis-panel[_ngcontent-%COMP%]   .analysis-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{font-size:28px;font-weight:300}.analysis-panel[_ngcontent-%COMP%]   .analysis-progress[_ngcontent-%COMP%]{padding:60px 24px;text-align:center;min-height:400px;display:flex;flex-direction:column;align-items:center;justify-content:center}.analysis-panel[_ngcontent-%COMP%]   .analysis-progress[_ngcontent-%COMP%]   .progress-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:24px;animation:_ngcontent-%COMP%_pulse 1.5s infinite}.analysis-panel[_ngcontent-%COMP%]   .analysis-progress[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#333;margin:0 0 32px}.analysis-panel[_ngcontent-%COMP%]   .analysis-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;max-width:300px;height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden;margin-bottom:12px}.analysis-panel[_ngcontent-%COMP%]   .analysis-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#007acc,#0098ff);border-radius:4px;transition:width .3s ease}.analysis-panel[_ngcontent-%COMP%]   .analysis-progress[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#007acc;margin:0}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]{padding:24px}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px;padding:20px;margin-bottom:20px}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0 0 16px;color:#333}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:16px}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:12px;text-align:center}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-bottom:4px}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#007acc}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:12px;margin-top:12px}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:20px}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]   .info-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{font-size:14px;color:#666;padding-left:28px}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .dashboard-details[_ngcontent-%COMP%]{margin-bottom:20px}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .dashboard-details[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{cursor:pointer;font-size:14px;font-weight:600;color:#007acc;padding:12px;background:#f0f8ff;border-radius:8px;list-style:none;-webkit-user-select:none;user-select:none}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .dashboard-details[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker{display:none}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .dashboard-details[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before{content:"\\25b6";display:inline-block;margin-right:8px;transition:transform .2s}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .dashboard-details[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:before{transform:rotate(90deg)}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .dashboard-details[_ngcontent-%COMP%]   shared-pdf-analysis-dashboard[_ngcontent-%COMP%]{display:block;margin-top:12px}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .analysis-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{width:100%;padding:16px;background:#007acc;color:#fff;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:background .2s}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .analysis-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .analysis-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active{background:#0066a8}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}}@media (max-width: 480px){.analysis-panel[_ngcontent-%COMP%]   .analysis-results[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:20px}}'],data:{animation:[xt("fadeInOut",[tt(":enter",[Be({opacity:0}),et("300ms ease-out",Be({opacity:1}))]),tt(":leave",[et("300ms ease-in",Be({opacity:0}))])]),xt("slideUp",[tt(":enter",[Be({transform:"translateY(100%)"}),et("300ms ease-out",Be({transform:"translateY(0)"}))]),tt(":leave",[et("300ms ease-in",Be({transform:"translateY(100%)"}))])])]}})};var Ti=class a{constructor(t,e){this.resourceLoader=t;this.navigationHistory=e;console.log("\u{1F4F1} EzReaderMobileModule \uCD08\uAE30\uD654 (SharedDocs \uAE30\uBC18)"),console.log("\u{1F4CD} NavigationHistoryService \uCD08\uAE30\uD654\uB428"),this.resourceLoader.loadAllResources().then(()=>console.log("\u2705 EzReaderMobile \uB9AC\uC18C\uC2A4 \uB85C\uB4DC \uC644\uB8CC")).catch(n=>console.warn("\u26A0\uFE0F EzReaderMobile \uB9AC\uC18C\uC2A4 \uB85C\uB4DC \uC2E4\uD328:",n))}static \u0275fac=function(e){return new(e||a)(Y(ui),Y(Se))};static \u0275mod=ft({type:a});static \u0275inj=ut({providers:[{provide:ti,useValue:"EzReaderMobilePdfCacheDB"},Me,Ne,rt,Le,Ie,be,Se],imports:[_e,Fe,mi,pn,gi,St,di,lt,we,Ot,kt,Et,Dt,he,Tt,yt,gn,zt,at]})};export{Ti as EzReaderMobileModule};

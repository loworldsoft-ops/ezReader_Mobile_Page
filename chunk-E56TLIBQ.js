import{B as qs,J as Hs,K as Bs,L as Xn,M as an,O as Ye,Q as $s,X as zs,Y as Js,a as Co,c as ks,d as Eo,e as Vs,f as It,g as Fs,i as Us,j as Ls,r as Gs,t as Os}from"./chunk-RTGJLPGU.js";import{f as Uu}from"./chunk-SF7C3E5M.js";import{$ as T,$a as Is,A as Ve,Ab as ut,Ac as oe,B as ot,Bc as rn,Ca as Es,D as fo,E as rt,Ec as Ns,G as Hn,Gc as ct,H as qe,Hb as ye,I as ho,Ib as G,J as _s,Jb as Z,K as vs,Kb as Ce,Lc as sn,O as po,Oc as bs,P as ne,Pa as Ss,Q as jt,R as X,Rb as Kn,S as J,Sa as ce,V as le,Vb as de,W as O,Wa as mo,X as He,Xa as lt,Xb as Fe,Y as ys,Ya as L,Z as $,Za as Ts,_ as Be,_a as _o,a as Oe,b as us,bb as ws,c as Et,ca as st,cb as Jn,cc as Ds,d as lo,da as ge,db as Tt,e as uo,ea as Bn,eb as Je,ec as We,f as F,fa as $n,fb as q,g as fe,ga as $e,gc as Ae,h as cs,hb as j,hc as yo,i as Ne,ia as St,j as K,ja as en,jb as tn,jc as Ps,k as A,ka as zn,l as be,m as ds,ma as go,mb as ee,n as fs,nb as nn,o as b,ob as on,p as On,pa as ve,pb as As,q as ae,qa as Cs,qc as ie,r as co,s as hs,sa as at,t as qn,ta as ue,u as ps,ua as ze,ub as Wn,w as gs,wb as vo,x as ms,xb as Rs,xc as Ms,y as ke,yb as Yn,yc as xs}from"./chunk-AG6NMNX5.js";import{a as S,b as z,h as Fu,j as m}from"./chunk-TWZW5B45.js";var na=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(L(lt),L(ze))};static \u0275dir=q({type:n})}return n})(),dt=(()=>{class n extends na{static \u0275fac=(()=>{let t;return function(o){return(t||(t=ue(n)))(o||n)}})();static \u0275dir=q({type:n,features:[j]})}return n})(),Xe=new $(""),Lu={provide:Xe,useExisting:le(()=>Gu),multi:!0},Gu=(()=>{class n extends dt{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(o){return(t||(t=ue(n)))(o||n)}})();static \u0275dir=q({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&de("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},standalone:!1,features:[ie([Lu]),j]})}return n})(),Ou={provide:Xe,useExisting:le(()=>ia),multi:!0};function qu(){let n=Co()?Co().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Hu=new $(""),ia=(()=>{class n extends na{_compositionMode;_composing=!1;constructor(t,i,o){super(t,i),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!qu())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(L(lt),L(ze),L(Hu,8))};static \u0275dir=q({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&de("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},standalone:!1,features:[ie([Ou]),j]})}return n})();function Bu(n){return n==null||oa(n)===0}function oa(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Mt=new $(""),ra=new $("");function $u(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function zu(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Ju(n){return Bu(n.value)?{required:!0}:null}function Wu(n){return e=>{let t=e.value?.length??oa(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function Ws(n){return null}function sa(n){return n!=null}function aa(n){return Wn(n)?K(n):n}function la(n){let e={};return n.forEach(t=>{e=t!=null?S(S({},e),t):e}),Object.keys(e).length===0?null:e}function ua(n,e){return e.map(t=>t(n))}function Yu(n){return!n.validate}function ca(n){return n.map(e=>Yu(e)?e:t=>e.validate(t))}function Ku(n){if(!n)return null;let e=n.filter(sa);return e.length==0?null:function(t){return la(ua(t,e))}}function Io(n){return n!=null?Ku(ca(n)):null}function Xu(n){if(!n)return null;let e=n.filter(sa);return e.length==0?null:function(t){let i=ua(t,e).map(aa);return ps(i).pipe(b(la))}}function wo(n){return n!=null?Xu(ca(n)):null}function Ys(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Zu(n){return n._rawValidators}function Qu(n){return n._rawAsyncValidators}function So(n){return n?Array.isArray(n)?n:[n]:[]}function Qn(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ks(n,e){let t=So(e);return So(n).forEach(o=>{Qn(t,o)||t.push(o)}),t}function Xs(n,e){return So(e).filter(t=>!Qn(n,t))}var jn=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Io(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=wo(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Rt=class extends jn{name;get formDirective(){return null}get path(){return null}},Dt=class extends jn{_parent=null;name=null;valueAccessor=null},ei=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},ju={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Jv=z(S({},ju),{"[class.ng-submitted]":"isSubmitted"}),Wv=(()=>{class n extends ei{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(L(Dt,2))};static \u0275dir=q({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&We("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[j]})}return n})(),Yv=(()=>{class n extends ei{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(L(Rt,10))};static \u0275dir=q({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&We("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},standalone:!1,features:[j]})}return n})();var ln="VALID",Zn="INVALID",wt="PENDING",un="DISABLED",Ke=class{},ti=class extends Ke{value;source;constructor(e,t){super(),this.value=e,this.source=t}},dn=class extends Ke{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},fn=class extends Ke{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},At=class extends Ke{status;source;constructor(e,t){super(),this.status=e,this.source=t}},To=class extends Ke{source;constructor(e){super(),this.source=e}},ni=class extends Ke{source;constructor(e){super(),this.source=e}};function da(n){return(ri(n)?n.validators:n)||null}function ec(n){return Array.isArray(n)?Io(n):n||null}function fa(n,e){return(ri(e)?e.asyncValidators:n)||null}function tc(n){return Array.isArray(n)?wo(n):n||null}function ri(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function nc(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new J(1e3,"");if(!i[t])throw new J(1001,"")}function ic(n,e,t){n._forEachChild((i,o)=>{if(t[o]===void 0)throw new J(1002,"")})}var ii=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return oe(this.statusReactive)}set status(e){oe(()=>this.statusReactive.set(e))}_status=rn(()=>this.statusReactive());statusReactive=ve(void 0);get valid(){return this.status===ln}get invalid(){return this.status===Zn}get pending(){return this.status==wt}get disabled(){return this.status===un}get enabled(){return this.status!==un}errors;get pristine(){return oe(this.pristineReactive)}set pristine(e){oe(()=>this.pristineReactive.set(e))}_pristine=rn(()=>this.pristineReactive());pristineReactive=ve(!0);get dirty(){return!this.pristine}get touched(){return oe(this.touchedReactive)}set touched(e){oe(()=>this.touchedReactive.set(e))}_touched=rn(()=>this.touchedReactive());touchedReactive=ve(!1);get untouched(){return!this.touched}_events=new F;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Ks(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ks(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Xs(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Xs(e,this._rawAsyncValidators))}hasValidator(e){return Qn(this._rawValidators,e)}hasAsyncValidator(e){return Qn(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(z(S({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new fn(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new fn(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(z(S({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new dn(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new dn(!0,i))}markAsPending(e={}){this.status=wt;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new At(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(z(S({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=un,this.errors=null,this._forEachChild(o=>{o.disable(z(S({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ti(this.value,i)),this._events.next(new At(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(z(S({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ln,this._forEachChild(i=>{i.enable(z(S({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(z(S({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ln||this.status===wt)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ti(this.value,t)),this._events.next(new At(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(z(S({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?un:ln}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=wt,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=aa(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,o)=>i&&i._find(o),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new At(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new ee,this.statusChanges=new ee}_calculateStatus(){return this._allControlsDisabled()?un:this.errors?Zn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wt)?wt:this._anyControlsHaveStatus(Zn)?Zn:ln}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),o=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),o&&this._events.next(new dn(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new fn(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ri(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=ec(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=tc(this._rawAsyncValidators)}},oi=class extends ii{constructor(e,t,i){super(da(t),fa(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ic(this,!0,e),Object.keys(e).forEach(i=>{nc(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let o=this.controls[i];o&&o.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,o)=>{i.reset(e?e[o]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new ni(this))}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,o)=>((i.enabled||this.disabled)&&(t[o]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((o,r)=>{i=t(i,o,r)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var hn=new $("",{providedIn:"root",factory:()=>pn}),pn="always";function oc(n,e){return[...e.path,n]}function ha(n,e,t=pn){pa(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),sc(n,e),lc(n,e),ac(n,e),rc(n,e)}function Zs(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function rc(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function pa(n,e){let t=Zu(n);e.validator!==null?n.setValidators(Ys(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=Qu(n);e.asyncValidator!==null?n.setAsyncValidators(Ys(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let o=()=>n.updateValueAndValidity();Zs(e._rawValidators,o),Zs(e._rawAsyncValidators,o)}function sc(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&ga(n,e)})}function ac(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&ga(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function ga(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lc(n,e){let t=(i,o)=>{e.valueAccessor.writeValue(i),o&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function uc(n,e){n==null,pa(n,e)}function cc(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function dc(n){return Object.getPrototypeOf(n.constructor)===dt}function fc(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function hc(n,e){if(!e)return null;Array.isArray(e);let t,i,o;return e.forEach(r=>{r.constructor===ia?t=r:dc(r)?i=r:o=r}),o||i||t||null}var pc={provide:Rt,useExisting:le(()=>gc)},cn=Promise.resolve(),gc=(()=>{class n extends Rt{callSetDisabledState;get submitted(){return oe(this.submittedReactive)}_submitted=rn(()=>this.submittedReactive());submittedReactive=ve(!1);_directives=new Set;form;ngSubmit=new ee;options;constructor(t,i,o){super(),this.callSetDisabledState=o,this.form=new oi({},Io(t),wo(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){cn.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),ha(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){cn.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){cn.then(()=>{let i=this._findContainer(t.path),o=new oi({});uc(o,t),i.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){cn.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){cn.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),fc(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new To(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(L(Mt,10),L(ra,10),L(hn,8))};static \u0275dir=q({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&de("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ie([pc]),j]})}return n})();function Qs(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function js(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var mc=class extends ii{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(da(t),fa(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ri(t)&&(t.nonNullable||t.initialValueIsDefault)&&(js(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new ni(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Qs(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Qs(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){js(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var _c={provide:Dt,useExisting:le(()=>vc)},ea=Promise.resolve(),vc=(()=>{class n extends Dt{_changeDetectorRef;callSetDisabledState;control=new mc;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ee;constructor(t,i,o,r,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this._parent=t,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=hc(this,r)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),cc(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ha(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){ea.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,o=i!==0&&sn(i);ea.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?oc(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(L(Rt,9),L(Mt,10),L(ra,10),L(Xe,10),L(ct,8),L(hn,8))};static \u0275dir=q({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ie([_c]),j,at]})}return n})();var Xv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),yc={provide:Xe,useExisting:le(()=>Cc),multi:!0},Cc=(()=>{class n extends dt{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(o){return(t||(t=ue(n)))(o||n)}})();static \u0275dir=q({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&de("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[ie([yc]),j]})}return n})(),Ec={provide:Xe,useExisting:le(()=>Tc),multi:!0};var Sc=(()=>{class n{_accessors=[];add(t,i){this._accessors.push([t,i])}remove(t){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===t){this._accessors.splice(i,1);return}}select(t){this._accessors.forEach(i=>{this._isSameGroup(i,t)&&i[1]!==t&&i[1].fireUncheck(t.value)})}_isSameGroup(t,i){return t[0].control?t[0]._parent===i._control._parent&&t[1].name===i.name:!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Tc=(()=>{class n extends dt{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=T(hn,{optional:!0})??pn;constructor(t,i,o,r){super(t,i),this._registry=o,this._injector=r}ngOnInit(){this._control=this._injector.get(Dt),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(i){return new(i||n)(L(lt),L(ze),L(Sc),L(St))};static \u0275dir=q({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,o){i&1&&de("change",function(){return o.onChange()})("blur",function(){return o.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[ie([Ec]),j]})}return n})(),Ic={provide:Xe,useExisting:le(()=>wc),multi:!0},wc=(()=>{class n extends dt{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let t;return function(o){return(t||(t=ue(n)))(o||n)}})();static \u0275dir=q({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(i,o){i&1&&de("change",function(a){return o.onChange(a.target.value)})("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[ie([Ic]),j]})}return n})(),Ac=new $("");var Rc={provide:Xe,useExisting:le(()=>_a),multi:!0};function ma(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Dc(n){return n.split(":")[0]}var _a=(()=>{class n extends dt{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=T(Yn).injector;destroyRef=T(zn);cdr=T(ct);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,on({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let i=this._getOptionId(t),o=ma(i,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=Dc(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=ue(n)))(o||n)}})();static \u0275dir=q({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&de("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ie([Rc]),j]})}return n})(),Zv=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,o){this._element=t,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(ma(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(i){return new(i||n)(L(ze),L(lt),L(_a,9))};static \u0275dir=q({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Pc={provide:Xe,useExisting:le(()=>va),multi:!0};function ta(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Mc(n){return n.split(":")[0]}var va=(()=>{class n extends dt{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let o=t.map(r=>this._getOptionId(r));i=(r,a)=>{r._setSelected(o.indexOf(a.toString())>-1)}}else i=(o,r)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let o=[],r=i.selectedOptions;if(r!==void 0){let a=r;for(let u=0;u<a.length;u++){let c=a[u],d=this._getOptionValue(c.value);o.push(d)}}else{let a=i.options;for(let u=0;u<a.length;u++){let c=a[u];if(c.selected){let d=this._getOptionValue(c.value);o.push(d)}}}this.value=o,t(o)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=Mc(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=ue(n)))(o||n)}})();static \u0275dir=q({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&de("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ie([Pc]),j]})}return n})(),Qv=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,o){this._element=t,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(ta(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ta(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(L(ze),L(lt),L(va,9))};static \u0275dir=q({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function xc(n){return typeof n=="number"?n:parseInt(n,10)}function ya(n){return typeof n=="number"?n:parseFloat(n)}var si=(()=>{class n{_validator=Ws;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Ws,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,features:[at]})}return n})(),Nc={provide:Mt,useExisting:le(()=>bc),multi:!0},bc=(()=>{class n extends si{max;inputName="max";normalizeInput=t=>ya(t);createValidator=t=>zu(t);static \u0275fac=(()=>{let t;return function(o){return(t||(t=ue(n)))(o||n)}})();static \u0275dir=q({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,o){i&2&&ut("max",o._enabled?o.max:null)},inputs:{max:"max"},standalone:!1,features:[ie([Nc]),j]})}return n})(),kc={provide:Mt,useExisting:le(()=>Vc),multi:!0},Vc=(()=>{class n extends si{min;inputName="min";normalizeInput=t=>ya(t);createValidator=t=>$u(t);static \u0275fac=(()=>{let t;return function(o){return(t||(t=ue(n)))(o||n)}})();static \u0275dir=q({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,o){i&2&&ut("min",o._enabled?o.min:null)},inputs:{min:"min"},standalone:!1,features:[ie([kc]),j]})}return n})(),Fc={provide:Mt,useExisting:le(()=>Uc),multi:!0};var Uc=(()=>{class n extends si{required;inputName="required";normalizeInput=sn;createValidator=t=>Ju;enabled(t){return t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=ue(n)))(o||n)}})();static \u0275dir=q({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&ut("required",o._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[ie([Fc]),j]})}return n})();var Lc={provide:Mt,useExisting:le(()=>Gc),multi:!0},Gc=(()=>{class n extends si{maxlength;inputName="maxlength";normalizeInput=t=>xc(t);createValidator=t=>Wu(t);static \u0275fac=(()=>{let t;return function(o){return(t||(t=ue(n)))(o||n)}})();static \u0275dir=q({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,o){i&2&&ut("maxlength",o._enabled?o.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[ie([Lc]),j]})}return n})();var Ca=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Je({type:n});static \u0275inj=He({})}return n})();var jv=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:hn,useValue:t.callSetDisabledState??pn}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Je({type:n});static \u0275inj=He({imports:[Ca]})}return n})(),ey=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ac,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:hn,useValue:t.callSetDisabledState??pn}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Je({type:n});static \u0275inj=He({imports:[Ca]})}return n})();var M="primary",Rn=Symbol("RouteTitle"),Mo=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function pt(n){return new Mo(n)}function Da(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let o={};for(let r=0;r<i.length;r++){let a=i[r],u=n[r];if(a[0]===":")o[a.substring(1)]=u;else if(a!==u.path)return null}return{consumed:n.slice(0,i.length),posParams:o}}function Oc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Re(n[t],e[t]))return!1;return!0}function Re(n,e){let t=n?xo(n):void 0,i=e?xo(e):void 0;if(!t||!i||t.length!=i.length)return!1;let o;for(let r=0;r<t.length;r++)if(o=t[r],!Pa(n[o],e[o]))return!1;return!0}function xo(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Pa(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((o,r)=>i[r]===o)}else return n===e}function Ma(n){return n.length>0?n[n.length-1]:null}function Ue(n){return ds(n)?n:Wn(n)?K(Promise.resolve(n)):A(n)}var qc={exact:Na,subset:ba},xa={exact:Hc,subset:Bc,ignored:()=>!0};function Ea(n,e,t){return qc[t.paths](n.root,e.root,t.matrixParams)&&xa[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Hc(n,e){return Re(n,e)}function Na(n,e,t){if(!ft(n.segments,e.segments)||!ui(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!Na(n.children[i],e.children[i],t))return!1;return!0}function Bc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Pa(n[t],e[t]))}function ba(n,e,t){return ka(n,e,e.segments,t)}function ka(n,e,t,i){if(n.segments.length>t.length){let o=n.segments.slice(0,t.length);return!(!ft(o,t)||e.hasChildren()||!ui(o,t,i))}else if(n.segments.length===t.length){if(!ft(n.segments,t)||!ui(n.segments,t,i))return!1;for(let o in e.children)if(!n.children[o]||!ba(n.children[o],e.children[o],i))return!1;return!0}else{let o=t.slice(0,n.segments.length),r=t.slice(n.segments.length);return!ft(n.segments,o)||!ui(n.segments,o,i)||!n.children[M]?!1:ka(n.children[M],e,r,i)}}function ui(n,e,t){return e.every((i,o)=>xa[t](n[o].parameters,i.parameters))}var Pe=class{root;queryParams;fragment;_queryParamMap;constructor(e=new V([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=pt(this.queryParams),this._queryParamMap}toString(){return Jc.serialize(this)}},V=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ci(this)}},Ze=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=pt(this.parameters),this._parameterMap}toString(){return Fa(this)}};function $c(n,e){return ft(n,e)&&n.every((t,i)=>Re(t.parameters,e[i].parameters))}function ft(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function zc(n,e){let t=[];return Object.entries(n.children).forEach(([i,o])=>{i===M&&(t=t.concat(e(o,i)))}),Object.entries(n.children).forEach(([i,o])=>{i!==M&&(t=t.concat(e(o,i)))}),t}var gt=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=O({token:n,factory:()=>new Qe,providedIn:"root"})}return n})(),Qe=class{parse(e){let t=new bo(e);return new Pe(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${gn(e.root,!0)}`,i=Kc(e.queryParams),o=typeof e.fragment=="string"?`#${Wc(e.fragment)}`:"";return`${t}${i}${o}`}},Jc=new Qe;function ci(n){return n.segments.map(e=>Fa(e)).join("/")}function gn(n,e){if(!n.hasChildren())return ci(n);if(e){let t=n.children[M]?gn(n.children[M],!1):"",i=[];return Object.entries(n.children).forEach(([o,r])=>{o!==M&&i.push(`${o}:${gn(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=zc(n,(i,o)=>o===M?[gn(n.children[M],!1)]:[`${o}:${gn(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[M]!=null?`${ci(n)}/${t[0]}`:`${ci(n)}/(${t.join("//")})`}}function Va(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ai(n){return Va(n).replace(/%3B/gi,";")}function Wc(n){return encodeURI(n)}function No(n){return Va(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function di(n){return decodeURIComponent(n)}function Sa(n){return di(n.replace(/\+/g,"%20"))}function Fa(n){return`${No(n.path)}${Yc(n.parameters)}`}function Yc(n){return Object.entries(n).map(([e,t])=>`;${No(e)}=${No(t)}`).join("")}function Kc(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(o=>`${ai(t)}=${ai(o)}`).join("&"):`${ai(t)}=${ai(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Xc=/^[^\/()?;#]+/;function Ao(n){let e=n.match(Xc);return e?e[0]:""}var Zc=/^[^\/()?;=#]+/;function Qc(n){let e=n.match(Zc);return e?e[0]:""}var jc=/^[^=?&#]+/;function ed(n){let e=n.match(jc);return e?e[0]:""}var td=/^[^&#]+/;function nd(n){let e=n.match(td);return e?e[0]:""}var bo=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new V([],{}):new V([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[M]=new V(e,t)),i}parseSegment(){let e=Ao(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new Ze(di(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Qc(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=Ao(this.remaining);o&&(i=o,this.capture(i))}e[di(t)]=di(i)}parseQueryParam(e){let t=ed(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let a=nd(this.remaining);a&&(i=a,this.capture(i))}let o=Sa(t),r=Sa(i);if(e.hasOwnProperty(o)){let a=e[o];Array.isArray(a)||(a=[a],e[o]=a),a.push(r)}else e[o]=r}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Ao(this.remaining),o=this.remaining[i.length];if(o!=="/"&&o!==")"&&o!==";")throw new J(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):e&&(r=M);let a=this.parseChildren();t[r]=Object.keys(a).length===1?a[M]:new V([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function Ua(n){return n.segments.length>0?new V([],{[M]:n}):n}function La(n){let e={};for(let[i,o]of Object.entries(n.children)){let r=La(o);if(i===M&&r.segments.length===0&&r.hasChildren())for(let[a,u]of Object.entries(r.children))e[a]=u;else(r.segments.length>0||r.hasChildren())&&(e[i]=r)}let t=new V(n.segments,e);return id(t)}function id(n){if(n.numberOfChildren===1&&n.children[M]){let e=n.children[M];return new V(n.segments.concat(e.segments),e.children)}return n}function Ft(n){return n instanceof Pe}function Ga(n,e,t=null,i=null){let o=Oa(n);return qa(o,e,t,i)}function Oa(n){let e;function t(r){let a={};for(let c of r.children){let d=t(c);a[c.outlet]=d}let u=new V(r.url,a);return r===n&&(e=u),u}let i=t(n.root),o=Ua(i);return e??o}function qa(n,e,t,i){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return Ro(o,o,o,t,i);let r=od(e);if(r.toRoot())return Ro(o,o,new V([],{}),t,i);let a=rd(r,o,n),u=a.processChildren?_n(a.segmentGroup,a.index,r.commands):Ba(a.segmentGroup,a.index,r.commands);return Ro(o,a.segmentGroup,u,t,i)}function fi(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function yn(n){return typeof n=="object"&&n!=null&&n.outlets}function Ro(n,e,t,i,o){let r={};i&&Object.entries(i).forEach(([c,d])=>{r[c]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let a;n===e?a=t:a=Ha(n,e,t);let u=Ua(La(a));return new Pe(u,r,o)}function Ha(n,e,t){let i={};return Object.entries(n.children).forEach(([o,r])=>{r===e?i[o]=t:i[o]=Ha(r,e,t)}),new V(n.segments,i)}var hi=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&fi(i[0]))throw new J(4003,!1);let o=i.find(yn);if(o&&o!==Ma(i))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function od(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new hi(!0,0,n);let e=0,t=!1,i=n.reduce((o,r,a)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let u={};return Object.entries(r.outlets).forEach(([c,d])=>{u[c]=typeof d=="string"?d.split("/"):d}),[...o,{outlets:u}]}if(r.segmentPath)return[...o,r.segmentPath]}return typeof r!="string"?[...o,r]:a===0?(r.split("/").forEach((u,c)=>{c==0&&u==="."||(c==0&&u===""?t=!0:u===".."?e++:u!=""&&o.push(u))}),o):[...o,r]},[]);return new hi(t,e,i)}var bt=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function rd(n,e,t){if(n.isAbsolute)return new bt(e,!0,0);if(!t)return new bt(e,!1,NaN);if(t.parent===null)return new bt(t,!0,0);let i=fi(n.commands[0])?0:1,o=t.segments.length-1+i;return sd(t,o,n.numberOfDoubleDots)}function sd(n,e,t){let i=n,o=e,r=t;for(;r>o;){if(r-=o,i=i.parent,!i)throw new J(4005,!1);o=i.segments.length}return new bt(i,!1,o-r)}function ad(n){return yn(n[0])?n[0].outlets:{[M]:n}}function Ba(n,e,t){if(n??=new V([],{}),n.segments.length===0&&n.hasChildren())return _n(n,e,t);let i=ld(n,e,t),o=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let r=new V(n.segments.slice(0,i.pathIndex),{});return r.children[M]=new V(n.segments.slice(i.pathIndex),n.children),_n(r,0,o)}else return i.match&&o.length===0?new V(n.segments,{}):i.match&&!n.hasChildren()?ko(n,e,t):i.match?_n(n,0,o):ko(n,e,t)}function _n(n,e,t){if(t.length===0)return new V(n.segments,{});{let i=ad(t),o={};if(Object.keys(i).some(r=>r!==M)&&n.children[M]&&n.numberOfChildren===1&&n.children[M].segments.length===0){let r=_n(n.children[M],e,t);return new V(n.segments,r.children)}return Object.entries(i).forEach(([r,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(o[r]=Ba(n.children[r],e,a))}),Object.entries(n.children).forEach(([r,a])=>{i[r]===void 0&&(o[r]=a)}),new V(n.segments,o)}}function ld(n,e,t){let i=0,o=e,r={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(i>=t.length)return r;let a=n.segments[o],u=t[i];if(yn(u))break;let c=`${u}`,d=i<t.length-1?t[i+1]:null;if(o>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!Ia(c,d,a))return r;i+=2}else{if(!Ia(c,{},a))return r;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}function ko(n,e,t){let i=n.segments.slice(0,e),o=0;for(;o<t.length;){let r=t[o];if(yn(r)){let c=ud(r.outlets);return new V(i,c)}if(o===0&&fi(t[0])){let c=n.segments[e];i.push(new Ze(c.path,Ta(t[0]))),o++;continue}let a=yn(r)?r.outlets[M]:`${r}`,u=o<t.length-1?t[o+1]:null;a&&u&&fi(u)?(i.push(new Ze(a,Ta(u))),o+=2):(i.push(new Ze(a,{})),o++)}return new V(i,{})}function ud(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=ko(new V([],{}),0,i))}),e}function Ta(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function Ia(n,e,t){return n==t.path&&Re(e,t.parameters)}var kt="imperative",W=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(W||{}),pe=class{id;url;constructor(e,t){this.id=e,this.url=t}},je=class extends pe{type=W.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",o=null){super(e,t),this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Se=class extends pe{urlAfterRedirects;type=W.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},re=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(re||{}),Ut=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Ut||{}),De=class extends pe{reason;code;type=W.NavigationCancel;constructor(e,t,i,o){super(e,t),this.reason=i,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Me=class extends pe{reason;code;type=W.NavigationSkipped;constructor(e,t,i,o){super(e,t),this.reason=i,this.code=o}},Lt=class extends pe{error;target;type=W.NavigationError;constructor(e,t,i,o){super(e,t),this.error=i,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Cn=class extends pe{urlAfterRedirects;state;type=W.RoutesRecognized;constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pi=class extends pe{urlAfterRedirects;state;type=W.GuardsCheckStart;constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gi=class extends pe{urlAfterRedirects;state;shouldActivate;type=W.GuardsCheckEnd;constructor(e,t,i,o,r){super(e,t),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},mi=class extends pe{urlAfterRedirects;state;type=W.ResolveStart;constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_i=class extends pe{urlAfterRedirects;state;type=W.ResolveEnd;constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vi=class{route;type=W.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},yi=class{route;type=W.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ci=class{snapshot;type=W.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ei=class{snapshot;type=W.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Si=class{snapshot;type=W.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ti=class{snapshot;type=W.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gt=class{routerEvent;position;anchor;type=W.Scroll;constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},En=class{},Ot=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function cd(n){return!(n instanceof En)&&!(n instanceof Ot)}function dd(n,e){return n.providers&&!n._injector&&(n._injector=Jn(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ee(n){return n.outlet||M}function fd(n,e){let t=n.filter(i=>Ee(i)===e);return t.push(...n.filter(i=>Ee(i)!==e)),t}function Bt(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ii=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Bt(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new mt(this.rootInjector)}},mt=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let o=this.getOrCreateContext(t);o.outlet=i,this.contexts.set(t,o)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Ii(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(Be(st))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wi=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Vo(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Vo(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Fo(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Fo(e,this._root).map(t=>t.value)}};function Vo(n,e){if(n===e.value)return e;for(let t of e.children){let i=Vo(n,t);if(i)return i}return null}function Fo(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Fo(n,t);if(i.length)return i.unshift(e),i}return[]}var he=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Nt(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Sn=class extends wi{snapshot;constructor(e,t){super(e),this.snapshot=t,$o(this,e)}toString(){return this.snapshot.toString()}};function $a(n){let e=hd(n),t=new fe([new Ze("",{})]),i=new fe({}),o=new fe({}),r=new fe({}),a=new fe(""),u=new et(t,i,r,a,o,M,n,e.root);return u.snapshot=e.root,new Sn(new he(u,[]),e)}function hd(n){let e={},t={},i={},r=new ht([],e,i,"",t,M,n,null,{});return new Tn("",new he(r,[]))}var et=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,o,r,a,u,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=o,this.dataSubject=r,this.outlet=a,this.component=u,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(b(d=>d[Rn]))??A(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=o,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(b(e=>pt(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(b(e=>pt(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ai(n,e,t="emptyOnly"){let i,{routeConfig:o}=n;return e!==null&&(t==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:S(S({},e.params),n.params),data:S(S({},e.data),n.data),resolve:S(S(S(S({},n.data),e.data),o?.data),n._resolvedData)}:i={params:S({},n.params),data:S({},n.data),resolve:S(S({},n.data),n._resolvedData??{})},o&&Ja(o)&&(i.resolve[Rn]=o.title),i}var ht=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Rn]}constructor(e,t,i,o,r,a,u,c,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=o,this.data=r,this.outlet=a,this.component=u,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=pt(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=pt(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Tn=class extends wi{url;constructor(e,t){super(t),this.url=e,$o(this,t)}toString(){return za(this._root)}};function $o(n,e){e.value._routerState=n,e.children.forEach(t=>$o(n,t))}function za(n){let e=n.children.length>0?` { ${n.children.map(za).join(", ")} } `:"";return`${n.value}${e}`}function Do(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Re(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Re(e.params,t.params)||n.paramsSubject.next(t.params),Oc(e.url,t.url)||n.urlSubject.next(t.url),Re(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Uo(n,e){let t=Re(n.params,e.params)&&$c(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Uo(n.parent,e.parent))}function Ja(n){return typeof n.title=="string"||n.title===null}var Wa=new $(""),zo=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=M;activateEvents=new ee;deactivateEvents=new ee;attachEvents=new ee;detachEvents=new ee;routerOutletData=Ns(void 0);parentContexts=T(mt);location=T(_o);changeDetector=T(ct);inputBinder=T(Dn,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:o}=t.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=t;let o=this.location,a=t.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new Lo(t,u,o.injector,this.routerOutletData);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=q({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[at]})}return n})(),Lo=class{route;childContexts;parent;outletData;constructor(e,t,i,o){this.route=e,this.childContexts=t,this.parent=i,this.outletData=o}get(e,t){return e===et?this.route:e===mt?this.childContexts:e===Wa?this.outletData:this.parent.get(e,t)}},Dn=new $(""),Jo=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,o=On([i.queryParams,i.params,i.data]).pipe(ne(([r,a,u],c)=>(u=S(S(S({},r),a),u),c===0?A(u):Promise.resolve(u)))).subscribe(r=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let a=bs(i.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:u}of a.inputs)t.activatedComponentRef.setInput(u,r[u])});this.outletDataSubscriptions.set(t,o)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),Wo=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Tt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,o){i&1&&Ce(0,"router-outlet")},dependencies:[zo],encapsulation:2})}return n})();function Yo(n){let e=n.children&&n.children.map(Yo),t=e?z(S({},n),{children:e}):S({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==M&&(t.component=Wo),t}function pd(n,e,t){let i=In(n,e._root,t?t._root:void 0);return new Sn(i,e)}function In(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let o=gd(n,e,t);return new he(i,o)}else{if(n.shouldAttach(e.value)){let r=n.retrieve(e.value);if(r!==null){let a=r.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(u=>In(n,u)),a}}let i=md(e.value),o=e.children.map(r=>In(n,r));return new he(i,o)}}function gd(n,e,t){return e.children.map(i=>{for(let o of t.children)if(n.shouldReuseRoute(i.value,o.value.snapshot))return In(n,i,o);return In(n,i)})}function md(n){return new et(new fe(n.url),new fe(n.params),new fe(n.queryParams),new fe(n.fragment),new fe(n.data),n.outlet,n.component,n)}var qt=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Ya="ngNavigationCancelingError";function Ri(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Ft(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Ka(!1,re.Redirect);return o.url=t,o.navigationBehaviorOptions=i,o}function Ka(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Ya]=!0,t.cancellationCode=e,t}function _d(n){return Xa(n)&&Ft(n.url)}function Xa(n){return!!n&&n[Ya]}var vd=(n,e,t,i)=>b(o=>(new Go(e,o.targetRouterState,o.currentRouterState,t,i).activate(n),o)),Go=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,o,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=o,this.inputBindingEnabled=r}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Do(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let o=Nt(t);e.children.forEach(r=>{let a=r.value.outlet;this.deactivateRoutes(r,o[a],i),delete o[a]}),Object.values(o).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(e,t,i){let o=e.value,r=t?t.value:null;if(o===r)if(o.component){let a=i.getContext(o.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else r&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),o=i&&e.value.component?i.children:t,r=Nt(e);for(let a of Object.values(r))this.deactivateRouteAndItsChildren(a,o);if(i&&i.outlet){let a=i.outlet.detach(),u=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),o=i&&e.value.component?i.children:t,r=Nt(e);for(let a of Object.values(r))this.deactivateRouteAndItsChildren(a,o);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let o=Nt(t);e.children.forEach(r=>{this.activateRoutes(r,o[r.value.outlet],i),this.forwardEvent(new Ti(r.value.snapshot))}),e.children.length&&this.forwardEvent(new Ei(e.value.snapshot))}activateRoutes(e,t,i){let o=e.value,r=t?t.value:null;if(Do(o),o===r)if(o.component){let a=i.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(o.component){let a=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let u=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),a.children.onOutletReAttached(u.contexts),a.attachRef=u.componentRef,a.route=u.route.value,a.outlet&&a.outlet.attach(u.componentRef,u.route.value),Do(u.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=o,a.outlet&&a.outlet.activateWith(o,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,i)}},Di=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Vt=class{component;route;constructor(e,t){this.component=e,this.route=t}};function yd(n,e,t){let i=n._root,o=e?e._root:null;return mn(i,o,t,[i.value])}function Cd(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function $t(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!ys(n)?n:e.get(n):i}function mn(n,e,t,i,o={canDeactivateChecks:[],canActivateChecks:[]}){let r=Nt(e);return n.children.forEach(a=>{Ed(a,r[a.value.outlet],t,i.concat([a.value]),o),delete r[a.value.outlet]}),Object.entries(r).forEach(([a,u])=>vn(u,t.getContext(a),o)),o}function Ed(n,e,t,i,o={canDeactivateChecks:[],canActivateChecks:[]}){let r=n.value,a=e?e.value:null,u=t?t.getContext(n.value.outlet):null;if(a&&r.routeConfig===a.routeConfig){let c=Sd(a,r,r.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Di(i)):(r.data=a.data,r._resolvedData=a._resolvedData),r.component?mn(n,e,u?u.children:null,i,o):mn(n,e,t,i,o),c&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new Vt(u.outlet.component,a))}else a&&vn(e,u,o),o.canActivateChecks.push(new Di(i)),r.component?mn(n,null,u?u.children:null,i,o):mn(n,null,t,i,o);return o}function Sd(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ft(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ft(n.url,e.url)||!Re(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Uo(n,e)||!Re(n.queryParams,e.queryParams);case"paramsChange":default:return!Uo(n,e)}}function vn(n,e,t){let i=Nt(n),o=n.value;Object.entries(i).forEach(([r,a])=>{o.component?e?vn(a,e.children.getContext(r),t):vn(a,null,t):vn(a,e,t)}),o.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Vt(e.outlet.component,o)):t.canDeactivateChecks.push(new Vt(null,o)):t.canDeactivateChecks.push(new Vt(null,o))}function Pn(n){return typeof n=="function"}function Td(n){return typeof n=="boolean"}function Id(n){return n&&Pn(n.canLoad)}function wd(n){return n&&Pn(n.canActivate)}function Ad(n){return n&&Pn(n.canActivateChild)}function Rd(n){return n&&Pn(n.canDeactivate)}function Dd(n){return n&&Pn(n.canMatch)}function Za(n){return n instanceof fs||n?.name==="EmptyError"}var li=Symbol("INITIAL_VALUE");function Ht(){return ne(n=>On(n.map(e=>e.pipe(rt(1),po(li)))).pipe(b(e=>{for(let t of e)if(t!==!0){if(t===li)return li;if(t===!1||Pd(t))return t}return!0}),ke(e=>e!==li),rt(1)))}function Pd(n){return Ft(n)||n instanceof qt}function Md(n,e){return ae(t=>{let{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:r,canDeactivateChecks:a}}=t;return a.length===0&&r.length===0?A(z(S({},t),{guardsResult:!0})):xd(a,i,o,n).pipe(ae(u=>u&&Td(u)?Nd(i,r,n,e):A(u)),b(u=>z(S({},t),{guardsResult:u})))})}function xd(n,e,t,i){return K(n).pipe(ae(o=>Ud(o.component,o.route,t,e,i)),qe(o=>o!==!0,!0))}function Nd(n,e,t,i){return K(e).pipe(ot(o=>hs(kd(o.route.parent,i),bd(o.route,i),Fd(n,o.path,t),Vd(n,o.route,t))),qe(o=>o!==!0,!0))}function bd(n,e){return n!==null&&e&&e(new Si(n)),A(!0)}function kd(n,e){return n!==null&&e&&e(new Ci(n)),A(!0)}function Vd(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return A(!0);let o=i.map(r=>qn(()=>{let a=Bt(e)??t,u=$t(r,a),c=wd(u)?u.canActivate(e,n):ge(a,()=>u(e,n));return Ue(c).pipe(qe())}));return A(o).pipe(Ht())}function Fd(n,e,t){let i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(a=>Cd(a)).filter(a=>a!==null).map(a=>qn(()=>{let u=a.guards.map(c=>{let d=Bt(a.node)??t,f=$t(c,d),h=Ad(f)?f.canActivateChild(i,n):ge(d,()=>f(i,n));return Ue(h).pipe(qe())});return A(u).pipe(Ht())}));return A(r).pipe(Ht())}function Ud(n,e,t,i,o){let r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!r||r.length===0)return A(!0);let a=r.map(u=>{let c=Bt(e)??o,d=$t(u,c),f=Rd(d)?d.canDeactivate(n,e,t,i):ge(c,()=>d(n,e,t,i));return Ue(f).pipe(qe())});return A(a).pipe(Ht())}function Ld(n,e,t,i){let o=e.canLoad;if(o===void 0||o.length===0)return A(!0);let r=o.map(a=>{let u=$t(a,n),c=Id(u)?u.canLoad(e,t):ge(n,()=>u(e,t));return Ue(c)});return A(r).pipe(Ht(),Qa(i))}function Qa(n){return us(X(e=>{if(typeof e!="boolean")throw Ri(n,e)}),b(e=>e===!0))}function Gd(n,e,t,i){let o=e.canMatch;if(!o||o.length===0)return A(!0);let r=o.map(a=>{let u=$t(a,n),c=Dd(u)?u.canMatch(e,t):ge(n,()=>u(e,t));return Ue(c)});return A(r).pipe(Ht(),Qa(i))}var wn=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},An=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function xt(n){return be(new wn(n))}function Od(n){return be(new J(4e3,!1))}function qd(n){return be(Ka(!1,re.GuardRejected))}var Oo=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],o=t.root;for(;;){if(i=i.concat(o.segments),o.numberOfChildren===0)return A(i);if(o.numberOfChildren>1||!o.children[M])return Od(`${e.redirectTo}`);o=o.children[M]}}applyRedirectCommands(e,t,i,o,r){return Hd(t,o,r).pipe(b(a=>{if(a instanceof Pe)throw new An(a);let u=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),e,i);if(a[0]==="/")throw new An(u);return u}))}applyRedirectCreateUrlTree(e,t,i,o){let r=this.createSegmentGroup(e,t.root,i,o);return new Pe(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([o,r])=>{if(typeof r=="string"&&r[0]===":"){let u=r.substring(1);i[o]=t[u]}else i[o]=r}),i}createSegmentGroup(e,t,i,o){let r=this.createSegments(e,t.segments,i,o),a={};return Object.entries(t.children).forEach(([u,c])=>{a[u]=this.createSegmentGroup(e,c,i,o)}),new V(r,a)}createSegments(e,t,i,o){return t.map(r=>r.path[0]===":"?this.findPosParam(e,r,o):this.findOrReturn(r,i))}findPosParam(e,t,i){let o=i[t.path.substring(1)];if(!o)throw new J(4001,!1);return o}findOrReturn(e,t){let i=0;for(let o of t){if(o.path===e.path)return t.splice(i),o;i++}return e}};function Hd(n,e,t){if(typeof n=="string")return A(n);let i=n,{queryParams:o,fragment:r,routeConfig:a,url:u,outlet:c,params:d,data:f,title:h}=e;return Ue(ge(t,()=>i({params:d,data:f,queryParams:o,fragment:r,routeConfig:a,url:u,outlet:c,title:h})))}var qo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bd(n,e,t,i,o){let r=ja(n,e,t);return r.matched?(i=dd(e,i),Gd(i,e,t,o).pipe(b(a=>a===!0?r:S({},qo)))):A(r)}function ja(n,e,t){if(e.path==="**")return $d(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?S({},qo):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let o=(e.matcher||Da)(t,n,e);if(!o)return S({},qo);let r={};Object.entries(o.posParams??{}).forEach(([u,c])=>{r[u]=c.path});let a=o.consumed.length>0?S(S({},r),o.consumed[o.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:a,positionalParamSegments:o.posParams??{}}}function $d(n){return{matched:!0,parameters:n.length>0?Ma(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function wa(n,e,t,i){return t.length>0&&Wd(n,t,i)?{segmentGroup:new V(e,Jd(i,new V(t,n.children))),slicedSegments:[]}:t.length===0&&Yd(n,t,i)?{segmentGroup:new V(n.segments,zd(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new V(n.segments,n.children),slicedSegments:t}}function zd(n,e,t,i){let o={};for(let r of t)if(Mi(n,e,r)&&!i[Ee(r)]){let a=new V([],{});o[Ee(r)]=a}return S(S({},i),o)}function Jd(n,e){let t={};t[M]=e;for(let i of n)if(i.path===""&&Ee(i)!==M){let o=new V([],{});t[Ee(i)]=o}return t}function Wd(n,e,t){return t.some(i=>Mi(n,e,i)&&Ee(i)!==M)}function Yd(n,e,t){return t.some(i=>Mi(n,e,i))}function Mi(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Kd(n,e,t){return e.length===0&&!n.children[t]}var Ho=class{};function Xd(n,e,t,i,o,r,a="emptyOnly"){return new Bo(n,e,t,i,o,a,r).recognize()}var Zd=31,Bo=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,o,r,a,u){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=o,this.urlTree=r,this.paramsInheritanceStrategy=a,this.urlSerializer=u,this.applyRedirects=new Oo(this.urlSerializer,this.urlTree)}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}recognize(){let e=wa(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(b(({children:t,rootSnapshot:i})=>{let o=new he(i,t),r=new Tn("",o),a=Ga(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(a),{state:r,tree:a}}))}match(e){let t=new ht([],Object.freeze({}),Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),M,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,M,t).pipe(b(i=>({children:i,rootSnapshot:t})),Ve(i=>{if(i instanceof An)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof wn?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,o,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,r):this.processSegment(e,t,i,i.segments,o,!0,r).pipe(b(a=>a instanceof he?[a]:[]))}processChildren(e,t,i,o){let r=[];for(let a of Object.keys(i.children))a==="primary"?r.unshift(a):r.push(a);return K(r).pipe(ot(a=>{let u=i.children[a],c=fd(t,a);return this.processSegmentGroup(e,c,u,a,o)}),vs((a,u)=>(a.push(...u),a)),fo(null),_s(),ae(a=>{if(a===null)return xt(i);let u=el(a);return Qd(u),A(u)}))}processSegment(e,t,i,o,r,a,u){return K(t).pipe(ot(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,o,r,a,u).pipe(Ve(d=>{if(d instanceof wn)return A(null);throw d}))),qe(c=>!!c),Ve(c=>{if(Za(c))return Kd(i,o,r)?A(new Ho):xt(i);throw c}))}processSegmentAgainstRoute(e,t,i,o,r,a,u,c){return Ee(i)!==a&&(a===M||!Mi(o,r,i))?xt(o):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,i,r,a,c):this.allowRedirects&&u?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,i,r,a,c):xt(o)}expandSegmentAgainstRouteUsingRedirect(e,t,i,o,r,a,u){let{matched:c,parameters:d,consumedSegments:f,positionalParamSegments:h,remainingSegments:p}=ja(t,o,r);if(!c)return xt(t);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Zd&&(this.allowRedirects=!1));let g=new ht(r,d,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,Aa(o),Ee(o),o.component??o._loadedComponent??null,o,Ra(o)),_=Ai(g,u,this.paramsInheritanceStrategy);return g.params=Object.freeze(_.params),g.data=Object.freeze(_.data),this.applyRedirects.applyRedirectCommands(f,o.redirectTo,h,g,e).pipe(ne(y=>this.applyRedirects.lineralizeSegments(o,y)),ae(y=>this.processSegment(e,i,t,y.concat(p),a,!1,u)))}matchSegmentAgainstRoute(e,t,i,o,r,a){let u=Bd(t,i,o,e,this.urlSerializer);return i.path==="**"&&(t.children={}),u.pipe(ne(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,o).pipe(ne(({routes:d})=>{let f=i._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=c,_=new ht(p,h,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,Aa(i),Ee(i),i.component??i._loadedComponent??null,i,Ra(i)),v=Ai(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(v.params),_.data=Object.freeze(v.data);let{segmentGroup:y,slicedSegments:I}=wa(t,p,g,d);if(I.length===0&&y.hasChildren())return this.processChildren(f,d,y,_).pipe(b(E=>new he(_,E)));if(d.length===0&&I.length===0)return A(new he(_,[]));let w=Ee(i)===r;return this.processSegment(f,d,y,I,w?M:r,!0,_).pipe(b(E=>new he(_,E instanceof he?[E]:[])))}))):xt(t)))}getChildConfig(e,t,i){return t.children?A({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?A({routes:t._loadedRoutes,injector:t._loadedInjector}):Ld(e,t,i,this.urlSerializer).pipe(ae(o=>o?this.configLoader.loadChildren(e,t).pipe(X(r=>{t._loadedRoutes=r.routes,t._loadedInjector=r.injector})):qd(t))):A({routes:[],injector:e})}};function Qd(n){n.sort((e,t)=>e.value.outlet===M?-1:t.value.outlet===M?1:e.value.outlet.localeCompare(t.value.outlet))}function jd(n){let e=n.value.routeConfig;return e&&e.path===""}function el(n){let e=[],t=new Set;for(let i of n){if(!jd(i)){e.push(i);continue}let o=e.find(r=>i.value.routeConfig===r.value.routeConfig);o!==void 0?(o.children.push(...i.children),t.add(o)):e.push(i)}for(let i of t){let o=el(i.children);e.push(new he(i.value,o))}return e.filter(i=>!t.has(i))}function Aa(n){return n.data||{}}function Ra(n){return n.resolve||{}}function ef(n,e,t,i,o,r){return ae(a=>Xd(n,e,t,i,a.extractedUrl,o,r).pipe(b(({state:u,tree:c})=>z(S({},a),{targetSnapshot:u,urlAfterRedirects:c}))))}function tf(n,e){return ae(t=>{let{targetSnapshot:i,guards:{canActivateChecks:o}}=t;if(!o.length)return A(t);let r=new Set(o.map(c=>c.route)),a=new Set;for(let c of r)if(!a.has(c))for(let d of tl(c))a.add(d);let u=0;return K(a).pipe(ot(c=>r.has(c)?nf(c,i,n,e):(c.data=Ai(c,c.parent,n).resolve,A(void 0))),X(()=>u++),ho(1),ae(c=>u===a.size?A(t):Ne))})}function tl(n){let e=n.children.map(t=>tl(t)).flat();return[n,...e]}function nf(n,e,t,i){let o=n.routeConfig,r=n._resolve;return o?.title!==void 0&&!Ja(o)&&(r[Rn]=o.title),qn(()=>(n.data=Ai(n,n.parent,t).resolve,of(r,n,e,i).pipe(b(a=>(n._resolvedData=a,n.data=S(S({},n.data),a),null)))))}function of(n,e,t,i){let o=xo(n);if(o.length===0)return A({});let r={};return K(o).pipe(ae(a=>rf(n[a],e,t,i).pipe(qe(),X(u=>{if(u instanceof qt)throw Ri(new Qe,u);r[a]=u}))),ho(1),b(()=>r),Ve(a=>Za(a)?Ne:be(a)))}function rf(n,e,t,i){let o=Bt(e)??i,r=$t(n,o),a=r.resolve?r.resolve(e,t):ge(o,()=>r(e,t));return Ue(a)}function Po(n){return ne(e=>{let t=n(e);return t?K(t).pipe(b(()=>e)):A(e)})}var Ko=(()=>{class n{buildTitle(t){let i,o=t.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(r=>r.outlet===M);return i}getResolvedTitleForRoute(t){return t.data[Rn]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=O({token:n,factory:()=>T(nl),providedIn:"root"})}return n})(),nl=(()=>{class n extends Ko{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(Be(qs))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_t=new $("",{providedIn:"root",factory:()=>({})}),zt=new $(""),xi=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=T(xs);loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return A(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let o=Ue(ge(t,()=>i.loadComponent())).pipe(b(ol),ne(rl),X(a=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a}),Hn(()=>{this.componentLoaders.delete(i)})),r=new uo(o,()=>new F).pipe(lo());return this.componentLoaders.set(i,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return A({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=il(i,this.compiler,t,this.onLoadEndListener).pipe(Hn(()=>{this.childrenLoaders.delete(i)})),a=new uo(r,()=>new F).pipe(lo());return this.childrenLoaders.set(i,a),a}static \u0275fac=function(i){return new(i||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function il(n,e,t,i){return Ue(ge(t,()=>n.loadChildren())).pipe(b(ol),ne(rl),ae(o=>o instanceof ws||Array.isArray(o)?A(o):K(e.compileModuleAsync(o))),b(o=>{i&&i(n);let r,a,u=!1;return Array.isArray(o)?(a=o,u=!0):(r=o.create(t).injector,a=r.get(zt,[],{optional:!0,self:!0}).flat()),{routes:a.map(Yo),injector:r}}))}function sf(n){return n&&typeof n=="object"&&"default"in n}function ol(n){return sf(n)?n.default:n}function rl(n){return A(n)}var Ni=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=O({token:n,factory:()=>T(af),providedIn:"root"})}return n})(),af=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xo=new $(""),Zo=new $("");function sl(n,e,t){let i=n.get(Zo),o=n.get(en);if(!o.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(d=>setTimeout(d));let r,a=new Promise(d=>{r=d}),u=o.startViewTransition(()=>(r(),lf(n)));u.ready.catch(d=>{});let{onViewTransitionCreated:c}=i;return c&&ge(n,()=>c({transition:u,from:e,to:t})),a}function lf(n){return new Promise(e=>{on({read:()=>setTimeout(e)},{injector:n})})}var Qo=new $(""),bi=(()=>{class n{currentNavigation=ve(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new F;transitionAbortWithErrorSubject=new F;configLoader=T(xi);environmentInjector=T(st);destroyRef=T(zn);urlSerializer=T(gt);rootContexts=T(mt);location=T(It);inputBindingEnabled=T(Dn,{optional:!0})!==null;titleStrategy=T(Ko);options=T(_t,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=T(Ni);createViewTransition=T(Xo,{optional:!0});navigationErrorHandler=T(Qo,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>A(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=o=>this.events.next(new vi(o)),i=o=>this.events.next(new yi(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;oe(()=>{this.transitions?.next(z(S({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))})}setupNavigations(t){return this.transitions=new fe(null),this.transitions.pipe(ke(i=>i!==null),ne(i=>{let o=!1;return A(i).pipe(ne(r=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",re.SupersededByNewNavigation),Ne;this.currentTransition=i,this.currentNavigation.set({id:r.id,initialUrl:r.rawUrl,extractedUrl:r.extractedUrl,targetBrowserUrl:typeof r.extras.browserUrl=="string"?this.urlSerializer.parse(r.extras.browserUrl):r.extras.browserUrl,trigger:r.source,extras:r.extras,previousNavigation:this.lastSuccessfulNavigation?z(S({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>r.abortController.abort()});let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=r.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&u!=="reload")return this.events.next(new Me(r.id,this.urlSerializer.serialize(r.rawUrl),"",Ut.IgnoredSameUrlNavigation)),r.resolve(!1),Ne;if(this.urlHandlingStrategy.shouldProcessUrl(r.rawUrl))return A(r).pipe(ne(c=>(this.events.next(new je(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Ne:Promise.resolve(c))),ef(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),X(c=>{i.targetSnapshot=c.targetSnapshot,i.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=c.urlAfterRedirects,f));let d=new Cn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(r.currentRawUrl)){let{id:c,extractedUrl:d,source:f,restoredState:h,extras:p}=r,g=new je(c,this.urlSerializer.serialize(d),f,h);this.events.next(g);let _=$a(this.rootComponentType).snapshot;return this.currentTransition=i=z(S({},r),{targetSnapshot:_,urlAfterRedirects:d,extras:z(S({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(v=>(v.finalUrl=d,v)),A(i)}else return this.events.next(new Me(r.id,this.urlSerializer.serialize(r.extractedUrl),"",Ut.IgnoredByUrlHandlingStrategy)),r.resolve(!1),Ne}),X(r=>{let a=new pi(r.id,this.urlSerializer.serialize(r.extractedUrl),this.urlSerializer.serialize(r.urlAfterRedirects),r.targetSnapshot);this.events.next(a)}),b(r=>(this.currentTransition=i=z(S({},r),{guards:yd(r.targetSnapshot,r.currentSnapshot,this.rootContexts)}),i)),Md(this.environmentInjector,r=>this.events.next(r)),X(r=>{if(i.guardsResult=r.guardsResult,r.guardsResult&&typeof r.guardsResult!="boolean")throw Ri(this.urlSerializer,r.guardsResult);let a=new gi(r.id,this.urlSerializer.serialize(r.extractedUrl),this.urlSerializer.serialize(r.urlAfterRedirects),r.targetSnapshot,!!r.guardsResult);this.events.next(a)}),ke(r=>r.guardsResult?!0:(this.cancelNavigationTransition(r,"",re.GuardRejected),!1)),Po(r=>{if(r.guards.canActivateChecks.length!==0)return A(r).pipe(X(a=>{let u=new mi(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),ne(a=>{let u=!1;return A(a).pipe(tf(this.paramsInheritanceStrategy,this.environmentInjector),X({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",re.NoDataFromResolver)}}))}),X(a=>{let u=new _i(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Po(r=>{let a=u=>{let c=[];if(u.routeConfig?.loadComponent){let d=Bt(u)??this.environmentInjector;c.push(this.configLoader.loadComponent(d,u.routeConfig).pipe(X(f=>{u.component=f}),b(()=>{})))}for(let d of u.children)c.push(...a(d));return c};return On(a(r.targetSnapshot.root)).pipe(fo(null),rt(1))}),Po(()=>this.afterPreactivation()),ne(()=>{let{currentSnapshot:r,targetSnapshot:a}=i,u=this.createViewTransition?.(this.environmentInjector,r.root,a.root);return u?K(u).pipe(b(()=>i)):A(i)}),b(r=>{let a=pd(t.routeReuseStrategy,r.targetSnapshot,r.currentRouterState);return this.currentTransition=i=z(S({},r),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),i}),X(()=>{this.events.next(new En)}),vd(this.rootContexts,t.routeReuseStrategy,r=>this.events.next(r),this.inputBindingEnabled),rt(1),jt(new Et(r=>{let a=i.abortController.signal,u=()=>r.next();return a.addEventListener("abort",u),()=>a.removeEventListener("abort",u)}).pipe(ke(()=>!o&&!i.targetRouterState),X(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",re.Aborted)}))),X({next:r=>{o=!0,this.lastSuccessfulNavigation=oe(this.currentNavigation),this.events.next(new Se(r.id,this.urlSerializer.serialize(r.extractedUrl),this.urlSerializer.serialize(r.urlAfterRedirects))),this.titleStrategy?.updateTitle(r.targetRouterState.snapshot),r.resolve(!0)},complete:()=>{o=!0}}),jt(this.transitionAbortWithErrorSubject.pipe(X(r=>{throw r}))),Hn(()=>{o||this.cancelNavigationTransition(i,"",re.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ve(r=>{if(this.destroyed)return i.resolve(!1),Ne;if(o=!0,Xa(r))this.events.next(new De(i.id,this.urlSerializer.serialize(i.extractedUrl),r.message,r.cancellationCode)),_d(r)?this.events.next(new Ot(r.url,r.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Lt(i.id,this.urlSerializer.serialize(i.extractedUrl),r,i.targetSnapshot??void 0);try{let u=ge(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof qt){let{message:c,cancellationCode:d}=Ri(this.urlSerializer,u);this.events.next(new De(i.id,this.urlSerializer.serialize(i.extractedUrl),c,d)),this.events.next(new Ot(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),r}catch(u){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(u)}}return Ne}))}))}cancelNavigationTransition(t,i,o){let r=new De(t.id,this.urlSerializer.serialize(t.extractedUrl),i,o);this.events.next(r),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=oe(this.currentNavigation),o=i?.targetBrowserUrl??i?.extractedUrl;return t.toString()!==o?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uf(n){return n!==kt}var al=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=O({token:n,factory:()=>T(cf),providedIn:"root"})}return n})(),Pi=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},cf=(()=>{class n extends Pi{static \u0275fac=(()=>{let t;return function(o){return(t||(t=ue(n)))(o||n)}})();static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ll=(()=>{class n{urlSerializer=T(gt);options=T(_t,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=T(It);urlHandlingStrategy=T(Ni);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Pe;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:o}){let r=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,a=o??r;return a instanceof Pe?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:o}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,o),this.routerState=t):this.rawUrlTree=o}routerState=$a(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=O({token:n,factory:()=>T(df),providedIn:"root"})}return n})(),df=(()=>{class n extends ll{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof je?this.updateStateMemento():t instanceof Me?this.commitTransition(i):t instanceof Cn?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof En?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof De&&t.code!==re.SupersededByNewNavigation&&t.code!==re.Redirect?this.restoreHistory(i):t instanceof Lt?this.restoreHistory(i,!0):t instanceof Se&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:o}){let{replaceUrl:r,state:a}=i;if(this.location.isCurrentPathEqualTo(t)||r){let u=this.browserPageId,c=S(S({},a),this.generateNgRouterState(o,u));this.location.replaceState(t,"",c)}else{let u=S(S({},a),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(t,"",u)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,r=this.currentPageId-o;r!==0?this.location.historyGo(r):this.getCurrentUrlTree()===t.finalUrl&&r===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(o){return(t||(t=ue(n)))(o||n)}})();static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ki(n,e){n.events.pipe(ke(t=>t instanceof Se||t instanceof De||t instanceof Lt||t instanceof Me),b(t=>t instanceof Se||t instanceof Me?0:(t instanceof De?t.code===re.Redirect||t.code===re.SupersededByNewNavigation:!1)?2:1),ke(t=>t!==2),rt(1)).subscribe(()=>{e()})}var ff={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hf={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},tt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=T(As);stateManager=T(ll);options=T(_t,{optional:!0})||{};pendingTasks=T(Cs);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=T(bi);urlSerializer=T(gt);location=T(It);urlHandlingStrategy=T(Ni);injector=T(st);_events=new F;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=T(al);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=T(zt,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!T(Dn,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Oe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,r=oe(this.navigationTransitions.currentNavigation);if(o!==null&&r!==null){if(this.stateManager.handleRouterEvent(i,r),i instanceof De&&i.code!==re.Redirect&&i.code!==re.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Se)this.navigated=!0;else if(i instanceof Ot){let a=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c=S({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||uf(o.source)},a);this.scheduleNavigation(u,kt,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}cd(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),kt,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,o)=>{this.navigateToSyncWithBrowser(t,o,i)})}navigateToSyncWithBrowser(t,i,o){let r={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=S({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(r.state=c)}let u=this.parseUrl(t);this.scheduleNavigation(u,i,a,r).catch(c=>{this.disposed||this.injector.get(go)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return oe(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Yo),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:o,queryParams:r,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,d=c?this.currentUrlTree.fragment:a,f=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":f=S(S({},this.currentUrlTree.queryParams),r);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=r||null}f!==null&&(f=this.removeEmptyProps(f));let h;try{let p=o?o.snapshot:this.routerState.snapshot.root;h=Oa(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return qa(h,t,f,d??null)}navigateByUrl(t,i={skipLocationChange:!1}){let o=Ft(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(r,kt,null,i)}navigate(t,i={skipLocationChange:!1}){return pf(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let o;if(i===!0?o=S({},ff):i===!1?o=S({},hf):o=i,Ft(t))return Ea(this.currentUrlTree,t,o);let r=this.parseUrl(t);return Ea(this.currentUrlTree,r,o)}removeEmptyProps(t){return Object.entries(t).reduce((i,[o,r])=>(r!=null&&(i[o]=r),i),{})}scheduleNavigation(t,i,o,r,a){if(this.disposed)return Promise.resolve(!1);let u,c,d;a?(u=a.resolve,c=a.reject,d=a.promise):d=new Promise((h,p)=>{u=h,c=p});let f=this.pendingTasks.add();return ki(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(h=>Promise.reject(h))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pf(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new J(4008,!1)}var Mn=class{};var ul=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,i,o,r){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=r}setUpPreloading(){this.subscription=this.router.events.pipe(ke(t=>t instanceof Se),ot(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let o=[];for(let r of i){r.providers&&!r._injector&&(r._injector=Jn(r.providers,t,`Route: ${r.path}`));let a=r._injector??t,u=r._loadedInjector??a;(r.loadChildren&&!r._loadedRoutes&&r.canLoad===void 0||r.loadComponent&&!r._loadedComponent)&&o.push(this.preloadConfig(a,r)),(r.children||r._loadedRoutes)&&o.push(this.processRoutes(u,r.children??r._loadedRoutes))}return K(o).pipe(co())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(t,i):o=A(null);let r=o.pipe(ae(a=>a===null?A(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(t,i);return K([r,a]).pipe(co())}else return r})}static \u0275fac=function(i){return new(i||n)(Be(tt),Be(st),Be(Mn),Be(xi))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cl=new $(""),gf=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=kt;restoredId=0;store={};constructor(t,i,o,r,a={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=o,this.zone=r,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof je?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Se?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Me&&t.code===Ut.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Gt))return;let i={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],i):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,i):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>m(this,null,function*(){yield new Promise(o=>{setTimeout(o),typeof requestAnimationFrame<"u"&&requestAnimationFrame(o)}),this.zone.run(()=>{this.transitions.events.next(new Gt(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){Ts()};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})();function mf(n){return n.routerState.root}function xn(n,e){return{\u0275kind:n,\u0275providers:e}}function _f(){let n=T(St);return e=>{let t=n.get(Yn);if(e!==t.components[0])return;let i=n.get(tt),o=n.get(dl);n.get(er)===1&&i.initialNavigation(),n.get(pl,null,{optional:!0})?.setUpPreloading(),n.get(cl,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var dl=new $("",{factory:()=>new F}),er=new $("",{providedIn:"root",factory:()=>1});function fl(){let n=[{provide:Es,useValue:!0},{provide:er,useValue:0},vo(()=>{let e=T(St);return e.get(ks,Promise.resolve()).then(()=>new Promise(i=>{let o=e.get(tt),r=e.get(dl);ki(o,()=>{i(!0)}),e.get(bi).afterPreactivation=()=>(i(!0),r.closed?A(void 0):r),o.initialNavigation()}))})];return xn(2,n)}function hl(){let n=[vo(()=>{T(tt).setUpLocationChangeListener()}),{provide:er,useValue:2}];return xn(3,n)}var pl=new $("");function gl(n){return xn(0,[{provide:pl,useExisting:ul},{provide:Mn,useExisting:n}])}function ml(){return xn(8,[Jo,{provide:Dn,useExisting:Jo}])}function _l(n){Is("NgRouterViewTransitions");let e=[{provide:Xo,useValue:sl},{provide:Zo,useValue:S({skipNextTransition:!!n?.skipInitialTransition},n)}];return xn(9,e)}var vl=[It,{provide:gt,useClass:Qe},tt,mt,{provide:et,useFactory:mf,deps:[tt]},xi,[]],vf=(()=>{class n{constructor(){}static forRoot(t,i){return{ngModule:n,providers:[vl,[],{provide:zt,multi:!0,useValue:t},[],i?.errorHandler?{provide:Qo,useValue:i.errorHandler}:[],{provide:_t,useValue:i||{}},i?.useHash?Cf():Ef(),yf(),i?.preloadingStrategy?gl(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Sf(i):[],i?.bindToComponentInputs?ml().\u0275providers:[],i?.enableViewTransitions?_l().\u0275providers:[],Tf()]}}static forChild(t){return{ngModule:n,providers:[{provide:zt,multi:!0,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Je({type:n});static \u0275inj=He({})}return n})();function yf(){return{provide:cl,useFactory:()=>{let n=T(Os),e=T(nn),t=T(_t),i=T(bi),o=T(gt);return t.scrollOffset&&n.setOffset(t.scrollOffset),new gf(o,i,n,e,t)}}}function Cf(){return{provide:Eo,useClass:Fs}}function Ef(){return{provide:Eo,useClass:Vs}}function Sf(n){return[n.initialNavigation==="disabled"?hl().\u0275providers:[],n.initialNavigation==="enabledBlocking"?fl().\u0275providers:[]]}var jo=new $("");function Tf(){return[{provide:jo,useFactory:_f},{provide:Rs,multi:!0,useExisting:jo}]}var wf=window.alert.bind(window),Ui=window.confirm.bind(window),vt=null,Nn=null;var Vi=!1,yl=new Map;function rC(n){vt=n,console.log("\u{1F3AF} Alert Override: SnackbarService \uC778\uC2A4\uD134\uC2A4\uAC00 \uC124\uC815\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}function sC(n){Nn=n,console.log("\u{1F3AF} Alert Override: MatDialog \uC778\uC2A4\uD134\uC2A4\uAC00 \uC124\uC815\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}function Af(){try{return localStorage.getItem("useNativeAlert")==="true"}catch{return!1}}function aC(){console.log("\u{1F3AF} Alert Override \uCD08\uAE30\uD654 \uC911..."),window.alert=function(e){if(!Vi){if(!vt){console.warn("\u26A0\uFE0F SnackbarService\uAC00 \uC544\uC9C1 \uC900\uBE44\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");return}Vi=!0;try{let t=String(e||""),i=t.toLowerCase();i.includes("\uC131\uACF5")||i.includes("\uC644\uB8CC")||i.includes("\uB418\uC5C8\uC2B5\uB2C8\uB2E4")?vt.showSuccess(t,3e3):i.includes("\uC624\uB958")||i.includes("\uC2E4\uD328")||i.includes("\uC5D0\uB7EC")?vt.showError(t,4e3):i.includes("\uACBD\uACE0")||i.includes("\uC8FC\uC758")?vt.showWarning(t,3500):vt.showInfo(t,3e3),console.log("\u{1F4E2} Alert \u2192 Snackbar:",t)}catch(t){console.warn("\u274C Alert Override \uC624\uB958:",t),wf(e)}finally{Vi=!1}}};let n=window.confirm;window.confirm=function(e){if(Vi)return!1;if(!Nn)return console.warn("\u26A0\uFE0F MatDialog\uAC00 \uC544\uC9C1 \uC900\uBE44\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."),!1;console.log("\u{1F4AC} Confirm \u2192 Dialog:",e);let t=Math.random().toString(36),i=!1;try{import("./chunk-H62T57FQ.js").then(o=>{Nn.open(o.ConfirmDialogComponent,{width:"400px",disableClose:!1,data:{message:e||"\uD655\uC778\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",type:Cl(e||"")}}).afterClosed().subscribe(a=>{i=a||!1;let u=yl.get(t);u&&(u.resolve(i),yl.delete(t))})})}catch(o){return console.warn("\u274C Dialog \uC5F4\uAE30 \uC624\uB958:",o),Ui(e)}return Ui(e)},console.log("\u2705 Alert Override \uCD08\uAE30\uD654 \uC644\uB8CC")}function Cl(n){let e=n.toLowerCase();return e.includes("\uC0AD\uC81C")||e.includes("\uC81C\uAC70")?"danger":e.includes("\uACBD\uACE0")||e.includes("\uC8FC\uC758")?"warning":"info"}function Fi(n){return m(this,null,function*(){if(!Nn)return console.warn("\u26A0\uFE0F MatDialog\uAC00 \uC900\uBE44\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. \uC6D0\uBCF8 confirm \uC0AC\uC6A9"),Ui(n);try{let{ConfirmDialogComponent:e}=yield import("./chunk-H62T57FQ.js");return(yield Nn.open(e,{width:"400px",disableClose:!1,data:{message:n,type:Cl(n)}}).afterClosed().toPromise())||!1}catch(e){return console.warn("\u274C confirmAsync \uC624\uB958:",e),Ui(n)}})}var Rf={setUseNativeAlert(n){localStorage.setItem("useNativeAlert",String(n)),console.log(`\u{1F527} Native Alert \uC0AC\uC6A9: ${n}`)},getStatus(){return{useNativeAlert:Af(),snackbarReady:vt!==null}},testAlert(n="\uD14C\uC2A4\uD2B8 \uBA54\uC2DC\uC9C0"){alert(n)},testConfirm(n="\uD14C\uC2A4\uD2B8 \uD655\uC778 \uBA54\uC2DC\uC9C0"){return confirm(n)},testConfirmAsync(n="\uC815\uB9D0 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"){return m(this,null,function*(){return yield Fi(n)})},testAllConfirmTypes(){return m(this,null,function*(){console.log("=== Confirm \uD0C0\uC785 \uD14C\uC2A4\uD2B8 \uC2DC\uC791 ===");let n=yield Fi("\uB098\uB294\uAC08\uBE44\uAC00\uC88B\uB2E4 \uC0AC\uC6A9\uC790\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?");console.log("\uC0AD\uC81C confirm \uACB0\uACFC:",n),setTimeout(()=>m(null,null,function*(){let e=yield Fi("\uACBD\uACE0: \uC774 \uC791\uC5C5\uC740 \uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");console.log("\uACBD\uACE0 confirm \uACB0\uACFC:",e)}),500),setTimeout(()=>m(null,null,function*(){let e=yield Fi("\uBCC0\uACBD\uC0AC\uD56D\uC744 \uC800\uC7A5\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?");console.log("\uC77C\uBC18 confirm \uACB0\uACFC:",e)}),1e3)})}};typeof window<"u"&&(window.AlertOverride=Rf);function Df(n,e){n&1&&(G(0,"div",18),$e(),G(1,"svg",19),Ce(2,"path",20)(3,"path",21),G(4,"text",22),Ae(5,"PDF"),Z()()())}function Pf(n,e){n&1&&(G(0,"div",23),$e(),G(1,"svg",19),Ce(2,"rect",24)(3,"circle",25)(4,"path",26),Z()())}function Mf(n,e){n&1&&(G(0,"div",27),$e(),G(1,"svg",19),Ce(2,"path",28)(3,"path",29)(4,"path",30),G(5,"text",31),Ae(6,"XLS"),Z()()())}function xf(n,e){n&1&&(G(0,"div",32),$e(),G(1,"svg",19),Ce(2,"path",33)(3,"path",34)(4,"path",35),G(5,"text",31),Ae(6,"DOC"),Z()()())}function Nf(n,e){n&1&&(G(0,"div",36),$e(),G(1,"svg",19),Ce(2,"path",37)(3,"path",38)(4,"rect",39),G(5,"text",40),Ae(6,"PPT"),Z()()())}function bf(n,e){if(n&1){let t=Kn();G(0,"button",41),de("click",function(o){Bn(t);let r=Fe().$implicit,a=Fe(2);return $n(a.onDeleteClick(r,o))}),$e(),G(1,"svg",42),Ce(2,"path",43),Z()()}}function kf(n,e){if(n&1){let t=Kn();G(0,"button",44),de("click",function(o){Bn(t);let r=Fe().$implicit,a=Fe(2);return $n(a.onMoreClick(r,o))}),$e(),G(1,"svg",45),Ce(2,"circle",46)(3,"circle",47)(4,"circle",48),Z()()}}function Vf(n,e){if(n&1){let t=Kn();G(0,"div",6),de("click",function(){let o=Bn(t).$implicit,r=Fe(2);return $n(r.onFileClick(o))}),G(1,"div",7),tn(2,Df,6,0,"div",8)(3,Pf,5,0,"div",9)(4,Mf,7,0,"div",10)(5,xf,7,0,"div",11)(6,Nf,7,0,"div",12),Z(),G(7,"div",13)(8,"div",14),Ae(9),Z(),G(10,"div",15),Ae(11),Z()(),tn(12,bf,3,0,"button",16)(13,kf,5,0,"button",17),Z()}if(n&2){let t=e.$implicit,i=Fe(2);We("mobile-item",i.isMobile)("selected",i.isSelected(t)),ce(2),ye("ngIf",!t.documentType||t.documentType==="viewer"||t.documentType==="editor"||t.documentType==="converted"||t.documentType==="page-numbered"),ce(),ye("ngIf",t.documentType==="image"),ce(),ye("ngIf",t.documentType==="excel"),ce(),ye("ngIf",t.documentType==="word"),ce(),ye("ngIf",t.documentType==="ppt"),ce(3),yo(t.name),ce(2),Ps(" ",i.formatDate(t.date)," \xB7 ",t.size," "),ce(),ye("ngIf",i.showDeleteButton),ce(),ye("ngIf",i.showMoreButton)}}function Ff(n,e){if(n&1&&(G(0,"div",4),tn(1,Vf,14,14,"div",5),Z()),n&2){let t=Fe();ce(),ye("ngForOf",t.recentFiles)}}function Uf(n,e){if(n&1&&(G(0,"div",49)(1,"div",50),Ce(2,"img",51),Z(),G(3,"div",52)(4,"div",53),Ae(5,"\uCD5C\uADFC \uBCF8 \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),Z(),G(6,"div",54),Ae(7,"PDF \uD30C\uC77C\uC744 \uC5F4\uBA74 \uC5EC\uAE30\uC5D0 \uD45C\uC2DC\uB429\uB2C8\uB2E4"),Z()()()),n&2){let t=Fe();We("mobile-empty",t.isMobile),ce(2),ye("src",t.getEmptyIcon(),Ss)}}var El=class n{recentFiles=[];isMobile=!1;showDeleteButton=!0;showMoreButton=!1;selectedFileId=null;sectionTitle="\uCD5C\uADFC \uBCF8 \uD30C\uC77C";fileClick=new ee;deleteClick=new ee;moreClick=new ee;onFileClick(e){this.fileClick.emit(e)}isSelected(e){return e.id===this.selectedFileId}onDeleteClick(e,t){t.stopPropagation(),this.deleteClick.emit(e)}onMoreClick(e,t){t.stopPropagation(),this.moreClick.emit(e)}formatDate(e){try{return new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return e}}getPdfIcon(){return"./images/ico-pdf@3x.png"}getEmptyIcon(){return"./images/img-latest-file@3x.png"}getFileIcon(e){return e.documentType==="viewer"?"./images/ico-pdf@3x.png":"./images/ico-m-pdf-file@3x.png"}getFileIconSvg(e){switch(e.documentType||"viewer"){case"image":return`
          <svg width="30" height="30" viewBox="0 0 24 24" fill="none">
            <rect x="3" y="3" width="18" height="18" rx="2" fill="#4CAF50"/>
            <circle cx="8.5" cy="8.5" r="1.5" fill="white"/>
            <path d="M21 15l-5-5L5 21" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
        `;case"excel":return`
          <svg width="30" height="30" viewBox="0 0 24 24" fill="none">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z" fill="#1E7E34"/>
            <path d="M14 2v6h6" fill="#155724"/>
            <path d="M8 13h8M8 16h8" stroke="white" stroke-width="1.5"/>
            <text x="12" y="19" font-size="5" font-weight="bold" text-anchor="middle" fill="white">XLS</text>
          </svg>
        `;case"word":return`
          <svg width="30" height="30" viewBox="0 0 24 24" fill="none">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z" fill="#2962FF"/>
            <path d="M14 2v6h6" fill="#1565C0"/>
            <path d="M8 12h8M8 15h6" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
            <text x="12" y="19" font-size="5" font-weight="bold" text-anchor="middle" fill="white">DOC</text>
          </svg>
        `;case"ppt":return`
          <svg width="30" height="30" viewBox="0 0 24 24" fill="none">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z" fill="#FF6D00"/>
            <path d="M14 2v6h6" fill="#E65100"/>
            <rect x="8" y="11" width="8" height="5" rx="1" stroke="white" stroke-width="1.5" fill="none"/>
            <text x="12" y="19.5" font-size="5" font-weight="bold" text-anchor="middle" fill="white">PPT</text>
          </svg>
        `;case"viewer":case"editor":case"converted":default:return`
          <svg width="30" height="30" viewBox="0 0 24 24" fill="none">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z" fill="#E53935"/>
            <path d="M14 2v6h6" fill="#C62828"/>
            <text x="12" y="17" font-size="7" font-weight="bold" text-anchor="middle" fill="white">PDF</text>
          </svg>
        `}}getFileTypeLabel(e){return e.documentType==="viewer"?"\uC77D\uAE30 \uC804\uC6A9 PDF":"\uB0B4 \uBB38\uC11C"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Tt({type:n,selectors:[["app-shared-recent-files"]],inputs:{recentFiles:"recentFiles",isMobile:"isMobile",showDeleteButton:"showDeleteButton",showMoreButton:"showMoreButton",selectedFileId:"selectedFileId",sectionTitle:"sectionTitle"},outputs:{fileClick:"fileClick",deleteClick:"deleteClick",moreClick:"moreClick"},decls:6,vars:5,consts:[["noRecent",""],[1,"recent-files-container"],[1,"section-title"],["class","recent-files-content",4,"ngIf","ngIfElse"],[1,"recent-files-content"],["class","recent-file-item",3,"mobile-item","selected","click",4,"ngFor","ngForOf"],[1,"recent-file-item",3,"click"],[1,"recent-file-thumb"],["class","file-type-icon pdf-icon",4,"ngIf"],["class","file-type-icon image-icon",4,"ngIf"],["class","file-type-icon excel-icon",4,"ngIf"],["class","file-type-icon word-icon",4,"ngIf"],["class","file-type-icon ppt-icon",4,"ngIf"],[1,"recent-file-info"],[1,"recent-file-name"],[1,"recent-file-meta"],["class","delete-btn","title","\uC0AD\uC81C",3,"click",4,"ngIf"],["class","more-btn","title","\uB354\uBCF4\uAE30",3,"click",4,"ngIf"],[1,"file-type-icon","pdf-icon"],["width","30","height","30","viewBox","0 0 24 24","fill","none"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z","fill","#E53935"],["d","M14 2v6h6","fill","#C62828"],["x","12","y","17","font-size","7","font-weight","bold","text-anchor","middle","fill","white"],[1,"file-type-icon","image-icon"],["x","3","y","3","width","18","height","18","rx","2","fill","#4CAF50"],["cx","8.5","cy","8.5","r","1.5","fill","white"],["d","M21 15l-5-5L5 21","stroke","white","stroke-width","2","stroke-linecap","round"],[1,"file-type-icon","excel-icon"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z","fill","#1E7E34"],["d","M14 2v6h6","fill","#155724"],["d","M8 13h8M8 16h8","stroke","white","stroke-width","1.5"],["x","12","y","19","font-size","5","font-weight","bold","text-anchor","middle","fill","white"],[1,"file-type-icon","word-icon"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z","fill","#2962FF"],["d","M14 2v6h6","fill","#1565C0"],["d","M8 12h8M8 15h6","stroke","white","stroke-width","1.5","stroke-linecap","round"],[1,"file-type-icon","ppt-icon"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z","fill","#FF6D00"],["d","M14 2v6h6","fill","#E65100"],["x","8","y","11","width","8","height","5","rx","1","stroke","white","stroke-width","1.5","fill","none"],["x","12","y","19.5","font-size","5","font-weight","bold","text-anchor","middle","fill","white"],["title","\uC0AD\uC81C",1,"delete-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24"],["d","M6 7h12M9 7V5a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2m2 0v12a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V7h12z","stroke","#888","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["title","\uB354\uBCF4\uAE30",1,"more-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none"],["cx","12","cy","5","r","2","fill","currentColor"],["cx","12","cy","12","r","2","fill","currentColor"],["cx","12","cy","19","r","2","fill","currentColor"],[1,"recent-files-content","empty"],[1,"recent-empty-icon"],["alt","\uCD5C\uADFC \uD30C\uC77C \uC5C6\uC74C",3,"src"],[1,"recent-empty-text"],[1,"empty-title"],[1,"empty-subtitle"]],template:function(t,i){if(t&1&&(G(0,"div",1)(1,"div",2),Ae(2),Z(),tn(3,Ff,2,1,"div",3)(4,Uf,8,3,"ng-template",null,0,Ms),Z()),t&2){let o=Ds(5);We("mobile",i.isMobile),ce(2),yo(i.sectionTitle),ce(),ye("ngIf",i.recentFiles.length>0)("ngIfElse",o)}},dependencies:[Gs,Us,Ls],styles:['.recent-files-container[_ngcontent-%COMP%]{padding:24px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000008}.recent-files-container.mobile[_ngcontent-%COMP%]{padding:16px;border-radius:8px;box-shadow:none;background:#f8f9fa}.section-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#222;margin-bottom:16px}.recent-files-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.recent-file-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;border-radius:8px;background:#fff;border:1px solid #e5e7eb;cursor:pointer;transition:all .2s ease;position:relative}.recent-file-item[_ngcontent-%COMP%]:hover{border-color:#007acc;box-shadow:0 2px 8px #007acc1a}.recent-file-item.selected[_ngcontent-%COMP%]{border-color:#2196f3;border-width:2px;background:#e3f2fd;box-shadow:0 0 0 2px #2196f333}.recent-file-item.mobile-item[_ngcontent-%COMP%]{background:#fff;border:none;box-shadow:0 1px 3px #0000001a}.recent-file-item.mobile-item.selected[_ngcontent-%COMP%]{background:#e3f2fd;box-shadow:0 1px 3px #2196f34d}.recent-file-item.mobile-item.selected[_ngcontent-%COMP%]:before{content:"";position:absolute;left:8px;top:50%;transform:translateY(-50%);width:8px;height:8px;background:#2196f3;border-radius:50%;box-shadow:0 0 0 3px #2196f333}.recent-file-item.mobile-item.selected[_ngcontent-%COMP%]   .recent-file-thumb[_ngcontent-%COMP%]{margin-left:12px}.recent-file-thumb[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:12px;display:flex;align-items:center;justify-content:center}.recent-file-thumb[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:30px;height:30px;filter:drop-shadow(0 1px 3px rgba(0,0,0,.15))}.recent-file-thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px}.file-type-icon[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;justify-content:center}.file-type-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:30px;height:30px}.recent-file-info[_ngcontent-%COMP%]{flex:1;min-width:0}.recent-file-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#222;margin-bottom:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.recent-file-meta[_ngcontent-%COMP%]{font-size:12px;color:#666}.delete-btn[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;padding:4px;border-radius:4px;opacity:.6;transition:all .2s ease;z-index:10}.recent-file-item[_ngcontent-%COMP%]:hover   .delete-btn[_ngcontent-%COMP%]{opacity:1}.mobile[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{opacity:1;background:#ffffffe6;border:1px solid #e5e7eb;padding:6px;box-shadow:0 1px 3px #0000001a}.delete-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6}.more-btn[_ngcontent-%COMP%]{flex-shrink:0;width:36px;height:36px;padding:0;background:#0000000d;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#666;transition:all .2s;position:relative;z-index:3}.more-btn[_ngcontent-%COMP%]:active{background:#0000001a;transform:scale(.95)}.more-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.recent-files-content.empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center}.recent-files-content.empty.mobile-empty[_ngcontent-%COMP%]{padding:30px 20px}.recent-empty-icon[_ngcontent-%COMP%]{margin-bottom:16px}.recent-empty-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px;height:64px;opacity:.5}.empty-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#374151;margin-bottom:8px}.empty-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280}'],changeDetection:0})};function ir(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();e.removeAttribute("id");for(let o=0;o<t.length;o++)t[o].removeAttribute("id");return i==="canvas"?Il(n,e):(i==="input"||i==="select"||i==="textarea")&&Tl(n,e),Sl("canvas",n,e,Il),Sl("input, textarea, select",n,e,Tl),e}function Sl(n,e,t,i){let o=e.querySelectorAll(n);if(o.length){let r=t.querySelectorAll(n);for(let a=0;a<o.length;a++)i(o[a],r[a])}}var Lf=0;function Tl(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${Lf++}`)}function Il(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function ur(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function or(n,e,t){let{top:i,bottom:o,left:r,right:a}=n;return t>=i&&t<=o&&e>=r&&e<=a}function Gf(n,e){let t=e.left<n.left,i=e.left+e.width>n.right,o=e.top<n.top,r=e.top+e.height>n.bottom;return t||i||o||r}function Vn(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function wl(n,e,t,i){let{top:o,right:r,bottom:a,left:u,width:c,height:d}=n,f=c*e,h=d*e;return i>o-h&&i<a+h&&t>u-f&&t<r+f}var Li=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:ur(t)})})}handleScroll(e){let t=an(e),i=this.positions.get(t);if(!i)return null;let o=i.scrollPosition,r,a;if(t===this._document){let d=this.getViewportScrollPosition();r=d.top,a=d.left}else r=t.scrollTop,a=t.scrollLeft;let u=o.top-r,c=o.left-a;return this.positions.forEach((d,f)=>{d.clientRect&&t!==f&&t.contains(f)&&Vn(d.clientRect,u,c)}),o.top=r,o.left=a,{top:u,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Fl(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let i=e.createElement("div");return t.forEach(o=>i.appendChild(o)),i}function cr(n,e,t){for(let i in e)if(e.hasOwnProperty(i)){let o=e[i];o?n.setProperty(i,o,t?.has(i)?"important":""):n.removeProperty(i)}return n}function Jt(n,e){let t=e?"":"none";cr(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function Al(n,e,t){cr(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Gi(n,e){return e&&e!="none"?n+" "+e:n}function Rl(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=Fn(e.left,e.top)}function Fn(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function Dl(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function Of(n){let e=getComputedStyle(n),t=tr(e,"transition-property"),i=t.find(u=>u==="transform"||u==="all");if(!i)return 0;let o=t.indexOf(i),r=tr(e,"transition-duration"),a=tr(e,"transition-delay");return Dl(r[o])+Dl(a[o])}function tr(n,e){return n.getPropertyValue(e).split(",").map(i=>i.trim())}var qf=new Set(["position"]),rr=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,i,o,r,a,u,c,d,f){this._document=e,this._rootElement=t,this._direction=i,this._initialDomRect=o,this._previewTemplate=r,this._previewClass=a,this._pickupPositionOnPage=u,this._initialTransform=c,this._zIndex=d,this._renderer=f}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),Pl(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return Of(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,i=e?e.template:null,o;if(i&&e){let r=e.matchSize?this._initialDomRect:null,a=e.viewContainer.createEmbeddedView(i,e.context);a.detectChanges(),o=Fl(a,this._document),this._previewEmbeddedView=a,e.matchSize?Rl(o,r):o.style.transform=Fn(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else o=ir(this._rootElement),Rl(o,this._initialDomRect),this._initialTransform&&(o.style.transform=this._initialTransform);return cr(o.style,{"pointer-events":"none",margin:Pl(o)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},qf),Jt(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("popover","manual"),o.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(r=>o.classList.add(r)):o.classList.add(t)),o}};function Pl(n){return"showPopover"in n}var Hf={passive:!0},Ml={passive:!1},Bf={passive:!1,capture:!0},$f=800,xl="cdk-drag-placeholder",Nl=new Set(["position"]),sr=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=ve(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new F;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Oe.EMPTY;_pointerUpSubscription=Oe.EMPTY;_scrollSubscription=Oe.EMPTY;_resizeSubscription=Oe.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>Jt(t,e)))}_disabled=!1;beforeStarted=new F;started=new F;released=new F;ended=new F;entered=new F;exited=new F;dropped=new F;moved=this._moveEvents;data;constrainPosition;constructor(e,t,i,o,r,a,u){this._config=t,this._document=i,this._ngZone=o,this._viewportRuler=r,this._dragDropRegistry=a,this._renderer=u,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new Li(i),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(i=>Ye(i)),this._handles.forEach(i=>Jt(i,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&t.add(i)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=Ye(e);if(t!==this._rootElement){this._removeRootElementListeners();let i=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[i.listen(t,"mousedown",this._pointerDown,Ml),i.listen(t,"touchstart",this._pointerDown,Hf),i.listen(t,"dragstart",this._nativeDragStart,Ml)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Ye(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&Gf(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),i=0,o=0;t.left<e.left?i=e.left-t.left:t.right>e.right&&(i=e.right-t.right),t.top<e.top?o=e.top-t.top:t.bottom>e.bottom&&(o=e.bottom-t.bottom);let r=this._activeTransform.x,a=this._activeTransform.y,u=r+i,c=a+o;this._rootElement.style.transform=Fn(u,c),this._activeTransform={x:u,y:c},this._passiveTransform={x:u,y:c}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Jt(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Jt(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let o=Math.abs(t.x-this._pickupPositionOnPage.x),r=Math.abs(t.y-this._pickupPositionOnPage.y);if(o+r>=this._config.dragStartThreshold){let u=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),c=this._dropContainer;if(!u){this._endDragSequence(e);return}(!c||!c.isDragging()&&!c.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let i=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,t);else{let o=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,r=this._activeTransform;r.x=i.x-o.x+this._passiveTransform.x,r.y=i.y-o.y+this._passiveTransform.y,this._applyRootElementTransform(r.x,r.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:e,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){bn(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),i=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",zf,Bf)}),i){let o=this._rootElement,r=o.parentNode,a=this._placeholder=this._createPlaceholderElement(),u=this._marker=this._marker||this._document.createComment("");r.insertBefore(u,o),this._initialTransform=o.style.transform||"",this._preview=new rr(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(r,t)),Al(o,!1,Nl),this._document.body.appendChild(r.replaceChild(a,o)),this.started.next({source:this,event:e}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let i=this.isDragging(),o=bn(t),r=!o&&t.button!==0,a=this._rootElement,u=an(t),c=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+$f>Date.now(),d=o?Bs(t):Hs(t);if(u&&u.draggable&&t.type==="mousedown"&&t.preventDefault(),i||r||c||d)return;if(this._handles.length){let p=a.style;this._rootElementTapHighlight=p.webkitTapHighlightColor||"",p.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(p=>this._updateOnScroll(p)),this._boundaryElement&&(this._boundaryRect=ur(this._boundaryElement));let f=this._previewTemplate;this._pickupPositionInElement=f&&f.template&&!f.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let h=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:h.x,y:h.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){Al(this._rootElement,!0,Nl),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,i=t.getItemIndex(this),o=this._getPointerPositionOnPage(e),r=this._getDragDistance(o),a=t._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:r,dropPoint:o,event:e}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:r,dropPoint:o,event:e}),t.drop(this,i,this._initialIndex,this._initialContainer,a,r,o,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:i,y:o}){let r=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{let a=this._dropContainer.getItemIndex(this),u=this._dropContainer.getItemAtIndex(a+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(r,this._dropContainer,u),this._dropContainer=r,this._dropContainer.enter(this,e,t,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,o),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let o=u=>{(!u||this._preview&&an(u)===this._preview.element&&u.propertyName==="transform")&&(a(),i(),clearTimeout(r))},r=setTimeout(o,t*1.5),a=this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,i;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),i=Fl(this._placeholderRef,this._document)):i=ir(this._rootElement),i.style.pointerEvents="none",i.classList.add(xl),i}_getPointerPositionInElement(e,t,i){let o=t===this._rootElement?null:t,r=o?o.getBoundingClientRect():e,a=bn(i)?i.targetTouches[0]:i,u=this._getViewportScrollPosition(),c=a.pageX-r.left-u.left,d=a.pageY-r.top-u.top;return{x:r.left-e.left+c,y:r.top-e.top+d}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),i=bn(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,o=i.pageX-t.left,r=i.pageY-t.top;if(this._ownerSVGElement){let a=this._ownerSVGElement.getScreenCTM();if(a){let u=this._ownerSVGElement.createSVGPoint();return u.x=o,u.y=r,u.matrixTransform(a.inverse())}}return{x:o,y:r}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:o}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?o=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:r,y:a}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,u=this._boundaryRect,{width:c,height:d}=this._getPreviewRect(),f=u.top+a,h=u.bottom-(d-a),p=u.left+r,g=u.right-(c-r);i=bl(i,p,g),o=bl(o,f,h)}return{x:i,y:o}}_updatePointerDirectionDelta(e){let{x:t,y:i}=e,o=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,a=Math.abs(t-r.x),u=Math.abs(i-r.y);return a>this._config.pointerDirectionChangeThreshold&&(o.x=t>r.x?1:-1,r.x=t),u>this._config.pointerDirectionChangeThreshold&&(o.y=i>r.y?1:-1,r.y=i),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Jt(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let i=1/this.scale,o=Fn(e*i,t*i),r=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=r.transform&&r.transform!="none"?r.transform:""),r.transform=Gi(o,this._initialTransform)}_applyPreviewTransform(e,t){let i=this._previewTemplate?.template?void 0:this._initialTransform,o=Fn(e,t);this._preview.setTransform(Gi(o,i))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(o.width===0&&o.height===0||i.width===0&&i.height===0)return;let r=o.left-i.left,a=i.right-o.right,u=o.top-i.top,c=i.bottom-o.bottom;o.width>i.width?(r>0&&(e+=r),a>0&&(e-=a)):e=0,o.height>i.height?(u>0&&(t+=u),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:bn(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let i=an(e);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Vn(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Xn(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let i=this._previewContainer||"global";if(i==="parent")return e;if(i==="global"){let o=this._document;return t||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return Ye(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,i){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let o=this._anchor??=ir(this._placeholder);o.classList.remove(xl),o.classList.add("cdk-drag-anchor"),o.style.transform="",i?i.before(o):Ye(t.element).appendChild(o)}}};function bl(n,e,t){return Math.max(e,Math.min(t,n))}function bn(n){return n.type[0]==="t"}function zf(n){n.preventDefault()}function Ul(n,e,t){let i=kl(e,n.length-1),o=kl(t,n.length-1);if(i===o)return;let r=n[i],a=o<i?-1:1;for(let u=i;u!==o;u+=a)n[u]=n[u+a];n[o]=r}function kl(n,e){return Math.max(0,Math.min(e,n))}var Oi=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,i,o){let r=this._itemPositions,a=this._getItemIndexFromPointerPosition(e,t,i,o);if(a===-1&&r.length>0)return null;let u=this.orientation==="horizontal",c=r.findIndex(y=>y.drag===e),d=r[a],f=r[c].clientRect,h=d.clientRect,p=c>a?1:-1,g=this._getItemOffsetPx(f,h,p),_=this._getSiblingOffsetPx(c,r,p),v=r.slice();return Ul(r,c,a),r.forEach((y,I)=>{if(v[I]===y)return;let w=y.drag===e,E=w?g:_,R=w?e.getPlaceholderElement():y.drag.getRootElement();y.offset+=E;let P=Math.round(y.offset*(1/y.drag.scale));u?(R.style.transform=Gi(`translate3d(${P}px, 0, 0)`,y.initialTransform),Vn(y.clientRect,0,E)):(R.style.transform=Gi(`translate3d(0, ${P}px, 0)`,y.initialTransform),Vn(y.clientRect,E,0))}),this._previousSwap.overlaps=or(h,t,i),this._previousSwap.drag=d.drag,this._previousSwap.delta=u?o.x:o.y,{previousIndex:c,currentIndex:a}}enter(e,t,i,o){let r=o==null||o<0?this._getItemIndexFromPointerPosition(e,t,i):o,a=this._activeDraggables,u=a.indexOf(e),c=e.getPlaceholderElement(),d=a[r];if(d===e&&(d=a[r+1]),!d&&(r==null||r===-1||r<a.length-1)&&this._shouldEnterAsFirstChild(t,i)&&(d=a[0]),u>-1&&a.splice(u,1),d&&!this._dragDropRegistry.isDragging(d)){let f=d.getRootElement();f.parentElement.insertBefore(c,f),a.splice(r,0,e)}else this._element.appendChild(c),a.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let i=this._itemPositions.find(o=>o.drag===e)?.initialTransform;t.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:i})=>{Vn(i,e,t)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let i=t.getVisibleElement();return{drag:t,offset:0,initialTransform:i.style.transform||"",clientRect:ur(i)}}).sort((t,i)=>e?t.clientRect.left-i.clientRect.left:t.clientRect.top-i.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,i){let o=this.orientation==="horizontal",r=o?t.left-e.left:t.top-e.top;return i===-1&&(r+=o?t.width-e.width:t.height-e.height),r}_getSiblingOffsetPx(e,t,i){let o=this.orientation==="horizontal",r=t[e].clientRect,a=t[e+i*-1],u=r[o?"width":"height"]*i;if(a){let c=o?"left":"top",d=o?"right":"bottom";i===-1?u-=a.clientRect[c]-r[d]:u+=r[c]-a.clientRect[d]}return u}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,o=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let a=i[i.length-1].clientRect;return o?e>=a.right:t>=a.bottom}else{let a=i[0].clientRect;return o?e<=a.left:t<=a.top}}_getItemIndexFromPointerPosition(e,t,i,o){let r=this.orientation==="horizontal",a=this._itemPositions.findIndex(({drag:u,clientRect:c})=>{if(u===e)return!1;if(o){let d=r?o.x:o.y;if(u===this._previousSwap.drag&&this._previousSwap.overlaps&&d===this._previousSwap.delta)return!1}return r?t>=Math.floor(c.left)&&t<Math.floor(c.right):i>=Math.floor(c.top)&&i<Math.floor(c.bottom)});return a===-1||!this._sortPredicate(a,e)?-1:a}},ar=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<t.length;i++){let o=t[i];this._relatedNodes.push([o,o.nextSibling])}this.withItems(e)}sort(e,t,i,o){let r=this._getItemIndexFromPointerPosition(e,t,i),a=this._previousSwap;if(r===-1||this._activeItems[r]===e)return null;let u=this._activeItems[r];if(a.drag===u&&a.overlaps&&a.deltaX===o.x&&a.deltaY===o.y)return null;let c=this.getItemIndex(e),d=e.getPlaceholderElement(),f=u.getRootElement();r>c?f.after(d):f.before(d),Ul(this._activeItems,c,r);let h=this._getRootNode().elementFromPoint(t,i);return a.deltaX=o.x,a.deltaY=o.y,a.drag=u,a.overlaps=f===h||f.contains(h),{previousIndex:c,currentIndex:r}}enter(e,t,i,o){let r=this._activeItems.indexOf(e);r>-1&&this._activeItems.splice(r,1);let a=o==null||o<0?this._getItemIndexFromPointerPosition(e,t,i):o;a===-1&&(a=this._getClosestItemIndexToPointer(e,t,i));let u=this._activeItems[a];u&&!this._dragDropRegistry.isDragging(u)?(this._activeItems.splice(a,0,e),u.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[o,r]=this._relatedNodes[i];o.parentNode===e&&o.nextSibling!==r&&(r===null?e.appendChild(o):r.parentNode===e&&e.insertBefore(o,r))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,i){let o=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(i)),r=o?this._activeItems.findIndex(a=>{let u=a.getRootElement();return o===u||u.contains(o)}):-1;return r===-1||!this._sortPredicate(r,e)?-1:r}_getRootNode(){return this._rootNode||(this._rootNode=Xn(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let o=1/0,r=-1;for(let a=0;a<this._activeItems.length;a++){let u=this._activeItems[a];if(u!==e){let{x:c,y:d}=u.getRootElement().getBoundingClientRect(),f=Math.hypot(t-c,i-d);f<o&&(o=f,r=a)}}return r}},Vl=.05,Ll=.05,me=(function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n})(me||{}),se=(function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n})(se||{}),lr=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new F;entered=new F;exited=new F;dropped=new F;sorted=new F;receivingStarted=new F;receivingStopped=new F;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Oe.EMPTY;_verticalScrollDirection=me.NONE;_horizontalScrollDirection=se.NONE;_scrollNode;_stopScrollTimers=new F;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,i,o,r){this._dragDropRegistry=t,this._ngZone=o,this._viewportRuler=r;let a=this.element=Ye(e);this._document=i,this.withOrientation("vertical").withElementContainer(a),t.registerDropContainer(this),this._parentPositions=new Li(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,i,o){this._draggingStarted(),o==null&&this.sortingDisabled&&(o=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,i,o),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,i,o,r,a,u,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:i,container:this,previousContainer:o,isPointerOverContainer:r,distance:a,dropPoint:u,event:c})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(t.filter(o=>o.isDragging()).every(o=>e.indexOf(o)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof Oi&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new ar(this._document,this._dragDropRegistry);else{let t=new Oi(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,i)=>this.sortPredicate(t,i,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=Ye(this.element),i=this._scrollableElements.indexOf(this._container),o=this._scrollableElements.indexOf(e);return i>-1&&this._scrollableElements.splice(i,1),o>-1&&this._scrollableElements.splice(o,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,i,o){if(this.sortingDisabled||!this._domRect||!wl(this._domRect,Vl,t,i))return;let r=this._sortStrategy.sort(e,t,i,o);r&&this.sorted.next({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let i,o=me.NONE,r=se.NONE;if(this._parentPositions.positions.forEach((a,u)=>{u===this._document||!a.clientRect||i||wl(a.clientRect,Vl,e,t)&&([o,r]=Jf(u,a.clientRect,this._direction,e,t),(o||r)&&(i=u))}),!o&&!r){let{width:a,height:u}=this._viewportRuler.getViewportSize(),c={width:a,height:u,top:0,right:a,bottom:u,left:0};o=Gl(c,t),r=Ol(c,e),i=window}i&&(o!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=r,this._scrollNode=i,(o||r)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),gs(0,cs).pipe(jt(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===me.UP?e.scrollBy(0,-t):this._verticalScrollDirection===me.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===se.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===se.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&or(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,i){return this._siblings.find(o=>o._canReceive(e,t,i))}_canReceive(e,t,i){if(!this._domRect||!or(this._domRect,t,i)||!this.enterPredicate(e,this))return!1;let o=this._getShadowRoot().elementFromPoint(t,i);return o?o===this._container||this._container.contains(o):!1}_startReceiving(e,t){let i=this._activeSiblings;!i.has(e)&&t.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=Xn(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function Gl(n,e){let{top:t,bottom:i,height:o}=n,r=o*Ll;return e>=t-r&&e<=t+r?me.UP:e>=i-r&&e<=i+r?me.DOWN:me.NONE}function Ol(n,e){let{left:t,right:i,width:o}=n,r=o*Ll;return e>=t-r&&e<=t+r?se.LEFT:e>=i-r&&e<=i+r?se.RIGHT:se.NONE}function Jf(n,e,t,i,o){let r=Gl(e,o),a=Ol(e,i),u=me.NONE,c=se.NONE;if(r){let d=n.scrollTop;r===me.UP?d>0&&(u=me.UP):n.scrollHeight-d>n.clientHeight&&(u=me.DOWN)}if(a){let d=n.scrollLeft;t==="rtl"?a===se.RIGHT?d<0&&(c=se.RIGHT):n.scrollWidth+d>n.clientWidth&&(c=se.LEFT):a===se.LEFT?d>0&&(c=se.LEFT):n.scrollWidth-d>n.clientWidth&&(c=se.RIGHT)}return[u,c]}var kn={capture:!0},nr={passive:!1,capture:!0},Wf=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Tt({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,o){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),Yf=(()=>{class n{_ngZone=T(nn);_document=T(en);_styleLoader=T($s);_renderer=T(mo).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new F;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=ve([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new F;pointerUp=new F;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,nr)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,i){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(Wf),this._activeDragInstances.update(o=>[...o,t]),this._activeDragInstances().length===1)){let o=i.type.startsWith("touch"),r=u=>this.pointerUp.next(u),a=[["scroll",u=>this._scroll.next(u),kn],["selectstart",this._preventDefaultWhileDragging,nr]];o?a.push(["touchend",r,kn],["touchcancel",r,kn]):a.push(["mouseup",r,kn]),o||a.push(["mousemove",u=>this.pointerMove.next(u),nr]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=a.map(([u,c,d])=>this._renderer.listen(this._document,u,c,d))})}}stopDragging(t){this._activeDragInstances.update(i=>{let o=i.indexOf(t);return o>-1?(i.splice(o,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let i=[this._scroll];return t&&t!==this._document&&i.push(new Et(o=>this._ngZone.runOutsideAngular(()=>{let r=this._renderer.listen(t,"scroll",a=>{this._activeDragInstances().length&&o.next(a)},kn);return()=>{r()}}))),ms(...i)}registerDirectiveNode(t,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,i)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kf={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Xf=(()=>{class n{_document=T(en);_ngZone=T(nn);_viewportRuler=T(zs);_dragDropRegistry=T(Yf);_renderer=T(mo).createRenderer(null,null);constructor(){}createDrag(t,i=Kf){return new sr(t,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new lr(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var GC=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Je({type:n});static \u0275inj=He({providers:[Xf],imports:[Js]})}return n})();var qC={production:!0,ezMode:!1,ezmMode:!0,showGlobalNavigation:!1,requireAuth:!0,disableDarkMode:!1,apiUrl:"https://api.loworldsoft.com",baseSyncUrl:"https://api.loworldsoft.com",baseUrl:"https://api.loworldsoft.com",frontUrl:"https://api.loworldsoft.com",socket_url:"wss://api.loworldsoft.com",channelTalkApiUrl:"https://api.loworldsoft.com/channeltalk",channelTalkSocketUrl:"https://api.loworldsoft.com/channeltalk",auth:{username:"LSs6Jjw=",password:"fX9meA==",ezPassword:"fX1kew=="},googleOAuth:{clientId:"749829348874-eqv2k438far9p8rifs2nle6bgoruhddt.apps.googleusercontent.com",redirectUri:"https://loworldsoft-ops.github.io/ezReader_Mobile_Page/ezm/auth/google/callback",scopes:["openid","profile","email","https://www.googleapis.com/auth/generative-language.retriever"]}};var ql=class n{messages=[];container=null;progressSnackbar=null;progressSteps=[];isProgressMode=!1;constructor(){this.createContainer()}showSuccess(e,t=3e3){this.isProgressMode||this.showMessage(e,"success",t)}showSuccessWithAction(e,t,i=5e3){this.isProgressMode||this.showMessageWithAction(e,"success",t,i)}showInfoWithAction(e,t,i=5e3){this.isProgressMode||this.showMessageWithAction(e,"info",t,i)}showError(e,t=4e3){this.showMessage(e,"error",t)}showWarning(e,t=3500){this.isProgressMode||this.showMessage(e,"warning",t)}showInfo(e,t=3e3){this.isProgressMode||this.showMessage(e,"info",t)}createContainer(){typeof window>"u"||typeof document>"u"||(this.container=document.createElement("div"),this.container.className="snackbar-container",this.container.style.cssText=`
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 10000;
      display: flex;
      flex-direction: column;
      gap: 8px;
      pointer-events: none;
      align-items: flex-start;
    `,document.body.appendChild(this.container))}showMessage(e,t,i){console.log(`[${t.toUpperCase()}] ${e}`),this.container||this.createContainer();let o=Date.now().toString(),r={id:o,message:e,type:t,duration:i};this.messages.push(r),this.renderMessage(r),setTimeout(()=>{this.removeMessage(o)},i)}showMessageWithAction(e,t,i,o){console.log(`[${t.toUpperCase()}] ${e} (with action: ${i.label})`),this.container||this.createContainer();let r=Date.now().toString(),a={id:r,message:e,type:t,duration:o,action:i};this.messages.push(a),this.renderMessageWithAction(a),setTimeout(()=>{this.removeMessage(r)},o)}renderMessage(e){if(!this.container)return;let t=document.createElement("div");t.id=`snackbar-${e.id}`,t.className=`snackbar snackbar-${e.type}`,t.style.cssText=`
      background: ${this.getBackgroundColor(e.type)};
      color: white;
      padding: 12px 16px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      font-size: 14px;
      font-weight: 500;
      max-width: 400px;
      word-wrap: break-word;
      pointer-events: auto;
      transform: translateX(-100%);
      transition: transform 0.3s ease, opacity 0.3s ease;
      opacity: 0;
      border-left: 4px solid ${this.getBorderColor(e.type)};
    `,t.textContent=e.message;let i=document.createElement("button");i.innerHTML="\xD7",i.style.cssText=`
      background: none;
      border: none;
      color: white;
      font-size: 18px;
      font-weight: bold;
      margin-left: 12px;
      cursor: pointer;
      padding: 0;
      line-height: 1;
      opacity: 0.8;
    `,i.onclick=()=>this.removeMessage(e.id),t.appendChild(i),this.container.appendChild(t),setTimeout(()=>{t.style.transform="translateX(0)",t.style.opacity="1"},10)}renderMessageWithAction(e){if(!this.container)return;let t=document.createElement("div");t.id=`snackbar-${e.id}`,t.className=`snackbar snackbar-${e.type} snackbar-with-action`,t.style.cssText=`
      background: ${this.getBackgroundColor(e.type)};
      color: white;
      padding: 12px 16px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      font-size: 14px;
      font-weight: 500;
      max-width: 450px;
      word-wrap: break-word;
      pointer-events: auto;
      transform: translateX(-100%);
      transition: transform 0.3s ease, opacity 0.3s ease;
      opacity: 0;
      border-left: 4px solid ${this.getBorderColor(e.type)};
      display: flex;
      align-items: center;
      gap: 16px;
      justify-content: space-between;
    `;let i=document.createElement("span");i.textContent=e.message,i.style.cssText=`
      flex: 1;
      min-width: 0;
    `,t.appendChild(i);let o=document.createElement("div");if(o.style.cssText=`
      display: flex;
      align-items: center;
      gap: 8px;
      flex-shrink: 0;
    `,e.action){let a=document.createElement("button");a.textContent=e.action.label;let u=!e.action.style||e.action.style==="primary";a.style.cssText=`
        background: ${u?"rgba(255, 255, 255, 0.2)":"transparent"};
        border: ${u?"none":"1px solid rgba(255, 255, 255, 0.5)"};
        color: white;
        padding: 6px 16px;
        border-radius: 4px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s ease;
        white-space: nowrap;
      `,a.onmouseover=()=>{a.style.background=u?"rgba(255, 255, 255, 0.3)":"rgba(255, 255, 255, 0.1)"},a.onmouseout=()=>{a.style.background=u?"rgba(255, 255, 255, 0.2)":"transparent"},a.onclick=()=>{e.action.callback(),this.removeMessage(e.id)},o.appendChild(a)}let r=document.createElement("button");r.innerHTML="\xD7",r.style.cssText=`
      background: none;
      border: none;
      color: white;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      padding: 0;
      line-height: 1;
      opacity: 0.8;
      width: 20px;
      height: 20px;
    `,r.onmouseover=()=>{r.style.opacity="1"},r.onmouseout=()=>{r.style.opacity="0.8"},r.onclick=()=>this.removeMessage(e.id),o.appendChild(r),t.appendChild(o),this.container.appendChild(t),setTimeout(()=>{t.style.transform="translateX(0)",t.style.opacity="1"},10)}removeMessage(e){let t=document.getElementById(`snackbar-${e}`);t&&(t.style.transform="translateX(-100%)",t.style.opacity="0",setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},300)),this.messages=this.messages.filter(i=>i.id!==e)}getBackgroundColor(e){switch(e){case"success":return"#28a745";case"error":return"#dc3545";case"warning":return"#ffc107";case"info":return"#17a2b8";default:return"#6c757d"}}getBorderColor(e){switch(e){case"success":return"#1e7e34";case"error":return"#c82333";case"warning":return"#e0a800";case"info":return"#138496";default:return"#5a6268"}}startProgress(e){this.isProgressMode=!0,this.progressSteps=e.map((t,i)=>({label:t,status:i===0?"active":"pending"})),this.renderProgressSnackbar()}updateProgress(e){e>=0&&e<this.progressSteps.length&&(this.progressSteps[e].status="completed",e+1<this.progressSteps.length&&(this.progressSteps[e+1].status="active"),this.updateProgressSnackbar())}completeProgress(){this.progressSteps.forEach(e=>{e.status!=="error"&&(e.status="completed")}),this.updateProgressSnackbar(),setTimeout(()=>{this.closeProgress(),this.isProgressMode=!1},1e3)}errorProgress(e){e>=0&&e<this.progressSteps.length&&(this.progressSteps[e].status="error",this.updateProgressSnackbar()),this.isProgressMode=!1}closeProgress(){this.progressSnackbar&&(this.progressSnackbar.style.transform="translateX(-50%) translateY(100%)",this.progressSnackbar.style.opacity="0",setTimeout(()=>{this.progressSnackbar&&this.progressSnackbar.parentNode&&this.progressSnackbar.parentNode.removeChild(this.progressSnackbar),this.progressSnackbar=null,this.progressSteps=[],this.isProgressMode=!1},300))}renderProgressSnackbar(){if(!this.container)return;this.progressSnackbar&&this.closeProgress(),this.progressSnackbar=document.createElement("div"),this.progressSnackbar.className="progress-snackbar",this.progressSnackbar.style.cssText=`
      background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
      color: white;
      padding: 16px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      font-size: 13px;
      min-width: 350px;
      max-width: 450px;
      pointer-events: auto;
      transform: translateX(-50%) translateY(100%);
      transition: transform 0.3s ease, opacity 0.3s ease;
      opacity: 0;
      position: fixed;
      bottom: 80px;
      left: 50%;
      z-index: 10000;
      border: 1px solid rgba(255, 255, 255, 0.1);
    `;let e=document.createElement("div");e.style.cssText=`
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    `;let t=document.createElement("div");t.textContent="\u{1F4CA} \uBD84\uC11D \uC9C4\uD589 \uC911",t.style.cssText=`
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.5px;
    `,t.className="progress-title";let i=document.createElement("button");i.innerHTML="\xD7",i.style.cssText=`
      background: transparent;
      border: none;
      color: white;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      padding: 0;
      width: 20px;
      height: 20px;
      line-height: 1;
      transition: transform 0.2s;
      opacity: 0.6;
    `,i.onmouseover=()=>{i.style.opacity="1",i.style.transform="scale(1.2)"},i.onmouseout=()=>{i.style.opacity="0.6",i.style.transform="scale(1)"},i.onclick=()=>this.closeProgress(),e.appendChild(t),e.appendChild(i);let o=document.createElement("div");o.className="progress-steps",o.style.cssText=`
      display: flex;
      flex-direction: column;
      gap: 4px;
      background: rgba(0, 0, 0, 0.2);
      padding: 8px;
      border-radius: 4px;
    `,this.progressSteps.forEach((u,c)=>{let d=this.createStepElement(u,c);o.appendChild(d)});let r=document.createElement("div");r.className="progress-bar-container",r.style.cssText=`
      margin-top: 10px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
      height: 4px;
      overflow: hidden;
    `;let a=document.createElement("div");if(a.className="progress-bar",a.style.cssText=`
      background: linear-gradient(90deg, #3498db 0%, #2ecc71 100%);
      height: 100%;
      width: 0%;
      transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 3px;
    `,r.appendChild(a),this.progressSnackbar.appendChild(e),this.progressSnackbar.appendChild(o),this.progressSnackbar.appendChild(r),this.container.appendChild(this.progressSnackbar),!document.getElementById("progress-animation-styles")){let u=document.createElement("style");u.id="progress-animation-styles",u.textContent=`
        @keyframes flipIn {
          0% {
            transform: perspective(400px) rotateX(-90deg);
            opacity: 0;
          }
          40% {
            transform: perspective(400px) rotateX(20deg);
          }
          100% {
            transform: perspective(400px) rotateX(0deg);
            opacity: 1;
          }
        }
        
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.6; }
        }
        
        .flip-animation {
          animation: flipIn 0.4s ease-out;
        }
      `,document.head.appendChild(u)}setTimeout(()=>{this.progressSnackbar&&(this.progressSnackbar.style.transform="translateX(-50%) translateY(0)",this.progressSnackbar.style.opacity="1")},10)}createStepElement(e,t){let i=document.createElement("div");i.className=`progress-step step-${e.status} flip-animation`,i.id=`progress-step-${t}`,i.style.cssText=`
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 6px 10px;
      border-radius: 3px;
      background: ${this.getStepBackground(e.status)};
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border-left: 3px solid ${this.getStepBorderColor(e.status)};
      font-family: 'Courier New', monospace;
    `;let o=document.createElement("div");o.className="step-icon",o.style.cssText=`
      width: 20px;
      height: 20px;
      border-radius: 2px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      flex-shrink: 0;
      font-weight: bold;
      ${this.getStepIconStyle(e.status)}
    `,o.innerHTML=this.getStepIcon(e.status,t);let r=document.createElement("div");r.textContent=e.label,r.style.cssText=`
      flex: 1;
      font-size: 12px;
      opacity: ${e.status==="pending"?"0.5":"1"};
      font-weight: ${e.status==="active"?"600":"400"};
      letter-spacing: 0.3px;
      text-transform: uppercase;
    `;let a=document.createElement("div");return a.style.cssText=`
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 1px;
      opacity: 0.8;
    `,a.textContent=this.getStatusText(e.status),i.appendChild(o),i.appendChild(r),i.appendChild(a),i}getStatusText(e){switch(e){case"active":return"IN PROGRESS";case"completed":return"COMPLETED";case"error":return"FAILED";default:return"WAITING"}}getStepBorderColor(e){switch(e){case"active":return"#3498db";case"completed":return"#2ecc71";case"error":return"#e74c3c";default:return"transparent"}}getStepBackground(e){switch(e){case"active":return"rgba(52, 152, 219, 0.15)";case"completed":return"rgba(46, 204, 113, 0.15)";case"error":return"rgba(231, 76, 60, 0.15)";default:return"rgba(255, 255, 255, 0.03)"}}getStepIconStyle(e){switch(e){case"active":return`
          background: #3498db;
          color: white;
          animation: pulse 1.5s ease-in-out infinite;
        `;case"completed":return`
          background: #2ecc71;
          color: white;
        `;case"error":return`
          background: #e74c3c;
          color: white;
        `;default:return`
          background: rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.5);
          border: 1px solid rgba(255, 255, 255, 0.2);
        `}}getStepIcon(e,t){switch(e){case"active":return"\u27F3";case"completed":return"\u2713";case"error":return"\u2717";default:return`${t+1}`}}updateProgressSnackbar(){if(!this.progressSnackbar)return;let e=this.progressSnackbar.querySelector(".progress-steps");e&&(e.innerHTML="",this.progressSteps.forEach((o,r)=>{let a=this.createStepElement(o,r);e.appendChild(a)}));let t=this.progressSnackbar.querySelector(".progress-bar");if(t){let r=this.progressSteps.filter(a=>a.status==="completed").length/this.progressSteps.length*100;t.style.width=`${r}%`}if(this.progressSteps.every(o=>o.status==="completed")){let o=this.progressSnackbar.querySelector(".progress-title");o&&o.textContent?.includes("\uC9C4\uD589 \uC911")&&(o.textContent="\u2705 \uBD84\uC11D \uC644\uB8CC!")}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var Zf,Qf;function jf(){return{geminiUrl:Zf,vertexUrl:Qf}}function eh(n,e,t,i){var o,r;if(!n?.baseUrl){let a=jf();return e?(o=a.vertexUrl)!==null&&o!==void 0?o:t:(r=a.geminiUrl)!==null&&r!==void 0?r:i}return n.baseUrl}var Te=class{};function C(n,e){let t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){let r=e[o];return r!=null?String(r):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function l(n,e,t){for(let r=0;r<e.length-1;r++){let a=e[r];if(a.endsWith("[]")){let u=a.slice(0,-2);if(!(u in n))if(Array.isArray(t))n[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(n[u])){let c=n[u];if(Array.isArray(t))for(let d=0;d<c.length;d++){let f=c[d];l(f,e.slice(r+1),t[d])}else for(let d of c)l(d,e.slice(r+1),t)}return}else if(a.endsWith("[0]")){let u=a.slice(0,-3);u in n||(n[u]=[{}]);let c=n[u];l(c[0],e.slice(r+1),t);return}(!n[a]||typeof n[a]!="object")&&(n[a]={}),n=n[a]}let i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function s(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;let o=e[i];if(o.endsWith("[]")){let r=o.slice(0,-2);if(r in n){let a=n[r];return Array.isArray(a)?a.map(u=>s(u,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function th(n,e){for(let[t,i]of Object.entries(e)){let o=t.split("."),r=i.split("."),a=new Set,u=-1;for(let c=0;c<o.length;c++)if(o[c]==="*"){u=c;break}if(u!==-1&&r.length>u)for(let c=u;c<r.length;c++){let d=r[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&a.add(d)}dr(n,o,r,0,a)}}function dr(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;let r=e[i];if(r.endsWith("[]")){let a=r.slice(0,-2),u=n;if(a in u&&Array.isArray(u[a]))for(let c of u[a])dr(c,e,t,i+1,o)}else if(r==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){let a=n,u=Object.keys(a).filter(d=>!d.startsWith("_")&&!o.has(d)),c={};for(let d of u)c[d]=a[d];for(let[d,f]of Object.entries(c)){let h=[];for(let p of t.slice(i))p==="*"?h.push(d):h.push(p);l(a,h,f)}for(let d of u)delete a[d]}}else{let a=n;r in a&&dr(a[r],e,t,i+1,o)}}function ns(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function nh(n){let e={},t=s(n,["operationName"]);t!=null&&l(e,["operationName"],t);let i=s(n,["resourceName"]);return i!=null&&l(e,["_url","resourceName"],i),e}function ih(n){let e={},t=s(n,["name"]);t!=null&&l(e,["name"],t);let i=s(n,["metadata"]);i!=null&&l(e,["metadata"],i);let o=s(n,["done"]);o!=null&&l(e,["done"],o);let r=s(n,["error"]);r!=null&&l(e,["error"],r);let a=s(n,["response","generateVideoResponse"]);return a!=null&&l(e,["response"],rh(a)),e}function oh(n){let e={},t=s(n,["name"]);t!=null&&l(e,["name"],t);let i=s(n,["metadata"]);i!=null&&l(e,["metadata"],i);let o=s(n,["done"]);o!=null&&l(e,["done"],o);let r=s(n,["error"]);r!=null&&l(e,["error"],r);let a=s(n,["response"]);return a!=null&&l(e,["response"],sh(a)),e}function rh(n){let e={},t=s(n,["generatedSamples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>ah(a))),l(e,["generatedVideos"],r)}let i=s(n,["raiMediaFilteredCount"]);i!=null&&l(e,["raiMediaFilteredCount"],i);let o=s(n,["raiMediaFilteredReasons"]);return o!=null&&l(e,["raiMediaFilteredReasons"],o),e}function sh(n){let e={},t=s(n,["videos"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>lh(a))),l(e,["generatedVideos"],r)}let i=s(n,["raiMediaFilteredCount"]);i!=null&&l(e,["raiMediaFilteredCount"],i);let o=s(n,["raiMediaFilteredReasons"]);return o!=null&&l(e,["raiMediaFilteredReasons"],o),e}function ah(n){let e={},t=s(n,["video"]);return t!=null&&l(e,["video"],ph(t)),e}function lh(n){let e={},t=s(n,["_self"]);return t!=null&&l(e,["video"],gh(t)),e}function uh(n){let e={},t=s(n,["operationName"]);return t!=null&&l(e,["_url","operationName"],t),e}function ch(n){let e={},t=s(n,["operationName"]);return t!=null&&l(e,["_url","operationName"],t),e}function dh(n){let e={},t=s(n,["name"]);t!=null&&l(e,["name"],t);let i=s(n,["metadata"]);i!=null&&l(e,["metadata"],i);let o=s(n,["done"]);o!=null&&l(e,["done"],o);let r=s(n,["error"]);r!=null&&l(e,["error"],r);let a=s(n,["response"]);return a!=null&&l(e,["response"],fh(a)),e}function fh(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["parent"]);i!=null&&l(e,["parent"],i);let o=s(n,["documentName"]);return o!=null&&l(e,["documentName"],o),e}function au(n){let e={},t=s(n,["name"]);t!=null&&l(e,["name"],t);let i=s(n,["metadata"]);i!=null&&l(e,["metadata"],i);let o=s(n,["done"]);o!=null&&l(e,["done"],o);let r=s(n,["error"]);r!=null&&l(e,["error"],r);let a=s(n,["response"]);return a!=null&&l(e,["response"],hh(a)),e}function hh(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["parent"]);i!=null&&l(e,["parent"],i);let o=s(n,["documentName"]);return o!=null&&l(e,["documentName"],o),e}function ph(n){let e={},t=s(n,["uri"]);t!=null&&l(e,["uri"],t);let i=s(n,["encodedVideo"]);i!=null&&l(e,["videoBytes"],ns(i));let o=s(n,["encoding"]);return o!=null&&l(e,["mimeType"],o),e}function gh(n){let e={},t=s(n,["gcsUri"]);t!=null&&l(e,["uri"],t);let i=s(n,["bytesBase64Encoded"]);i!=null&&l(e,["videoBytes"],ns(i));let o=s(n,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}var Ct=(function(n){return n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL",n})(Ct||{});var fr=(function(n){return n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO",n})(fr||{});var lu=(function(n){return n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",n})(lu||{});var Un=(function(n){return n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT",n})(Un||{});var Gn=class{constructor(e){let t={};for(let i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}};var yt=class{get text(){var e,t,i,o,r,a,u,c;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1,h=[];for(let p of(c=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(let[g,_]of Object.entries(p))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(_!==null||_!==void 0)&&h.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,d+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,t,i,o,r,a,u,c;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="",f=[];for(let h of(c=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(let[p,g]of Object.entries(h))p!=="inlineData"&&(g!==null||g!==void 0)&&f.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(d+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,t,i,o,r,a,u,c;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let d=(c=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(d?.length!==0)return d}get executableCode(){var e,t,i,o,r,a,u,c,d;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let f=(c=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,t,i,o,r,a,u,c,d;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let f=(c=(u=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.output}},Bi=class{},$i=class{},hr=class{},pr=class{},gr=class{},mr=class{},zi=class{},Ji=class{},Wi=class{},_r=class{};var Yi=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,o,r=e;return t?o=oh(r):o=ih(r),Object.assign(i,o),i}},Ki=class{},Xi=class{},Zi=class{},vr=class{},yr=class{},Cr=class{};var Er=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,r=dh(e);return Object.assign(i,r),i}},Sr=class{},Tr=class{},Ir=class{};var Qi=class{};var wr=class{get text(){var e,t,i;let o="",r=!1,a=[];for(let u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(let[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&a.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;r=!0,o+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?o:void 0}get data(){var e,t,i;let o="",r=[];for(let a of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(let[u,c]of Object.entries(a))u!=="inlineData"&&c!==null&&r.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(o+=atob(a.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}};var Ar=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var Rr=class n{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){let i=new n,r=au(e);return Object.assign(i,r),i}};function k(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function uu(n,e){let t=k(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function cu(n){return Array.isArray(n)?n.map(e=>ji(e)):[ji(n)]}function ji(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function du(n){let e=ji(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fu(n){let e=ji(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Hl(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function hu(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Hl(e)):[Hl(n)]}function Dr(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Bl(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function $l(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function te(n){if(n==null)throw new Error("ContentUnion is required");return Dr(n)?n:{role:"user",parts:hu(n)}}function is(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{let i=te(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){let t=te(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>te(t)):[te(e)]}function _e(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Bl(n)||$l(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[te(n)]}let e=[],t=[],i=Dr(n[0]);for(let o of n){let r=Dr(o);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(o);else{if(Bl(o)||$l(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:hu(t)}),e}function mh(n,e){n.includes("null")&&(e.nullable=!0);let t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Ct).includes(t[0].toUpperCase())?t[0].toUpperCase():Ct.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let i of t)e.anyOf.push({type:Object.values(Ct).includes(i.toUpperCase())?i.toUpperCase():Ct.TYPE_UNSPECIFIED})}}function Wt(n){let e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");let r=n.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,n=r[1]):r[1].type==="null"&&(e.nullable=!0,n=r[0])),n.type instanceof Array&&mh(n.type,e);for(let[a,u]of Object.entries(n))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Ct).includes(u.toUpperCase())?u.toUpperCase():Ct.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=Wt(u);else if(i.includes(a)){let c=[];for(let d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(Wt(d))}e[a]=c}else if(o.includes(a)){let c={};for(let[d,f]of Object.entries(u))c[d]=Wt(f);e[a]=c}else{if(a==="additionalProperties")continue;e[a]=u}return e}function os(n){return Wt(n)}function rs(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ss(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Xt(n){if(n.functionDeclarations)for(let e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Wt(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Wt(e.response));return n}function Zt(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");let e=[];for(let t of n)e.push(t);return e}function _h(n,e,t,i=1){let o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Ge(n,e){if(typeof e!="string")throw new Error("name must be a string");return _h(n,e,"cachedContents")}function pu(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function nt(n){return ns(n)}function vh(n){return n!=null&&typeof n=="object"&&"name"in n}function yh(n){return n!=null&&typeof n=="object"&&"video"in n}function Ch(n){return n!=null&&typeof n=="object"&&"uri"in n}function gu(n){var e;let t;if(vh(n)&&(t=n.name),!(Ch(n)&&(t=n.uri,t===void 0))&&!(yh(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){let o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function mu(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function _u(n){for(let e of["models","tunedModels","publisherModels"])if(Eh(n,e))return n[e];return[]}function Eh(n,e){return n!==null&&typeof n=="object"&&e in n}function Sh(n,e={}){let t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Th(n,e={}){let t=[],i=new Set;for(let o of n){let r=o.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);let a=Sh(o,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function vu(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;let i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Ih(n){if(typeof n!="string")return n;let e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function yu(n){if(typeof n!="object"||n===null)return{};let e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;let o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let r=!1;for(let a of o){if(typeof a!="object"||a===null)continue;let c=a.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Qt(n,e){let t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Cu(n){let e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function wh(n){let e={},t=s(n,["responsesFile"]);t!=null&&l(e,["fileName"],t);let i=s(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>np(a))),l(e,["inlinedResponses"],r)}let o=s(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["inlinedEmbedContentResponses"],r)}return e}function Ah(n){let e={},t=s(n,["predictionsFormat"]);t!=null&&l(e,["format"],t);let i=s(n,["gcsDestination","outputUriPrefix"]);i!=null&&l(e,["gcsUri"],i);let o=s(n,["bigqueryDestination","outputUri"]);return o!=null&&l(e,["bigqueryUri"],o),e}function Rh(n){let e={},t=s(n,["format"]);t!=null&&l(e,["predictionsFormat"],t);let i=s(n,["gcsUri"]);i!=null&&l(e,["gcsDestination","outputUriPrefix"],i);let o=s(n,["bigqueryUri"]);if(o!=null&&l(e,["bigqueryDestination","outputUri"],o),s(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(s(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function qi(n){let e={},t=s(n,["name"]);t!=null&&l(e,["name"],t);let i=s(n,["metadata","displayName"]);i!=null&&l(e,["displayName"],i);let o=s(n,["metadata","state"]);o!=null&&l(e,["state"],Cu(o));let r=s(n,["metadata","createTime"]);r!=null&&l(e,["createTime"],r);let a=s(n,["metadata","endTime"]);a!=null&&l(e,["endTime"],a);let u=s(n,["metadata","updateTime"]);u!=null&&l(e,["updateTime"],u);let c=s(n,["metadata","model"]);c!=null&&l(e,["model"],c);let d=s(n,["metadata","output"]);return d!=null&&l(e,["dest"],wh(yu(d))),e}function Pr(n){let e={},t=s(n,["name"]);t!=null&&l(e,["name"],t);let i=s(n,["displayName"]);i!=null&&l(e,["displayName"],i);let o=s(n,["state"]);o!=null&&l(e,["state"],Cu(o));let r=s(n,["error"]);r!=null&&l(e,["error"],r);let a=s(n,["createTime"]);a!=null&&l(e,["createTime"],a);let u=s(n,["startTime"]);u!=null&&l(e,["startTime"],u);let c=s(n,["endTime"]);c!=null&&l(e,["endTime"],c);let d=s(n,["updateTime"]);d!=null&&l(e,["updateTime"],d);let f=s(n,["model"]);f!=null&&l(e,["model"],f);let h=s(n,["inputConfig"]);h!=null&&l(e,["src"],Dh(h));let p=s(n,["outputConfig"]);p!=null&&l(e,["dest"],Ah(yu(p)));let g=s(n,["completionStats"]);return g!=null&&l(e,["completionStats"],g),e}function Dh(n){let e={},t=s(n,["instancesFormat"]);t!=null&&l(e,["format"],t);let i=s(n,["gcsSource","uris"]);i!=null&&l(e,["gcsUri"],i);let o=s(n,["bigquerySource","inputUri"]);return o!=null&&l(e,["bigqueryUri"],o),e}function Ph(n,e){let t={};if(s(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(s(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let i=s(e,["fileName"]);i!=null&&l(t,["fileName"],i);let o=s(e,["inlinedRequests"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>tp(n,a))),l(t,["requests","requests"],r)}return t}function Mh(n){let e={},t=s(n,["format"]);t!=null&&l(e,["instancesFormat"],t);let i=s(n,["gcsUri"]);i!=null&&l(e,["gcsSource","uris"],i);let o=s(n,["bigqueryUri"]);if(o!=null&&l(e,["bigquerySource","inputUri"],o),s(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(s(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function xh(n){let e={},t=s(n,["data"]);if(t!=null&&l(e,["data"],t),s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=s(n,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function Nh(n,e){let t={},i=s(e,["name"]);return i!=null&&l(t,["_url","name"],Qt(n,i)),t}function bh(n,e){let t={},i=s(e,["name"]);return i!=null&&l(t,["_url","name"],Qt(n,i)),t}function kh(n){let e={},t=s(n,["content"]);t!=null&&l(e,["content"],t);let i=s(n,["citationMetadata"]);i!=null&&l(e,["citationMetadata"],Vh(i));let o=s(n,["tokenCount"]);o!=null&&l(e,["tokenCount"],o);let r=s(n,["finishReason"]);r!=null&&l(e,["finishReason"],r);let a=s(n,["avgLogprobs"]);a!=null&&l(e,["avgLogprobs"],a);let u=s(n,["groundingMetadata"]);u!=null&&l(e,["groundingMetadata"],u);let c=s(n,["index"]);c!=null&&l(e,["index"],c);let d=s(n,["logprobsResult"]);d!=null&&l(e,["logprobsResult"],d);let f=s(n,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),l(e,["safetyRatings"],p)}let h=s(n,["urlContextMetadata"]);return h!=null&&l(e,["urlContextMetadata"],h),e}function Vh(n){let e={},t=s(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),l(e,["citations"],i)}return e}function Eu(n){let e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>up(r))),l(e,["parts"],o)}let i=s(n,["role"]);return i!=null&&l(e,["role"],i),e}function Fh(n,e){let t={},i=s(n,["displayName"]);if(e!==void 0&&i!=null&&l(e,["batch","displayName"],i),s(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Uh(n,e){let t={},i=s(n,["displayName"]);e!==void 0&&i!=null&&l(e,["displayName"],i);let o=s(n,["dest"]);return e!==void 0&&o!=null&&l(e,["outputConfig"],Rh(Ih(o))),t}function zl(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["src"]);o!=null&&l(t,["batch","inputConfig"],Ph(n,vu(n,o)));let r=s(e,["config"]);return r!=null&&Fh(r,t),t}function Lh(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["model"],k(n,i));let o=s(e,["src"]);o!=null&&l(t,["inputConfig"],Mh(vu(n,o)));let r=s(e,["config"]);return r!=null&&Uh(r,t),t}function Gh(n,e){let t={},i=s(n,["displayName"]);return e!==void 0&&i!=null&&l(e,["batch","displayName"],i),t}function Oh(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["src"]);o!=null&&l(t,["batch","inputConfig"],Wh(n,o));let r=s(e,["config"]);return r!=null&&Gh(r,t),t}function qh(n,e){let t={},i=s(e,["name"]);return i!=null&&l(t,["_url","name"],Qt(n,i)),t}function Hh(n,e){let t={},i=s(e,["name"]);return i!=null&&l(t,["_url","name"],Qt(n,i)),t}function Bh(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["name"]);i!=null&&l(e,["name"],i);let o=s(n,["done"]);o!=null&&l(e,["done"],o);let r=s(n,["error"]);return r!=null&&l(e,["error"],r),e}function $h(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["name"]);i!=null&&l(e,["name"],i);let o=s(n,["done"]);o!=null&&l(e,["done"],o);let r=s(n,["error"]);return r!=null&&l(e,["error"],r),e}function zh(n,e){let t={},i=s(e,["contents"]);if(i!=null){let r=is(n,i);Array.isArray(r)&&(r=r.map(a=>a)),l(t,["requests[]","request","content"],r)}let o=s(e,["config"]);return o!=null&&(l(t,["_self"],Jh(o,t)),th(t,{"requests[].*":"requests[].request.*"})),t}function Jh(n,e){let t={},i=s(n,["taskType"]);e!==void 0&&i!=null&&l(e,["requests[]","taskType"],i);let o=s(n,["title"]);e!==void 0&&o!=null&&l(e,["requests[]","title"],o);let r=s(n,["outputDimensionality"]);if(e!==void 0&&r!=null&&l(e,["requests[]","outputDimensionality"],r),s(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Wh(n,e){let t={},i=s(e,["fileName"]);i!=null&&l(t,["file_name"],i);let o=s(e,["inlinedRequests"]);return o!=null&&l(t,["requests"],zh(n,o)),t}function Yh(n){let e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=s(n,["fileUri"]);t!=null&&l(e,["fileUri"],t);let i=s(n,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function Kh(n,e,t){let i={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&l(t,["systemInstruction"],Eu(te(o)));let r=s(e,["temperature"]);r!=null&&l(i,["temperature"],r);let a=s(e,["topP"]);a!=null&&l(i,["topP"],a);let u=s(e,["topK"]);u!=null&&l(i,["topK"],u);let c=s(e,["candidateCount"]);c!=null&&l(i,["candidateCount"],c);let d=s(e,["maxOutputTokens"]);d!=null&&l(i,["maxOutputTokens"],d);let f=s(e,["stopSequences"]);f!=null&&l(i,["stopSequences"],f);let h=s(e,["responseLogprobs"]);h!=null&&l(i,["responseLogprobs"],h);let p=s(e,["logprobs"]);p!=null&&l(i,["logprobs"],p);let g=s(e,["presencePenalty"]);g!=null&&l(i,["presencePenalty"],g);let _=s(e,["frequencyPenalty"]);_!=null&&l(i,["frequencyPenalty"],_);let v=s(e,["seed"]);v!=null&&l(i,["seed"],v);let y=s(e,["responseMimeType"]);y!=null&&l(i,["responseMimeType"],y);let I=s(e,["responseSchema"]);I!=null&&l(i,["responseSchema"],os(I));let w=s(e,["responseJsonSchema"]);if(w!=null&&l(i,["responseJsonSchema"],w),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let E=s(e,["safetySettings"]);if(t!==void 0&&E!=null){let B=E;Array.isArray(B)&&(B=B.map(we=>cp(we))),l(t,["safetySettings"],B)}let R=s(e,["tools"]);if(t!==void 0&&R!=null){let B=Zt(R);Array.isArray(B)&&(B=B.map(we=>dp(Xt(we)))),l(t,["tools"],B)}let P=s(e,["toolConfig"]);if(t!==void 0&&P!=null&&l(t,["toolConfig"],P),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let x=s(e,["cachedContent"]);t!==void 0&&x!=null&&l(t,["cachedContent"],Ge(n,x));let N=s(e,["responseModalities"]);N!=null&&l(i,["responseModalities"],N);let Q=s(e,["mediaResolution"]);Q!=null&&l(i,["mediaResolution"],Q);let D=s(e,["speechConfig"]);if(D!=null&&l(i,["speechConfig"],rs(D)),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let U=s(e,["thinkingConfig"]);U!=null&&l(i,["thinkingConfig"],U);let Y=s(e,["imageConfig"]);return Y!=null&&l(i,["imageConfig"],Y),i}function Xh(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>kh(d))),l(e,["candidates"],c)}let o=s(n,["modelVersion"]);o!=null&&l(e,["modelVersion"],o);let r=s(n,["promptFeedback"]);r!=null&&l(e,["promptFeedback"],r);let a=s(n,["responseId"]);a!=null&&l(e,["responseId"],a);let u=s(n,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function Zh(n,e){let t={},i=s(e,["name"]);return i!=null&&l(t,["_url","name"],Qt(n,i)),t}function Qh(n,e){let t={},i=s(e,["name"]);return i!=null&&l(t,["_url","name"],Qt(n,i)),t}function jh(n){let e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=s(n,["enableWidget"]);return t!=null&&l(e,["enableWidget"],t),e}function ep(n){let e={};if(s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=s(n,["timeRangeFilter"]);return t!=null&&l(e,["timeRangeFilter"],t),e}function tp(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["request","model"],k(n,i));let o=s(e,["contents"]);if(o!=null){let u=_e(o);Array.isArray(u)&&(u=u.map(c=>Eu(c))),l(t,["request","contents"],u)}let r=s(e,["metadata"]);r!=null&&l(t,["metadata"],r);let a=s(e,["config"]);return a!=null&&l(t,["request","generationConfig"],Kh(n,a,s(t,["request"],{}))),t}function np(n){let e={},t=s(n,["response"]);t!=null&&l(e,["response"],Xh(t));let i=s(n,["error"]);return i!=null&&l(e,["error"],i),e}function ip(n,e){let t={},i=s(n,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);let o=s(n,["pageToken"]);if(e!==void 0&&o!=null&&l(e,["_query","pageToken"],o),s(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function op(n,e){let t={},i=s(n,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);let o=s(n,["pageToken"]);e!==void 0&&o!=null&&l(e,["_query","pageToken"],o);let r=s(n,["filter"]);return e!==void 0&&r!=null&&l(e,["_query","filter"],r),t}function rp(n){let e={},t=s(n,["config"]);return t!=null&&ip(t,e),e}function sp(n){let e={},t=s(n,["config"]);return t!=null&&op(t,e),e}function ap(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);let o=s(n,["operations"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>qi(a))),l(e,["batchJobs"],r)}return e}function lp(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);let o=s(n,["batchPredictionJobs"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>Pr(a))),l(e,["batchJobs"],r)}return e}function up(n){let e={},t=s(n,["functionCall"]);t!=null&&l(e,["functionCall"],t);let i=s(n,["codeExecutionResult"]);i!=null&&l(e,["codeExecutionResult"],i);let o=s(n,["executableCode"]);o!=null&&l(e,["executableCode"],o);let r=s(n,["fileData"]);r!=null&&l(e,["fileData"],Yh(r));let a=s(n,["functionResponse"]);a!=null&&l(e,["functionResponse"],a);let u=s(n,["inlineData"]);u!=null&&l(e,["inlineData"],xh(u));let c=s(n,["text"]);c!=null&&l(e,["text"],c);let d=s(n,["thought"]);d!=null&&l(e,["thought"],d);let f=s(n,["thoughtSignature"]);f!=null&&l(e,["thoughtSignature"],f);let h=s(n,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function cp(n){let e={},t=s(n,["category"]);if(t!=null&&l(e,["category"],t),s(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=s(n,["threshold"]);return i!=null&&l(e,["threshold"],i),e}function dp(n){let e={},t=s(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(h=>h)),l(e,["functionDeclarations"],f)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=s(n,["googleSearchRetrieval"]);i!=null&&l(e,["googleSearchRetrieval"],i);let o=s(n,["computerUse"]);o!=null&&l(e,["computerUse"],o);let r=s(n,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);let a=s(n,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let u=s(n,["googleMaps"]);u!=null&&l(e,["googleMaps"],jh(u));let c=s(n,["googleSearch"]);c!=null&&l(e,["googleSearch"],ep(c));let d=s(n,["urlContext"]);return d!=null&&l(e,["urlContext"],d),e}var it=(function(n){return n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents",n})(it||{}),Le=class{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,r;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(r=(o=a.config)===null||o===void 0?void 0:o.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:()=>m(this,null,function*(){if(this.idxInternal>=this.pageLength)if(this.hasNextPage())yield this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}}),return:()=>m(this,null,function*(){return{value:void 0,done:!0}})}}nextPage(){return m(this,null,function*(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=yield this.requestInternal(this.params);return this.initNextPage(e),this.page})}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var Mr=class extends Te{constructor(e){super(),this.apiClient=e,this.create=t=>m(this,null,function*(){return this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)}),this.createEmbeddings=t=>m(this,null,function*(){if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}),this.list=(...i)=>m(this,[...i],function*(t={}){return new Le(it.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),yield this.listInternal(t),t)})}createInlinedGenerateContentRequest(e){let t=zl(this.apiClient,e),i=t._url,o=C("{model}:batchGenerateContent",i),u=t.batch.inputConfig.requests,c=u.requests,d=[];for(let f of c){let h=Object.assign({},f);if(h.systemInstruction){let p=h.systemInstruction;delete h.systemInstruction;let g=h.request;g.systemInstruction=p,h.request=g}d.push(h)}return u.requests=d,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){let i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){let r=this.getGcsUri(e),a=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?i.dest=`${r.slice(0,-6)}/dest`:i.dest=`${r}_dest_${o}`;else if(a)i.dest=`${a}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}createInternal(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=Lh(this.apiClient,e);return u=C("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>Pr(f))}else{let d=zl(this.apiClient,e);return u=C("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>qi(f))}})}createEmbeddingsInternal(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Oh(this.apiClient,e);return r=C("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>qi(c))}})}get(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=Qh(this.apiClient,e);return u=C("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>Pr(f))}else{let d=Zh(this.apiClient,e);return u=C("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>qi(f))}})}cancel(e){return m(this,null,function*(){var t,i,o,r;let a="",u={};if(this.apiClient.isVertexAI()){let c=bh(this.apiClient,e);a=C("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,yield this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{let c=Nh(this.apiClient,e);a=C("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,yield this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}})}listInternal(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=sp(e);return u=C("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=lp(f),p=new Qi;return Object.assign(p,h),p})}else{let d=rp(e);return u=C("batches",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=ap(f),p=new Qi;return Object.assign(p,h),p})}})}delete(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=Hh(this.apiClient,e);return u=C("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>$h(f))}else{let d=qh(this.apiClient,e);return u=C("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>Bh(f))}})}};function fp(n){let e={},t=s(n,["data"]);if(t!=null&&l(e,["data"],t),s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=s(n,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function Jl(n){let e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>bp(r))),l(e,["parts"],o)}let i=s(n,["role"]);return i!=null&&l(e,["role"],i),e}function hp(n,e){let t={},i=s(n,["ttl"]);e!==void 0&&i!=null&&l(e,["ttl"],i);let o=s(n,["expireTime"]);e!==void 0&&o!=null&&l(e,["expireTime"],o);let r=s(n,["displayName"]);e!==void 0&&r!=null&&l(e,["displayName"],r);let a=s(n,["contents"]);if(e!==void 0&&a!=null){let f=_e(a);Array.isArray(f)&&(f=f.map(h=>Jl(h))),l(e,["contents"],f)}let u=s(n,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],Jl(te(u)));let c=s(n,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(h=>kp(h))),l(e,["tools"],f)}let d=s(n,["toolConfig"]);if(e!==void 0&&d!=null&&l(e,["toolConfig"],d),s(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function pp(n,e){let t={},i=s(n,["ttl"]);e!==void 0&&i!=null&&l(e,["ttl"],i);let o=s(n,["expireTime"]);e!==void 0&&o!=null&&l(e,["expireTime"],o);let r=s(n,["displayName"]);e!==void 0&&r!=null&&l(e,["displayName"],r);let a=s(n,["contents"]);if(e!==void 0&&a!=null){let h=_e(a);Array.isArray(h)&&(h=h.map(p=>p)),l(e,["contents"],h)}let u=s(n,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],te(u));let c=s(n,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>Vp(p))),l(e,["tools"],h)}let d=s(n,["toolConfig"]);e!==void 0&&d!=null&&l(e,["toolConfig"],d);let f=s(n,["kmsKeyName"]);return e!==void 0&&f!=null&&l(e,["encryption_spec","kmsKeyName"],f),t}function gp(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["model"],uu(n,i));let o=s(e,["config"]);return o!=null&&hp(o,t),t}function mp(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["model"],uu(n,i));let o=s(e,["config"]);return o!=null&&pp(o,t),t}function _p(n,e){let t={},i=s(e,["name"]);return i!=null&&l(t,["_url","name"],Ge(n,i)),t}function vp(n,e){let t={},i=s(e,["name"]);return i!=null&&l(t,["_url","name"],Ge(n,i)),t}function yp(n){let e={},t=s(n,["sdkHttpResponse"]);return t!=null&&l(e,["sdkHttpResponse"],t),e}function Cp(n){let e={},t=s(n,["sdkHttpResponse"]);return t!=null&&l(e,["sdkHttpResponse"],t),e}function Ep(n){let e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=s(n,["fileUri"]);t!=null&&l(e,["fileUri"],t);let i=s(n,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function Sp(n){let e={};if(s(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let t=s(n,["description"]);t!=null&&l(e,["description"],t);let i=s(n,["name"]);i!=null&&l(e,["name"],i);let o=s(n,["parameters"]);o!=null&&l(e,["parameters"],o);let r=s(n,["parametersJsonSchema"]);r!=null&&l(e,["parametersJsonSchema"],r);let a=s(n,["response"]);a!=null&&l(e,["response"],a);let u=s(n,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function Tp(n,e){let t={},i=s(e,["name"]);return i!=null&&l(t,["_url","name"],Ge(n,i)),t}function Ip(n,e){let t={},i=s(e,["name"]);return i!=null&&l(t,["_url","name"],Ge(n,i)),t}function wp(n){let e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=s(n,["enableWidget"]);return t!=null&&l(e,["enableWidget"],t),e}function Ap(n){let e={};if(s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=s(n,["timeRangeFilter"]);return t!=null&&l(e,["timeRangeFilter"],t),e}function Rp(n,e){let t={},i=s(n,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);let o=s(n,["pageToken"]);return e!==void 0&&o!=null&&l(e,["_query","pageToken"],o),t}function Dp(n,e){let t={},i=s(n,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);let o=s(n,["pageToken"]);return e!==void 0&&o!=null&&l(e,["_query","pageToken"],o),t}function Pp(n){let e={},t=s(n,["config"]);return t!=null&&Rp(t,e),e}function Mp(n){let e={},t=s(n,["config"]);return t!=null&&Dp(t,e),e}function xp(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);let o=s(n,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["cachedContents"],r)}return e}function Np(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);let o=s(n,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["cachedContents"],r)}return e}function bp(n){let e={},t=s(n,["functionCall"]);t!=null&&l(e,["functionCall"],t);let i=s(n,["codeExecutionResult"]);i!=null&&l(e,["codeExecutionResult"],i);let o=s(n,["executableCode"]);o!=null&&l(e,["executableCode"],o);let r=s(n,["fileData"]);r!=null&&l(e,["fileData"],Ep(r));let a=s(n,["functionResponse"]);a!=null&&l(e,["functionResponse"],a);let u=s(n,["inlineData"]);u!=null&&l(e,["inlineData"],fp(u));let c=s(n,["text"]);c!=null&&l(e,["text"],c);let d=s(n,["thought"]);d!=null&&l(e,["thought"],d);let f=s(n,["thoughtSignature"]);f!=null&&l(e,["thoughtSignature"],f);let h=s(n,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function kp(n){let e={},t=s(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(h=>h)),l(e,["functionDeclarations"],f)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=s(n,["googleSearchRetrieval"]);i!=null&&l(e,["googleSearchRetrieval"],i);let o=s(n,["computerUse"]);o!=null&&l(e,["computerUse"],o);let r=s(n,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);let a=s(n,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let u=s(n,["googleMaps"]);u!=null&&l(e,["googleMaps"],wp(u));let c=s(n,["googleSearch"]);c!=null&&l(e,["googleSearch"],Ap(c));let d=s(n,["urlContext"]);return d!=null&&l(e,["urlContext"],d),e}function Vp(n){let e={},t=s(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>Sp(p))),l(e,["functionDeclarations"],h)}let i=s(n,["retrieval"]);i!=null&&l(e,["retrieval"],i);let o=s(n,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);let r=s(n,["computerUse"]);if(r!=null&&l(e,["computerUse"],r),s(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let a=s(n,["codeExecution"]);a!=null&&l(e,["codeExecution"],a);let u=s(n,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);let c=s(n,["googleMaps"]);c!=null&&l(e,["googleMaps"],c);let d=s(n,["googleSearch"]);d!=null&&l(e,["googleSearch"],d);let f=s(n,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function Fp(n,e){let t={},i=s(n,["ttl"]);e!==void 0&&i!=null&&l(e,["ttl"],i);let o=s(n,["expireTime"]);return e!==void 0&&o!=null&&l(e,["expireTime"],o),t}function Up(n,e){let t={},i=s(n,["ttl"]);e!==void 0&&i!=null&&l(e,["ttl"],i);let o=s(n,["expireTime"]);return e!==void 0&&o!=null&&l(e,["expireTime"],o),t}function Lp(n,e){let t={},i=s(e,["name"]);i!=null&&l(t,["_url","name"],Ge(n,i));let o=s(e,["config"]);return o!=null&&Fp(o,t),t}function Gp(n,e){let t={},i=s(e,["name"]);i!=null&&l(t,["_url","name"],Ge(n,i));let o=s(e,["config"]);return o!=null&&Up(o,t),t}var xr=class extends Te{constructor(e){super(),this.apiClient=e,this.list=(...i)=>m(this,[...i],function*(t={}){return new Le(it.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),yield this.listInternal(t),t)})}create(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=mp(this.apiClient,e);return u=C("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{let d=gp(this.apiClient,e);return u=C("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>f)}})}get(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=Ip(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{let d=Tp(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>f)}})}delete(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=vp(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=Cp(f),p=new Xi;return Object.assign(p,h),p})}else{let d=_p(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=yp(f),p=new Xi;return Object.assign(p,h),p})}})}update(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=Gp(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{let d=Lp(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>f)}})}listInternal(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=Mp(e);return u=C("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=Np(f),p=new Zi;return Object.assign(p,h),p})}else{let d=Pp(e);return u=C("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=xp(f),p=new Zi;return Object.assign(p,h),p})}})}};function Wl(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(n){return this instanceof H?(this.v=n,this):new H(n)}function Yt(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,r=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),o[Symbol.asyncIterator]=function(){return this},o;function a(g){return function(_){return Promise.resolve(_).then(g,h)}}function u(g,_){i[g]&&(o[g]=function(v){return new Promise(function(y,I){r.push([g,v,y,I])>1||c(g,v)})},_&&(o[g]=_(o[g])))}function c(g,_){try{d(i[g](_))}catch(v){p(r[0][3],v)}}function d(g){g.value instanceof H?Promise.resolve(g.value.v).then(f,h):p(r[0][2],g)}function f(g){c("next",g)}function h(g){c("throw",g)}function p(g,_){g(_),r.shift(),r.length&&c(r[0][0],r[0][1])}}function Ln(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Wl=="function"?Wl(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(a){return new Promise(function(u,c){a=n[r](a),o(u,c,a.done,a.value)})}}function o(r,a,u,c){Promise.resolve(c).then(function(d){r({value:d,done:u})},a)}}function Op(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;let t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Su(t)}function Su(n){if(n.parts===void 0||n.parts.length===0)return!1;for(let e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function qp(n){if(n.length!==0){for(let e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Yl(n){if(n===void 0||n.length===0)return[];let e=[],t=n.length,i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{let o=[],r=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),r&&!Su(n[i])&&(r=!1),i++;r?e.push(...o):e.pop()}return e}var Nr=class{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new br(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},br=class{constructor(e,t,i,o={},r=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=r,this.sendPromise=Promise.resolve(),qp(r)}sendMessage(e){return m(this,null,function*(){var t;yield this.sendPromise;let i=te(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=m(this,null,function*(){var r,a,u;let c=yield o,d=(a=(r=c.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content,f=c.automaticFunctionCallingHistory,h=this.getHistory(!0).length,p=[];f!=null&&(p=(u=f.slice(h))!==null&&u!==void 0?u:[]);let g=d?[d]:[];this.recordHistory(i,g,p)}),yield this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o})}sendMessageStream(e){return m(this,null,function*(){var t;yield this.sendPromise;let i=te(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});let r=yield o;return this.processStreamResponse(r,i)})}getHistory(e=!1){let t=e?Yl(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,o;return Yt(this,arguments,function*(){var a,u,c,d;let f=[];try{for(var h=!0,p=Ln(e),g;g=yield H(p.next()),a=g.done,!a;h=!0){d=g.value,h=!1;let _=d;if(Op(_)){let v=(o=(i=_.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;v!==void 0&&f.push(v)}yield yield H(_)}}catch(_){u={error:_}}finally{try{!h&&!a&&(c=p.return)&&(yield H(c.call(p)))}finally{if(u)throw u.error}}this.recordHistory(t,f)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(r=>r.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Yl(i)):this.history.push(e),this.history.push(...o)}};var eo=class n extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,n.prototype)}};function Hp(n){let e={},t=s(n,["file"]);return t!=null&&l(e,["file"],t),e}function Bp(n){let e={},t=s(n,["sdkHttpResponse"]);return t!=null&&l(e,["sdkHttpResponse"],t),e}function $p(n){let e={},t=s(n,["name"]);return t!=null&&l(e,["_url","file"],gu(t)),e}function zp(n){let e={},t=s(n,["sdkHttpResponse"]);return t!=null&&l(e,["sdkHttpResponse"],t),e}function Jp(n){let e={},t=s(n,["name"]);return t!=null&&l(e,["_url","file"],gu(t)),e}function Wp(n,e){let t={},i=s(n,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);let o=s(n,["pageToken"]);return e!==void 0&&o!=null&&l(e,["_query","pageToken"],o),t}function Yp(n){let e={},t=s(n,["config"]);return t!=null&&Wp(t,e),e}function Kp(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);let o=s(n,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["files"],r)}return e}var kr=class extends Te{constructor(e){super(),this.apiClient=e,this.list=(...i)=>m(this,[...i],function*(t={}){return new Le(it.PAGED_ITEM_FILES,o=>this.listInternal(o),yield this.listInternal(t),t)})}upload(e){return m(this,null,function*(){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)})}download(e){return m(this,null,function*(){yield this.apiClient.downloadFile(e)})}listInternal(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Yp(e);return r=C("files",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{let d=Kp(c),f=new Sr;return Object.assign(f,d),f})}})}createInternal(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Hp(e);return r=C("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let d=Bp(c),f=new Tr;return Object.assign(f,d),f})}})}get(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Jp(e);return r=C("files/{file}",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}})}delete(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=$p(e);return r=C("files/{file}",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{let d=zp(c),f=new Ir;return Object.assign(f,d),f})}})}};function Hi(n){let e={},t=s(n,["data"]);if(t!=null&&l(e,["data"],t),s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=s(n,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function Xp(n){let e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>dg(r))),l(e,["parts"],o)}let i=s(n,["role"]);return i!=null&&l(e,["role"],i),e}function Zp(n){let e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=s(n,["fileUri"]);t!=null&&l(e,["fileUri"],t);let i=s(n,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function Qp(n){let e={};if(s(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let t=s(n,["description"]);t!=null&&l(e,["description"],t);let i=s(n,["name"]);i!=null&&l(e,["name"],i);let o=s(n,["parameters"]);o!=null&&l(e,["parameters"],o);let r=s(n,["parametersJsonSchema"]);r!=null&&l(e,["parametersJsonSchema"],r);let a=s(n,["response"]);a!=null&&l(e,["response"],a);let u=s(n,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function jp(n){let e={},t=s(n,["modelSelectionConfig"]);t!=null&&l(e,["modelConfig"],t);let i=s(n,["responseJsonSchema"]);i!=null&&l(e,["responseJsonSchema"],i);let o=s(n,["audioTimestamp"]);o!=null&&l(e,["audioTimestamp"],o);let r=s(n,["candidateCount"]);r!=null&&l(e,["candidateCount"],r);let a=s(n,["enableAffectiveDialog"]);a!=null&&l(e,["enableAffectiveDialog"],a);let u=s(n,["frequencyPenalty"]);u!=null&&l(e,["frequencyPenalty"],u);let c=s(n,["logprobs"]);c!=null&&l(e,["logprobs"],c);let d=s(n,["maxOutputTokens"]);d!=null&&l(e,["maxOutputTokens"],d);let f=s(n,["mediaResolution"]);f!=null&&l(e,["mediaResolution"],f);let h=s(n,["presencePenalty"]);h!=null&&l(e,["presencePenalty"],h);let p=s(n,["responseLogprobs"]);p!=null&&l(e,["responseLogprobs"],p);let g=s(n,["responseMimeType"]);g!=null&&l(e,["responseMimeType"],g);let _=s(n,["responseModalities"]);_!=null&&l(e,["responseModalities"],_);let v=s(n,["responseSchema"]);v!=null&&l(e,["responseSchema"],v);let y=s(n,["routingConfig"]);y!=null&&l(e,["routingConfig"],y);let I=s(n,["seed"]);I!=null&&l(e,["seed"],I);let w=s(n,["speechConfig"]);w!=null&&l(e,["speechConfig"],Tu(w));let E=s(n,["stopSequences"]);E!=null&&l(e,["stopSequences"],E);let R=s(n,["temperature"]);R!=null&&l(e,["temperature"],R);let P=s(n,["thinkingConfig"]);P!=null&&l(e,["thinkingConfig"],P);let x=s(n,["topK"]);x!=null&&l(e,["topK"],x);let N=s(n,["topP"]);if(N!=null&&l(e,["topP"],N),s(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function eg(n){let e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=s(n,["enableWidget"]);return t!=null&&l(e,["enableWidget"],t),e}function tg(n){let e={};if(s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=s(n,["timeRangeFilter"]);return t!=null&&l(e,["timeRangeFilter"],t),e}function ng(n,e){let t={},i=s(n,["generationConfig"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig"],i);let o=s(n,["responseModalities"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig","responseModalities"],o);let r=s(n,["temperature"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig","temperature"],r);let a=s(n,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);let u=s(n,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);let c=s(n,["maxOutputTokens"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","maxOutputTokens"],c);let d=s(n,["mediaResolution"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","mediaResolution"],d);let f=s(n,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);let h=s(n,["speechConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","speechConfig"],ss(h));let p=s(n,["thinkingConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","thinkingConfig"],p);let g=s(n,["enableAffectiveDialog"]);e!==void 0&&g!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],g);let _=s(n,["systemInstruction"]);e!==void 0&&_!=null&&l(e,["setup","systemInstruction"],Xp(te(_)));let v=s(n,["tools"]);if(e!==void 0&&v!=null){let x=Zt(v);Array.isArray(x)&&(x=x.map(N=>hg(Xt(N)))),l(e,["setup","tools"],x)}let y=s(n,["sessionResumption"]);e!==void 0&&y!=null&&l(e,["setup","sessionResumption"],fg(y));let I=s(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&l(e,["setup","inputAudioTranscription"],I);let w=s(n,["outputAudioTranscription"]);e!==void 0&&w!=null&&l(e,["setup","outputAudioTranscription"],w);let E=s(n,["realtimeInputConfig"]);e!==void 0&&E!=null&&l(e,["setup","realtimeInputConfig"],E);let R=s(n,["contextWindowCompression"]);e!==void 0&&R!=null&&l(e,["setup","contextWindowCompression"],R);let P=s(n,["proactivity"]);return e!==void 0&&P!=null&&l(e,["setup","proactivity"],P),t}function ig(n,e){let t={},i=s(n,["generationConfig"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig"],jp(i));let o=s(n,["responseModalities"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig","responseModalities"],o);let r=s(n,["temperature"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig","temperature"],r);let a=s(n,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);let u=s(n,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);let c=s(n,["maxOutputTokens"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","maxOutputTokens"],c);let d=s(n,["mediaResolution"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","mediaResolution"],d);let f=s(n,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);let h=s(n,["speechConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","speechConfig"],Tu(ss(h)));let p=s(n,["thinkingConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","thinkingConfig"],p);let g=s(n,["enableAffectiveDialog"]);e!==void 0&&g!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],g);let _=s(n,["systemInstruction"]);e!==void 0&&_!=null&&l(e,["setup","systemInstruction"],te(_));let v=s(n,["tools"]);if(e!==void 0&&v!=null){let x=Zt(v);Array.isArray(x)&&(x=x.map(N=>pg(Xt(N)))),l(e,["setup","tools"],x)}let y=s(n,["sessionResumption"]);e!==void 0&&y!=null&&l(e,["setup","sessionResumption"],y);let I=s(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&l(e,["setup","inputAudioTranscription"],I);let w=s(n,["outputAudioTranscription"]);e!==void 0&&w!=null&&l(e,["setup","outputAudioTranscription"],w);let E=s(n,["realtimeInputConfig"]);e!==void 0&&E!=null&&l(e,["setup","realtimeInputConfig"],E);let R=s(n,["contextWindowCompression"]);e!==void 0&&R!=null&&l(e,["setup","contextWindowCompression"],R);let P=s(n,["proactivity"]);return e!==void 0&&P!=null&&l(e,["setup","proactivity"],P),t}function og(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["setup","model"],k(n,i));let o=s(e,["config"]);return o!=null&&l(t,["config"],ng(o,t)),t}function rg(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["setup","model"],k(n,i));let o=s(e,["config"]);return o!=null&&l(t,["config"],ig(o,t)),t}function sg(n){let e={},t=s(n,["musicGenerationConfig"]);return t!=null&&l(e,["musicGenerationConfig"],t),e}function ag(n){let e={},t=s(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),l(e,["weightedPrompts"],i)}return e}function lg(n){let e={},t=s(n,["media"]);if(t!=null){let d=cu(t);Array.isArray(d)&&(d=d.map(f=>Hi(f))),l(e,["mediaChunks"],d)}let i=s(n,["audio"]);i!=null&&l(e,["audio"],Hi(fu(i)));let o=s(n,["audioStreamEnd"]);o!=null&&l(e,["audioStreamEnd"],o);let r=s(n,["video"]);r!=null&&l(e,["video"],Hi(du(r)));let a=s(n,["text"]);a!=null&&l(e,["text"],a);let u=s(n,["activityStart"]);u!=null&&l(e,["activityStart"],u);let c=s(n,["activityEnd"]);return c!=null&&l(e,["activityEnd"],c),e}function ug(n){let e={},t=s(n,["media"]);if(t!=null){let d=cu(t);Array.isArray(d)&&(d=d.map(f=>f)),l(e,["mediaChunks"],d)}let i=s(n,["audio"]);i!=null&&l(e,["audio"],fu(i));let o=s(n,["audioStreamEnd"]);o!=null&&l(e,["audioStreamEnd"],o);let r=s(n,["video"]);r!=null&&l(e,["video"],du(r));let a=s(n,["text"]);a!=null&&l(e,["text"],a);let u=s(n,["activityStart"]);u!=null&&l(e,["activityStart"],u);let c=s(n,["activityEnd"]);return c!=null&&l(e,["activityEnd"],c),e}function cg(n){let e={},t=s(n,["setupComplete"]);t!=null&&l(e,["setupComplete"],t);let i=s(n,["serverContent"]);i!=null&&l(e,["serverContent"],i);let o=s(n,["toolCall"]);o!=null&&l(e,["toolCall"],o);let r=s(n,["toolCallCancellation"]);r!=null&&l(e,["toolCallCancellation"],r);let a=s(n,["usageMetadata"]);a!=null&&l(e,["usageMetadata"],gg(a));let u=s(n,["goAway"]);u!=null&&l(e,["goAway"],u);let c=s(n,["sessionResumptionUpdate"]);return c!=null&&l(e,["sessionResumptionUpdate"],c),e}function dg(n){let e={},t=s(n,["functionCall"]);t!=null&&l(e,["functionCall"],t);let i=s(n,["codeExecutionResult"]);i!=null&&l(e,["codeExecutionResult"],i);let o=s(n,["executableCode"]);o!=null&&l(e,["executableCode"],o);let r=s(n,["fileData"]);r!=null&&l(e,["fileData"],Zp(r));let a=s(n,["functionResponse"]);a!=null&&l(e,["functionResponse"],a);let u=s(n,["inlineData"]);u!=null&&l(e,["inlineData"],Hi(u));let c=s(n,["text"]);c!=null&&l(e,["text"],c);let d=s(n,["thought"]);d!=null&&l(e,["thought"],d);let f=s(n,["thoughtSignature"]);f!=null&&l(e,["thoughtSignature"],f);let h=s(n,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function fg(n){let e={},t=s(n,["handle"]);if(t!=null&&l(e,["handle"],t),s(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Tu(n){let e={},t=s(n,["languageCode"]);t!=null&&l(e,["languageCode"],t);let i=s(n,["voiceConfig"]);if(i!=null&&l(e,["voiceConfig"],i),s(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function hg(n){let e={},t=s(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(h=>h)),l(e,["functionDeclarations"],f)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=s(n,["googleSearchRetrieval"]);i!=null&&l(e,["googleSearchRetrieval"],i);let o=s(n,["computerUse"]);o!=null&&l(e,["computerUse"],o);let r=s(n,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);let a=s(n,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let u=s(n,["googleMaps"]);u!=null&&l(e,["googleMaps"],eg(u));let c=s(n,["googleSearch"]);c!=null&&l(e,["googleSearch"],tg(c));let d=s(n,["urlContext"]);return d!=null&&l(e,["urlContext"],d),e}function pg(n){let e={},t=s(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>Qp(p))),l(e,["functionDeclarations"],h)}let i=s(n,["retrieval"]);i!=null&&l(e,["retrieval"],i);let o=s(n,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);let r=s(n,["computerUse"]);if(r!=null&&l(e,["computerUse"],r),s(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let a=s(n,["codeExecution"]);a!=null&&l(e,["codeExecution"],a);let u=s(n,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);let c=s(n,["googleMaps"]);c!=null&&l(e,["googleMaps"],c);let d=s(n,["googleSearch"]);d!=null&&l(e,["googleSearch"],d);let f=s(n,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function gg(n){let e={},t=s(n,["promptTokenCount"]);t!=null&&l(e,["promptTokenCount"],t);let i=s(n,["cachedContentTokenCount"]);i!=null&&l(e,["cachedContentTokenCount"],i);let o=s(n,["candidatesTokenCount"]);o!=null&&l(e,["responseTokenCount"],o);let r=s(n,["toolUsePromptTokenCount"]);r!=null&&l(e,["toolUsePromptTokenCount"],r);let a=s(n,["thoughtsTokenCount"]);a!=null&&l(e,["thoughtsTokenCount"],a);let u=s(n,["totalTokenCount"]);u!=null&&l(e,["totalTokenCount"],u);let c=s(n,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(_=>_)),l(e,["promptTokensDetails"],g)}let d=s(n,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(_=>_)),l(e,["cacheTokensDetails"],g)}let f=s(n,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(_=>_)),l(e,["responseTokensDetails"],g)}let h=s(n,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(_=>_)),l(e,["toolUsePromptTokensDetails"],g)}let p=s(n,["trafficType"]);return p!=null&&l(e,["trafficType"],p),e}function mg(n){let e={},t=s(n,["data"]);if(t!=null&&l(e,["data"],t),s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=s(n,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function _g(n){let e={},t=s(n,["content"]);t!=null&&l(e,["content"],t);let i=s(n,["citationMetadata"]);i!=null&&l(e,["citationMetadata"],vg(i));let o=s(n,["tokenCount"]);o!=null&&l(e,["tokenCount"],o);let r=s(n,["finishReason"]);r!=null&&l(e,["finishReason"],r);let a=s(n,["avgLogprobs"]);a!=null&&l(e,["avgLogprobs"],a);let u=s(n,["groundingMetadata"]);u!=null&&l(e,["groundingMetadata"],u);let c=s(n,["index"]);c!=null&&l(e,["index"],c);let d=s(n,["logprobsResult"]);d!=null&&l(e,["logprobsResult"],d);let f=s(n,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),l(e,["safetyRatings"],p)}let h=s(n,["urlContextMetadata"]);return h!=null&&l(e,["urlContextMetadata"],h),e}function vg(n){let e={},t=s(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),l(e,["citations"],i)}return e}function yg(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["contents"]);if(o!=null){let r=_e(o);Array.isArray(r)&&(r=r.map(a=>a)),l(t,["contents"],r)}return t}function Cg(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),l(e,["tokensInfo"],o)}return e}function Eg(n){let e={},t=s(n,["values"]);t!=null&&l(e,["values"],t);let i=s(n,["statistics"]);return i!=null&&l(e,["statistics"],Sg(i)),e}function Sg(n){let e={},t=s(n,["truncated"]);t!=null&&l(e,["truncated"],t);let i=s(n,["token_count"]);return i!=null&&l(e,["tokenCount"],i),e}function io(n){let e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Rm(r))),l(e,["parts"],o)}let i=s(n,["role"]);return i!=null&&l(e,["role"],i),e}function Tg(n){let e={},t=s(n,["controlType"]);t!=null&&l(e,["controlType"],t);let i=s(n,["enableControlImageComputation"]);return i!=null&&l(e,["computeControl"],i),e}function Ig(n){let e={};if(s(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(s(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(s(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function wg(n,e){let t={},i=s(n,["systemInstruction"]);e!==void 0&&i!=null&&l(e,["systemInstruction"],te(i));let o=s(n,["tools"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Du(u))),l(e,["tools"],a)}let r=s(n,["generationConfig"]);return e!==void 0&&r!=null&&l(e,["generationConfig"],pm(r)),t}function Ag(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["contents"]);if(o!=null){let a=_e(o);Array.isArray(a)&&(a=a.map(u=>io(u))),l(t,["contents"],a)}let r=s(e,["config"]);return r!=null&&Ig(r),t}function Rg(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["contents"]);if(o!=null){let a=_e(o);Array.isArray(a)&&(a=a.map(u=>u)),l(t,["contents"],a)}let r=s(e,["config"]);return r!=null&&wg(r,t),t}function Dg(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["totalTokens"]);i!=null&&l(e,["totalTokens"],i);let o=s(n,["cachedContentTokenCount"]);return o!=null&&l(e,["cachedContentTokenCount"],o),e}function Pg(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["totalTokens"]);return i!=null&&l(e,["totalTokens"],i),e}function Mg(n,e){let t={},i=s(e,["model"]);return i!=null&&l(t,["_url","name"],k(n,i)),t}function xg(n,e){let t={},i=s(e,["model"]);return i!=null&&l(t,["_url","name"],k(n,i)),t}function Ng(n){let e={},t=s(n,["sdkHttpResponse"]);return t!=null&&l(e,["sdkHttpResponse"],t),e}function bg(n){let e={},t=s(n,["sdkHttpResponse"]);return t!=null&&l(e,["sdkHttpResponse"],t),e}function kg(n,e){let t={},i=s(n,["outputGcsUri"]);e!==void 0&&i!=null&&l(e,["parameters","storageUri"],i);let o=s(n,["negativePrompt"]);e!==void 0&&o!=null&&l(e,["parameters","negativePrompt"],o);let r=s(n,["numberOfImages"]);e!==void 0&&r!=null&&l(e,["parameters","sampleCount"],r);let a=s(n,["aspectRatio"]);e!==void 0&&a!=null&&l(e,["parameters","aspectRatio"],a);let u=s(n,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);let c=s(n,["seed"]);e!==void 0&&c!=null&&l(e,["parameters","seed"],c);let d=s(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&l(e,["parameters","safetySetting"],d);let f=s(n,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);let h=s(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&l(e,["parameters","includeSafetyAttributes"],h);let p=s(n,["includeRaiReason"]);e!==void 0&&p!=null&&l(e,["parameters","includeRaiReason"],p);let g=s(n,["language"]);e!==void 0&&g!=null&&l(e,["parameters","language"],g);let _=s(n,["outputMimeType"]);e!==void 0&&_!=null&&l(e,["parameters","outputOptions","mimeType"],_);let v=s(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&l(e,["parameters","outputOptions","compressionQuality"],v);let y=s(n,["addWatermark"]);e!==void 0&&y!=null&&l(e,["parameters","addWatermark"],y);let I=s(n,["labels"]);e!==void 0&&I!=null&&l(e,["labels"],I);let w=s(n,["editMode"]);e!==void 0&&w!=null&&l(e,["parameters","editMode"],w);let E=s(n,["baseSteps"]);return e!==void 0&&E!=null&&l(e,["parameters","editConfig","baseSteps"],E),t}function Vg(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["prompt"]);o!=null&&l(t,["instances[0]","prompt"],o);let r=s(e,["referenceImages"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>bm(c))),l(t,["instances[0]","referenceImages"],u)}let a=s(e,["config"]);return a!=null&&kg(a,t),t}function Fg(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>oo(r))),l(e,["generatedImages"],o)}return e}function Ug(n,e){let t={},i=s(n,["taskType"]);e!==void 0&&i!=null&&l(e,["requests[]","taskType"],i);let o=s(n,["title"]);e!==void 0&&o!=null&&l(e,["requests[]","title"],o);let r=s(n,["outputDimensionality"]);if(e!==void 0&&r!=null&&l(e,["requests[]","outputDimensionality"],r),s(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Lg(n,e){let t={},i=s(n,["taskType"]);e!==void 0&&i!=null&&l(e,["instances[]","task_type"],i);let o=s(n,["title"]);e!==void 0&&o!=null&&l(e,["instances[]","title"],o);let r=s(n,["outputDimensionality"]);e!==void 0&&r!=null&&l(e,["parameters","outputDimensionality"],r);let a=s(n,["mimeType"]);e!==void 0&&a!=null&&l(e,["instances[]","mimeType"],a);let u=s(n,["autoTruncate"]);return e!==void 0&&u!=null&&l(e,["parameters","autoTruncate"],u),t}function Gg(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["contents"]);if(o!=null){let u=is(n,o);Array.isArray(u)&&(u=u.map(c=>c)),l(t,["requests[]","content"],u)}let r=s(e,["config"]);r!=null&&Ug(r,t);let a=s(e,["model"]);return a!==void 0&&l(t,["requests[]","model"],k(n,a)),t}function Og(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["contents"]);if(o!=null){let a=is(n,o);Array.isArray(a)&&(a=a.map(u=>u)),l(t,["instances[]","content"],a)}let r=s(e,["config"]);return r!=null&&Lg(r,t),t}function qg(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["embeddings"],r)}let o=s(n,["metadata"]);return o!=null&&l(e,["metadata"],o),e}function Hg(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["predictions[]","embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Eg(a))),l(e,["embeddings"],r)}let o=s(n,["metadata"]);return o!=null&&l(e,["metadata"],o),e}function Bg(n){let e={},t=s(n,["endpoint"]);t!=null&&l(e,["name"],t);let i=s(n,["deployedModelId"]);return i!=null&&l(e,["deployedModelId"],i),e}function $g(n){let e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=s(n,["fileUri"]);t!=null&&l(e,["fileUri"],t);let i=s(n,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function zg(n){let e={};if(s(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let t=s(n,["description"]);t!=null&&l(e,["description"],t);let i=s(n,["name"]);i!=null&&l(e,["name"],i);let o=s(n,["parameters"]);o!=null&&l(e,["parameters"],o);let r=s(n,["parametersJsonSchema"]);r!=null&&l(e,["parametersJsonSchema"],r);let a=s(n,["response"]);a!=null&&l(e,["response"],a);let u=s(n,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function Jg(n,e,t){let i={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&l(t,["systemInstruction"],io(te(o)));let r=s(e,["temperature"]);r!=null&&l(i,["temperature"],r);let a=s(e,["topP"]);a!=null&&l(i,["topP"],a);let u=s(e,["topK"]);u!=null&&l(i,["topK"],u);let c=s(e,["candidateCount"]);c!=null&&l(i,["candidateCount"],c);let d=s(e,["maxOutputTokens"]);d!=null&&l(i,["maxOutputTokens"],d);let f=s(e,["stopSequences"]);f!=null&&l(i,["stopSequences"],f);let h=s(e,["responseLogprobs"]);h!=null&&l(i,["responseLogprobs"],h);let p=s(e,["logprobs"]);p!=null&&l(i,["logprobs"],p);let g=s(e,["presencePenalty"]);g!=null&&l(i,["presencePenalty"],g);let _=s(e,["frequencyPenalty"]);_!=null&&l(i,["frequencyPenalty"],_);let v=s(e,["seed"]);v!=null&&l(i,["seed"],v);let y=s(e,["responseMimeType"]);y!=null&&l(i,["responseMimeType"],y);let I=s(e,["responseSchema"]);I!=null&&l(i,["responseSchema"],os(I));let w=s(e,["responseJsonSchema"]);if(w!=null&&l(i,["responseJsonSchema"],w),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let E=s(e,["safetySettings"]);if(t!==void 0&&E!=null){let B=E;Array.isArray(B)&&(B=B.map(we=>km(we))),l(t,["safetySettings"],B)}let R=s(e,["tools"]);if(t!==void 0&&R!=null){let B=Zt(R);Array.isArray(B)&&(B=B.map(we=>Om(Xt(we)))),l(t,["tools"],B)}let P=s(e,["toolConfig"]);if(t!==void 0&&P!=null&&l(t,["toolConfig"],P),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let x=s(e,["cachedContent"]);t!==void 0&&x!=null&&l(t,["cachedContent"],Ge(n,x));let N=s(e,["responseModalities"]);N!=null&&l(i,["responseModalities"],N);let Q=s(e,["mediaResolution"]);Q!=null&&l(i,["mediaResolution"],Q);let D=s(e,["speechConfig"]);if(D!=null&&l(i,["speechConfig"],rs(D)),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let U=s(e,["thinkingConfig"]);U!=null&&l(i,["thinkingConfig"],U);let Y=s(e,["imageConfig"]);return Y!=null&&l(i,["imageConfig"],Y),i}function Wg(n,e,t){let i={},o=s(e,["systemInstruction"]);t!==void 0&&o!=null&&l(t,["systemInstruction"],te(o));let r=s(e,["temperature"]);r!=null&&l(i,["temperature"],r);let a=s(e,["topP"]);a!=null&&l(i,["topP"],a);let u=s(e,["topK"]);u!=null&&l(i,["topK"],u);let c=s(e,["candidateCount"]);c!=null&&l(i,["candidateCount"],c);let d=s(e,["maxOutputTokens"]);d!=null&&l(i,["maxOutputTokens"],d);let f=s(e,["stopSequences"]);f!=null&&l(i,["stopSequences"],f);let h=s(e,["responseLogprobs"]);h!=null&&l(i,["responseLogprobs"],h);let p=s(e,["logprobs"]);p!=null&&l(i,["logprobs"],p);let g=s(e,["presencePenalty"]);g!=null&&l(i,["presencePenalty"],g);let _=s(e,["frequencyPenalty"]);_!=null&&l(i,["frequencyPenalty"],_);let v=s(e,["seed"]);v!=null&&l(i,["seed"],v);let y=s(e,["responseMimeType"]);y!=null&&l(i,["responseMimeType"],y);let I=s(e,["responseSchema"]);I!=null&&l(i,["responseSchema"],os(I));let w=s(e,["responseJsonSchema"]);w!=null&&l(i,["responseJsonSchema"],w);let E=s(e,["routingConfig"]);E!=null&&l(i,["routingConfig"],E);let R=s(e,["modelSelectionConfig"]);R!=null&&l(i,["modelConfig"],R);let P=s(e,["safetySettings"]);if(t!==void 0&&P!=null){let xe=P;Array.isArray(xe)&&(xe=xe.map(ao=>ao)),l(t,["safetySettings"],xe)}let x=s(e,["tools"]);if(t!==void 0&&x!=null){let xe=Zt(x);Array.isArray(xe)&&(xe=xe.map(ao=>Du(Xt(ao)))),l(t,["tools"],xe)}let N=s(e,["toolConfig"]);t!==void 0&&N!=null&&l(t,["toolConfig"],N);let Q=s(e,["labels"]);t!==void 0&&Q!=null&&l(t,["labels"],Q);let D=s(e,["cachedContent"]);t!==void 0&&D!=null&&l(t,["cachedContent"],Ge(n,D));let U=s(e,["responseModalities"]);U!=null&&l(i,["responseModalities"],U);let Y=s(e,["mediaResolution"]);Y!=null&&l(i,["mediaResolution"],Y);let B=s(e,["speechConfig"]);B!=null&&l(i,["speechConfig"],Ru(rs(B)));let we=s(e,["audioTimestamp"]);we!=null&&l(i,["audioTimestamp"],we);let as=s(e,["thinkingConfig"]);as!=null&&l(i,["thinkingConfig"],as);let ls=s(e,["imageConfig"]);return ls!=null&&l(i,["imageConfig"],ls),i}function Kl(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["contents"]);if(o!=null){let a=_e(o);Array.isArray(a)&&(a=a.map(u=>io(u))),l(t,["contents"],a)}let r=s(e,["config"]);return r!=null&&l(t,["generationConfig"],Jg(n,r,t)),t}function Xl(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["contents"]);if(o!=null){let a=_e(o);Array.isArray(a)&&(a=a.map(u=>u)),l(t,["contents"],a)}let r=s(e,["config"]);return r!=null&&l(t,["generationConfig"],Wg(n,r,t)),t}function Zl(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>_g(d))),l(e,["candidates"],c)}let o=s(n,["modelVersion"]);o!=null&&l(e,["modelVersion"],o);let r=s(n,["promptFeedback"]);r!=null&&l(e,["promptFeedback"],r);let a=s(n,["responseId"]);a!=null&&l(e,["responseId"],a);let u=s(n,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function Ql(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>f)),l(e,["candidates"],d)}let o=s(n,["createTime"]);o!=null&&l(e,["createTime"],o);let r=s(n,["modelVersion"]);r!=null&&l(e,["modelVersion"],r);let a=s(n,["promptFeedback"]);a!=null&&l(e,["promptFeedback"],a);let u=s(n,["responseId"]);u!=null&&l(e,["responseId"],u);let c=s(n,["usageMetadata"]);return c!=null&&l(e,["usageMetadata"],c),e}function Yg(n,e){let t={};if(s(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=s(n,["numberOfImages"]);e!==void 0&&i!=null&&l(e,["parameters","sampleCount"],i);let o=s(n,["aspectRatio"]);e!==void 0&&o!=null&&l(e,["parameters","aspectRatio"],o);let r=s(n,["guidanceScale"]);if(e!==void 0&&r!=null&&l(e,["parameters","guidanceScale"],r),s(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let a=s(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&l(e,["parameters","safetySetting"],a);let u=s(n,["personGeneration"]);e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u);let c=s(n,["includeSafetyAttributes"]);e!==void 0&&c!=null&&l(e,["parameters","includeSafetyAttributes"],c);let d=s(n,["includeRaiReason"]);e!==void 0&&d!=null&&l(e,["parameters","includeRaiReason"],d);let f=s(n,["language"]);e!==void 0&&f!=null&&l(e,["parameters","language"],f);let h=s(n,["outputMimeType"]);e!==void 0&&h!=null&&l(e,["parameters","outputOptions","mimeType"],h);let p=s(n,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&l(e,["parameters","outputOptions","compressionQuality"],p),s(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(s(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let g=s(n,["imageSize"]);if(e!==void 0&&g!=null&&l(e,["parameters","sampleImageSize"],g),s(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Kg(n,e){let t={},i=s(n,["outputGcsUri"]);e!==void 0&&i!=null&&l(e,["parameters","storageUri"],i);let o=s(n,["negativePrompt"]);e!==void 0&&o!=null&&l(e,["parameters","negativePrompt"],o);let r=s(n,["numberOfImages"]);e!==void 0&&r!=null&&l(e,["parameters","sampleCount"],r);let a=s(n,["aspectRatio"]);e!==void 0&&a!=null&&l(e,["parameters","aspectRatio"],a);let u=s(n,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);let c=s(n,["seed"]);e!==void 0&&c!=null&&l(e,["parameters","seed"],c);let d=s(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&l(e,["parameters","safetySetting"],d);let f=s(n,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);let h=s(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&l(e,["parameters","includeSafetyAttributes"],h);let p=s(n,["includeRaiReason"]);e!==void 0&&p!=null&&l(e,["parameters","includeRaiReason"],p);let g=s(n,["language"]);e!==void 0&&g!=null&&l(e,["parameters","language"],g);let _=s(n,["outputMimeType"]);e!==void 0&&_!=null&&l(e,["parameters","outputOptions","mimeType"],_);let v=s(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&l(e,["parameters","outputOptions","compressionQuality"],v);let y=s(n,["addWatermark"]);e!==void 0&&y!=null&&l(e,["parameters","addWatermark"],y);let I=s(n,["labels"]);e!==void 0&&I!=null&&l(e,["labels"],I);let w=s(n,["imageSize"]);e!==void 0&&w!=null&&l(e,["parameters","sampleImageSize"],w);let E=s(n,["enhancePrompt"]);return e!==void 0&&E!=null&&l(e,["parameters","enhancePrompt"],E),t}function Xg(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["prompt"]);o!=null&&l(t,["instances[0]","prompt"],o);let r=s(e,["config"]);return r!=null&&Yg(r,t),t}function Zg(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["prompt"]);o!=null&&l(t,["instances[0]","prompt"],o);let r=s(e,["config"]);return r!=null&&Kg(r,t),t}function Qg(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>cm(a))),l(e,["generatedImages"],r)}let o=s(n,["positivePromptSafetyAttributes"]);return o!=null&&l(e,["positivePromptSafetyAttributes"],wu(o)),e}function jg(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>oo(a))),l(e,["generatedImages"],r)}let o=s(n,["positivePromptSafetyAttributes"]);return o!=null&&l(e,["positivePromptSafetyAttributes"],Au(o)),e}function em(n,e){let t={},i=s(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&l(e,["parameters","sampleCount"],i),s(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let o=s(n,["durationSeconds"]);if(e!==void 0&&o!=null&&l(e,["parameters","durationSeconds"],o),s(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let r=s(n,["aspectRatio"]);e!==void 0&&r!=null&&l(e,["parameters","aspectRatio"],r);let a=s(n,["resolution"]);e!==void 0&&a!=null&&l(e,["parameters","resolution"],a);let u=s(n,["personGeneration"]);if(e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u),s(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let c=s(n,["negativePrompt"]);e!==void 0&&c!=null&&l(e,["parameters","negativePrompt"],c);let d=s(n,["enhancePrompt"]);if(e!==void 0&&d!=null&&l(e,["parameters","enhancePrompt"],d),s(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let f=s(n,["lastFrame"]);e!==void 0&&f!=null&&l(e,["instances[0]","lastFrame"],ro(f));let h=s(n,["referenceImages"]);if(e!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>jm(g))),l(e,["instances[0]","referenceImages"],p)}if(s(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(s(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function tm(n,e){let t={},i=s(n,["numberOfVideos"]);e!==void 0&&i!=null&&l(e,["parameters","sampleCount"],i);let o=s(n,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);let r=s(n,["fps"]);e!==void 0&&r!=null&&l(e,["parameters","fps"],r);let a=s(n,["durationSeconds"]);e!==void 0&&a!=null&&l(e,["parameters","durationSeconds"],a);let u=s(n,["seed"]);e!==void 0&&u!=null&&l(e,["parameters","seed"],u);let c=s(n,["aspectRatio"]);e!==void 0&&c!=null&&l(e,["parameters","aspectRatio"],c);let d=s(n,["resolution"]);e!==void 0&&d!=null&&l(e,["parameters","resolution"],d);let f=s(n,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);let h=s(n,["pubsubTopic"]);e!==void 0&&h!=null&&l(e,["parameters","pubsubTopic"],h);let p=s(n,["negativePrompt"]);e!==void 0&&p!=null&&l(e,["parameters","negativePrompt"],p);let g=s(n,["enhancePrompt"]);e!==void 0&&g!=null&&l(e,["parameters","enhancePrompt"],g);let _=s(n,["generateAudio"]);e!==void 0&&_!=null&&l(e,["parameters","generateAudio"],_);let v=s(n,["lastFrame"]);e!==void 0&&v!=null&&l(e,["instances[0]","lastFrame"],Ie(v));let y=s(n,["referenceImages"]);if(e!==void 0&&y!=null){let E=y;Array.isArray(E)&&(E=E.map(R=>e_(R))),l(e,["instances[0]","referenceImages"],E)}let I=s(n,["mask"]);e!==void 0&&I!=null&&l(e,["instances[0]","mask"],Qm(I));let w=s(n,["compressionQuality"]);return e!==void 0&&w!=null&&l(e,["parameters","compressionQuality"],w),t}function nm(n){let e={},t=s(n,["name"]);t!=null&&l(e,["name"],t);let i=s(n,["metadata"]);i!=null&&l(e,["metadata"],i);let o=s(n,["done"]);o!=null&&l(e,["done"],o);let r=s(n,["error"]);r!=null&&l(e,["error"],r);let a=s(n,["response","generateVideoResponse"]);return a!=null&&l(e,["response"],sm(a)),e}function im(n){let e={},t=s(n,["name"]);t!=null&&l(e,["name"],t);let i=s(n,["metadata"]);i!=null&&l(e,["metadata"],i);let o=s(n,["done"]);o!=null&&l(e,["done"],o);let r=s(n,["error"]);r!=null&&l(e,["error"],r);let a=s(n,["response"]);return a!=null&&l(e,["response"],am(a)),e}function om(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["prompt"]);o!=null&&l(t,["instances[0]","prompt"],o);let r=s(e,["image"]);r!=null&&l(t,["instances[0]","image"],ro(r));let a=s(e,["video"]);a!=null&&l(t,["instances[0]","video"],Pu(a));let u=s(e,["source"]);u!=null&&lm(u,t);let c=s(e,["config"]);return c!=null&&em(c,t),t}function rm(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["prompt"]);o!=null&&l(t,["instances[0]","prompt"],o);let r=s(e,["image"]);r!=null&&l(t,["instances[0]","image"],Ie(r));let a=s(e,["video"]);a!=null&&l(t,["instances[0]","video"],Mu(a));let u=s(e,["source"]);u!=null&&um(u,t);let c=s(e,["config"]);return c!=null&&tm(c,t),t}function sm(n){let e={},t=s(n,["generatedSamples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>fm(a))),l(e,["generatedVideos"],r)}let i=s(n,["raiMediaFilteredCount"]);i!=null&&l(e,["raiMediaFilteredCount"],i);let o=s(n,["raiMediaFilteredReasons"]);return o!=null&&l(e,["raiMediaFilteredReasons"],o),e}function am(n){let e={},t=s(n,["videos"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>hm(a))),l(e,["generatedVideos"],r)}let i=s(n,["raiMediaFilteredCount"]);i!=null&&l(e,["raiMediaFilteredCount"],i);let o=s(n,["raiMediaFilteredReasons"]);return o!=null&&l(e,["raiMediaFilteredReasons"],o),e}function lm(n,e){let t={},i=s(n,["prompt"]);e!==void 0&&i!=null&&l(e,["instances[0]","prompt"],i);let o=s(n,["image"]);e!==void 0&&o!=null&&l(e,["instances[0]","image"],ro(o));let r=s(n,["video"]);return e!==void 0&&r!=null&&l(e,["instances[0]","video"],Pu(r)),t}function um(n,e){let t={},i=s(n,["prompt"]);e!==void 0&&i!=null&&l(e,["instances[0]","prompt"],i);let o=s(n,["image"]);e!==void 0&&o!=null&&l(e,["instances[0]","image"],Ie(o));let r=s(n,["video"]);return e!==void 0&&r!=null&&l(e,["instances[0]","video"],Mu(r)),t}function cm(n){let e={},t=s(n,["_self"]);t!=null&&l(e,["image"],ym(t));let i=s(n,["raiFilteredReason"]);i!=null&&l(e,["raiFilteredReason"],i);let o=s(n,["_self"]);return o!=null&&l(e,["safetyAttributes"],wu(o)),e}function oo(n){let e={},t=s(n,["_self"]);t!=null&&l(e,["image"],Iu(t));let i=s(n,["raiFilteredReason"]);i!=null&&l(e,["raiFilteredReason"],i);let o=s(n,["_self"]);o!=null&&l(e,["safetyAttributes"],Au(o));let r=s(n,["prompt"]);return r!=null&&l(e,["enhancedPrompt"],r),e}function dm(n){let e={},t=s(n,["_self"]);t!=null&&l(e,["mask"],Iu(t));let i=s(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),l(e,["labels"],o)}return e}function fm(n){let e={},t=s(n,["video"]);return t!=null&&l(e,["video"],Xm(t)),e}function hm(n){let e={},t=s(n,["_self"]);return t!=null&&l(e,["video"],Zm(t)),e}function pm(n){let e={},t=s(n,["modelSelectionConfig"]);t!=null&&l(e,["modelConfig"],t);let i=s(n,["responseJsonSchema"]);i!=null&&l(e,["responseJsonSchema"],i);let o=s(n,["audioTimestamp"]);o!=null&&l(e,["audioTimestamp"],o);let r=s(n,["candidateCount"]);r!=null&&l(e,["candidateCount"],r);let a=s(n,["enableAffectiveDialog"]);a!=null&&l(e,["enableAffectiveDialog"],a);let u=s(n,["frequencyPenalty"]);u!=null&&l(e,["frequencyPenalty"],u);let c=s(n,["logprobs"]);c!=null&&l(e,["logprobs"],c);let d=s(n,["maxOutputTokens"]);d!=null&&l(e,["maxOutputTokens"],d);let f=s(n,["mediaResolution"]);f!=null&&l(e,["mediaResolution"],f);let h=s(n,["presencePenalty"]);h!=null&&l(e,["presencePenalty"],h);let p=s(n,["responseLogprobs"]);p!=null&&l(e,["responseLogprobs"],p);let g=s(n,["responseMimeType"]);g!=null&&l(e,["responseMimeType"],g);let _=s(n,["responseModalities"]);_!=null&&l(e,["responseModalities"],_);let v=s(n,["responseSchema"]);v!=null&&l(e,["responseSchema"],v);let y=s(n,["routingConfig"]);y!=null&&l(e,["routingConfig"],y);let I=s(n,["seed"]);I!=null&&l(e,["seed"],I);let w=s(n,["speechConfig"]);w!=null&&l(e,["speechConfig"],Ru(w));let E=s(n,["stopSequences"]);E!=null&&l(e,["stopSequences"],E);let R=s(n,["temperature"]);R!=null&&l(e,["temperature"],R);let P=s(n,["thinkingConfig"]);P!=null&&l(e,["thinkingConfig"],P);let x=s(n,["topK"]);x!=null&&l(e,["topK"],x);let N=s(n,["topP"]);if(N!=null&&l(e,["topP"],N),s(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function gm(n,e){let t={},i=s(e,["model"]);return i!=null&&l(t,["_url","name"],k(n,i)),t}function mm(n,e){let t={},i=s(e,["model"]);return i!=null&&l(t,["_url","name"],k(n,i)),t}function _m(n){let e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=s(n,["enableWidget"]);return t!=null&&l(e,["enableWidget"],t),e}function vm(n){let e={};if(s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=s(n,["timeRangeFilter"]);return t!=null&&l(e,["timeRangeFilter"],t),e}function ym(n){let e={},t=s(n,["bytesBase64Encoded"]);t!=null&&l(e,["imageBytes"],nt(t));let i=s(n,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function Iu(n){let e={},t=s(n,["gcsUri"]);t!=null&&l(e,["gcsUri"],t);let i=s(n,["bytesBase64Encoded"]);i!=null&&l(e,["imageBytes"],nt(i));let o=s(n,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function ro(n){let e={};if(s(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let t=s(n,["imageBytes"]);t!=null&&l(e,["bytesBase64Encoded"],nt(t));let i=s(n,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function Ie(n){let e={},t=s(n,["gcsUri"]);t!=null&&l(e,["gcsUri"],t);let i=s(n,["imageBytes"]);i!=null&&l(e,["bytesBase64Encoded"],nt(i));let o=s(n,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Cm(n,e,t){let i={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);let r=s(e,["pageToken"]);t!==void 0&&r!=null&&l(t,["_query","pageToken"],r);let a=s(e,["filter"]);t!==void 0&&a!=null&&l(t,["_query","filter"],a);let u=s(e,["queryBase"]);return t!==void 0&&u!=null&&l(t,["_url","models_url"],mu(n,u)),i}function Em(n,e,t){let i={},o=s(e,["pageSize"]);t!==void 0&&o!=null&&l(t,["_query","pageSize"],o);let r=s(e,["pageToken"]);t!==void 0&&r!=null&&l(t,["_query","pageToken"],r);let a=s(e,["filter"]);t!==void 0&&a!=null&&l(t,["_query","filter"],a);let u=s(e,["queryBase"]);return t!==void 0&&u!=null&&l(t,["_url","models_url"],mu(n,u)),i}function Sm(n,e){let t={},i=s(e,["config"]);return i!=null&&Cm(n,i,t),t}function Tm(n,e){let t={},i=s(e,["config"]);return i!=null&&Em(n,i,t),t}function Im(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);let o=s(n,["_self"]);if(o!=null){let r=_u(o);Array.isArray(r)&&(r=r.map(a=>Vr(a))),l(e,["models"],r)}return e}function wm(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);let o=s(n,["_self"]);if(o!=null){let r=_u(o);Array.isArray(r)&&(r=r.map(a=>Fr(a))),l(e,["models"],r)}return e}function Am(n){let e={},t=s(n,["maskMode"]);t!=null&&l(e,["maskMode"],t);let i=s(n,["segmentationClasses"]);i!=null&&l(e,["maskClasses"],i);let o=s(n,["maskDilation"]);return o!=null&&l(e,["dilation"],o),e}function Vr(n){let e={},t=s(n,["name"]);t!=null&&l(e,["name"],t);let i=s(n,["displayName"]);i!=null&&l(e,["displayName"],i);let o=s(n,["description"]);o!=null&&l(e,["description"],o);let r=s(n,["version"]);r!=null&&l(e,["version"],r);let a=s(n,["_self"]);a!=null&&l(e,["tunedModelInfo"],qm(a));let u=s(n,["inputTokenLimit"]);u!=null&&l(e,["inputTokenLimit"],u);let c=s(n,["outputTokenLimit"]);c!=null&&l(e,["outputTokenLimit"],c);let d=s(n,["supportedGenerationMethods"]);d!=null&&l(e,["supportedActions"],d);let f=s(n,["temperature"]);f!=null&&l(e,["temperature"],f);let h=s(n,["maxTemperature"]);h!=null&&l(e,["maxTemperature"],h);let p=s(n,["topP"]);p!=null&&l(e,["topP"],p);let g=s(n,["topK"]);g!=null&&l(e,["topK"],g);let _=s(n,["thinking"]);return _!=null&&l(e,["thinking"],_),e}function Fr(n){let e={},t=s(n,["name"]);t!=null&&l(e,["name"],t);let i=s(n,["displayName"]);i!=null&&l(e,["displayName"],i);let o=s(n,["description"]);o!=null&&l(e,["description"],o);let r=s(n,["versionId"]);r!=null&&l(e,["version"],r);let a=s(n,["deployedModels"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(p=>Bg(p))),l(e,["endpoints"],h)}let u=s(n,["labels"]);u!=null&&l(e,["labels"],u);let c=s(n,["_self"]);c!=null&&l(e,["tunedModelInfo"],Hm(c));let d=s(n,["defaultCheckpointId"]);d!=null&&l(e,["defaultCheckpointId"],d);let f=s(n,["checkpoints"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(p=>p)),l(e,["checkpoints"],h)}return e}function Rm(n){let e={},t=s(n,["functionCall"]);t!=null&&l(e,["functionCall"],t);let i=s(n,["codeExecutionResult"]);i!=null&&l(e,["codeExecutionResult"],i);let o=s(n,["executableCode"]);o!=null&&l(e,["executableCode"],o);let r=s(n,["fileData"]);r!=null&&l(e,["fileData"],$g(r));let a=s(n,["functionResponse"]);a!=null&&l(e,["functionResponse"],a);let u=s(n,["inlineData"]);u!=null&&l(e,["inlineData"],mg(u));let c=s(n,["text"]);c!=null&&l(e,["text"],c);let d=s(n,["thought"]);d!=null&&l(e,["thought"],d);let f=s(n,["thoughtSignature"]);f!=null&&l(e,["thoughtSignature"],f);let h=s(n,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function Dm(n){let e={},t=s(n,["productImage"]);return t!=null&&l(e,["image"],Ie(t)),e}function Pm(n,e){let t={},i=s(n,["numberOfImages"]);e!==void 0&&i!=null&&l(e,["parameters","sampleCount"],i);let o=s(n,["baseSteps"]);e!==void 0&&o!=null&&l(e,["parameters","baseSteps"],o);let r=s(n,["outputGcsUri"]);e!==void 0&&r!=null&&l(e,["parameters","storageUri"],r);let a=s(n,["seed"]);e!==void 0&&a!=null&&l(e,["parameters","seed"],a);let u=s(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&l(e,["parameters","safetySetting"],u);let c=s(n,["personGeneration"]);e!==void 0&&c!=null&&l(e,["parameters","personGeneration"],c);let d=s(n,["addWatermark"]);e!==void 0&&d!=null&&l(e,["parameters","addWatermark"],d);let f=s(n,["outputMimeType"]);e!==void 0&&f!=null&&l(e,["parameters","outputOptions","mimeType"],f);let h=s(n,["outputCompressionQuality"]);e!==void 0&&h!=null&&l(e,["parameters","outputOptions","compressionQuality"],h);let p=s(n,["enhancePrompt"]);e!==void 0&&p!=null&&l(e,["parameters","enhancePrompt"],p);let g=s(n,["labels"]);return e!==void 0&&g!=null&&l(e,["labels"],g),t}function Mm(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["source"]);o!=null&&Nm(o,t);let r=s(e,["config"]);return r!=null&&Pm(r,t),t}function xm(n){let e={},t=s(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>oo(o))),l(e,["generatedImages"],i)}return e}function Nm(n,e){let t={},i=s(n,["prompt"]);e!==void 0&&i!=null&&l(e,["instances[0]","prompt"],i);let o=s(n,["personImage"]);e!==void 0&&o!=null&&l(e,["instances[0]","personImage","image"],Ie(o));let r=s(n,["productImages"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Dm(u))),l(e,["instances[0]","productImages"],a)}return t}function bm(n){let e={},t=s(n,["referenceImage"]);t!=null&&l(e,["referenceImage"],Ie(t));let i=s(n,["referenceId"]);i!=null&&l(e,["referenceId"],i);let o=s(n,["referenceType"]);o!=null&&l(e,["referenceType"],o);let r=s(n,["maskImageConfig"]);r!=null&&l(e,["maskImageConfig"],Am(r));let a=s(n,["controlImageConfig"]);a!=null&&l(e,["controlImageConfig"],Tg(a));let u=s(n,["styleImageConfig"]);u!=null&&l(e,["styleImageConfig"],u);let c=s(n,["subjectImageConfig"]);return c!=null&&l(e,["subjectImageConfig"],c),e}function wu(n){let e={},t=s(n,["safetyAttributes","categories"]);t!=null&&l(e,["categories"],t);let i=s(n,["safetyAttributes","scores"]);i!=null&&l(e,["scores"],i);let o=s(n,["contentType"]);return o!=null&&l(e,["contentType"],o),e}function Au(n){let e={},t=s(n,["safetyAttributes","categories"]);t!=null&&l(e,["categories"],t);let i=s(n,["safetyAttributes","scores"]);i!=null&&l(e,["scores"],i);let o=s(n,["contentType"]);return o!=null&&l(e,["contentType"],o),e}function km(n){let e={},t=s(n,["category"]);if(t!=null&&l(e,["category"],t),s(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=s(n,["threshold"]);return i!=null&&l(e,["threshold"],i),e}function Vm(n){let e={},t=s(n,["image"]);return t!=null&&l(e,["image"],Ie(t)),e}function Fm(n,e){let t={},i=s(n,["mode"]);e!==void 0&&i!=null&&l(e,["parameters","mode"],i);let o=s(n,["maxPredictions"]);e!==void 0&&o!=null&&l(e,["parameters","maxPredictions"],o);let r=s(n,["confidenceThreshold"]);e!==void 0&&r!=null&&l(e,["parameters","confidenceThreshold"],r);let a=s(n,["maskDilation"]);e!==void 0&&a!=null&&l(e,["parameters","maskDilation"],a);let u=s(n,["binaryColorThreshold"]);e!==void 0&&u!=null&&l(e,["parameters","binaryColorThreshold"],u);let c=s(n,["labels"]);return e!==void 0&&c!=null&&l(e,["labels"],c),t}function Um(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["source"]);o!=null&&Gm(o,t);let r=s(e,["config"]);return r!=null&&Fm(r,t),t}function Lm(n){let e={},t=s(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>dm(o))),l(e,["generatedMasks"],i)}return e}function Gm(n,e){let t={},i=s(n,["prompt"]);e!==void 0&&i!=null&&l(e,["instances[0]","prompt"],i);let o=s(n,["image"]);e!==void 0&&o!=null&&l(e,["instances[0]","image"],Ie(o));let r=s(n,["scribbleImage"]);return e!==void 0&&r!=null&&l(e,["instances[0]","scribble"],Vm(r)),t}function Ru(n){let e={},t=s(n,["languageCode"]);t!=null&&l(e,["languageCode"],t);let i=s(n,["voiceConfig"]);if(i!=null&&l(e,["voiceConfig"],i),s(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Om(n){let e={},t=s(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(h=>h)),l(e,["functionDeclarations"],f)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=s(n,["googleSearchRetrieval"]);i!=null&&l(e,["googleSearchRetrieval"],i);let o=s(n,["computerUse"]);o!=null&&l(e,["computerUse"],o);let r=s(n,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);let a=s(n,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let u=s(n,["googleMaps"]);u!=null&&l(e,["googleMaps"],_m(u));let c=s(n,["googleSearch"]);c!=null&&l(e,["googleSearch"],vm(c));let d=s(n,["urlContext"]);return d!=null&&l(e,["urlContext"],d),e}function Du(n){let e={},t=s(n,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>zg(p))),l(e,["functionDeclarations"],h)}let i=s(n,["retrieval"]);i!=null&&l(e,["retrieval"],i);let o=s(n,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],o);let r=s(n,["computerUse"]);if(r!=null&&l(e,["computerUse"],r),s(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let a=s(n,["codeExecution"]);a!=null&&l(e,["codeExecution"],a);let u=s(n,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);let c=s(n,["googleMaps"]);c!=null&&l(e,["googleMaps"],c);let d=s(n,["googleSearch"]);d!=null&&l(e,["googleSearch"],d);let f=s(n,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function qm(n){let e={},t=s(n,["baseModel"]);t!=null&&l(e,["baseModel"],t);let i=s(n,["createTime"]);i!=null&&l(e,["createTime"],i);let o=s(n,["updateTime"]);return o!=null&&l(e,["updateTime"],o),e}function Hm(n){let e={},t=s(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&l(e,["baseModel"],t);let i=s(n,["createTime"]);i!=null&&l(e,["createTime"],i);let o=s(n,["updateTime"]);return o!=null&&l(e,["updateTime"],o),e}function Bm(n,e){let t={},i=s(n,["displayName"]);e!==void 0&&i!=null&&l(e,["displayName"],i);let o=s(n,["description"]);e!==void 0&&o!=null&&l(e,["description"],o);let r=s(n,["defaultCheckpointId"]);return e!==void 0&&r!=null&&l(e,["defaultCheckpointId"],r),t}function $m(n,e){let t={},i=s(n,["displayName"]);e!==void 0&&i!=null&&l(e,["displayName"],i);let o=s(n,["description"]);e!==void 0&&o!=null&&l(e,["description"],o);let r=s(n,["defaultCheckpointId"]);return e!==void 0&&r!=null&&l(e,["defaultCheckpointId"],r),t}function zm(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","name"],k(n,i));let o=s(e,["config"]);return o!=null&&Bm(o,t),t}function Jm(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["config"]);return o!=null&&$m(o,t),t}function Wm(n,e){let t={},i=s(n,["outputGcsUri"]);e!==void 0&&i!=null&&l(e,["parameters","storageUri"],i);let o=s(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&l(e,["parameters","safetySetting"],o);let r=s(n,["personGeneration"]);e!==void 0&&r!=null&&l(e,["parameters","personGeneration"],r);let a=s(n,["includeRaiReason"]);e!==void 0&&a!=null&&l(e,["parameters","includeRaiReason"],a);let u=s(n,["outputMimeType"]);e!==void 0&&u!=null&&l(e,["parameters","outputOptions","mimeType"],u);let c=s(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&l(e,["parameters","outputOptions","compressionQuality"],c);let d=s(n,["enhanceInputImage"]);e!==void 0&&d!=null&&l(e,["parameters","upscaleConfig","enhanceInputImage"],d);let f=s(n,["imagePreservationFactor"]);e!==void 0&&f!=null&&l(e,["parameters","upscaleConfig","imagePreservationFactor"],f);let h=s(n,["labels"]);e!==void 0&&h!=null&&l(e,["labels"],h);let p=s(n,["numberOfImages"]);e!==void 0&&p!=null&&l(e,["parameters","sampleCount"],p);let g=s(n,["mode"]);return e!==void 0&&g!=null&&l(e,["parameters","mode"],g),t}function Ym(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["_url","model"],k(n,i));let o=s(e,["image"]);o!=null&&l(t,["instances[0]","image"],Ie(o));let r=s(e,["upscaleFactor"]);r!=null&&l(t,["parameters","upscaleConfig","upscaleFactor"],r);let a=s(e,["config"]);return a!=null&&Wm(a,t),t}function Km(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>oo(r))),l(e,["generatedImages"],o)}return e}function Xm(n){let e={},t=s(n,["uri"]);t!=null&&l(e,["uri"],t);let i=s(n,["encodedVideo"]);i!=null&&l(e,["videoBytes"],nt(i));let o=s(n,["encoding"]);return o!=null&&l(e,["mimeType"],o),e}function Zm(n){let e={},t=s(n,["gcsUri"]);t!=null&&l(e,["uri"],t);let i=s(n,["bytesBase64Encoded"]);i!=null&&l(e,["videoBytes"],nt(i));let o=s(n,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}function Qm(n){let e={},t=s(n,["image"]);t!=null&&l(e,["_self"],Ie(t));let i=s(n,["maskMode"]);return i!=null&&l(e,["maskMode"],i),e}function jm(n){let e={},t=s(n,["image"]);t!=null&&l(e,["image"],ro(t));let i=s(n,["referenceType"]);return i!=null&&l(e,["referenceType"],i),e}function e_(n){let e={},t=s(n,["image"]);t!=null&&l(e,["image"],Ie(t));let i=s(n,["referenceType"]);return i!=null&&l(e,["referenceType"],i),e}function Pu(n){let e={},t=s(n,["uri"]);t!=null&&l(e,["uri"],t);let i=s(n,["videoBytes"]);i!=null&&l(e,["encodedVideo"],nt(i));let o=s(n,["mimeType"]);return o!=null&&l(e,["encoding"],o),e}function Mu(n){let e={},t=s(n,["uri"]);t!=null&&l(e,["gcsUri"],t);let i=s(n,["videoBytes"]);i!=null&&l(e,["bytesBase64Encoded"],nt(i));let o=s(n,["mimeType"]);return o!=null&&l(e,["mimeType"],o),e}var t_="Content-Type",n_="X-Server-Timeout",i_="User-Agent",Ur="x-goog-api-client",o_="1.29.1",r_=`google-genai-sdk/${o_}`,s_="v1beta1",a_="v1beta",jl=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/,Lr=class{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:s_,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:a_,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){let o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}request(e){return m(this,null,function*(){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(let[a,u]of Object.entries(e.queryParams))o.searchParams.append(a,String(u));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=yield this.includeExtraHttpOptionsToRequestInit(r,t,o.toString(),e.abortSignal),this.unaryApiCall(o,r,e.httpMethod)})}patchHttpOptions(e,t){let i=JSON.parse(JSON.stringify(e));for(let[o,r]of Object.entries(t))typeof r=="object"?i[o]=Object.assign(Object.assign({},i[o]),r):r!==void 0&&(i[o]=r);return i}requestStream(e){return m(this,null,function*(){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let r={};return r.body=e.body,r=yield this.includeExtraHttpOptionsToRequestInit(r,t,o.toString(),e.abortSignal),this.streamApiCall(o,r,e.httpMethod)})}includeExtraHttpOptionsToRequestInit(e,t,i,o){return m(this,null,function*(){if(t&&t.timeout||o){let r=new AbortController,a=r.signal;if(t.timeout&&t?.timeout>0){let u=setTimeout(()=>r.abort(),t.timeout);u&&typeof u.unref=="function"&&u.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),e.signal=a}return t&&t.extraBody!==null&&l_(e,t.extraBody),e.headers=yield this.getHeadersInternal(t,i),e})}unaryApiCall(e,t,i){return m(this,null,function*(){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(o=>m(this,null,function*(){return yield eu(o),new Gn(o)})).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})})}streamApiCall(e,t,i){return m(this,null,function*(){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(o=>m(this,null,function*(){return yield eu(o),this.processStreamResponse(o)})).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})})}processStreamResponse(e){var t;return Yt(this,arguments,function*(){let o=(t=e?.body)===null||t===void 0?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let a="";for(;;){let{done:u,value:c}=yield H(o.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let d=r.decode(c,{stream:!0});try{let h=JSON.parse(d);if("error"in h){let p=JSON.parse(JSON.stringify(h.error)),g=p.status,_=p.code,v=`got status: ${g}. ${JSON.stringify(h)}`;if(_>=400&&_<600)throw new eo({message:v,status:_})}}catch(h){if(h.name==="ApiError")throw h}a+=d;let f=a.match(jl);for(;f;){let h=f[1];try{let p=new Response(h,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield H(new Gn(p)),a=a.slice(f[0].length),f=a.match(jl)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{o.releaseLock()}})}apiCall(e,t){return m(this,null,function*(){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})})}getDefaultHeaders(){let e={},t=r_+" "+this.clientOptions.userAgentExtra;return e[i_]=t,e[Ur]=t,e[t_]="application/json",e}getHeadersInternal(e,t){return m(this,null,function*(){let i=new Headers;if(e&&e.headers){for(let[o,r]of Object.entries(e.headers))i.append(o,r);e.timeout&&e.timeout>0&&i.append(n_,String(Math.ceil(e.timeout/1e3)))}return yield this.clientOptions.auth.addAuthHeaders(i,t),i})}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}uploadFile(e,t){return m(this,null,function*(){var i;let o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);let r=this.clientOptions.uploader,a=yield r.stat(e);o.sizeBytes=String(a.size);let u=(i=t?.mimeType)!==null&&i!==void 0?i:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;let c={file:o},d=this.getFileName(e),f=C("upload/v1beta/files",c._url),h=yield this.fetchUploadUrl(f,o.sizeBytes,o.mimeType,d,c,t?.httpOptions);return r.upload(e,h,this)})}uploadFileToFileSearchStore(e,t,i){return m(this,null,function*(){var o;let r=this.clientOptions.uploader,a=yield r.stat(t),u=String(a.size),c=(o=i?.mimeType)!==null&&o!==void 0?o:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(t),h={};i?.customMetadata&&(h.customMetadata=i.customMetadata),i?.chunkingConfig&&(h.chunkingConfig=i.chunkingConfig);let p=yield this.fetchUploadUrl(d,u,c,f,h,i?.httpOptions);return r.uploadToFileSearchStore(t,p,this)})}downloadFile(e){return m(this,null,function*(){yield this.clientOptions.downloader.download(e,this)})}fetchUploadUrl(e,t,i,o,r,a){return m(this,null,function*(){var u;let c={};a?c=a:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};let d=yield this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:c});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let f=(u=d?.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f})}};function eu(n){return m(this,null,function*(){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){let t=n.status,i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=yield n.json():i={error:{message:yield n.text(),code:n.status,status:n.statusText}};let o=JSON.stringify(i);throw t>=400&&t<600?new eo({message:o,status:t}):new Error(o)}})}function l_(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{let r=JSON.parse(n.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))t=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,a){let u=Object.assign({},r);for(let c in a)if(Object.prototype.hasOwnProperty.call(a,c)){let d=a[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=i(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}let o=i(t,e);n.body=JSON.stringify(o)}var u_="mcp_used/unknown",c_=!1;function xu(n){for(let e of n)if(d_(e)||typeof e=="object"&&"inputSchema"in e)return!0;return c_}function Nu(n){var e;let t=(e=n[Ur])!==null&&e!==void 0?e:"";n[Ur]=(t+` ${u_}`).trimStart()}function d_(n){return n!==null&&typeof n=="object"&&n instanceof Gr}function f_(n,e=100){return Yt(this,arguments,function*(){let i,o=0;for(;o<e;){let r=yield H(n.listTools({cursor:i}));for(let a of r.tools)yield yield H(a),o++;if(!r.nextCursor)break;i=r.nextCursor}})}var Gr=class n{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new n(e,t)}initialize(){return m(this,null,function*(){var e,t,i,o;if(this.mcpTools.length>0)return;let r={},a=[];for(let f of this.mcpClients)try{for(var u=!0,c=(t=void 0,Ln(f_(f))),d;d=yield c.next(),e=d.done,!e;u=!0){o=d.value,u=!1;let h=o;a.push(h);let p=h.name;if(r[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);r[p]=f}}catch(h){t={error:h}}finally{try{!u&&!e&&(i=c.return)&&(yield i.call(c))}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=r})}tool(){return m(this,null,function*(){return yield this.initialize(),Th(this.mcpTools,this.config)})}callTool(e){return m(this,null,function*(){yield this.initialize();let t=[];for(let i of e)if(i.name in this.functionNameToMcpClient){let o=this.functionNameToMcpClient[i.name],r;this.config.timeout&&(r={timeout:this.config.timeout});let a=yield o.callTool({name:i.name,arguments:i.args},void 0,r);t.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return t})}};function h_(n,e,t){return m(this,null,function*(){let i=new Ar,o;t.data instanceof Blob?o=JSON.parse(yield t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)})}var Or=class{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}connect(e){return m(this,null,function*(){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let o=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),a=g_(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${o}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${u}`,d=()=>{},f=new Promise(E=>{d=E}),h=e.callbacks,p=function(){d({})},g=this.apiClient,_={onopen:p,onmessage:E=>{h_(g,h.onmessage,E)},onerror:(t=h?.onerror)!==null&&t!==void 0?t:function(E){},onclose:(i=h?.onclose)!==null&&i!==void 0?i:function(E){}},v=this.webSocketFactory.create(c,p_(a),_);v.connect(),yield f;let w={setup:{model:k(this.apiClient,e.model)}};return v.send(JSON.stringify(w)),new qr(v,this.apiClient)})}},qr=class{constructor(e,t){this.conn=e,this.apiClient=t}setWeightedPrompts(e){return m(this,null,function*(){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let t=ag(e);this.conn.send(JSON.stringify({clientContent:t}))})}setMusicGenerationConfig(e){return m(this,null,function*(){e.musicGenerationConfig||(e.musicGenerationConfig={});let t=sg(e);this.conn.send(JSON.stringify(t))})}sendPlaybackControl(e){let t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Un.PLAY)}pause(){this.sendPlaybackControl(Un.PAUSE)}stop(){this.sendPlaybackControl(Un.STOP)}resetContext(){this.sendPlaybackControl(Un.RESET_CONTEXT)}close(){this.conn.close()}};function p_(n){let e={};return n.forEach((t,i)=>{e[i]=t}),e}function g_(n){let e=new Headers;for(let[t,i]of Object.entries(n))e.append(t,i);return e}var m_="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";function __(n,e,t){return m(this,null,function*(){let i=new wr,o;t.data instanceof Blob?o=yield t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;let r=JSON.parse(o);if(n.isVertexAI()){let a=cg(r);Object.assign(i,a)}else Object.assign(i,r);e(i)})}var Hr=class{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new Or(this.apiClient,this.auth,this.webSocketFactory)}connect(e){return m(this,null,function*(){var t,i,o,r,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),f,h=this.apiClient.getHeaders();e.config&&e.config.tools&&xu(e.config.tools)&&Nu(h);let p=C_(h);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,yield this.auth.addAuthHeaders(p,f);else{let D=this.apiClient.getApiKey(),U="BidiGenerateContent",Y="key";D?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",Y="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${U}?${Y}=${D}`}let g=()=>{},_=new Promise(D=>{g=D}),v=e.callbacks,y=function(){var D;(D=v?.onopen)===null||D===void 0||D.call(v),g({})},I=this.apiClient,w={onopen:y,onmessage:D=>{__(I,v.onmessage,D)},onerror:(t=v?.onerror)!==null&&t!==void 0?t:function(D){},onclose:(i=v?.onclose)!==null&&i!==void 0?i:function(D){}},E=this.webSocketFactory.create(f,y_(p),w);E.connect(),yield _;let R=k(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){let D=this.apiClient.getProject(),U=this.apiClient.getLocation();R=`projects/${D}/locations/${U}/`+R}let P={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[fr.AUDIO]}:e.config.responseModalities=[fr.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let x=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],N=[];for(let D of x)if(this.isCallableTool(D)){let U=D;N.push(yield U.tool())}else N.push(D);N.length>0&&(e.config.tools=N);let Q={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?P=rg(this.apiClient,Q):P=og(this.apiClient,Q),delete P.config,E.send(JSON.stringify(P)),new Br(E,this.apiClient)})}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},v_={turnComplete:!0},Br=class{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=_e(t.turns),e.isVertexAI()||(i=i.map(o=>io(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(let r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(m_)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},v_),e);let t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:ug(e)}:t={realtimeInput:lg(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}};function y_(n){let e={};return n.forEach((t,i)=>{e[i]=t}),e}function C_(n){let e=new Headers;for(let[t,i]of Object.entries(n))e.append(t,i);return e}var tu=10;function nu(n){var e,t,i;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(let a of(t=n?.tools)!==null&&t!==void 0?t:[])if(Kt(a)){o=!0;break}if(!o)return!0;let r=(i=n?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Kt(n){return"callTool"in n&&typeof n.callTool=="function"}function E_(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Kt(o)))!==null&&i!==void 0?i:!1}function iu(n){var e;let t=[];return!((e=n?.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Kt(i))return;let r=i;r.functionDeclarations&&r.functionDeclarations.length>0&&t.push(o)}),t}function ou(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var $r=class extends Te{constructor(e){super(),this.apiClient=e,this.generateContent=t=>m(this,null,function*(){var i,o,r,a,u;let c=yield this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!E_(t)||nu(t.config))return yield this.generateContentInternal(c);let d=iu(t);if(d.length>0){let v=d.map(y=>`tools[${y}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${v}.`)}let f,h,p=_e(c.contents),g=(r=(o=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:tu,_=0;for(;_<g&&(f=yield this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){let v=f.candidates[0].content,y=[];for(let I of(u=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(Kt(I)){let E=yield I.callTool(f.functionCalls);y.push(...E)}_++,h={role:"user",parts:y},c.contents=_e(c.contents),c.contents.push(v),c.contents.push(h),ou(c.config)&&(p.push(v),p.push(h))}return ou(c.config)&&(f.automaticFunctionCallingHistory=p),f}),this.generateContentStream=t=>m(this,null,function*(){if(this.maybeMoveToResponseJsonSchem(t),nu(t.config)){let o=yield this.processParamsMaybeAddMcpUsage(t);return yield this.generateContentStreamInternal(o)}let i=iu(t);if(i.length>0){let o=i.map(r=>`tools[${r}]`).join(", ");throw new Error(`Incompatible tools found at ${o}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return yield this.processAfcStream(t)}),this.generateImages=t=>m(this,null,function*(){return yield this.generateImagesInternal(t).then(i=>{var o;let r,a=[];if(i?.generatedImages)for(let c of i.generatedImages)c&&c?.safetyAttributes&&((o=c?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?r=c?.safetyAttributes:a.push(c);let u;return r?u={generatedImages:a,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},u})}),this.list=t=>m(this,null,function*(){var i;let a={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Le(it.PAGED_ITEM_MODELS,u=>this.listInternal(u),yield this.listInternal(a),a)}),this.editImage=t=>m(this,null,function*(){let i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),yield this.editImageInternal(i)}),this.upscaleImage=t=>m(this,null,function*(){let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));let o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return yield this.upscaleImageInternal(o)}),this.generateVideos=t=>m(this,null,function*(){var i,o,r,a,u,c;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((a=(r=t.source)===null||r===void 0?void 0:r.video)===null||a===void 0)&&a.uri&&(!((c=(u=t.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),yield this.generateVideosInternal(t)})}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}processParamsMaybeAddMcpUsage(e){return m(this,null,function*(){var t,i,o;let r=(t=e.config)===null||t===void 0?void 0:t.tools;if(!r)return e;let a=yield Promise.all(r.map(c=>m(null,null,function*(){return Kt(c)?yield c.tool():c}))),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&xu(e.config.tools)){let c=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{},d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Nu(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u})}initAfcToolsMap(e){return m(this,null,function*(){var t,i,o;let r=new Map;for(let a of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Kt(a)){let u=a,c=yield u.tool();for(let d of(o=c.functionDeclarations)!==null&&o!==void 0?o:[]){if(!d.name)throw new Error("Function declaration name is required.");if(r.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);r.set(d.name,u)}}return r})}processAfcStream(e){return m(this,null,function*(){var t,i,o;let r=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:tu,a=!1,u=0,c=yield this.initAfcToolsMap(e);return(function(d,f,h){var p,g;return Yt(this,arguments,function*(){for(var _,v,y,I;u<r;){a&&(u++,a=!1);let P=yield H(d.processParamsMaybeAddMcpUsage(h)),x=yield H(d.generateContentStreamInternal(P)),N=[],Q=[];try{for(var w=!0,E=(v=void 0,Ln(x)),R;R=yield H(E.next()),_=R.done,!_;w=!0){I=R.value,w=!1;let D=I;if(yield yield H(D),D.candidates&&(!((p=D.candidates[0])===null||p===void 0)&&p.content)){Q.push(D.candidates[0].content);for(let U of(g=D.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(u<r&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(U.functionCall.name)){let Y=yield H(f.get(U.functionCall.name).callTool([U.functionCall]));N.push(...Y)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(D){v={error:D}}finally{try{!w&&!_&&(y=E.return)&&(yield H(y.call(E)))}finally{if(v)throw v.error}}if(N.length>0){a=!0;let D=new yt;D.candidates=[{content:{role:"user",parts:N}}],yield yield H(D);let U=[];U.push(...Q),U.push({role:"user",parts:N});let Y=_e(h.contents).concat(U);h.contents=Y}else break}})})(this,c,e)})}generateContentInternal(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=Xl(this.apiClient,e);return u=C("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=Ql(f),p=new yt;return Object.assign(p,h),p})}else{let d=Kl(this.apiClient,e);return u=C("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=Zl(f),p=new yt;return Object.assign(p,h),p})}})}generateContentStreamInternal(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=Xl(this.apiClient,e);return u=C("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(h){return Yt(this,arguments,function*(){var p,g,_,v;try{for(var y=!0,I=Ln(h),w;w=yield H(I.next()),p=w.done,!p;y=!0){v=w.value,y=!1;let E=v,R=Ql(yield H(E.json()));R.sdkHttpResponse={headers:E.headers};let P=new yt;Object.assign(P,R),yield yield H(P)}}catch(E){g={error:E}}finally{try{!y&&!p&&(_=I.return)&&(yield H(_.call(I)))}finally{if(g)throw g.error}}})})}else{let d=Kl(this.apiClient,e);return u=C("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(h){return Yt(this,arguments,function*(){var p,g,_,v;try{for(var y=!0,I=Ln(h),w;w=yield H(I.next()),p=w.done,!p;y=!0){v=w.value,y=!1;let E=v,R=Zl(yield H(E.json()));R.sdkHttpResponse={headers:E.headers};let P=new yt;Object.assign(P,R),yield yield H(P)}}catch(E){g={error:E}}finally{try{!y&&!p&&(_=I.return)&&(yield H(_.call(I)))}finally{if(g)throw g.error}}})})}})}embedContent(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=Og(this.apiClient,e);return u=C("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=Hg(f),p=new Bi;return Object.assign(p,h),p})}else{let d=Gg(this.apiClient,e);return u=C("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=qg(f),p=new Bi;return Object.assign(p,h),p})}})}generateImagesInternal(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=Zg(this.apiClient,e);return u=C("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=jg(f),p=new $i;return Object.assign(p,h),p})}else{let d=Xg(this.apiClient,e);return u=C("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=Qg(f),p=new $i;return Object.assign(p,h),p})}})}editImageInternal(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI()){let u=Vg(this.apiClient,e);return r=C("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{let d=Fg(c),f=new hr;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")})}upscaleImageInternal(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI()){let u=Ym(this.apiClient,e);return r=C("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{let d=Km(c),f=new pr;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")})}recontextImage(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI()){let u=Mm(this.apiClient,e);return r=C("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let d=xm(c),f=new gr;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")})}segmentImage(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI()){let u=Um(this.apiClient,e);return r=C("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let d=Lm(c),f=new mr;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")})}get(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=mm(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>Fr(f))}else{let d=gm(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>Vr(f))}})}listInternal(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=Tm(this.apiClient,e);return u=C("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=wm(f),p=new zi;return Object.assign(p,h),p})}else{let d=Sm(this.apiClient,e);return u=C("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=Im(f),p=new zi;return Object.assign(p,h),p})}})}update(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=Jm(this.apiClient,e);return u=C("{model}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>Fr(f))}else{let d=zm(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>Vr(f))}})}delete(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=xg(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=bg(f),p=new Ji;return Object.assign(p,h),p})}else{let d=Mg(this.apiClient,e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=Ng(f),p=new Ji;return Object.assign(p,h),p})}})}countTokens(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=Rg(this.apiClient,e);return u=C("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=Pg(f),p=new Wi;return Object.assign(p,h),p})}else{let d=Ag(this.apiClient,e);return u=C("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=Dg(f),p=new Wi;return Object.assign(p,h),p})}})}computeTokens(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI()){let u=yg(this.apiClient,e);return r=C("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{let d=Cg(c),f=new _r;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")})}generateVideosInternal(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=rm(this.apiClient,e);return u=C("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>{let h=im(f),p=new Yi;return Object.assign(p,h),p})}else{let d=om(this.apiClient,e);return u=C("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>{let h=nm(f),p=new Yi;return Object.assign(p,h),p})}})}};var zr=class extends Te{constructor(e){super(),this.apiClient=e}getVideosOperation(e){return m(this,null,function*(){let t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=t.name.split("/operations/")[0],r;i&&"httpOptions"in i&&(r=i.httpOptions);let a=yield this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{let o=yield this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}})}get(e){return m(this,null,function*(){let t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=t.name.split("/operations/")[0],r;i&&"httpOptions"in i&&(r=i.httpOptions);let a=yield this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{let o=yield this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}})}getVideosOperationInternal(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=ch(e);return u=C("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a}else{let d=uh(e);return u=C("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a}})}fetchPredictVideosOperationInternal(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI()){let u=nh(e);return r=C("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o}else throw new Error("This method is only supported by the Vertex AI.")})}};function S_(n){let e={},t=s(n,["data"]);if(t!=null&&l(e,["data"],t),s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=s(n,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function T_(n){let e={},t=s(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>x_(r))),l(e,["parts"],o)}let i=s(n,["role"]);return i!=null&&l(e,["role"],i),e}function I_(n,e,t){let i={},o=s(e,["expireTime"]);t!==void 0&&o!=null&&l(t,["expireTime"],o);let r=s(e,["newSessionExpireTime"]);t!==void 0&&r!=null&&l(t,["newSessionExpireTime"],r);let a=s(e,["uses"]);t!==void 0&&a!=null&&l(t,["uses"],a);let u=s(e,["liveConnectConstraints"]);t!==void 0&&u!=null&&l(t,["bidiGenerateContentSetup"],M_(n,u));let c=s(e,["lockAdditionalFields"]);return t!==void 0&&c!=null&&l(t,["fieldMask"],c),i}function w_(n,e){let t={},i=s(e,["config"]);return i!=null&&l(t,["config"],I_(n,i,t)),t}function A_(n){let e={};if(s(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let t=s(n,["fileUri"]);t!=null&&l(e,["fileUri"],t);let i=s(n,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function R_(n){let e={};if(s(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let t=s(n,["enableWidget"]);return t!=null&&l(e,["enableWidget"],t),e}function D_(n){let e={};if(s(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(s(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let t=s(n,["timeRangeFilter"]);return t!=null&&l(e,["timeRangeFilter"],t),e}function P_(n,e){let t={},i=s(n,["generationConfig"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig"],i);let o=s(n,["responseModalities"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig","responseModalities"],o);let r=s(n,["temperature"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig","temperature"],r);let a=s(n,["topP"]);e!==void 0&&a!=null&&l(e,["setup","generationConfig","topP"],a);let u=s(n,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);let c=s(n,["maxOutputTokens"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","maxOutputTokens"],c);let d=s(n,["mediaResolution"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","mediaResolution"],d);let f=s(n,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);let h=s(n,["speechConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","speechConfig"],ss(h));let p=s(n,["thinkingConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","thinkingConfig"],p);let g=s(n,["enableAffectiveDialog"]);e!==void 0&&g!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],g);let _=s(n,["systemInstruction"]);e!==void 0&&_!=null&&l(e,["setup","systemInstruction"],T_(te(_)));let v=s(n,["tools"]);if(e!==void 0&&v!=null){let x=Zt(v);Array.isArray(x)&&(x=x.map(N=>b_(Xt(N)))),l(e,["setup","tools"],x)}let y=s(n,["sessionResumption"]);e!==void 0&&y!=null&&l(e,["setup","sessionResumption"],N_(y));let I=s(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&l(e,["setup","inputAudioTranscription"],I);let w=s(n,["outputAudioTranscription"]);e!==void 0&&w!=null&&l(e,["setup","outputAudioTranscription"],w);let E=s(n,["realtimeInputConfig"]);e!==void 0&&E!=null&&l(e,["setup","realtimeInputConfig"],E);let R=s(n,["contextWindowCompression"]);e!==void 0&&R!=null&&l(e,["setup","contextWindowCompression"],R);let P=s(n,["proactivity"]);return e!==void 0&&P!=null&&l(e,["setup","proactivity"],P),t}function M_(n,e){let t={},i=s(e,["model"]);i!=null&&l(t,["setup","model"],k(n,i));let o=s(e,["config"]);return o!=null&&l(t,["config"],P_(o,t)),t}function x_(n){let e={},t=s(n,["functionCall"]);t!=null&&l(e,["functionCall"],t);let i=s(n,["codeExecutionResult"]);i!=null&&l(e,["codeExecutionResult"],i);let o=s(n,["executableCode"]);o!=null&&l(e,["executableCode"],o);let r=s(n,["fileData"]);r!=null&&l(e,["fileData"],A_(r));let a=s(n,["functionResponse"]);a!=null&&l(e,["functionResponse"],a);let u=s(n,["inlineData"]);u!=null&&l(e,["inlineData"],S_(u));let c=s(n,["text"]);c!=null&&l(e,["text"],c);let d=s(n,["thought"]);d!=null&&l(e,["thought"],d);let f=s(n,["thoughtSignature"]);f!=null&&l(e,["thoughtSignature"],f);let h=s(n,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function N_(n){let e={},t=s(n,["handle"]);if(t!=null&&l(e,["handle"],t),s(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function b_(n){let e={},t=s(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(h=>h)),l(e,["functionDeclarations"],f)}if(s(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let i=s(n,["googleSearchRetrieval"]);i!=null&&l(e,["googleSearchRetrieval"],i);let o=s(n,["computerUse"]);o!=null&&l(e,["computerUse"],o);let r=s(n,["fileSearch"]);r!=null&&l(e,["fileSearch"],r);let a=s(n,["codeExecution"]);if(a!=null&&l(e,["codeExecution"],a),s(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let u=s(n,["googleMaps"]);u!=null&&l(e,["googleMaps"],R_(u));let c=s(n,["googleSearch"]);c!=null&&l(e,["googleSearch"],D_(c));let d=s(n,["urlContext"]);return d!=null&&l(e,["urlContext"],d),e}function k_(n){let e=[];for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){let o=Object.keys(i).map(r=>`${t}.${r}`);e.push(...o)}else e.push(t)}return e.join(",")}function V_(n,e){let t=null,i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){let r=i.setup;typeof r=="object"&&r!==null?(n.bidiGenerateContentSetup=r,t=r):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;let o=n.fieldMask;if(t){let r=k_(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)r?n.fieldMask=r:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){let a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],u=[];o.length>0&&(u=o.map(d=>a.includes(d)?`generationConfig.${d}`:d));let c=[];r&&c.push(r),u.length>0&&c.push(...u),c.length>0?n.fieldMask=c.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}var Jr=class extends Te{constructor(e){super(),this.apiClient=e}create(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let u=w_(this.apiClient,e);r=C("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;let c=V_(u,e.config);return o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}})}};function F_(n,e){let t={},i=s(n,["displayName"]);return e!==void 0&&i!=null&&l(e,["displayName"],i),t}function U_(n){let e={},t=s(n,["config"]);return t!=null&&F_(t,e),e}function L_(n,e){let t={},i=s(n,["force"]);return e!==void 0&&i!=null&&l(e,["_query","force"],i),t}function G_(n){let e={},t=s(n,["name"]);t!=null&&l(e,["_url","name"],t);let i=s(n,["config"]);return i!=null&&L_(i,e),e}function O_(n){let e={},t=s(n,["name"]);return t!=null&&l(e,["_url","name"],t),e}function q_(n,e){let t={},i=s(n,["customMetadata"]);if(e!==void 0&&i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["customMetadata"],r)}let o=s(n,["chunkingConfig"]);return e!==void 0&&o!=null&&l(e,["chunkingConfig"],o),t}function H_(n){let e={},t=s(n,["name"]);t!=null&&l(e,["name"],t);let i=s(n,["metadata"]);i!=null&&l(e,["metadata"],i);let o=s(n,["done"]);o!=null&&l(e,["done"],o);let r=s(n,["error"]);r!=null&&l(e,["error"],r);let a=s(n,["response"]);return a!=null&&l(e,["response"],$_(a)),e}function B_(n){let e={},t=s(n,["fileSearchStoreName"]);t!=null&&l(e,["_url","file_search_store_name"],t);let i=s(n,["fileName"]);i!=null&&l(e,["fileName"],i);let o=s(n,["config"]);return o!=null&&q_(o,e),e}function $_(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["parent"]);i!=null&&l(e,["parent"],i);let o=s(n,["documentName"]);return o!=null&&l(e,["documentName"],o),e}function z_(n,e){let t={},i=s(n,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);let o=s(n,["pageToken"]);return e!==void 0&&o!=null&&l(e,["_query","pageToken"],o),t}function J_(n){let e={},t=s(n,["config"]);return t!=null&&z_(t,e),e}function W_(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);let o=s(n,["fileSearchStores"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["fileSearchStores"],r)}return e}function Y_(n,e){let t={},i=s(n,["mimeType"]);e!==void 0&&i!=null&&l(e,["mimeType"],i);let o=s(n,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);let r=s(n,["customMetadata"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>c)),l(e,["customMetadata"],u)}let a=s(n,["chunkingConfig"]);return e!==void 0&&a!=null&&l(e,["chunkingConfig"],a),t}function K_(n){let e={},t=s(n,["fileSearchStoreName"]);t!=null&&l(e,["_url","file_search_store_name"],t);let i=s(n,["config"]);return i!=null&&Y_(i,e),e}function X_(n){let e={},t=s(n,["sdkHttpResponse"]);return t!=null&&l(e,["sdkHttpResponse"],t),e}function Z_(n,e){let t={},i=s(n,["force"]);return e!==void 0&&i!=null&&l(e,["_query","force"],i),t}function Q_(n){let e={},t=s(n,["name"]);t!=null&&l(e,["_url","name"],t);let i=s(n,["config"]);return i!=null&&Z_(i,e),e}function j_(n){let e={},t=s(n,["name"]);return t!=null&&l(e,["_url","name"],t),e}function ev(n,e){let t={},i=s(n,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);let o=s(n,["pageToken"]);return e!==void 0&&o!=null&&l(e,["_query","pageToken"],o),t}function tv(n){let e={},t=s(n,["parent"]);t!=null&&l(e,["_url","parent"],t);let i=s(n,["config"]);return i!=null&&ev(i,e),e}function nv(n){let e={},t=s(n,["sdkHttpResponse"]);t!=null&&l(e,["sdkHttpResponse"],t);let i=s(n,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);let o=s(n,["documents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>a)),l(e,["documents"],r)}return e}var Wr=class extends Te{constructor(e){super(),this.apiClient=e,this.list=t=>m(this,null,function*(){return new Le(it.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),yield this.listInternal(t),t)})}get(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=j_(e);return r=C("{name}",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}})}delete(e){return m(this,null,function*(){var t,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Q_(e);o=C("{name}",a._url),r=a._query,delete a._url,delete a._query,yield this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}})}listInternal(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=tv(e);return r=C("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let d=nv(c),f=new vr;return Object.assign(f,d),f})}})}};var Yr=class extends Te{constructor(e,t=new Wr(e)){super(),this.apiClient=e,this.documents=t,this.list=(...o)=>m(this,[...o],function*(i={}){return new Le(it.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),yield this.listInternal(i),i)})}uploadToFileSearchStore(e){return m(this,null,function*(){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)})}create(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=U_(e);return r=C("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}})}get(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=O_(e);return r=C("{name}",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}})}delete(e){return m(this,null,function*(){var t,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=G_(e);o=C("{name}",a._url),r=a._query,delete a._url,delete a._query,yield this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}})}listInternal(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=J_(e);return r=C("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let d=W_(c),f=new yr;return Object.assign(f,d),f})}})}uploadToFileSearchStoreInternal(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=K_(e);return r=C("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let d=X_(c),f=new Cr;return Object.assign(f,d),f})}})}importFile(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=B_(e);return r=C("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{let d=H_(c),f=new Er;return Object.assign(f,d),f})}})}};function iv(n,e){let t={},i=s(n,["name"]);return i!=null&&l(t,["_url","name"],i),t}function ov(n,e){let t={},i=s(n,["name"]);return i!=null&&l(t,["_url","name"],i),t}function rv(n,e,t){let i={};if(s(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let o=s(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&l(e,["displayName"],o),s(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let r=s(n,["epochCount"]);e!==void 0&&r!=null&&l(e,["tuningTask","hyperparameters","epochCount"],r);let a=s(n,["learningRateMultiplier"]);if(a!=null&&l(i,["tuningTask","hyperparameters","learningRateMultiplier"],a),s(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(s(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(s(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let u=s(n,["batchSize"]);e!==void 0&&u!=null&&l(e,["tuningTask","hyperparameters","batchSize"],u);let c=s(n,["learningRate"]);if(e!==void 0&&c!=null&&l(e,["tuningTask","hyperparameters","learningRate"],c),s(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(s(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function sv(n,e,t){let i={},o=s(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let g=s(n,["validationDataset"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec"],ru(g))}else if(o==="PREFERENCE_TUNING"){let g=s(n,["validationDataset"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec"],ru(g))}let r=s(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&l(e,["tunedModelDisplayName"],r);let a=s(n,["description"]);e!==void 0&&a!=null&&l(e,["description"],a);let u=s(t,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){let g=s(n,["epochCount"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(u==="PREFERENCE_TUNING"){let g=s(n,["epochCount"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=s(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let g=s(n,["learningRateMultiplier"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){let g=s(n,["learningRateMultiplier"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let d=s(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){let g=s(n,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(d==="PREFERENCE_TUNING"){let g=s(n,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=s(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){let g=s(n,["adapterSize"]);e!==void 0&&g!=null&&l(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){let g=s(n,["adapterSize"]);e!==void 0&&g!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(s(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(s(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let h=s(n,["labels"]);e!==void 0&&h!=null&&l(e,["labels"],h);let p=s(n,["beta"]);return e!==void 0&&p!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","beta"],p),i}function av(n,e){let t={},i=s(n,["baseModel"]);i!=null&&l(t,["baseModel"],i);let o=s(n,["preTunedModel"]);o!=null&&l(t,["preTunedModel"],o);let r=s(n,["trainingDataset"]);r!=null&&vv(r);let a=s(n,["config"]);return a!=null&&rv(a,t),t}function lv(n,e){let t={},i=s(n,["baseModel"]);i!=null&&l(t,["baseModel"],i);let o=s(n,["preTunedModel"]);o!=null&&l(t,["preTunedModel"],o);let r=s(n,["trainingDataset"]);r!=null&&yv(r,t,e);let a=s(n,["config"]);return a!=null&&sv(a,t,e),t}function uv(n,e){let t={},i=s(n,["name"]);return i!=null&&l(t,["_url","name"],i),t}function cv(n,e){let t={},i=s(n,["name"]);return i!=null&&l(t,["_url","name"],i),t}function dv(n,e,t){let i={},o=s(n,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);let r=s(n,["pageToken"]);e!==void 0&&r!=null&&l(e,["_query","pageToken"],r);let a=s(n,["filter"]);return e!==void 0&&a!=null&&l(e,["_query","filter"],a),i}function fv(n,e,t){let i={},o=s(n,["pageSize"]);e!==void 0&&o!=null&&l(e,["_query","pageSize"],o);let r=s(n,["pageToken"]);e!==void 0&&r!=null&&l(e,["_query","pageToken"],r);let a=s(n,["filter"]);return e!==void 0&&a!=null&&l(e,["_query","filter"],a),i}function hv(n,e){let t={},i=s(n,["config"]);return i!=null&&dv(i,t),t}function pv(n,e){let t={},i=s(n,["config"]);return i!=null&&fv(i,t),t}function gv(n,e){let t={},i=s(n,["sdkHttpResponse"]);i!=null&&l(t,["sdkHttpResponse"],i);let o=s(n,["nextPageToken"]);o!=null&&l(t,["nextPageToken"],o);let r=s(n,["tunedModels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>bu(u))),l(t,["tuningJobs"],a)}return t}function mv(n,e){let t={},i=s(n,["sdkHttpResponse"]);i!=null&&l(t,["sdkHttpResponse"],i);let o=s(n,["nextPageToken"]);o!=null&&l(t,["nextPageToken"],o);let r=s(n,["tuningJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Kr(u))),l(t,["tuningJobs"],a)}return t}function _v(n,e){let t={},i=s(n,["name"]);i!=null&&l(t,["model"],i);let o=s(n,["name"]);return o!=null&&l(t,["endpoint"],o),t}function vv(n,e){let t={};if(s(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(s(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let i=s(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),l(t,["examples","examples"],o)}return t}function yv(n,e,t){let i={},o=s(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let a=s(n,["gcsUri"]);e!==void 0&&a!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){let a=s(n,["gcsUri"]);e!==void 0&&a!=null&&l(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let r=s(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let a=s(n,["vertexDatasetResource"]);e!==void 0&&a!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){let a=s(n,["vertexDatasetResource"]);e!==void 0&&a!=null&&l(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(s(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function bu(n,e){let t={},i=s(n,["sdkHttpResponse"]);i!=null&&l(t,["sdkHttpResponse"],i);let o=s(n,["name"]);o!=null&&l(t,["name"],o);let r=s(n,["state"]);r!=null&&l(t,["state"],pu(r));let a=s(n,["createTime"]);a!=null&&l(t,["createTime"],a);let u=s(n,["tuningTask","startTime"]);u!=null&&l(t,["startTime"],u);let c=s(n,["tuningTask","completeTime"]);c!=null&&l(t,["endTime"],c);let d=s(n,["updateTime"]);d!=null&&l(t,["updateTime"],d);let f=s(n,["description"]);f!=null&&l(t,["description"],f);let h=s(n,["baseModel"]);h!=null&&l(t,["baseModel"],h);let p=s(n,["_self"]);return p!=null&&l(t,["tunedModel"],_v(p)),t}function Kr(n,e){let t={},i=s(n,["sdkHttpResponse"]);i!=null&&l(t,["sdkHttpResponse"],i);let o=s(n,["name"]);o!=null&&l(t,["name"],o);let r=s(n,["state"]);r!=null&&l(t,["state"],pu(r));let a=s(n,["createTime"]);a!=null&&l(t,["createTime"],a);let u=s(n,["startTime"]);u!=null&&l(t,["startTime"],u);let c=s(n,["endTime"]);c!=null&&l(t,["endTime"],c);let d=s(n,["updateTime"]);d!=null&&l(t,["updateTime"],d);let f=s(n,["error"]);f!=null&&l(t,["error"],f);let h=s(n,["description"]);h!=null&&l(t,["description"],h);let p=s(n,["baseModel"]);p!=null&&l(t,["baseModel"],p);let g=s(n,["tunedModel"]);g!=null&&l(t,["tunedModel"],g);let _=s(n,["preTunedModel"]);_!=null&&l(t,["preTunedModel"],_);let v=s(n,["supervisedTuningSpec"]);v!=null&&l(t,["supervisedTuningSpec"],v);let y=s(n,["preferenceOptimizationSpec"]);y!=null&&l(t,["preferenceOptimizationSpec"],y);let I=s(n,["tuningDataStats"]);I!=null&&l(t,["tuningDataStats"],I);let w=s(n,["encryptionSpec"]);w!=null&&l(t,["encryptionSpec"],w);let E=s(n,["partnerModelTuningSpec"]);E!=null&&l(t,["partnerModelTuningSpec"],E);let R=s(n,["customBaseModel"]);R!=null&&l(t,["customBaseModel"],R);let P=s(n,["experiment"]);P!=null&&l(t,["experiment"],P);let x=s(n,["labels"]);x!=null&&l(t,["labels"],x);let N=s(n,["outputUri"]);N!=null&&l(t,["outputUri"],N);let Q=s(n,["pipelineJob"]);Q!=null&&l(t,["pipelineJob"],Q);let D=s(n,["serviceAccount"]);D!=null&&l(t,["serviceAccount"],D);let U=s(n,["tunedModelDisplayName"]);U!=null&&l(t,["tunedModelDisplayName"],U);let Y=s(n,["veoTuningSpec"]);return Y!=null&&l(t,["veoTuningSpec"],Y),t}function Cv(n,e){let t={},i=s(n,["sdkHttpResponse"]);i!=null&&l(t,["sdkHttpResponse"],i);let o=s(n,["name"]);o!=null&&l(t,["name"],o);let r=s(n,["metadata"]);r!=null&&l(t,["metadata"],r);let a=s(n,["done"]);a!=null&&l(t,["done"],a);let u=s(n,["error"]);return u!=null&&l(t,["error"],u),t}function ru(n,e){let t={},i=s(n,["gcsUri"]);i!=null&&l(t,["validationDatasetUri"],i);let o=s(n,["vertexDatasetResource"]);return o!=null&&l(t,["validationDatasetUri"],o),t}var Xr=class extends Te{constructor(e){super(),this.apiClient=e,this.get=t=>m(this,null,function*(){return yield this.getInternal(t)}),this.list=(...i)=>m(this,[...i],function*(t={}){return new Le(it.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),yield this.listInternal(t),t)}),this.tune=t=>m(this,null,function*(){var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){let o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);let r=Object.assign(Object.assign({},t),{preTunedModel:o});return r.baseModel=void 0,yield this.tuneInternal(r)}else{let o=Object.assign({},t);return yield this.tuneInternal(o)}else{let o=Object.assign({},t),r=yield this.tuneMldevInternal(o),a="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?a=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(a=r.name.split("/operations/")[0]),{name:a,state:lu.JOB_STATE_QUEUED}}})}getInternal(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=cv(e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>Kr(f))}else{let d=uv(e);return u=C("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>bu(f))}})}listInternal(e){return m(this,null,function*(){var t,i,o,r;let a,u="",c={};if(this.apiClient.isVertexAI()){let d=pv(e);return u=C("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=mv(f),p=new Ki;return Object.assign(p,h),p})}else{let d=hv(e);return u=C("tunedModels",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{let p=h;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{let h=gv(f),p=new Ki;return Object.assign(p,h),p})}})}cancel(e){return m(this,null,function*(){var t,i,o,r;let a="",u={};if(this.apiClient.isVertexAI()){let c=ov(e);a=C("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,yield this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{let c=iv(e);a=C("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,yield this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}})}tuneInternal(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI()){let u=lv(e,e);return r=C("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>Kr(c))}else throw new Error("This method is only supported by the Vertex AI.")})}tuneMldevInternal(e){return m(this,null,function*(){var t,i;let o,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=av(e);return r=C("tunedModels",u._url),a=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>Cv(c))}})}};var Zr=class{download(e,t){return m(this,null,function*(){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")})}},Ev=1024*1024*8,Sv=3,Tv=1e3,Iv=2,to="x-goog-upload-status";function wv(n,e,t){return m(this,null,function*(){var i;let o=yield ku(n,e,t),r=yield o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[to])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file})}function Av(n,e,t){return m(this,null,function*(){var i;let o=yield ku(n,e,t),r=yield o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[to])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let a=au(r),u=new Rr;return Object.assign(u,a),u})}function ku(n,e,t){return m(this,null,function*(){var i,o;let r=0,a=0,u=new Gn(new Response),c="upload";for(r=n.size;a<r;){let d=Math.min(Ev,r-a),f=n.slice(a,a+d);a+d>=r&&(c+=", finalize");let h=0,p=Tv;for(;h<Sv&&(u=yield t.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((i=u?.headers)===null||i===void 0)&&i[to]));)h++,yield Dv(p),p=p*Iv;if(a+=d,((o=u?.headers)===null||o===void 0?void 0:o[to])!=="active")break;if(r<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u})}function Rv(n){return m(this,null,function*(){return{size:n.size,type:n.type}})}function Dv(n){return new Promise(e=>setTimeout(e,n))}var Qr=class{upload(e,t,i){return m(this,null,function*(){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return yield wv(e,t,i)})}uploadToFileSearchStore(e,t,i){return m(this,null,function*(){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return yield Av(e,t,i)})}stat(e){return m(this,null,function*(){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return yield Rv(e)})}};var jr=class{create(e,t,i){return new es(e,t,i)}},es=class{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var su="x-goog-api-key",ts=class{constructor(e){this.apiKey=e}addAuthHeaders(e,t){return m(this,null,function*(){if(e.get(su)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(su,this.apiKey)}})}};var Pv="gl-node/",no=class{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;let i=eh(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;let o=new ts(this.apiKey);this.apiClient=new Lr({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Pv+"web",uploader:new Qr,downloader:new Zr}),this.models=new $r(this.apiClient),this.live=new Hr(this.apiClient,o,new jr),this.batches=new Mr(this.apiClient),this.chats=new Nr(this.models,this.apiClient),this.caches=new xr(this.apiClient),this.files=new kr(this.apiClient),this.operations=new zr(this.apiClient),this.authTokens=new Jr(this.apiClient),this.tunings=new Xr(this.apiClient),this.fileSearchStores=new Yr(this.apiClient)}};var so=Fu(Uu());var Vu=class n{ENCRYPTED_API_KEY="U2FsdGVkX19ILCT33NvRMnrfGuGerBksJREzwCDAIb7VpwUoVn/Oc3vrAqfYplC8SjPFUU3npbu+85eFwOKgpw==";ENCRYPTION_KEY="ezReader";FALLBACK_API_KEY;ai;geminiApiManager=null;constructor(){try{let e=so.AES.decrypt(this.ENCRYPTED_API_KEY,this.ENCRYPTION_KEY);this.FALLBACK_API_KEY=e.toString(so.enc.Utf8)}catch(e){console.error("\uD3F4\uBC31 API \uD0A4 \uBCF5\uD638\uD654 \uC2E4\uD328:",e),this.FALLBACK_API_KEY=""}this.loadGeminiApiManager(),this.initializeAI()}loadGeminiApiManager(){return m(this,null,function*(){try{let e=yield import("./chunk-M6UZF64C.js"),t=window.ezm_injector;t&&e.GeminiApiManagerService&&(this.geminiApiManager=t.get(e.GeminiApiManagerService),this.geminiApiManager.apiKey$.subscribe(()=>{this.initializeAI()}),console.log("\u2705 GeminiApiManagerService \uC5F0\uACB0\uB428"))}catch{console.log("\u2139\uFE0F GeminiApiManagerService \uC5C6\uC74C (\uD3F4\uBC31 \uD0A4 \uC0AC\uC6A9)")}})}initializeAI(){let e=this.FALLBACK_API_KEY,t="\uD3F4\uBC31 \uD0A4";if(this.geminiApiManager){let i=this.geminiApiManager.getApiKey();i&&(e=i,t="\uC0AC\uC6A9\uC790 \uD0A4")}if(!e){console.warn("\u26A0\uFE0F Gemini API \uD0A4\uAC00 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");return}this.ai=new no({apiKey:e}),console.log(`\u2705 GeminiTranslationService \uCD08\uAE30\uD654: ${t}`)}translateText(e,t){if(!this.ai)return be(()=>new Error("Gemini API\uAC00 \uCD08\uAE30\uD654\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4. Google \uB85C\uADF8\uC778\uC774 \uD544\uC694\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."));if(!e.trim())return be(()=>new Error("\uBC88\uC5ED\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."));let o={english:"English",korean:"Korean",japanese:"Japanese",chinese:"Chinese",spanish:"Spanish",french:"French",german:"German"}[t]||"English",r=`Translate the following text to ${o}. Provide only the translation without any explanations or additional text:

${e}`;return K(this.ai.models.generateContent({model:"gemini-2.5-flash",contents:r})).pipe(b(a=>{if(console.log("Gemini API \uBC88\uC5ED \uC751\uB2F5:",a),a&&a.text){let u=a.text.trim();return{originalText:e,translatedText:u,targetLanguage:o,success:!0}}else throw new Error("\uBC88\uC5ED \uC751\uB2F5\uC744 \uBC1B\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}),Ve(a=>{console.error("Gemini API \uBC88\uC5ED \uC624\uB958:",a);let u="\uBC88\uC5ED \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";return a.message&&(u=a.message),be(()=>({originalText:e,translatedText:"",targetLanguage:o,success:!1,error:u}))}))}translateMultipleTexts(e,t){let i=[];return new Et(o=>{let r=0,a=()=>{if(r>=e.length){o.next(i),o.complete();return}let u=e[r];this.translateText(u,t).subscribe({next:c=>{i.push(c),r++,setTimeout(a,100)},error:c=>{i.push({originalText:u,translatedText:"",targetLanguage:t,success:!1,error:c.message||"\uBC88\uC5ED \uC2E4\uD328"}),r++,setTimeout(a,100)}})};a()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};export{Gu as a,ia as b,Wv as c,Yv as d,gc as e,vc as f,Xv as g,Cc as h,Tc as i,wc as j,_a as k,Zv as l,Qv as m,bc as n,Vc as o,Uc as p,Gc as q,jv as r,ey as s,Se as t,et as u,zo as v,tt as w,vf as x,qC as y,rC as z,sC as A,aC as B,Fi as C,ql as D,no as E,Vu as F,El as G,GC as H};
